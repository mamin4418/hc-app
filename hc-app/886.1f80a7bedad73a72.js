"use strict";(self.webpackChunkhc_app=self.webpackChunkhc_app||[]).push([[886],{8886:(Vr,P,T)=>{T.r(P),T.d(P,{AuthLayoutModule:()=>Wr});var F=T(520),h=T(1813),c=T(9808),_=T(2382),d=T(9982),t=T(4893),m=T(8219),C=T(7297),y=T(8962),b=T(8698);let Q=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.user=this.AS.currentUserValue,this.urlPrefix="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.userList=this.rd.GetUsers(0),this.user_id=-1,this.userData={},this.tx_avatar="assets/img/default-avatar.png",this.tx_roles=""}ngOnInit(){}getUser(e){const i={params:{user_id:e,caller:"HCAPP"}};console.log("user:getUser:",i),this.REQ.get("gu",{query:JSON.stringify(i)}).subscribe(n=>{for(var o in console.log("getUser:",n),this.userData=n,this.tx_avatar=this.userData.avatar,this.userData.roles)this.tx_roles+=" "+o},n=>{console.log(n),console.log("User login failed for : ")})}updateUser(){const e=this.userData;this.userData.ACTION="INFO",console.log("updateUser:",e),this.REQ.post("su",e).subscribe(i=>{console.log("updateUser:",i),this.toastr.success("User info updated for : "+this.userData.login)},i=>{console.log(i),this.toastr.error("User update failed:",this.userData.login,{timeOut:3e3})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-admins"]],decls:12,vars:0,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],["fas","","icon","file-alt text-white"],[1,"card-body"],[1,"continer-fluid"],[1,"row"],[1,"col-12","text-left","text-muted"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._UZ(5,"mdb-icon",3),t._uU(6,"\xa0Documents "),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),t._uU(11,"Last updated by "),t.qZA()()()()()())},directives:[d.gRC,d.UiO,d.XIm],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}}"]}),a})();var v=T(4448);const H=["agGrid"];function Y(a,r){1&a&&(t.TgZ(0,"option",28),t._uU(1,"All"),t.qZA())}function j(a,r){if(1&a&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.company_id),t.xp6(1),t.hij(" ",e.name," ")}}function W(a,r){1&a&&(t.TgZ(0,"option",28),t._uU(1,"All"),t.qZA())}function V(a,r){if(1&a&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function G(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",29),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function z(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"ag-grid-angular",30,31),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n)})("cellClicked",function(n){t.CHM(e);const o=t.oxw();return o.onCellClicked(n,o.report)})("cellDoubleClicked",function(n){t.CHM(e);const o=t.oxw();return o.onCellDoubleClicked(n,o.report)}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("columnDefs",e.gridC1Columns)("rowData",e.gridC1Data)}}function B(a,r){1&a&&t._UZ(0,"img",32)}let X=(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.rd=i,this.activeRoute=n,this.router=o,this.AS=l,this.toastr=s,this.utility=u,this.user=this.AS.currentUserValue,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.reportGenTime=new Date,this.report_title="Cashflow Report",this.report="ANALYTICS",this.showGrid=!0,this.showPROJECT=!1,this.showPNL2=!1,this.dtList={},this.companyList={},this.trancheList=[],this.myTrancheList={},this.start_date=new Date,this.end_date=new Date,this.group_id="",this.schema="",this.company={},this.company_id=5,this.tranche_id=-1,this.finList=[],this.reportList={ANALYTICS:"Analytics",PNL:"P&L",PROJECT:"Project"},this.financial={},this.pnl2=[38,57,60,39,68,41,40,42,43,34,56,59],this.gridC1Options={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0}},this.gridC1Columns=[],this.gridC1Data=[],this.gridP1Columns=[],this.gridP1Data=[],this.gridReadyStatus=!0}ngOnInit(){this.dtList=this.rd.GetDates(),this.rd.companySubject.subscribe(e=>this.companyList=e),this.rd.trancheSubject.subscribe(e=>this.trancheList=e),this.start_date=this.dtList.tdate_1Y,this.end_date=this.dtList.tdate_MED,this.updateTranche(),this.refreshAnalytics("INIT"),("Admin"===this.user.type||"SManager"===this.user.type)&&(this.reportList.TAX="TAX",this.reportList.PNL2="P&L - HL"),console.log("Tranche:",this.trancheList)}ngOnChanges(){this.ngOnInit()}updateTranche(){this.myTrancheList={},console.log("updateTranche:",this.trancheList);for(let e=0;e<this.trancheList.length;e++)this.trancheList[e].company_id==this.company_id&&(this.myTrancheList[this.trancheList[e].tranche_id]=this.trancheList[e].tranche_name);this.tranche_id=-1,console.log("updateTranche:",this.myTrancheList)}refreshReport(e,i){console.log("refreshReport:",e,i),"COMPANY"===i&&this.updateTranche()}refreshAnalytics(e){this.gridReadyStatus=!1;const i={params:{company_id:this.company_id,report:this.report,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};this.tranche_id>0&&(i.params.tranche_id=this.tranche_id),this.gridC1Data=[],console.log("refreshAnalytics:",i,this.tranche_id),this.REQ.get("tranche/analytics",{query:JSON.stringify(i)}).subscribe(n=>{if(this.gridReadyStatus=!0,console.log("refreshAnalytics:",n),!this.AS.checkResponseError(n,"Cashflow Data",this.AS.login))return!1;this.finList=n.data,this.schema=n.schema,"ANALYTICS"==this.report?(this.fetchAnalyticsReport(),this.showGrid=!0,this.showPNL2=!1,this.report_title="Cashflow Report: Analytics View "):"PROJECT"==this.report&&(this.fetchPROJECTReport(n.data,3),this.showGrid=!1,this.showPROJECT=!0,this.report_title="Cashflow Report: Project view ")},n=>{this.gridReadyStatus=!0,console.log("refreshAnalytics:",n)}),this.reportGenTime=new Date}fetchAnalyticsReport(){this.gridC1Columns=[{headerName:"Month",width:220,field:"tdate",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Tranche",field:"tranche_name",filter:!0},{headerName:"Total",field:"to_units",filter:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Occupied",field:"oc_units",filter:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Change",field:"oc_units_chg",filter:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Rent Ready",field:"rr_units",filter:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Other",field:"ot_units",filter:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Market",field:"expected_rent",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Current Rent",field:"current_rent",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Paid Rent",field:"paid_rent",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Change",field:"paid_rent_chg",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Deliquency",field:"deliquency",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Change",field:"deliquency_chg",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"SD Required",field:"sd_r",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"SD Actual",field:"sd_a",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"SD Change",field:"sd_a_chg",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Updated",field:"updated",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Group",field:"group",filter:!0}];let s=0,q=0,Z=0,O=0;this.financial=[],this.financial.t_current_rent=0,this.financial.t_paid_rent=0,this.financial.t_deliquency=0,this.financial.t_sd_a=0,this.financial.t_sd_r=0,this.financial.t_market_rent=0,this.financial.t_oc_units=0,this.financial.t_rr_units=0,this.financial.t_ot_units=0,this.financial.t_to_units=0;for(let g=0;g<this.finList.length;g++)console.log("fetchAnalyticsReport-LOOP:",this.finList[g]),this.finList[g].field=this.finList.name,this.finList[g].to_units=this.finList[g].rr_units+this.finList[g].oc_units+this.finList[g].ot_units,this.finList[g].oc_units_chg=(q=0)?this.finList[g].oc_units-q:0,q=this.finList[g].oc_units,this.finList[g].sd_a_chg=s>0?this.finList[g].sd_a-s:0,s=this.finList[g].sd_a,this.finList[g].paid_rent_chg=Z>0?this.finList[g].paid_rent-Z:0,Z=this.finList[g].paid_rent,this.finList[g].deliquency_chg=0!=O?this.finList[g].deliquency-O:0,O=this.finList[g].deliquency,this.finList[g].pinned="right",this.finList[g].cellClass="card-title",this.financial.t_current_rent+=this.finList[g].current_rent,this.financial.t_paid_rent+=this.finList[g].paid_rent,this.financial.t_deliquency+=this.finList[g].deliquency,this.financial.t_sd_a+=this.finList[g].sd_a,this.financial.t_sd_r+=this.finList[g].sd_r,this.financial.t_market_rent+=this.finList[g].expected_rent,this.financial.t_oc_units+=this.finList[g].oc_units,this.financial.t_rr_units+=this.finList[g].rr_units,this.financial.t_ot_units+=this.finList[g].ot_units,this.financial.t_to_units+=this.finList[g].to_units,this.financial.t_occupancy=this.financial.t_oc_units/this.financial.t_to_units;console.log("Units:",q),this.gridC1Data=this.finList}fetchPROJECTReport(e,i){this.gridC1Columns=[{headerName:"Period",width:120,field:"index",filter:!0},{headerName:"Occupancy",field:"occupancy",filter:"agNumberColumnFilter",valueFormatter:this.utility.agPercentFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Income",field:"38",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Fixed",field:"56",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Operating",field:"42",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Total Expenses",field:"39",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"NOI - After Payment",field:"59",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Principal",field:"200",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Interest",field:"201",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Loan Payment",field:"189",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle}];let o=[];console.log("fetchPROJECTReport:",e,i);for(let l=0;l<e.length;l++){let s=e[l];console.log("fetchPROJECTReport:LOOP:[",l,"] ",s.index),"name"!=s.index&&"total"!=s.index&&"parent"!=s.index&&o.push(s)}console.log("CF Data 2 = ",o),this.gridC1Data=o}onDChange(e,i){console.log("25: onDChange--\x3e"),console.log(i)}onGridReady(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e){e.api.sizeColumnsToFit()}onCellClicked(e,i){console.log("Column:",e.colDef.field)}onCellDoubleClicked(e,i){console.log("onCellDoubleClicked:",e,i)}CapitlizeString(e){return e.charAt(0).toUpperCase()+e.slice(1)}exportData(e){var o={columnDefs:[{headerName:this.company_id+": Transaction report from "+this.start_date+" to "+this.end_date,children:[{field:"athlete",minWidth:200},{field:"country",minWidth:200}]}],defaultColDef:{sortable:!0,filter:!0,resizable:!0,minWidth:100,flex:1}};"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv(o)):(console.log("Exporting Excel"),this.grid1Api.exportDataAsExcel(o))}CurrencyCellRendererUSD(e){return void 0===e.value?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e.value)}bracketsFormatter(e){return"("+e.value+")"}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(C.t))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-analysis"]],viewQuery:function(e,i){if(1&e&&t.Gf(H,7),2&e){let n;t.iGM(n=t.CRH())&&(i.agGrid=n.first)}},features:[t.TTD],decls:72,vars:46,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header","text-white"],[1,"card-body"],[1,"row"],[1,"col-lg-2","col-md-4","col-sm-12"],[1,"form-group"],[1,"position-relative"],["label","company","id","company","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],["value","ALL",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["label","Tranche","id","tranche","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],[1,"md-form","mb-2"],["label","From","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["label","To","name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],["label","Report","id","reportSelect",3,"ngModel","ngModelChange"],[1,"col-lg-2","col-md-4","col-sm-12","text-md-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-4"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],[1,"fas","fa-download"],[1,"row","mb-2"],[1,"col-sm-12","col-md-4","col-lg-3"],["style","width: 100%; height: 650px;","class","ag-theme-balham","animateRows","","rowHeight","22","rowSelection","multiple",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked",4,"ngIf"],["src","../../../assets/img/loading.gif","class","mx-auto d-block w-auto",4,"ngIf"],[1,"card-footer"],["value","ALL"],[3,"value"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","650px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""],["src","../../../assets/img/loading.gif",1,"mx-auto","d-block","w-auto"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._uU(5," Analysis Report "),t.qZA()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),t._uU(11,"Company"),t.qZA(),t.TgZ(12,"select",8),t.NdJ("ngModelChange",function(o){return i.company_id=o})("ngModelChange",function(o){return i.refreshReport(o,"COMPANY")}),t.YNc(13,Y,2,0,"option",9),t.YNc(14,j,2,2,"option",10),t.qZA()()(),t.TgZ(15,"div",5)(16,"div",6)(17,"label",7),t._uU(18,"Tranche / Asset"),t.qZA(),t.TgZ(19,"select",11),t.NdJ("ngModelChange",function(o){return i.tranche_id=o})("ngModelChange",function(){return i.refreshAnalytics("TRANCHE")}),t.YNc(20,W,2,0,"option",9),t.YNc(21,V,2,2,"option",10),t.ALo(22,"keyvalue"),t.qZA()()(),t.TgZ(23,"div",5)(24,"div",12)(25,"mdb-date-picker",13,14),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()()(),t.TgZ(27,"div",5)(28,"div",12)(29,"mdb-date-picker",15,16),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()()(),t.TgZ(31,"div",5)(32,"div",12)(33,"mdb-select-2",17),t.NdJ("ngModelChange",function(o){return i.report=o})("ngModelChange",function(o){return i.refreshReport(o,"REPORT")}),t.YNc(34,G,2,2,"mdb-select-option",10),t.ALo(35,"keyvalue"),t.qZA()()(),t.TgZ(36,"div",18)(37,"div",19)(38,"button",20),t.NdJ("click",function(){return i.refreshAnalytics("REFRESH")}),t._UZ(39,"i",21),t.qZA(),t._uU(40,"\xa0 "),t.TgZ(41,"button",20),t.NdJ("click",function(){return i.exportData("CSV")}),t._UZ(42,"i",22),t.qZA()()()(),t.TgZ(43,"div",23)(44,"div",24)(45,"label"),t._uU(46,"Market | Current"),t.qZA(),t._uU(47),t.ALo(48,"currency"),t.ALo(49,"currency"),t.qZA(),t.TgZ(50,"div",24)(51,"label"),t._uU(52,"Paid | Deliquency"),t.qZA(),t._uU(53),t.ALo(54,"currency"),t.ALo(55,"currency"),t.qZA(),t.TgZ(56,"div",24)(57,"label"),t._uU(58,"SD Required | SD Actual"),t.qZA(),t._uU(59),t.ALo(60,"currency"),t.ALo(61,"currency"),t.qZA(),t.TgZ(62,"div",24)(63,"label"),t._uU(64,"Occupancy"),t.qZA(),t._uU(65),t.ALo(66,"percent"),t.qZA()(),t.TgZ(67,"div",4),t.YNc(68,z,2,2,"ag-grid-angular",25),t.YNc(69,B,1,0,"img",26),t.qZA()(),t.TgZ(70,"div",27),t._uU(71),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("ngModel",i.company_id),t.xp6(1),t.Q6J("ngIf","Admin"===i.user.type),t.xp6(1),t.Q6J("ngForOf",i.companyList),t.xp6(5),t.Q6J("ngModel",i.tranche_id),t.xp6(1),t.Q6J("ngIf","Admin"===i.user.type),t.xp6(1),t.Q6J("ngForOf",t.lcZ(22,28,i.myTrancheList)),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(4),t.Q6J("ngModel",i.report),t.xp6(1),t.Q6J("ngForOf",t.lcZ(35,30,i.reportList)),t.xp6(13),t.AsE(" ",t.lcZ(48,32,i.financial.t_market_rent)," | ",t.lcZ(49,34,i.financial.t_current_rent)," "),t.xp6(6),t.AsE(" ",t.lcZ(54,36,i.financial.t_paid_rent)," | ",t.lcZ(55,38,i.financial.t_deliquency)," "),t.xp6(6),t.AsE(" ",t.lcZ(60,40,i.financial.t_sd_r)," | ",t.lcZ(61,42,i.financial.t_sd_a)," "),t.xp6(6),t.lnq(" ",t.lcZ(66,44,i.financial.t_occupancy)," | ",i.financial.t_oc_units,"\xa0out\tof\xa0",i.financial.t_to_units," "),t.xp6(3),t.Q6J("ngIf",(i.showGrid||i.showPNL2||i.showPROJECT)&&i.gridReadyStatus),t.xp6(1),t.Q6J("ngIf",!i.gridReadyStatus),t.xp6(2),t.hij(" Report generated as of ",i.reportGenTime," "))},directives:[d.gRC,_.EJ,_.JJ,_.On,c.O5,_.YN,_.Kr,c.sg,d.JNR,_.Q7,d.lPY,d.x8v,d.mTE,v.N8],pipes:[c.Nd,c.H9,c.Zx],styles:[""]}),a})();function $(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",47),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function K(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",47),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function tt(a,r){if(1&a&&(t.TgZ(0,"option",47),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.value)}}function et(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.createTenant("APP",n.item)}),t._uU(1,"Create Tenant"),t.qZA()}}function it(a,r){if(1&a&&(t.TgZ(0,"div",3)(1,"div",40),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",11),t._uU(8),t.ALo(9,"date"),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.AsE(" ",e.first_name,"\xa0",e.last_name," "),t.xp6(2),t.Oqu(e.relationship),t.xp6(2),t.Oqu(e.role),t.xp6(2),t.Oqu(t.lcZ(9,5,e.birth_date))}}function nt(a,r){if(1&a&&(t.TgZ(0,"div",42)(1,"div",11),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t._uU(4),t.qZA(),t.TgZ(5,"div",11),t._uU(6),t.qZA(),t.TgZ(7,"div",11),t._uU(8),t.qZA(),t.TgZ(9,"div",11),t._uU(10),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.make),t.xp6(2),t.Oqu(e.model),t.xp6(2),t.Oqu(e.year),t.xp6(2),t.Oqu(e.color),t.xp6(2),t.Oqu(e.state),t.xp6(2),t.Oqu(e.plate)}}function ot(a,r){if(1&a&&(t.TgZ(0,"div",3)(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",11),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"div",11),t._uU(11),t.ALo(12,"currency"),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.company),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.account),t.xp6(2),t.Oqu(t.lcZ(9,5,e.balance)),t.xp6(3),t.Oqu(t.lcZ(12,7,e.monthly))}}function at(a,r){if(1&a&&(t.TgZ(0,"div",42)(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t._uU(6),t.qZA(),t.TgZ(7,"div",24),t._uU(8),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.income),t.xp6(2),t.Oqu(e.period),t.xp6(2),t.Oqu(e.source),t.xp6(2),t.Oqu(e.proof)}}function rt(a,r){if(1&a&&(t.TgZ(0,"div",42)(1,"div",11),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t._uU(4),t.qZA(),t.TgZ(5,"div",11),t._uU(6),t.qZA(),t.TgZ(7,"div",45),t._uU(8),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.relationship),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.period)}}function lt(a,r){if(1&a&&(t.TgZ(0,"div",42)(1,"div",39)(2,"label"),t._uU(3),t.qZA()(),t.TgZ(4,"div",45),t._uU(5),t.qZA(),t.TgZ(6,"div",19),t._uU(7),t.qZA()()),2&a){const e=r.$implicit;t.xp6(3),t.AsE("",e.index,".\xa0",e.question,""),t.xp6(2),t.hij(" ",e.answer," "),t.xp6(2),t.hij(" ",e.reason," ")}}let dt=(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.authority="Applications",this.user=this.AS.currentUserValue,this.urlPrefix="",this.queryParams={},this.view="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.today=new Date,this.aStatus={NEW:"NEW","IN PROCESS":"IN PROCESS",INFO:"MORE INFO",APPROVED:"APPROVED","NOT APPROVED":"NOT APPROVED","ON HOLD":"ON HOLD",TENANT:"CREATE TENANT",CLOSED:"CLOSED",CANCELED:"CANCELED"},this.apps=[],this.item={json:""},this.app_id=-1,this.pList=[],this.tenant=[],this.vehicles=[],this.financials=[],this.property=[],this.propertyW=[],this.occupants=[],this.other_income=[],this.reference=[],this.questions=[],this.showCreateTenant=!1,this.company_id="AHPA",this.s_states=[],this.s_status=["NEW","IN PROCESS","UPDATED","ON HOLD","APPROVED","INFO"],this.dataList=[],this.stateList={KY:"KY",MA:"MA",MD:"MD",NJ:"NJ",PA:"PA",TN:"TN"},this.dtList=this.rd.GetDates(),this.start_date=this.dtList.tdate_6M1,this.end_date=this.dtList.tdate,this.gridAOptions={defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.gridAColumns=[{headerName:"ID",width:80,field:"tenancy_app_id",filter:"agNumberColumnFilter"},{headerName:"Property",field:"label",resizable:!0},{headerName:"City",field:"city",resizable:!0},{headerName:"Zip",field:"zip",resizable:!0},{headerName:"Name",field:"tenant_name",resizable:!0},{headerName:"Status",field:"status",resizable:!0},{headerName:"Updated",field:"updated",width:130,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agDateRenderer},{headerName:"Updated By",field:"updatedby",resizable:!0},{headerName:"Notes",field:"note",resizable:!0},{headerName:"Property ID",field:"property_id",hide:!0}],this.gridAData=[]}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.getProperties()}getApplications(){const e={params:{company:this.company_id,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)},usage:{authority:this.authority,sub_authority:"",operation:"VIEW",data:"NA"}};let i="";if(this.s_states.length>0){for(let o=0;o<this.s_states.length;o++)i+="'"+this.s_states[o]+"'";e.params.states=i.replace(/''/g,"','")}if(this.s_status.length>0){i="";for(let o=0;o<this.s_status.length;o++)i+="'"+this.s_status[o]+"'";e.params.status=i.replace(/''/g,"','")}console.log("getApplications0:",this.s_states,this.s_status,this.start_date),console.log("getApplications:",e);let n=[];this.gridAData=[],this.REQ.get("applications/list",{query:JSON.stringify(e)}).subscribe(o=>{console.log("getApplications1 response:",o),this.apps=o.data;for(let l=0;l<this.apps.length;l++){if(n=JSON.parse(this.apps[l].application),this.apps[l].json=n,this.apps[l].property_id>0)for(let s=0;s<this.pList.length;s++)this.apps[l].property_id===this.pList[s].property_id&&(this.apps[l].label=this.pList[s].label,this.apps[l].city=this.pList[s].city,this.apps[l].zip=this.pList[s].state+" "+this.pList[s].zip);else this.apps[l].label="Any Property";this.apps[l].tenant_name=n.first_name+" "+n.last_name}this.gridAData=this.apps},o=>{console.log("getTX:",o)})}loadApplication(e,i){console.log("loadApplication:",i)}updateData(e,i){const n={params:this.item,usage:{authority:this.authority,sub_authority:"",operation:"UPDATE",data:"NA"}};console.log("updateData:",n),this.REQ.post("applications/update",n).subscribe(o=>{console.log("updateData:",o),this.toastr.success("Tenant Application updated "),console.log("Tenant Application updated ")},o=>{console.log("updateData:",o),this.toastr.error("Tenant Application update failed for : "+this.app_id)})}getProperties(){this.REQ.get("p","").subscribe(i=>{this.pList=i.data,console.log("getProperties:",this.pList),this.getApplications()},i=>{console.log("getProperties: error:",i),this.getApplications()})}clearData(e){}createTenant(e,i){this.utility.setApplicationData(this.item),this.router.navigate([this.urlPrefix+"tenante"],{queryParams:{tenant_id:-1,caller:"Application"}})}onModelUpdated(e,i){e.api.sizeColumnsToFit()}onGridReady(e,i){this.gridAApi=e.api,this.gridAColumnApi=e.columnApi;var n=e.api.getColumnDefs();n.forEach(function(o,l){o.resizable=!0,o.sortable=!0,o.filter=!0}),e.api.setColumnDefs(n)}exportData(e){"CSV"==e?(console.log("Exporting Excel"),this.gridAApi.exportDataAsCsv({suppressQuotes:!0,columnSeparator:",",customHeader:"Report",customFooter:"Himalaya Capital"})):console.log("Exporting Excel")}onCellClicked(e,i){console.log("onCellClicked:",e),this.item=e.data,this.app_id=this.item.tenancy_app_id,this.tenant=e.data.json,console.log("Tenant :",this.tenant),this.other_income=JSON.parse(this.tenant.other_income),this.vehicles=JSON.parse(this.tenant.vehicles),this.financials=JSON.parse(this.tenant.financials),this.occupants=JSON.parse(this.tenant.occupants),this.reference=JSON.parse(this.tenant.reference),this.questions=JSON.parse(this.tenant.questions),console.log("onCellClicked:",this.item)}onCellDoubleClicked(e,i){console.log("Double Clicked:",i,e)}imageRenderer(e){console.log("imageRenderer:",e);let i="<span class='text-info'><i class='fas fa-download'></i></span>";return"doc_delete"===e.colDef.field&&(i="<span class='text-danger'><i class='fas fa-trash-alt'></i></span>"),i}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-applications"]],decls:386,vars:109,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-md-9","col-12"],[1,"fas","fa-user","text-white"],[1,"col-md-3","col-12"],["role","group","aria-label","Basic example",1,"btn-group","text-md-right","d-block","shadow-0","mt-md-0","mt-2"],["mdbBtn","","type","button","color","white","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync","text-danger"],[1,"card-body"],[1,"col-sm-2"],[1,"md-form","mb-2"],["label","State","id","stSelect","optionHeight","32",3,"multiple","ngModel","dropdownClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["label","Applied From","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["label","Applied To","name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],[1,"col-sm-6"],["label","Status","id","tSelect","optionHeight","32",3,"multiple","ngModel","dropdownClass","ngModelChange"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","400px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["grid1",""],[1,"col-sm-3","pt-3"],[1,"col-sm-3"],["mdbInput","","name","cc","type","text","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","size","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group"],["label","TStatus","id","tsSelect",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"md-form"],["mdbInput","","id","description","placeholder","Enter Details here","cols","80","name","item['note']","rows","4",1,"md-textarea","md-textarea-auto","form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",3,"click"],["mdbBtn","","color","dark","rounded","true","mdbWavesEffect","","type","button",3,"click",4,"ngIf"],[1,"text-center","text-muted","update-text"],[1,"hr"],[1,"row","text-danger","text-md-center","text-left"],[1,"col-sm-12","h6"],[1,"col-sm-5"],[1,"col-sm-4"],["class","row",4,"ngFor","ngForOf"],[1,"row","col-sm-12"],["class","row col-sm-12",4,"ngFor","ngForOf"],[1,"row","text-title"],[1,"col-sm-1"],[1,"row","col-sm-12","h6"],[3,"value"],["mdbBtn","","color","dark","rounded","true","mdbWavesEffect","","type","button",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mdb-card-title")(6,"h3"),t._UZ(7,"i",5),t._uU(8,"\xa0New Tenant Applications "),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"button",8),t.NdJ("click",function(){return i.getApplications()}),t._UZ(12,"i",9),t.qZA()()()()(),t.TgZ(13,"div",10)(14,"div",3)(15,"div",11)(16,"div",12)(17,"mdb-select-2",13),t.NdJ("ngModelChange",function(o){return i.s_states=o}),t.TgZ(18,"mdb-select-all-option"),t._uU(19,"Select all"),t.qZA(),t.YNc(20,$,2,2,"mdb-select-option",14),t.ALo(21,"keyvalue"),t.qZA()()(),t.TgZ(22,"div",11)(23,"div",12)(24,"mdb-date-picker",15,16),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()()(),t.TgZ(26,"div",11)(27,"div",12)(28,"mdb-date-picker",17,18),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()()(),t.TgZ(30,"div",19)(31,"div",12)(32,"mdb-select-2",20),t.NdJ("ngModelChange",function(o){return i.s_status=o}),t.TgZ(33,"mdb-select-all-option"),t._uU(34,"Select all"),t.qZA(),t.YNc(35,K,2,2,"mdb-select-option",14),t.ALo(36,"keyvalue"),t.qZA()()()(),t.TgZ(37,"div",3)(38,"ag-grid-angular",21,22),t.NdJ("gridReady",function(o){return i.onGridReady(o,"APP")})("modelUpdated",function(o){return i.onModelUpdated(o,"APP")})("cellClicked",function(o){return i.onCellClicked(o,"APP")})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o,"APP")}),t.qZA()(),t.TgZ(40,"div",3)(41,"div",23)(42,"label"),t._uU(43,"Name"),t.qZA(),t._uU(44),t.qZA(),t.TgZ(45,"div",23)(46,"label"),t._uU(47,"Apartment"),t.qZA(),t._uU(48),t.qZA(),t.TgZ(49,"div",23)(50,"label"),t._uU(51,"Email"),t.qZA(),t._uU(52),t.qZA(),t.TgZ(53,"div",23)(54,"label"),t._uU(55,"Phone"),t.qZA(),t._uU(56),t.qZA()(),t.TgZ(57,"div",3)(58,"div",24)(59,"div",12)(60,"label"),t._uU(61,"Credit Score"),t.qZA(),t.TgZ(62,"input",25),t.NdJ("ngModelChange",function(o){return i.item.credit_score=o}),t.qZA()()(),t.TgZ(63,"div",24)(64,"div",12)(65,"label"),t._uU(66,"Income Proof"),t.qZA(),t.TgZ(67,"input",26),t.NdJ("ngModelChange",function(o){return i.item.income_proof=o}),t.qZA()()(),t.TgZ(68,"div",24)(69,"div",12)(70,"label"),t._uU(71,"ID Proof"),t.qZA(),t.TgZ(72,"input",26),t.NdJ("ngModelChange",function(o){return i.item.identification=o}),t.qZA()()(),t.TgZ(73,"div",24)(74,"div",27)(75,"label"),t._uU(76,"Status"),t.qZA(),t.TgZ(77,"select",28),t.NdJ("ngModelChange",function(o){return i.item.status=o}),t.YNc(78,tt,2,2,"option",14),t.ALo(79,"keyvalue"),t.qZA()()(),t.TgZ(80,"div",3)(81,"div",29)(82,"div",30)(83,"label"),t._uU(84,"Notes"),t.qZA(),t.TgZ(85,"textarea",31),t.NdJ("ngModelChange",function(o){return i.item.note=o}),t._uU(86,"\t\t\t\t          Enter Updates Here\n\t\t\t\t    "),t.qZA()()()(),t.TgZ(87,"div",32)(88,"div")(89,"button",33),t.NdJ("click",function(){return i.updateData("APP",i.item)}),t._uU(90,"Save"),t.qZA(),t.YNc(91,et,2,0,"button",34),t.qZA(),t.TgZ(92,"div",35),t._uU(93),t.qZA()(),t._UZ(94,"hr",36),t.TgZ(95,"div",37)(96,"h4"),t._uU(97,"\xa0Application"),t.qZA()(),t.TgZ(98,"div",3)(99,"div",38),t._uU(100,"Personal Information "),t.qZA()(),t.TgZ(101,"div",3)(102,"div",39)(103,"label"),t._uU(104,"Name"),t.qZA(),t._uU(105),t.qZA(),t.TgZ(106,"div",11)(107,"label"),t._uU(108,"Birth Date"),t.qZA(),t._uU(109),t.qZA(),t.TgZ(110,"div",11)(111,"label"),t._uU(112,"Tax ID"),t.qZA(),t._uU(113),t.qZA(),t.TgZ(114,"div",24)(115,"label"),t._uU(116,"Driver License"),t.qZA(),t._uU(117),t.qZA()(),t.TgZ(118,"div",3)(119,"div",40)(120,"label"),t._uU(121,"Address"),t.qZA(),t._uU(122),t.qZA(),t.TgZ(123,"div",24)(124,"label"),t._uU(125,"Email"),t.qZA(),t._uU(126),t.qZA(),t.TgZ(127,"div",24)(128,"label"),t._uU(129,"Phone"),t.qZA(),t._uU(130),t.qZA(),t.TgZ(131,"div",11)(132,"label"),t._uU(133,"Rent"),t.qZA(),t._uU(134),t.ALo(135,"currency"),t.qZA()(),t.TgZ(136,"div",3)(137,"div",40)(138,"label"),t._uU(139,"Reason"),t.qZA(),t._uU(140),t.qZA(),t.TgZ(141,"div",11)(142,"label"),t._uU(143,"Duration"),t.qZA(),t._uU(144),t.qZA(),t.TgZ(145,"div",24)(146,"label"),t._uU(147,"Landlord"),t.qZA(),t._uU(148),t.qZA(),t.TgZ(149,"div",24)(150,"label"),t._uU(151,"Rent"),t.qZA(),t._uU(152),t.ALo(153,"currency"),t.qZA()(),t.TgZ(154,"div",3)(155,"div",38),t._uU(156,"Additional Occupants"),t.qZA()(),t.TgZ(157,"div",3)(158,"div",40)(159,"label"),t._uU(160,"Name"),t.qZA()(),t.TgZ(161,"div",24)(162,"label"),t._uU(163,"Relationship"),t.qZA()(),t.TgZ(164,"div",24)(165,"label"),t._uU(166,"Occupation"),t.qZA()(),t.TgZ(167,"div",11)(168,"label"),t._uU(169,"Birth Date"),t.qZA()()(),t.YNc(170,it,10,7,"div",41),t.TgZ(171,"div",3)(172,"div",38),t._uU(173,"Vehicle Information"),t.qZA()(),t.TgZ(174,"div",42)(175,"div",11)(176,"label"),t._uU(177,"Make"),t.qZA()(),t.TgZ(178,"div",11)(179,"label"),t._uU(180,"Model"),t.qZA()(),t.TgZ(181,"div",11)(182,"label"),t._uU(183,"Year"),t.qZA()(),t.TgZ(184,"div",11)(185,"label"),t._uU(186,"Color"),t.qZA()(),t.TgZ(187,"div",11)(188,"label"),t._uU(189,"State "),t.qZA()(),t.TgZ(190,"div",11)(191,"label"),t._uU(192,"Plate"),t.qZA()()(),t.YNc(193,nt,13,6,"div",43),t.TgZ(194,"div",3)(195,"div",38),t._uU(196,"I am applying for this Home"),t.qZA()(),t.TgZ(197,"div",42)(198,"div",11)(199,"label"),t._uU(200,"Rent"),t.qZA(),t._uU(201),t.ALo(202,"currency"),t.qZA(),t.TgZ(203,"div",11)(204,"label"),t._uU(205,"Bedrooms"),t.qZA(),t._uU(206),t.qZA(),t.TgZ(207,"div",11)(208,"label"),t._uU(209,"Bathrooms"),t.qZA(),t._uU(210),t.qZA(),t.TgZ(211,"div",11)(212,"label"),t._uU(213,"Total Rooms"),t.qZA(),t._uU(214),t.qZA(),t.TgZ(215,"div",11)(216,"label"),t._uU(217,"Size (Sq Ft)"),t.qZA(),t._uU(218),t.qZA(),t.TgZ(219,"div",11)(220,"label"),t._uU(221,"Size"),t.qZA(),t._uU(222),t.qZA()(),t.TgZ(223,"div",3)(224,"div",38),t._uU(225,"I like to have this features"),t.qZA()(),t.TgZ(226,"div",42)(227,"div",11)(228,"label"),t._uU(229,"Pay Rent"),t.qZA(),t._uU(230),t.ALo(231,"currency"),t.qZA(),t.TgZ(232,"div",11)(233,"label"),t._uU(234,"Bedrooms"),t.qZA(),t._uU(235),t.qZA(),t.TgZ(236,"div",11)(237,"label"),t._uU(238,"Bathrooms"),t.qZA(),t._uU(239),t.qZA(),t.TgZ(240,"div",11)(241,"label"),t._uU(242,"Total Rooms"),t.qZA(),t._uU(243),t.qZA(),t.TgZ(244,"div",11)(245,"label"),t._uU(246,"Size (Sq Ft)"),t.qZA(),t._uU(247),t.qZA(),t.TgZ(248,"div",11)(249,"label"),t._uU(250,"Size"),t.qZA(),t._uU(251),t.qZA()(),t.TgZ(252,"div",3)(253,"div",38),t._uU(254,"Financial Information"),t.qZA()(),t.TgZ(255,"div",44)(256,"div",24)(257,"label"),t._uU(258,"Bank / Agency"),t.qZA()(),t.TgZ(259,"div",11)(260,"label"),t._uU(261,"Type"),t.qZA()(),t.TgZ(262,"div",24)(263,"label"),t._uU(264,"Account Number"),t.qZA()(),t.TgZ(265,"div",11)(266,"label"),t._uU(267,"Balance"),t.qZA()(),t.TgZ(268,"div",11)(269,"label"),t._uU(270,"Monthly Payment"),t.qZA()()(),t.YNc(271,ot,13,9,"div",41),t.TgZ(272,"div",3)(273,"div",38),t._uU(274,"Current Employer"),t.qZA()(),t.TgZ(275,"div",3)(276,"div",45)(277,"label"),t._uU(278,"Name"),t.qZA()(),t.TgZ(279,"div",11),t._uU(280),t.qZA(),t.TgZ(281,"div",45)(282,"label"),t._uU(283,"Role"),t.qZA()(),t.TgZ(284,"div",11),t._uU(285),t.qZA(),t.TgZ(286,"div",45)(287,"label"),t._uU(288,"Manager"),t.qZA()(),t.TgZ(289,"div",45),t._uU(290),t.qZA(),t.TgZ(291,"div",45)(292,"label"),t._uU(293,"Phone"),t.qZA()(),t.TgZ(294,"div",45),t._uU(295),t.qZA(),t.TgZ(296,"div",45)(297,"label"),t._uU(298,"Salary (Week)"),t.qZA()(),t.TgZ(299,"div",45),t._uU(300),t.qZA()(),t.TgZ(301,"div",42)(302,"div",11)(303,"label"),t._uU(304,"Address"),t.qZA()(),t.TgZ(305,"div",19),t._uU(306),t.qZA(),t.TgZ(307,"div",11)(308,"label"),t._uU(309,"Years Employed"),t.qZA()(),t.TgZ(310,"div",11),t._uU(311),t.qZA()(),t.TgZ(312,"div",46),t._uU(313,"Previous Employer"),t.qZA(),t.TgZ(314,"div",42)(315,"div",45)(316,"label"),t._uU(317,"Name"),t.qZA()(),t.TgZ(318,"div",11),t._uU(319),t.qZA(),t.TgZ(320,"div",45)(321,"label"),t._uU(322,"Role"),t.qZA()(),t.TgZ(323,"div",11),t._uU(324),t.qZA(),t.TgZ(325,"div",45)(326,"label"),t._uU(327,"Manager"),t.qZA()(),t.TgZ(328,"div",45),t._uU(329),t.qZA(),t.TgZ(330,"div",45)(331,"label"),t._uU(332,"Phone"),t.qZA()(),t.TgZ(333,"div",45),t._uU(334),t.qZA(),t.TgZ(335,"div",45)(336,"label"),t._uU(337,"Salary (Week)"),t.qZA()(),t.TgZ(338,"div",45),t._uU(339),t.qZA()(),t.TgZ(340,"div",42)(341,"div",11)(342,"label"),t._uU(343,"Address"),t.qZA()(),t.TgZ(344,"div",19),t._uU(345),t.qZA(),t.TgZ(346,"div",11)(347,"label"),t._uU(348,"Years Employed"),t.qZA()(),t.TgZ(349,"div",11),t._uU(350),t.qZA()(),t.TgZ(351,"div",46),t._uU(352,"Other Income"),t.qZA(),t.TgZ(353,"div",42)(354,"div",24)(355,"label"),t._uU(356,"Income"),t.qZA()(),t.TgZ(357,"div",24)(358,"label"),t._uU(359,"Period"),t.qZA()(),t.TgZ(360,"div",24)(361,"label"),t._uU(362,"Source"),t.qZA()(),t.TgZ(363,"div",24)(364,"label"),t._uU(365,"Income Proof"),t.qZA()()(),t.YNc(366,at,9,4,"div",43),t.TgZ(367,"div",46),t._uU(368,"References "),t.qZA(),t.TgZ(369,"div",42)(370,"div",45)(371,"label"),t._uU(372,"Name"),t.qZA()(),t.TgZ(373,"div",11)(374,"label"),t._uU(375,"Relationship"),t.qZA()(),t.TgZ(376,"div",45)(377,"label"),t._uU(378,"Email"),t.qZA()(),t.TgZ(379,"div",45)(380,"label"),t._uU(381,"Years Known"),t.qZA()()(),t.YNc(382,rt,9,4,"div",43),t.TgZ(383,"div",46),t._uU(384,"Applicant Questionarie"),t.qZA(),t.YNc(385,lt,8,4,"div",43),t.qZA()()()()),2&e&&(t.xp6(17),t.Q6J("multiple",!0)("ngModel",i.s_states)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(3),t.Q6J("ngForOf",t.lcZ(21,95,i.stateList)),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(4),t.Q6J("multiple",!0)("ngModel",i.s_status)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(3),t.Q6J("ngForOf",t.lcZ(36,97,i.aStatus)),t.xp6(3),t.Q6J("columnDefs",i.gridAColumns)("rowData",i.gridAData),t.xp6(6),t.AsE(" ",i.item.json.first_name," ",i.item.json.last_name," "),t.xp6(4),t.lnq(" ",i.item.label," ",i.item.city," ",i.item.zip," "),t.xp6(4),t.hij(" ",i.item.json.email," "),t.xp6(4),t.hij(" ",i.item.json.phone," "),t.xp6(6),t.ekj("bg-danger",+i.item.credit_score<585)("bg-success",+i.item.credit_score>600),t.Q6J("ngModel",i.item.credit_score),t.xp6(5),t.Q6J("ngModel",i.item.income_proof),t.xp6(5),t.Q6J("ngModel",i.item.identification),t.xp6(5),t.Q6J("ngModel",i.item.status),t.xp6(1),t.Q6J("ngForOf",t.lcZ(79,99,i.aStatus)),t.xp6(7),t.Q6J("ngModel",i.item.note),t.xp6(6),t.Q6J("ngIf","TENANT"==i.item.status&&i.app_id>0),t.xp6(2),t.hij("Last updated by ",i.item.updatedby," "),t.xp6(12),t.lnq("",i.tenant.first_name,"\xa0",i.tenant.middle_name,"\xa0",i.tenant.last_name," "),t.xp6(4),t.Oqu(i.tenant.dob),t.xp6(4),t.Oqu(i.tenant.tax_id),t.xp6(4),t.AsE("",i.tenant.dl_state,"-",i.tenant.dl_id,""),t.xp6(5),t.HOy("",i.tenant.street,"\xa0",i.tenant.city,"\xa0",i.tenant.state,"\xa0",i.tenant.zip," "),t.xp6(4),t.Oqu(i.tenant.email),t.xp6(4),t.Oqu(i.tenant.phone),t.xp6(4),t.Oqu(t.lcZ(135,101,i.tenant.rent)),t.xp6(6),t.Oqu(i.tenant.reason1),t.xp6(4),t.Oqu(i.tenant.duration1),t.xp6(4),t.AsE("",i.tenant.landlord1,"\xa0",i.tenant.phone1,""),t.xp6(4),t.AsE("",t.lcZ(153,103,i.tenant.landlord_payment1),"\xa0",i.tenant.landlord_current1,""),t.xp6(18),t.Q6J("ngForOf",i.occupants),t.xp6(23),t.Q6J("ngForOf",i.vehicles),t.xp6(8),t.Oqu(t.lcZ(202,105,i.property.market_rent)),t.xp6(5),t.Oqu(i.property.bed),t.xp6(4),t.Oqu(i.property.bath),t.xp6(4),t.Oqu(i.property.total_rooms),t.xp6(4),t.Oqu(i.property.size),t.xp6(4),t.Oqu(i.property.description),t.xp6(8),t.Oqu(t.lcZ(231,107,i.propertyW.market_rent)),t.xp6(5),t.Oqu(i.propertyW.bed),t.xp6(4),t.Oqu(i.propertyW.bath),t.xp6(4),t.Oqu(i.propertyW.total_rooms),t.xp6(4),t.Oqu(i.propertyW.size),t.xp6(4),t.Oqu(i.propertyW.description),t.xp6(20),t.Q6J("ngForOf",i.financials),t.xp6(9),t.Oqu(i.tenant.employer1),t.xp6(5),t.Oqu(i.tenant.role1),t.xp6(5),t.Oqu(i.tenant.manager1),t.xp6(5),t.Oqu(i.tenant.ephone1),t.xp6(5),t.Oqu(i.tenant.salary1),t.xp6(6),t.HOy(" ",i.tenant.estreet1,"\xa0",i.tenant.ecity1,"\xa0",i.tenant.estate1,"\xa0",i.tenant.ezip1," "),t.xp6(5),t.Oqu(i.tenant.period1),t.xp6(8),t.Oqu(i.tenant.employer2),t.xp6(5),t.Oqu(i.tenant.role2),t.xp6(5),t.Oqu(i.tenant.manager2),t.xp6(5),t.Oqu(i.tenant.ephone2),t.xp6(5),t.Oqu(i.tenant.salary2),t.xp6(6),t.HOy(" ",i.tenant.estreet2,"\xa0",i.tenant.ecity2,"\xa0",i.tenant.estate2,"\xa0",i.tenant.ezip2," "),t.xp6(5),t.Oqu(i.tenant.period2),t.xp6(16),t.Q6J("ngForOf",i.other_income),t.xp6(16),t.Q6J("ngForOf",i.reference),t.xp6(3),t.Q6J("ngForOf",i.questions))},directives:[d.gRC,d.mTE,d.lPY,_.JJ,_.On,d.n$x,c.sg,d.x8v,d.JNR,_.Q7,v.N8,_.Fj,d.HqI,_.EJ,_.YN,_.Kr,d.b6v,c.O5],pipes:[c.Nd,c.H9,c.uU],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]{font-size:14px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}}"]}),a})();var k=T(8306),U=T(7579);function st(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",3)(1,"div",4),t._UZ(2,"div",5)(3,"div",5),t.qZA()()),2&a){const e=r.$implicit;t.Q6J("value",e),t.xp6(2),t.Q6J("innerHTML",e.firstDisplayLine,t.oJD),t.xp6(1),t.Q6J("innerHTML",e.secondDisplayLine,t.oJD)}}let D=(()=>{class a{constructor(){this.selectedValue=new t.vpe,this.list=new k.y,this.searchText=new U.x}ngOnInit(){this.placeHolder||(this.placeHolder=""),this.label||(this.label=""),this.keyOfID||(this.keyOfID="ID"),this.disabled||(this.disabled=!1);const e=this.contentList.filter(i=>i[this.keyOfID]===this.selectedID);this.preSelectedObj=this.selectedID&&this.contentList&&this.keyOfID&&e.length>0?e[0]:void 0,this.firstLine||(this.firstLine="!!name>>"),this.searchInKeys||(this.searchInKeys="name"),this.searchText.subscribe(i=>{this.list=new k.y(n=>{let o;this.preSelectedObj&&i&&i.toLowerCase()===""+this.preSelectedObj[this.keyOfID]?o=e:""===i&&this.contentList?o=this.contentList.slice(0,this.contentList.length>5?5:this.contentList.length):this.contentList&&(o=this.contentList.filter(l=>{let s=!1;return this.searchInKeys&&this.searchInKeys.length>0?s=this.searchInKeys.split(",").filter(u=>l[u].toLowerCase().includes(i.toLowerCase())).length>0:l.name&&(s=l.name.toLowerCase().includes(i.toLowerCase())),s})),o&&o.length>0&&o.forEach(l=>{l.firstDisplayLine=this.processDisplayLine(l,this.firstLine),l.secondDisplayLine=this.processDisplayLine(l,this.secondLine)}),n.next(o)})}),this.searchText.next(this.preSelectedObj?""+this.selectedID:"")}ngOnChanges(){this.ngOnInit()}processDisplayLine(e,i){let n=i;if(n){const l=(i||"").match(/!![a-zA-z0-9]{0,}>>/gm)||[];l.length>0&&l.forEach(s=>{n=n.replace(s,e[s.substring(2,s.length-2)])})}return n}emitValue(e){this.selectedValue.emit(e)}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-select-with-search"]],inputs:{placeHolder:"placeHolder",label:"label",selectedID:"selectedID",keyOfID:"keyOfID",contentList:"contentList",searchInKeys:"searchInKeys",firstLine:"firstLine",secondLine:"secondLine",disabled:"disabled"},outputs:{selectedValue:"selectedValue"},features:[t.TTD],decls:5,vars:11,consts:[[3,"placeholder","label","ngModel","allowClear","disabled","valueChange"],[3,"ngModel","ngModelChange"],["style","height: -webkit-fill-available",3,"value",4,"ngFor","ngForOf"],[2,"height","-webkit-fill-available",3,"value"],[1,"py-2"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"mdb-select-2",0),t.NdJ("valueChange",function(o){return i.emitValue(o)}),t.TgZ(1,"mdb-select-filter",1),t.NdJ("ngModelChange",function(o){return i.searchText.next(o)}),t.ALo(2,"async"),t.qZA(),t.YNc(3,st,4,3,"mdb-select-option",2),t.ALo(4,"async"),t.qZA()),2&e&&(t.Q6J("placeholder",i.placeHolder)("label",i.label)("ngModel",i.preSelectedObj)("allowClear",!0)("disabled",i.disabled),t.xp6(1),t.Q6J("ngModel",t.lcZ(2,7,i.searchText)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(4,9,i.list)))},directives:[d.lPY,_.JJ,_.On,d.syH,c.sg,d.x8v],pipes:[c.Ov],styles:[""]}),a})();const _t=["agGrid"];function ct(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.label),t.xp6(1),t.hij("",e.name," ")}}let S=(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.rd=i,this.utility=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.user=this.AS.currentUserValue,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.dtList=this.rd.GetDates(),this.companyList=[],this.categoryList=[],this.category_id=8,this.property_id=-1,this.group_id="",this.company_id="-1",this.pList=[],this.dataList=[],this.start_date=this.dtList.tdate_1Y,this.end_date=this.dtList.tdate,this.chartType="bar",this.chartTitle="",this.chartDatasets=[],this.chartLabels=[],this.chartColors=[{backgroundColor:"rgba(105, 0, 132, .2)",borderColor:"rgba(200, 99, 132, .7)",borderWidth:2},{backgroundColor:"rgba(0, 137, 132, .2)",borderColor:"rgba(0, 10, 130, .7)",borderWidth:2}],this.chartOptions={responsive:!0},this.grid1Data=[],this.grid1Columns=[{headerName:"ID",field:"tx_id",width:100,sortable:!0,filter:"agNumberColumnFilter"},{headerName:"Company",field:"llc",width:100,sortable:!0,filter:!0,headerClass:"text_danger"},{headerName:"Group",field:"group",width:80,sortable:!0,filter:!0},{headerName:"Label",field:"label",sortable:!0,filter:!0},{headerName:"Date",field:"tdate",width:140,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Credit",field:"credit",width:120,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Debit",field:"debit",width:120,sortable:"true",cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Payee",field:"payee",sortable:"true",filter:!0},{headerName:"Description",field:"description",sortable:!0,filter:!0}],this.grid1Options={getContextMenuItems:this.getContextMenuItems,defaultColDef:{resizable:!0,sortable:!0,filter:!0}}}ngOnInit(){this.rd.companySubject.subscribe(e=>this.companyList=e),this.getProperties(),this.getCategories()}refreshTX(){let e={params:{category_id:this.category_id,start_date:this.start_date}};if(null!==this.end_date&&(e.params.end_date=this.end_date),this.property_id>0)e.params.property_id=this.property_id;else{if(null==this.company_id||""==this.company_id)return void this.toastr.error("You must select a Property or a Company");e.params.company_id=this.company_id}console.log("refreshTX:",e,this.property_id,this.company_id),this.REQ.get("ctr",{query:JSON.stringify(e)}).subscribe(i=>{this.toastr.success("Timeseries data request completed: ",i.message),this.dataList=i.data;let n=i.schema.fields;this.grid1Data=this.dataList,this.updateChart(this.category_id,n,this.dataList)},i=>{console.log(i),this.toastr.error("Timeseries data request failed:",i)})}getCategories(){this.REQ.get("c","").subscribe(e=>{this.categoryList=e.data,console.log("getCategories:",this.categoryList)},e=>{console.log(e)})}getProperties(){this.REQ.get("p","").subscribe(e=>{this.pList=e.data},e=>{console.log(e)})}onChangeCategory(e){console.log("onChangeCategory:",e),this.chartTitle=e.label,this.category_id=e.category_id}onChangeCO(e){this.property_id=-1}onChangeP(e){console.log("OnchangeP:",e),this.company_id="-1",this.property_id=e.property_id}updateChart(e,i,n){console.log("updateChart.4: ",i,n);var o=[],p=[];if(""==this.chartTitle)for(let x=0;x<this.categoryList.length;x++)this.categoryList[x].category_id==e&&(this.chartTitle=this.categoryList[x].label);let f=0;for(let x=0;x<n.length;x++)console.log("updateChart.LOOP.2: "+x+"="+n[x].credit),f=n[x].credit-n[x].debit,p.push(f),o.push(n[x].tdate);this.chartDatasets=[{data:p,label:this.chartTitle}],this.chartLabels=o}chartClicked(e){console.log("chartClicked:",e)}chartHovered(e){console.log("chartHovered:",e)}setSortingDynamically(e){}onGridReady(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi,console.log("Grid ready"),console.log(this.grid1Data);var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e){console.log("ModelUpdated"),e.api.sizeColumnsToFit()}onCellClicked(e){console.log(e),console.log("Click ["+e.column.colId+" , "+e.value+" ]"+e.data.property_id)}onCellDoubleClicked(e){console.log("Double Clicked"),console.log(e),console.log("Double Click ["+e.column.colId+" , "+e.value+" ]")}exportData(e){var o={suppressQuotes:!0,columnSeparator:",",customHeader:this.company_id+": Transaction report from "+this.start_date+" to "+this.end_date,customFooter:"Himalaya Capital"};"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv(o)):console.log("Exporting Excel")}getContextMenuItems(e){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(C.t),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-category"]],viewQuery:function(e,i){if(1&e&&t.Gf(_t,7),2&e){let n;t.iGM(n=t.CRH())&&(i.agGrid=n.first)}},decls:46,vars:25,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"container-fluid"],[1,"row"],[1,"col-lg-8","col-md-9","col-sm-12"],[1,"col-lg-6","col-md-6","col-sm-12"],[1,"md-form","mb-2"],["label","Category","keyOfID","category_id","firstLine","!!label>>","searchInKeys","label,name,type",3,"contentList","selectedID","selectedValue"],[1,"col-lg-3","col-md-3","col-sm-12"],["required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],["label","Company","id","coSelect","optionHeight","32",3,"ngModel","dropdownClass","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["label","Property","keyOfID","property_id","firstLine","!!label>> !!state>>","secondLine","!!city>> !!state>>","searchInKeys","label,state",3,"contentList","selectedID","selectedValue"],[1,"col-lg-4","col-md-3","col-sm-12","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-4"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","",3,"click"],[1,"fas","fa-sync"],[1,"fas","fa-download"],[1,"row","my-3"],[1,"col-lg-12","col-md-12","col-sm-12","text-right"],["mdbChart","",3,"chartType","datasets","height","labels","colors","options","legend","chartHover","chartClick"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","500px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._uU(5," Category"),t.qZA()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",5)(11,"div",7)(12,"div",8)(13,"app-select-with-search",9),t.NdJ("selectedValue",function(o){return i.onChangeCategory(o)}),t.qZA()()(),t.TgZ(14,"div",10)(15,"label"),t._uU(16,"From"),t.qZA(),t.TgZ(17,"mdb-date-picker",11,12),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()(),t.TgZ(19,"div",10)(20,"label"),t._uU(21,"To"),t.qZA(),t.TgZ(22,"mdb-date-picker",13,14),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()()(),t.TgZ(24,"div",5)(25,"div",7)(26,"div",8)(27,"mdb-select-2",15),t.NdJ("ngModelChange",function(o){return i.company_id=o})("change",function(o){return i.onChangeCO(o)}),t.TgZ(28,"mdb-select-option",16),t._uU(29,"All"),t.qZA(),t.YNc(30,ct,2,2,"mdb-select-option",17),t.qZA()()(),t.TgZ(31,"div",7)(32,"div",8)(33,"app-select-with-search",18),t.NdJ("selectedValue",function(o){return i.onChangeP(o)}),t.qZA()()()()(),t.TgZ(34,"div",19)(35,"div",20)(36,"button",21),t.NdJ("click",function(){return i.refreshTX()}),t._UZ(37,"i",22),t.qZA(),t.TgZ(38,"button",21),t.NdJ("click",function(){return i.exportData("CSV")}),t._UZ(39,"i",23),t.qZA()()()(),t.TgZ(40,"div",24)(41,"div",25)(42,"canvas",26),t.NdJ("chartHover",function(o){return i.chartHovered(o)})("chartClick",function(o){return i.chartClicked(o)}),t.qZA()()(),t.TgZ(43,"div",5)(44,"ag-grid-angular",27,28),t.NdJ("gridReady",function(o){return i.onGridReady(o)})("modelUpdated",function(o){return i.onModelUpdated(o)})("cellClicked",function(o){return i.onCellClicked(o)})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o)}),t.qZA()()()()()()),2&e&&(t.xp6(13),t.Q6J("contentList",i.categoryList)("selectedID",i.category_id),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(5),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(5),t.Q6J("ngModel",i.company_id)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("value","-1"),t.xp6(2),t.Q6J("ngForOf",i.companyList),t.xp6(3),t.Q6J("contentList",i.pList)("selectedID",i.property_id),t.xp6(9),t.Q6J("chartType",i.chartType)("datasets",i.chartDatasets)("height",200)("labels",i.chartLabels)("colors",i.chartColors)("options",i.chartOptions)("legend",!0),t.xp6(2),t.Q6J("columnDefs",i.grid1Columns)("rowData",i.grid1Data))},directives:[d.gRC,D,d.JNR,_.Q7,_.JJ,_.On,d.lPY,d.x8v,c.sg,d.mTE,d.b6v,d.jhD,v.N8],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transform:translateY(0)}hr.solidG[_ngcontent-%COMP%]{border:3px solid #faf345}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}}"]}),a})();var M=T(8911);function ut(a,r){if(1&a&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.tenant.balance)," ")}}function pt(a,r){if(1&a&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function ht(a,r){if(1&a&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.tenant.balance)," ")}}function gt(a,r){if(1&a&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function mt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"section",2)(2,"div",3)(3,"div",4)(4,"mdb-card",5)(5,"mdb-card-header",6)(6,"h3")(7,"a",7),t._UZ(8,"i",8),t.qZA(),t._uU(9," \xa0Vacancy Stats "),t.qZA()(),t.TgZ(10,"mdb-card-body"),t._UZ(11,"mdb-card-title"),t.TgZ(12,"ag-grid-angular",9,10),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"OO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"OL")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"OL")}),t.qZA()()()(),t.TgZ(14,"div",11)(15,"mdb-card",5)(16,"mdb-card-header",6)(17,"h3")(18,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenant","tenant_id",n.tenant.tenant_id)}),t._UZ(19,"i",13),t.qZA(),t._uU(20," \xa0Rent Overdue "),t.qZA()(),t.TgZ(21,"mdb-card-body"),t._UZ(22,"mdb-card-title"),t.TgZ(23,"ag-grid-angular",9,14),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"DELIQUENCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"DELIQUENCY")}),t.qZA()()()(),t.TgZ(25,"div",11)(26,"mdb-card",5)(27,"mdb-card-header",6)(28,"div",3)(29,"div",15)(30,"h3")(31,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("property","property_id",n.tenant.property_id)}),t._UZ(32,"i",16),t.qZA(),t._uU(33," \xa0Vacancies "),t.qZA()()()(),t.TgZ(34,"mdb-card-body"),t._UZ(35,"mdb-card-title"),t.TgZ(36,"ag-grid-angular",9,14),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"VACANCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"VACANCY")}),t.qZA()()()(),t.TgZ(38,"div",11)(39,"mdb-card",5)(40,"mdb-card-header",6)(41,"h3")(42,"a",7),t._UZ(43,"i",8),t.qZA(),t._uU(44," \xa0Tenancy Due "),t.qZA()(),t.TgZ(45,"mdb-card-body"),t._UZ(46,"mdb-card-title"),t.TgZ(47,"ag-grid-angular",9,17),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"TENANCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"TENANCY")}),t.qZA()()()(),t.TgZ(49,"div",18)(50,"mdb-card",5)(51,"mdb-card-header",6)(52,"h3")(53,"a",7),t._UZ(54,"mdb-icon",19),t.qZA(),t._uU(55," \xa0Data "),t.qZA()(),t.TgZ(56,"mdb-card-body")(57,"mdb-card-title")(58,"h5"),t._uU(59,"Current Balance\xa0 "),t.YNc(60,ut,3,3,"p",20),t.YNc(61,pt,3,3,"p",1),t.qZA()(),t.TgZ(62,"div")(63,"a",7),t._UZ(64,"mdb-icon",21),t._uU(65,"\xa0 "),t.qZA(),t._uU(66,"Expense"),t.qZA(),t.TgZ(67,"div")(68,"a",7),t._UZ(69,"mdb-icon",21),t._uU(70,"\xa0 "),t.qZA(),t._uU(71,"Deposit"),t.qZA(),t.TgZ(72,"div")(73,"a",7),t._UZ(74,"mdb-icon",21),t._uU(75,"\xa0 "),t.qZA(),t._uU(76,"Receivable"),t.qZA()(),t.TgZ(77,"mdb-card-footer")(78,"a",22),t._UZ(79,"mdb-icon",23),t._uU(80,"\xa0More "),t.qZA()()()(),t.TgZ(81,"div",24)(82,"mdb-card",5)(83,"mdb-card-header",6)(84,"h3")(85,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(86,"mdb-icon",25),t.qZA(),t._uU(87," \xa0Maintenance "),t.qZA()(),t.TgZ(88,"mdb-card-body"),t._UZ(89,"mdb-card-title"),t.TgZ(90,"ag-grid-angular",26,27),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"WO")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"WO")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"WO")}),t.qZA()()()(),t.TgZ(92,"div",18)(93,"mdb-card",5)(94,"mdb-card-header",6)(95,"h3")(96,"a",7),t._UZ(97,"mdb-icon",19),t.qZA(),t._uU(98," \xa0Financial "),t.qZA()(),t.TgZ(99,"mdb-card-body",28)(100,"mdb-card-title")(101,"h5"),t._uU(102,"Current Balance\xa0 "),t.YNc(103,ht,3,3,"p",20),t.YNc(104,gt,3,3,"p",1),t.qZA()(),t.TgZ(105,"div",29)(106,"p",30)(107,"a",7),t._UZ(108,"mdb-icon",21),t._uU(109,"\xa0 "),t.qZA(),t._uU(110," Cashflow "),t.qZA()(),t.TgZ(111,"div",29)(112,"p",30)(113,"a",7),t._UZ(114,"mdb-icon",21),t._uU(115,"\xa0 "),t.qZA(),t._uU(116," Company "),t.qZA()(),t.TgZ(117,"div",29)(118,"label",31),t._uU(119,"Payment Due"),t.qZA(),t.TgZ(120,"p",30),t._uU(121),t.ALo(122,"currency"),t.qZA()(),t.TgZ(123,"div",29)(124,"label",32),t._uU(125,"Last Payment"),t.qZA(),t.TgZ(126,"p",30),t._uU(127),t.ALo(128,"currency"),t.qZA()()(),t.TgZ(129,"mdb-card-footer",28)(130,"a",33),t._UZ(131,"mdb-icon",23),t._uU(132,"\xa0More "),t.qZA()()()(),t.TgZ(133,"div",18)(134,"mdb-card",5)(135,"mdb-card-header",6)(136,"h3")(137,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("payment","tenant_id",n.tenant.tenant_id)}),t._UZ(138,"mdb-icon",34),t.qZA(),t._uU(139," \xa0Pay "),t.qZA()(),t.TgZ(140,"mdb-card-body",28)(141,"div",35)(142,"span"),t._UZ(143,"img",36),t.qZA(),t.TgZ(144,"p",37),t._uU(145,"$HimalayaProperties"),t.qZA()(),t.TgZ(146,"div",35)(147,"span"),t._UZ(148,"img",38),t.qZA(),t.TgZ(149,"p",37),t._uU(150,"@Himalaya-Properties"),t.qZA()(),t.TgZ(151,"div",35)(152,"span"),t._UZ(153,"img",39),t.qZA(),t.TgZ(154,"p",37),t._uU(155,"payments@himalayaproperties.org"),t.qZA()()(),t.TgZ(156,"mdb-card-footer",28)(157,"a",33),t._UZ(158,"mdb-icon",23),t._uU(159,"\xa0More "),t.qZA()()()(),t.TgZ(160,"div",18)(161,"mdb-card",5)(162,"mdb-card-header",6)(163,"h3"),t._UZ(164,"mdb-icon",40),t._uU(165,"\xa0Management Office "),t.qZA()(),t.TgZ(166,"mdb-card-body")(167,"mdb-card-title")(168,"h5"),t._uU(169),t.qZA()(),t.TgZ(170,"div"),t._uU(171,"PO Box 396"),t.qZA(),t.TgZ(172,"div"),t._uU(173,"Princeton Junction NJ 08550"),t.qZA(),t.TgZ(174,"div"),t._UZ(175,"mdb-icon",41),t._uU(176,"\xa0"),t.TgZ(177,"a",7),t._uU(178),t.qZA()(),t.TgZ(179,"div"),t._UZ(180,"mdb-icon",42),t._uU(181,"\xa0646-780-5001 "),t.qZA(),t.TgZ(182,"div"),t._UZ(183,"mdb-icon",43),t._uU(184,"\xa0646-780-5001 "),t.qZA()(),t.TgZ(185,"mdb-card-footer")(186,"div",44),t._uU(187,"Hours: M-F 9am-5pm, Sat 9am-12pm"),t.qZA()()()()()()()}if(2&a){const e=t.oxw();t.xp6(7),t.MGl("href","",e.urlPrefix,"report?report=RENTROLL",t.LSH),t.xp6(5),t.Q6J("columnDefs",e.gridOLColumns)("rowData",e.gridOLData),t.xp6(11),t.Q6J("columnDefs",e.gridRDColumns)("rowData",e.gridRDData),t.xp6(13),t.Q6J("columnDefs",e.gridVACColumns)("rowData",e.gridVACData),t.xp6(6),t.MGl("href","",e.urlPrefix,"report?report=RENTROLL",t.LSH),t.xp6(5),t.Q6J("columnDefs",e.gridTCColumns)("rowData",e.gridTCData),t.xp6(6),t.MGl("href","",e.urlPrefix,"tx",t.LSH),t.xp6(7),t.Q6J("ngIf",e.tenant.balance<0),t.xp6(1),t.Q6J("ngIf",e.tenant.balance>=0),t.xp6(2),t.MGl("href","",e.urlPrefix,"dm?report=1",t.LSH),t.xp6(5),t.MGl("href","",e.urlPrefix,"dm?report=2",t.LSH),t.xp6(5),t.MGl("href","",e.urlPrefix,"dm?report=3",t.LSH),t.xp6(5),t.MGl("routerLink","",e.urlPrefix,"tx"),t.xp6(12),t.Q6J("columnDefs",e.gridWOColumns)("rowData",e.gridWOData),t.xp6(6),t.MGl("href","",e.urlPrefix,"cashflow",t.LSH),t.xp6(7),t.Q6J("ngIf",e.tenant.balance<0),t.xp6(1),t.Q6J("ngIf",e.tenant.balance>=0),t.xp6(3),t.MGl("href","",e.urlPrefix,"cashflow",t.LSH),t.xp6(6),t.MGl("href","",e.urlPrefix,"company",t.LSH),t.xp6(8),t.AsE("",t.lcZ(122,33,e.tenant.payment_due),"\xa0on\xa0",e.payment_due_date,""),t.xp6(6),t.AsE("",t.lcZ(128,35,e.tenant.last_payment),"\xa0on\xa0",e.last_payment_date,""),t.xp6(3),t.MGl("href","",e.urlPrefix,"cashflow",t.LSH),t.xp6(27),t.MGl("href","",e.urlPrefix,"payment",t.LSH),t.xp6(12),t.Oqu(e.tenant.company),t.xp6(8),t.MGl("href","mailto:",e.support_email,"",t.LSH),t.xp6(1),t.Oqu(e.support_email)}}function ft(a,r){if(1&a&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function bt(a,r){if(1&a&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function yt(a,r){if(1&a&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function Ct(a,r){if(1&a&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function Tt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"section",2)(2,"div",3)(3,"div",4)(4,"mdb-card",5)(5,"mdb-card-header",6)(6,"h3")(7,"a",7),t._UZ(8,"i",8),t.qZA(),t._uU(9," \xa0Vacancy Stats "),t.qZA()(),t.TgZ(10,"mdb-card-body"),t._UZ(11,"mdb-card-title"),t.TgZ(12,"ag-grid-angular",9,10),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"OO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"OL")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"OL")}),t.qZA()()()(),t.TgZ(14,"div",4)(15,"mdb-card",5)(16,"mdb-card-header",6)(17,"h3")(18,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenant","tenant_id",n.tenant.tenant_id)}),t._UZ(19,"i",13),t.qZA(),t._uU(20,"\xa0Rent Overdue "),t.qZA()(),t.TgZ(21,"mdb-card-body"),t._UZ(22,"mdb-card-title"),t.TgZ(23,"ag-grid-angular",9,14),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"DELIQUENCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"DELIQUENCY")}),t.qZA()()()(),t.TgZ(25,"div",4)(26,"mdb-card",5)(27,"mdb-card-header",6)(28,"h3")(29,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("property","property_id",n.tenant.property_id)}),t._UZ(30,"i",16),t.qZA(),t._uU(31,"\xa0Vacancies "),t.qZA()(),t.TgZ(32,"mdb-card-body"),t._UZ(33,"mdb-card-title"),t.TgZ(34,"ag-grid-angular",9,14),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"VACANCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"VACANCY")}),t.qZA()()()(),t.TgZ(36,"div",4)(37,"mdb-card",5)(38,"mdb-card-header",6)(39,"h3")(40,"a",7),t._UZ(41,"i",8),t.qZA(),t._uU(42," \xa0Tenancy Due "),t.qZA()(),t.TgZ(43,"mdb-card-body"),t._UZ(44,"mdb-card-title"),t.TgZ(45,"ag-grid-angular",9,17),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"TENANCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"TENANCY")}),t.qZA()()()(),t.TgZ(47,"div",45)(48,"mdb-card",5)(49,"mdb-card-header",6)(50,"h3")(51,"a",7),t._UZ(52,"mdb-icon",19),t.qZA(),t._uU(53," \xa0Data "),t.qZA()(),t.TgZ(54,"mdb-card-body")(55,"mdb-card-title")(56,"h5"),t._uU(57,"Current Balance\xa0"),t.YNc(58,ft,3,3,"p",20),t.YNc(59,bt,3,3,"p",1),t.qZA()(),t.TgZ(60,"div")(61,"a",7),t._UZ(62,"mdb-icon",21),t._uU(63,"\xa0 "),t.qZA(),t._uU(64,"Expense"),t.qZA(),t.TgZ(65,"div")(66,"a",7),t._UZ(67,"mdb-icon",21),t._uU(68,"\xa0 "),t.qZA(),t._uU(69,"Deposit"),t.qZA(),t.TgZ(70,"div")(71,"a",7),t._UZ(72,"mdb-icon",21),t._uU(73,"\xa0 "),t.qZA(),t._uU(74,"Receivable"),t.qZA()(),t.TgZ(75,"mdb-card-footer")(76,"a",22),t._UZ(77,"mdb-icon",23),t._uU(78,"\xa0More "),t.qZA()()()(),t.TgZ(79,"div",46)(80,"mdb-card",5)(81,"mdb-card-header",6)(82,"h3")(83,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(84,"mdb-icon",25),t.qZA(),t._uU(85," \xa0Maintenance "),t.qZA()(),t.TgZ(86,"mdb-card-body"),t._UZ(87,"mdb-card-title"),t.TgZ(88,"ag-grid-angular",47,27),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"WO")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"WO")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"WO")}),t.qZA()()()(),t.TgZ(90,"div",45)(91,"mdb-card",5)(92,"mdb-card-header",6)(93,"h3")(94,"a",7),t._UZ(95,"mdb-icon",19),t.qZA(),t._uU(96," \xa0Financial "),t.qZA()(),t.TgZ(97,"mdb-card-body")(98,"mdb-card-title")(99,"h5"),t._uU(100,"Current Balance\xa0"),t.YNc(101,yt,3,3,"p",20),t.YNc(102,Ct,3,3,"p",1),t.qZA()(),t.TgZ(103,"div")(104,"a",7),t._UZ(105,"mdb-icon",21),t._uU(106,"\xa0 "),t.qZA(),t._uU(107,"Cashflow"),t.qZA(),t.TgZ(108,"div")(109,"a",7),t._UZ(110,"mdb-icon",21),t._uU(111,"\xa0 "),t.qZA(),t._uU(112,"Company"),t.qZA(),t.TgZ(113,"div",31),t._uU(114,"Payment Due"),t.qZA(),t.TgZ(115,"div"),t._uU(116),t.ALo(117,"currency"),t.qZA(),t.TgZ(118,"div",32),t._uU(119,"Last Payment"),t.qZA(),t.TgZ(120,"div"),t._uU(121),t.ALo(122,"currency"),t.qZA()(),t.TgZ(123,"mdb-card-footer")(124,"a",48),t._UZ(125,"mdb-icon",23),t._uU(126,"\xa0More "),t.qZA()()()(),t.TgZ(127,"div",45)(128,"mdb-card",5)(129,"mdb-card-header",6)(130,"h3")(131,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("payment","tenant_id",n.tenant.tenant_id)}),t._UZ(132,"mdb-icon",34),t.qZA(),t._uU(133," \xa0Pay "),t.qZA()(),t.TgZ(134,"mdb-card-body"),t._UZ(135,"mdb-card-title"),t.TgZ(136,"div"),t._UZ(137,"img",36),t.qZA(),t.TgZ(138,"div"),t._uU(139,"$HimalayaProperties"),t.qZA(),t.TgZ(140,"div"),t._UZ(141,"img",38),t.qZA(),t.TgZ(142,"div"),t._uU(143,"@Himalaya-Properties"),t.qZA(),t.TgZ(144,"div"),t._UZ(145,"img",39),t.qZA(),t.TgZ(146,"div"),t._uU(147,"payments@himalayaproperties.org"),t.qZA()(),t.TgZ(148,"mdb-card-footer")(149,"a",48),t._UZ(150,"mdb-icon",23),t._uU(151," \xa0More "),t.qZA()()()(),t.TgZ(152,"div",45)(153,"mdb-card",5)(154,"mdb-card-header",6)(155,"h3"),t._UZ(156,"mdb-icon",40),t._uU(157," \xa0Management Office "),t.qZA()(),t.TgZ(158,"mdb-card-body")(159,"mdb-card-title")(160,"h5"),t._uU(161),t.qZA()(),t.TgZ(162,"div"),t._uU(163,"PO Box 396"),t.qZA(),t.TgZ(164,"div"),t._uU(165,"Princeton Junction NJ 08550"),t.qZA(),t.TgZ(166,"div"),t._UZ(167,"mdb-icon",41),t._uU(168,"\xa0"),t.TgZ(169,"a",7),t._uU(170),t.qZA()(),t.TgZ(171,"div"),t._UZ(172,"mdb-icon",42),t._uU(173,"\xa0646-780-5001 "),t.qZA(),t.TgZ(174,"div"),t._UZ(175,"mdb-icon",43),t._uU(176,"\xa0646-780-5001 "),t.qZA()(),t.TgZ(177,"mdb-card-footer")(178,"div",44),t._uU(179,"Hours: M-F 9am-5pm, Sat 9am-12pm"),t.qZA()()()()()()()}if(2&a){const e=t.oxw();t.xp6(7),t.MGl("href","",e.urlPrefix,"report?report=RENTROLL",t.LSH),t.xp6(5),t.Q6J("columnDefs",e.gridOLColumns)("rowData",e.gridOLData),t.xp6(11),t.Q6J("columnDefs",e.gridRDColumns)("rowData",e.gridRDData),t.xp6(11),t.Q6J("columnDefs",e.gridVACColumns)("rowData",e.gridVACData),t.xp6(6),t.MGl("href","",e.urlPrefix,"report?report=RENTROLL",t.LSH),t.xp6(5),t.Q6J("columnDefs",e.gridTCColumns)("rowData",e.gridTCData),t.xp6(6),t.MGl("href","",e.urlPrefix,"tx",t.LSH),t.xp6(7),t.Q6J("ngIf",e.tenant.balance<0),t.xp6(1),t.Q6J("ngIf",e.tenant.balance>=0),t.xp6(2),t.MGl("href","",e.urlPrefix,"dm?report=1",t.LSH),t.xp6(5),t.MGl("href","",e.urlPrefix,"dm?report=2",t.LSH),t.xp6(5),t.MGl("href","",e.urlPrefix,"dm?report=3",t.LSH),t.xp6(5),t.MGl("routerLink","",e.urlPrefix,"tx"),t.xp6(12),t.Q6J("columnDefs",e.gridWOColumns)("rowData",e.gridWOData),t.xp6(6),t.MGl("href","",e.urlPrefix,"cashflow",t.LSH),t.xp6(7),t.Q6J("ngIf",e.tenant.balance<0),t.xp6(1),t.Q6J("ngIf",e.tenant.balance>=0),t.xp6(2),t.MGl("href","",e.urlPrefix,"cashflow",t.LSH),t.xp6(5),t.MGl("href","",e.urlPrefix,"company",t.LSH),t.xp6(7),t.AsE("",t.lcZ(117,33,e.tenant.payment_due),"\xa0on\xa0",e.payment_due_date,""),t.xp6(5),t.AsE("",t.lcZ(122,35,e.tenant.last_payment),"\xa0on\xa0",e.last_payment_date,""),t.xp6(3),t.MGl("href","",e.urlPrefix,"cashflow",t.LSH),t.xp6(25),t.MGl("href","",e.urlPrefix,"payment",t.LSH),t.xp6(12),t.Oqu(e.tenant.company),t.xp6(8),t.MGl("href","mailto:",e.support_email,"",t.LSH),t.xp6(1),t.Oqu(e.support_email)}}function Zt(a,r){if(1&a&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function vt(a,r){if(1&a&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function xt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"section",2)(2,"div",3)(3,"div",11)(4,"mdb-card",5)(5,"mdb-card-header",6)(6,"h3")(7,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("property","property_id",n.tenant.property_id)}),t._UZ(8,"i",16),t.qZA(),t._uU(9,"\xa0Vacancies "),t.qZA()(),t.TgZ(10,"mdb-card-body"),t._UZ(11,"mdb-card-title"),t.TgZ(12,"ag-grid-angular",9,14),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"VACANCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"VACANCY")}),t.qZA()()()(),t.TgZ(14,"div",11)(15,"mdb-card",5)(16,"mdb-card-header",6)(17,"h3")(18,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenant","tenant_id",n.tenant.tenant_id)}),t._UZ(19,"i",13),t.qZA(),t._uU(20," \xa0Rent Overdue "),t.qZA()(),t.TgZ(21,"mdb-card-body"),t._UZ(22,"mdb-card-title"),t.TgZ(23,"ag-grid-angular",9,14),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"DELIQUENCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"DELIQUENCY")}),t.qZA()()()(),t.TgZ(25,"div",24)(26,"mdb-card",5)(27,"mdb-card-header",6)(28,"h3")(29,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(30,"mdb-icon",25),t.qZA(),t._uU(31," \xa0Maintenance "),t.qZA()(),t.TgZ(32,"mdb-card-body"),t._UZ(33,"mdb-card-title"),t.TgZ(34,"ag-grid-angular",49,27),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"WO")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"WO")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"WO")}),t.qZA()()()(),t.TgZ(36,"div",18)(37,"mdb-card",5)(38,"mdb-card-header",6)(39,"h3")(40,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(41,"mdb-icon",25),t.qZA(),t._uU(42,"\xa0Maintenance"),t.qZA()(),t.TgZ(43,"mdb-card-body")(44,"mdb-card-title")(45,"h5")(46,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(47,"mdb-icon",50),t._uU(48,"\xa0Online "),t.qZA()()(),t.TgZ(49,"div"),t._UZ(50,"mdb-icon",41),t._uU(51,"\xa0"),t.TgZ(52,"a",7),t._uU(53),t.qZA()(),t.TgZ(54,"div"),t._UZ(55,"mdb-icon",42),t._uU(56,"\xa0646-780-5001 "),t.qZA(),t.TgZ(57,"div"),t._UZ(58,"mdb-icon",43),t._uU(59,"\xa0646-780-5001 "),t.qZA(),t.TgZ(60,"div",31),t._uU(61,"Emergency"),t.qZA(),t.TgZ(62,"div"),t._uU(63),t.qZA(),t.TgZ(64,"div"),t._uU(65),t.qZA()(),t.TgZ(66,"mdb-card-footer")(67,"a",51),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wom","tenant_id",n.tenant_id)}),t._UZ(68,"mdb-icon",23),t._uU(69,"\xa0More "),t.qZA()()()(),t.TgZ(70,"div",24)(71,"mdb-card",5)(72,"mdb-card-header",6)(73,"h3")(74,"a",7),t._UZ(75,"i",8),t.qZA(),t._uU(76," \xa0Tenancy Due "),t.qZA()(),t.TgZ(77,"mdb-card-body"),t._UZ(78,"mdb-card-title"),t.TgZ(79,"ag-grid-angular",9,17),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"TENANCY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"TENANCY")}),t.qZA()()()(),t.TgZ(81,"div",18)(82,"mdb-card",5)(83,"mdb-card-header",6)(84,"h3")(85,"a",7),t._UZ(86,"mdb-icon",19),t.qZA(),t._uU(87,"\xa0Data"),t.qZA()(),t.TgZ(88,"mdb-card-body")(89,"mdb-card-title")(90,"h5"),t._uU(91,"Current Balance\xa0"),t.YNc(92,Zt,3,3,"p",20),t.YNc(93,vt,3,3,"p",1),t.qZA()(),t.TgZ(94,"div")(95,"a",7),t._UZ(96,"mdb-icon",21),t._uU(97,"\xa0 "),t.qZA(),t._uU(98,"Expense"),t.qZA(),t.TgZ(99,"div")(100,"a",7),t._UZ(101,"mdb-icon",21),t._uU(102,"\xa0 "),t.qZA(),t._uU(103,"Deposit"),t.qZA(),t.TgZ(104,"div")(105,"a",7),t._UZ(106,"mdb-icon",21),t._uU(107,"\xa0 "),t.qZA(),t._uU(108,"Receivable"),t.qZA()(),t.TgZ(109,"mdb-card-footer")(110,"a",22),t._UZ(111,"mdb-icon",23),t._uU(112,"\xa0More "),t.qZA()()()(),t.TgZ(113,"div",18)(114,"mdb-card",5)(115,"mdb-card-header",6)(116,"h3"),t._UZ(117,"mdb-icon",40),t._uU(118,"\xa0Management Office "),t.qZA()(),t.TgZ(119,"mdb-card-body")(120,"mdb-card-title")(121,"h5"),t._uU(122),t.qZA()(),t.TgZ(123,"div"),t._uU(124,"PO Box 396"),t.qZA(),t.TgZ(125,"div"),t._uU(126,"Princeton Junction NJ 08550"),t.qZA(),t.TgZ(127,"div"),t._UZ(128,"mdb-icon",41),t._uU(129,"\xa0"),t.TgZ(130,"a",7),t._uU(131),t.qZA()(),t.TgZ(132,"div"),t._UZ(133,"mdb-icon",42),t._uU(134,"\xa0646-780-5001 "),t.qZA(),t.TgZ(135,"div"),t._UZ(136,"mdb-icon",43),t._uU(137,"\xa0646-780-5001 "),t.qZA()(),t.TgZ(138,"mdb-card-footer")(139,"div"),t._uU(140,"Hours: M-F 9am-5pm, Sat 9am-12pm"),t.qZA()()()()()()()}if(2&a){const e=t.oxw();t.xp6(12),t.Q6J("columnDefs",e.gridVACColumns)("rowData",e.gridVACData),t.xp6(11),t.Q6J("columnDefs",e.gridRDColumns)("rowData",e.gridRDData),t.xp6(11),t.Q6J("columnDefs",e.gridWOColumns)("rowData",e.gridWOData),t.xp6(18),t.XOb("href","mailto:",e.support_email,"?subject=Maintenance required at ",e.tenant.label,"&body=My name is ",e.tenant.first_name," ",e.tenant.last_name,", I am a tenant at ",e.tenant.label," and need help with ",t.LSH),t.xp6(1),t.Oqu(e.support_email),t.xp6(10),t.Oqu(e.support_name),t.xp6(2),t.Oqu(e.support_phone),t.xp6(9),t.MGl("href","",e.urlPrefix,"report?report=RENTROLL",t.LSH),t.xp6(5),t.Q6J("columnDefs",e.gridTCColumns)("rowData",e.gridTCData),t.xp6(6),t.MGl("href","",e.urlPrefix,"tx",t.LSH),t.xp6(7),t.Q6J("ngIf",e.tenant.balance<0),t.xp6(1),t.Q6J("ngIf",e.tenant.balance>=0),t.xp6(2),t.MGl("href","",e.urlPrefix,"dm?report=1",t.LSH),t.xp6(5),t.MGl("href","",e.urlPrefix,"dm?report=2",t.LSH),t.xp6(5),t.MGl("href","",e.urlPrefix,"dm?report=3",t.LSH),t.xp6(5),t.MGl("routerLink","",e.urlPrefix,"tx"),t.xp6(12),t.Oqu(e.tenant.company),t.xp6(8),t.MGl("href","mailto:",e.support_email,"",t.LSH),t.xp6(1),t.Oqu(e.support_email)}}function At(a,r){if(1&a&&(t.TgZ(0,"p",31),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function qt(a,r){if(1&a&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.balance))}}function Mt(a,r){1&a&&(t.TgZ(0,"div")(1,"div")(2,"a",66),t._uU(3,"PPL Electric"),t.qZA()(),t.TgZ(4,"div"),t._uU(5,"888-342-5775"),t.qZA(),t.TgZ(6,"div")(7,"a",67),t._uU(8,"UGI"),t.qZA()(),t.TgZ(9,"div"),t._uU(10,"800-276-2722"),t.qZA(),t.TgZ(11,"div")(12,"a",68),t._uU(13,"Sanitation - Trash Pick up"),t.qZA()(),t.TgZ(14,"div"),t._uU(15,"311"),t.qZA(),t.TgZ(16,"div")(17,"a",69),t._uU(18,"Harrisburg Police"),t.qZA()(),t.TgZ(19,"div"),t._uU(20,"717-558-6900"),t.qZA()())}function wt(a,r){1&a&&(t.TgZ(0,"div")(1,"div")(2,"a",70),t._uU(3," Jersey Central Power & Light "),t.qZA()(),t.TgZ(4,"div"),t._uU(5,"800-544-4877"),t.qZA(),t.TgZ(6,"div")(7,"a",71),t._uU(8,"PSE&G"),t.qZA()(),t.TgZ(9,"div"),t._uU(10,"800-436-7734"),t.qZA(),t.TgZ(11,"div")(12,"a",72),t._uU(13,"Sanitation - Trash Pick up"),t.qZA()(),t.TgZ(14,"div"),t._uU(15,"973-292-6670"),t.qZA(),t.TgZ(16,"div")(17,"a",73),t._uU(18,"Morristown Police"),t.qZA()(),t.TgZ(19,"div"),t._uU(20,"973-538-2200"),t.qZA()())}function Ut(a,r){1&a&&(t.TgZ(0,"div")(1,"div")(2,"a",74),t._uU(3,"BGMU"),t.qZA()(),t.TgZ(4,"div"),t._uU(5,"270-782-1200"),t.qZA(),t.TgZ(6,"div")(7,"a",75),t._uU(8,"Municipality"),t.qZA()(),t.TgZ(9,"div"),t._uU(10,"270-393-3000"),t.qZA(),t.TgZ(11,"div")(12,"a",76),t._uU(13,"Bowling Green Police"),t.qZA()(),t.TgZ(14,"div"),t._uU(15,"270-393-BGPD"),t.qZA()())}function Dt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"section",2)(2,"div",3)(3,"div",52)(4,"mdb-card",5)(5,"mdb-card-header",6)(6,"h3")(7,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenant","tenant_id",n.tenant.tenant_id)}),t._UZ(8,"i",13),t.qZA(),t._uU(9,"\xa0Me "),t.qZA()(),t.TgZ(10,"mdb-card-body",28)(11,"mdb-card-title")(12,"h5"),t._uU(13),t.qZA()(),t.TgZ(14,"div"),t._uU(15),t.qZA(),t.TgZ(16,"div"),t._uU(17),t.qZA(),t.TgZ(18,"div")(19,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("documents","tenant_id",n.tenant.tenant_id)}),t._UZ(20,"mdb-icon",53),t._uU(21,"\xa0My Documents "),t.qZA()()(),t.TgZ(22,"mdb-card-footer",28)(23,"a",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenant","tenant_id",n.tenant.tenant_id)}),t._UZ(24,"mdb-icon",23),t._uU(25,"\xa0More "),t.qZA()()()(),t.TgZ(26,"div",52)(27,"mdb-card",5)(28,"mdb-card-header",6)(29,"h3")(30,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenant","tenant_id",n.tenant.tenant_id)}),t._UZ(31,"mdb-icon",19),t.qZA(),t._uU(32,"\xa0Financial"),t.qZA()(),t.TgZ(33,"mdb-card-body",28)(34,"mdb-card-title")(35,"h5"),t._uU(36,"Current Balance\xa0"),t.YNc(37,At,3,3,"p",20),t.YNc(38,qt,3,3,"p",1),t.qZA()(),t.TgZ(39,"div",31),t._uU(40,"Payment Due"),t.qZA(),t.TgZ(41,"div"),t._uU(42),t.ALo(43,"currency"),t.qZA(),t.TgZ(44,"div",32),t._uU(45,"Last Payment"),t.qZA(),t.TgZ(46,"div"),t._uU(47),t.ALo(48,"currency"),t.qZA()(),t.TgZ(49,"mdb-card-footer",28)(50,"a",33),t._UZ(51,"mdb-icon",23),t._uU(52,"\xa0More "),t.qZA()()()(),t.TgZ(53,"div",52)(54,"mdb-card",5)(55,"mdb-card-header",6)(56,"h3"),t._UZ(57,"mdb-icon",34),t._uU(58,"\xa0Payments "),t.qZA()(),t.TgZ(59,"mdb-card-body",28)(60,"div",55)(61,"span",56),t._UZ(62,"img",39),t.qZA(),t.TgZ(63,"p",57),t._uU(64,"payments@himalayaproperties.org"),t.qZA()(),t.TgZ(65,"div",58)(66,"span",56),t._UZ(67,"img",36),t.qZA(),t.TgZ(68,"p",57),t._uU(69,"$HimalayaProperties"),t.qZA()(),t.TgZ(70,"div",59)(71,"span",56),t._UZ(72,"img",38),t.qZA(),t.TgZ(73,"p",57),t._uU(74,"@Himalaya-Properties"),t.qZA()()(),t.TgZ(75,"mdb-card-footer",28)(76,"a",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().getPaymentURL()}),t._UZ(77,"mdb-icon",23),t._uU(78,"\xa0Pay Online "),t.qZA()()()(),t.TgZ(79,"div",52)(80,"mdb-card",5)(81,"mdb-card-header",6)(82,"h3")(83,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("property","property_id",n.tenant.property_id)}),t._UZ(84,"i",16),t.qZA(),t._uU(85,"\xa0My Home"),t.qZA()(),t.TgZ(86,"mdb-card-body")(87,"mdb-card-title")(88,"h5"),t._uU(89),t.qZA()(),t.TgZ(90,"div"),t._uU(91),t.qZA(),t.TgZ(92,"div"),t._uU(93),t.qZA()(),t.TgZ(94,"mdb-card-footer")(95,"a",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("property","property_id",n.tenant.property_id)}),t._UZ(96,"mdb-icon",23),t._uU(97,"\xa0More "),t.qZA()()()(),t.TgZ(98,"div",52)(99,"mdb-card",5)(100,"mdb-card-header",6)(101,"h3")(102,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenancy","tenancy_id",n.tenant.tenancy_id)}),t._UZ(103,"i",8),t.qZA(),t._uU(104,"\xa0Tenancy"),t.qZA()(),t.TgZ(105,"mdb-card-body")(106,"mdb-card-title")(107,"h5"),t._uU(108),t.qZA()(),t.TgZ(109,"div")(110,"label"),t._uU(111,"Lease Start Date / End Date"),t.qZA()(),t.TgZ(112,"div"),t._uU(113),t._UZ(114,"mdb-icon",61),t._uU(115),t.qZA(),t.TgZ(116,"div")(117,"label"),t._uU(118,"Move In / Move Out"),t.qZA()(),t.TgZ(119,"div"),t._uU(120),t._UZ(121,"mdb-icon",61),t._uU(122),t.qZA(),t.TgZ(123,"div")(124,"label"),t._uU(125,"Rent / Security Deposit"),t.qZA()(),t.TgZ(126,"div",62),t._uU(127),t.ALo(128,"currency"),t.ALo(129,"currency"),t.qZA()(),t.TgZ(130,"mdb-card-footer")(131,"a",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenancy","tenancy_id",n.tenant.tenancy_id)}),t._UZ(132,"mdb-icon",23),t._uU(133,"\xa0More "),t.qZA()()()(),t.TgZ(134,"div",52)(135,"mdb-card",5)(136,"mdb-card-header",6)(137,"h3")(138,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(139,"mdb-icon",25),t.qZA(),t._uU(140,"\xa0Maintenance"),t.qZA()(),t.TgZ(141,"mdb-card-body")(142,"mdb-card-title")(143,"h5")(144,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(145,"mdb-icon",50),t._uU(146,"\xa0Online "),t.qZA()()(),t.TgZ(147,"div"),t._UZ(148,"mdb-icon",41),t._uU(149,"\xa0"),t.TgZ(150,"a",7),t._uU(151),t.qZA()(),t.TgZ(152,"div"),t._UZ(153,"mdb-icon",42),t._uU(154,"\xa0646-780-5001 "),t.qZA(),t.TgZ(155,"div"),t._UZ(156,"mdb-icon",43),t._uU(157,"\xa0646-780-5001 "),t.qZA(),t.TgZ(158,"div",31),t._uU(159,"Emergency"),t.qZA(),t.TgZ(160,"div"),t._uU(161),t.qZA(),t.TgZ(162,"div"),t._uU(163),t.qZA()(),t.TgZ(164,"mdb-card-footer")(165,"a",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wom","tenant_id",n.tenant_id)}),t._UZ(166,"mdb-icon",23),t._uU(167,"\xa0More "),t.qZA()()()(),t.TgZ(168,"div",52)(169,"mdb-card",5)(170,"mdb-card-header",6)(171,"h3"),t._UZ(172,"mdb-icon",40),t._uU(173,"\xa0Management Office "),t.qZA()(),t.TgZ(174,"mdb-card-body")(175,"mdb-card-title")(176,"h5"),t._uU(177),t.qZA()(),t.TgZ(178,"div"),t._uU(179,"PO Box 396"),t.qZA(),t.TgZ(180,"div"),t._uU(181,"Princeton Junction NJ 08550"),t.qZA(),t.TgZ(182,"div"),t._UZ(183,"mdb-icon",41),t._uU(184,"\xa0"),t.TgZ(185,"a",7),t._uU(186),t.qZA()(),t.TgZ(187,"div"),t._UZ(188,"mdb-icon",42),t._uU(189,"\xa0646-780-5001 "),t.qZA(),t.TgZ(190,"div"),t._UZ(191,"mdb-icon",43),t._uU(192,"\xa0646-780-5001 "),t.qZA()(),t.TgZ(193,"mdb-card-footer")(194,"div",63),t._uU(195,"Hours: M-F 9am-5pm, Sat 9am-12pm"),t.qZA()()()(),t.TgZ(196,"div",52)(197,"mdb-card",5)(198,"mdb-card-header",6)(199,"h3"),t._UZ(200,"mdb-icon",64),t._uU(201,"\xa0Important Numbers "),t.qZA()(),t.TgZ(202,"mdb-card-body"),t.YNc(203,Mt,21,0,"div",1),t.YNc(204,wt,21,0,"div",1),t.YNc(205,Ut,16,0,"div",1),t.qZA(),t.TgZ(206,"mdb-card-footer")(207,"div",65),t._uU(208,"Emergency: 911"),t.qZA()()()()()()()}if(2&a){const e=t.oxw();t.xp6(13),t.AsE("",e.tenant.first_name,"\xa0",e.tenant.last_name,""),t.xp6(2),t.Oqu(e.tenant.phone),t.xp6(2),t.Oqu(e.tenant.email),t.xp6(20),t.Q6J("ngIf",e.tenant.balance<0),t.xp6(1),t.Q6J("ngIf",e.tenant.balance>=0),t.xp6(4),t.AsE("",t.lcZ(43,37,e.tenant.payment_due),"\xa0on\xa0",e.payment_due_date,""),t.xp6(5),t.AsE("",t.lcZ(48,39,e.tenant.last_payment),"\xa0on\xa0",e.last_payment_date,""),t.xp6(3),t.MGl("href","",e.urlPrefix,"tx",t.LSH),t.xp6(39),t.Oqu(e.tenant.label2),t.xp6(2),t.Oqu(e.tenant.label),t.xp6(2),t.lnq("",e.tenant.city,"\xa0\xa0",e.tenant.state,"\xa0",e.tenant.zip,""),t.xp6(15),t.Oqu(e.tenancy_status),t.xp6(5),t.hij("",e.lease_start_date,"\xa0"),t.xp6(2),t.hij(" \xa0",e.lease_end_date,""),t.xp6(5),t.hij("",e.move_in_date,"\xa0"),t.xp6(2),t.hij(" \xa0",e.move_out_date,""),t.xp6(5),t.AsE("",t.lcZ(128,41,e.tenant.rent),"\xa0/\xa0",t.lcZ(129,43,e.tenant.deposit),""),t.xp6(23),t.XOb("href","mailto:",e.support_email,"?subject=Maintenance required at ",e.tenant.label,"&body=My name is ",e.tenant.first_name," ",e.tenant.last_name,", I am a tenant at ",e.tenant.label," and need help with ",t.LSH),t.xp6(1),t.Oqu(e.support_email),t.xp6(10),t.Oqu(e.support_name),t.xp6(2),t.Oqu(e.support_phone),t.xp6(14),t.Oqu(e.tenant.company),t.xp6(8),t.MGl("href","mailto:",e.support_email,"",t.LSH),t.xp6(1),t.Oqu(e.support_email),t.xp6(17),t.Q6J("ngIf","Harrisburg"===e.tenant.city),t.xp6(1),t.Q6J("ngIf","Morristown"===e.tenant.city),t.xp6(1),t.Q6J("ngIf","Bowling Green"===e.tenant.city)}}function Nt(a,r){if(1&a&&(t.TgZ(0,"div",87)(1,"div",88)(2,"label"),t._uU(3,"Company:"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",89)(6,"div",90)(7,"label"),t._uU(8,"Member Since:"),t.qZA(),t._uU(9),t.qZA(),t.TgZ(10,"div",90)(11,"label"),t._uU(12,"Equity:"),t.qZA(),t._uU(13),t.qZA()()()),2&a){const e=r.$implicit;t.xp6(4),t.hij("\xa0",e.legal_name," "),t.xp6(5),t.hij("\xa0",e.last_payment_date," "),t.xp6(4),t.hij("\xa0",e.equity," ")}}function Ot(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"section",2)(2,"div",3)(3,"div",18)(4,"mdb-card",5)(5,"mdb-card-header",6)(6,"h3"),t._UZ(7,"mdb-icon",77),t._uU(8,"\xa0Me "),t.qZA()(),t.TgZ(9,"mdb-card-body")(10,"mdb-card-title")(11,"h5"),t._uU(12),t.qZA()(),t.TgZ(13,"div"),t._uU(14),t.qZA(),t.TgZ(15,"div"),t._uU(16),t.qZA(),t.TgZ(17,"div"),t._uU(18),t.qZA(),t.TgZ(19,"div"),t._uU(20),t.qZA()(),t.TgZ(21,"mdb-card-footer")(22,"a",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("investor","investor_id",n.investor.investor_id)}),t._UZ(23,"mdb-icon",23),t._uU(24,"\xa0More "),t.qZA()()()(),t.TgZ(25,"div",18)(26,"mdb-card",5)(27,"mdb-card-header",6)(28,"h3"),t._UZ(29,"mdb-icon",19),t._uU(30,"\xa0My Financials "),t.qZA()(),t.TgZ(31,"mdb-card-body"),t.YNc(32,Nt,14,3,"div",78),t.qZA(),t.TgZ(33,"mdb-card-footer")(34,"a",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("cashflow","investor_id",n.investor.investor_id)}),t._UZ(35,"mdb-icon",23),t._uU(36,"\xa0More "),t.qZA()()()(),t.TgZ(37,"div",18)(38,"mdb-card",5)(39,"mdb-card-header",6)(40,"h3"),t._UZ(41,"mdb-icon",19),t._uU(42,"\xa0Quick Access "),t.qZA()(),t.TgZ(43,"mdb-card-body")(44,"a",79),t._uU(45," Ask Question "),t.qZA(),t.TgZ(46,"a",80),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("documents","investor_id",n.investor.investor_id)}),t._uU(47," Personal Documents "),t.qZA(),t.TgZ(48,"a",81),t._uU(49," Company Documents "),t.qZA(),t.TgZ(50,"a",82),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("cashflow","investor_id",n.investor.investor_id)}),t._uU(51," Cashflow "),t.qZA()(),t._UZ(52,"mdb-card-footer"),t.qZA()()(),t.TgZ(53,"div",3)(54,"div",83)(55,"mdb-card",5)(56,"mdb-card-header",6)(57,"h3"),t._uU(58," Assets of Aug 13 2022 "),t.qZA()(),t.TgZ(59,"mdb-card-body")(60,"div",84)(61,"ag-grid-angular",85,86),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"TX")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"Assets")}),t.qZA()()()()()()()()}if(2&a){const e=t.oxw();t.xp6(12),t.Oqu(e.investor.name),t.xp6(2),t.Oqu(e.investor.phone),t.xp6(2),t.Oqu(e.investor.email),t.xp6(2),t.AsE("",e.investor.address1,"\xa0",e.investor.address2,""),t.xp6(2),t.lnq("",e.investor.city,"\xa0\xa0",e.investor.state,"\xa0",e.investor.zip,""),t.xp6(12),t.Q6J("ngForOf",e.iFinancials),t.xp6(12),t.MGl("routerLink","",e.urlPrefix,"/contact"),t.xp6(17),t.Q6J("columnDefs",e.gridAssetsColumns)("rowData",e.gridAssetsData)}}function Pt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"section",2)(2,"div",3)(3,"div",91)(4,"mdb-card",5)(5,"mdb-card-header",6)(6,"h3"),t._UZ(7,"mdb-icon",25),t._uU(8,"\xa0Maintenance "),t.qZA()(),t.TgZ(9,"mdb-card-body"),t._UZ(10,"mdb-card-title"),t.TgZ(11,"ag-grid-angular",92,27),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"WO")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"WO")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"WO")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"WO")}),t.qZA()()()(),t.TgZ(13,"div",45)(14,"mdb-card",5)(15,"mdb-card-header",6)(16,"h3")(17,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(18,"mdb-icon",25),t.qZA(),t._uU(19,"\xa0My Maintenance"),t.qZA()(),t.TgZ(20,"mdb-card-body")(21,"mdb-card-title")(22,"h5")(23,"a",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","property_id",n.tenant.property_id)}),t._UZ(24,"mdb-icon",50),t._uU(25,"\xa0Online "),t.qZA()()(),t.TgZ(26,"div"),t._UZ(27,"mdb-icon",41),t._uU(28,"\xa0"),t.TgZ(29,"a",7),t._uU(30),t.qZA()(),t.TgZ(31,"div"),t._UZ(32,"mdb-icon",42),t._uU(33,"\xa0646-780-5001 "),t.qZA(),t.TgZ(34,"div"),t._UZ(35,"mdb-icon",43),t._uU(36,"\xa0646-780-5001 "),t.qZA(),t.TgZ(37,"div",31),t._uU(38,"Emergency"),t.qZA(),t.TgZ(39,"div"),t._uU(40),t.qZA(),t.TgZ(41,"div"),t._uU(42),t.qZA()(),t.TgZ(43,"mdb-card-footer")(44,"a",51),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wom","tenant_id",n.tenant_id)}),t._UZ(45,"mdb-icon",23),t._uU(46,"\xa0More "),t.qZA()()()(),t.TgZ(47,"div",45)(48,"mdb-card",5)(49,"mdb-card-header",6)(50,"h3"),t._UZ(51,"mdb-icon",40),t._uU(52,"\xa0Management Office "),t.qZA()(),t.TgZ(53,"mdb-card-body")(54,"mdb-card-title")(55,"h5"),t._uU(56),t.qZA()(),t.TgZ(57,"div"),t._uU(58,"PO Box 396"),t.qZA(),t.TgZ(59,"div"),t._uU(60,"Princeton Junction NJ 08550"),t.qZA(),t.TgZ(61,"div"),t._UZ(62,"mdb-icon",41),t._uU(63,"\xa0"),t.TgZ(64,"a",7),t._uU(65),t.qZA()(),t.TgZ(66,"div"),t._UZ(67,"mdb-icon",42),t._uU(68,"\xa0646-780-5001 "),t.qZA(),t.TgZ(69,"div"),t._UZ(70,"mdb-icon",43),t._uU(71,"\xa0646-780-5001 "),t.qZA()(),t.TgZ(72,"mdb-card-footer")(73,"div"),t._uU(74,"Hours: M-F 9am-5pm, Sat 9am-12pm"),t.qZA()()()()()()()}if(2&a){const e=t.oxw();t.xp6(11),t.Q6J("columnDefs",e.gridWOColumns)("rowData",e.gridWOData),t.xp6(18),t.XOb("href","mailto:",e.support_email,"?subject=Maintenance required at ",e.tenant.label,"&body=My name is ",e.tenant.first_name," ",e.tenant.last_name,", I am a tenant at ",e.tenant.label," and need help with ",t.LSH),t.xp6(1),t.Oqu(e.support_email),t.xp6(10),t.Oqu(e.support_name),t.xp6(2),t.Oqu(e.support_phone),t.xp6(14),t.Oqu(e.tenant.company),t.xp6(8),t.MGl("href","mailto:",e.support_email,"",t.LSH),t.xp6(1),t.Oqu(e.support_email)}}let kt=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.REQ=e,this.rd=i,this.utility=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.user=this.AS.currentUserValue,this.urlPrefix="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.view="Tenant",this.tenant_id=-1,this.pageTitle="Dashboard",this.investor={},this.tenant={},this.tenancy_status="Active",this.vendor_id=-1,this.iFinancials=[],this.pList=[],this.companyList=this.rd.GetCompanies(),this.dtList=this.rd.GetDates(),this.start_date=this.dtList["1Y"],this.end_date=this.dtList.tdate,this.lease_start_date="",this.lease_end_date="",this.move_in_date="",this.move_out_date="",this.payment_due_date="",this.last_payment_date="",this.support_name="Bedabati",this.support_phone="646-780-5001",this.support_address="1015 Shive Lane Bowling Green, KY 42103",this.support_email="support@himalayaproperties.org",this.company_address="PO Box 396 Princeton Junction NJ 08550",this.chartOptions={},this.gridULColumns=[],this.gridULData=[],this.userList=this.rd.GetUsers(0),this.priorityList=this.rd.GetWOPriorities(),this.wosList=this.rd.GetWOStatus(),this.gridOptions={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!0,defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.gridTCOptions=this.gridOptions,this.gridMFColumns=[{headerName:"Company",width:150,field:"legal_name",filter:!0},{headerName:"Equity",width:100,field:"equity",filter:!0},{headerName:"Since",width:150,field:"last_payment_date",filter:!0}],this.gridAssetsColumns=[{headerName:"ID",width:70,field:"tranche_id",filter:!0},{headerName:"Company",width:200,field:"label",filter:!0},{headerName:"Property",width:200,field:"tranche_name",filter:!0},{headerName:"Type(tranche_type)",width:180,field:"",filter:!0},{headerName:"Description",width:200,field:"",filter:!0},{headerName:"Market Value",width:200,field:"current_price",filter:!0},{headerName:"Debt(current_debt)",width:160,field:"",filter:!0}],this.gridTCColumns=[{headerName:"Property",field:"label",sortable:!0,filter:!0},{headerName:"Tenant",field:"tenant_name",sortable:!0,cellStyle:{"white-space":"normal"},filter:!0},{headerName:"Lease Ends",field:"end_date",sort:"ASCE",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Move Out",field:"move_out",sort:"ASCE",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Rent",field:"rent",sortable:"true",cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"property_id",field:"property_id",hide:!0},{headerName:"tenant_id",field:"tenant_id",hide:!0},{headerName:"tenancy_id",field:"tenancy_id",hide:!0}],this.gridTCData=[],this.gridMFData=[],this.gridAssetsData=[],this.gridOLOptions=this.gridOptions,this.gridOLColumns=[{headerName:"Property",field:"tranche_name",resizable:!0},{headerName:"Ready",field:"rr_units",resizable:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Occupied",field:"oc_units",resizable:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Other",field:"ot_units",resizable:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Total",field:"to_units",resizable:!0,cellStyle:this.utility.agNumberCellStyle},{headerName:"Occupancy",field:"occupancy",resizable:!0,cellStyle:this.agUnitPCellStyle,valueFormatter:this.utility.agPercentFormatter}],this.gridOLData=[],this.gridVACOptions=this.gridOptions,this.gridVACColumns=[{headerName:"Property",field:"label",sortable:!0,filter:!0},{headerName:"City State",field:"address2",sortable:!0,filter:!0},{headerName:"Status",field:"p_status",sort:"ASCE"},{headerName:"Features",field:"features",sortable:!0,filter:!0},{headerName:"Rent",field:"market_rent",sortable:"true",cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"property_id",field:"property_id",hide:!0}],this.gridVACData=[],this.gridRDOptions=this.gridOptions,this.gridRDColumns=[{headerName:"Property",field:"label",sortable:!0,filter:!0},{headerName:"Tenant",field:"tenant_name",sortable:!0,cellStyle:{"white-space":"normal"},filter:!0},{headerName:"Balance",field:"balance",sortable:"true",cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Last Payment",field:"last_payment_date",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"property_id",field:"property_id",hide:!0},{headerName:"tenant_id",field:"tenant_id",hide:!0},{headerName:"tenancy_id",field:"tenancy_id",hide:!0}],this.gridRDData=[],this.gridWOData=[],this.gridWOOptions=this.gridOptions,this.gridWOColumns=[{headerName:"ID",width:70,field:"wo_id",filter:"agNumberColumnFilter"},{headerName:"Created",field:"tdate",sortable:!0,sort:"desc",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Label",field:"label"},{headerName:"Tenant",field:"contact_name"},{headerName:"Title",field:"title"},{headerName:"Priority",width:130,field:"priority",cellStyle:this.woPriorityStyle},{headerName:"Status",width:130,field:"status",cellStyle:this.woStatusStyle},{headerName:"Updated",field:"updated",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer}]}ngOnInit(){console.log("dashboard.components.user:",this.user,this.router),this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.view=this.user.type,this.getProperties(),this.getAllTranche(""),"Admin"===this.user.type||"SManager"===this.user.type||"Manager"===this.user.type?(this.getWOS(),this.getUpcomingTenancy(),this.getVacancies(),this.getDeliquencies(),this.getAppInfo(),this.getVacancyStats()):"Tenant"===this.user.type?(this.tenant_id=this.user.id_value,this.pageTitle="My Dashboard",this.getTenantInfo(this.tenant_id)):"Super"===this.user.type?(this.view="Super",this.pageTitle="My Dashboard",this.getWOS(),this.getUpcomingTenancy(),this.getVacancies(),this.getDeliquencies(),this.getAppInfo(),this.getVacancyStats()):"Investor"===this.user.type?(console.log("I am investor"),this.getInvestorInfo(this.user.id_value)):"Vendor"===this.user.type&&(console.log("I am vendor"),this.view="Vendor",this.vendor_id=this.user.id_value,this.getWOS()),console.log("dashboard.components:",this.view)}refreshReport(){this.getAllTranche("")}getAllTranche(e){const i={params:{}};""!=e&&(i.params.company_id=e),console.log("getAllTranche Entered:",i),this.gridAssetsData=[],this.REQ.get("tranche/list",{query:JSON.stringify(i)}).subscribe(n=>{this.gridAssetsData=n.data,console.log("getAllTranche:",n,this.gridAssetsData)},n=>{console.log(n)})}getVacancyStats(){const e={params:{report:"ANALYTICS2",start_date:this.utility.date2ISO(this.dtList.tdate_MSD),end_date:this.utility.date2ISO(this.dtList.tdate_MED)}};console.log("getVacancyStats:",e,this.dtList),this.gridOLData=[];let i=[];this.REQ.get("tranche/analytics",{query:JSON.stringify(e)}).subscribe(n=>{if(console.log("getVacancyStats:",n),!this.AS.checkResponseError(n,"Tranche Analtics Data",this.AS.login))return!1;let o=n.data;const l=[];l.tranche_name="Overall",l.rr_units=0,l.oc_units=0,l.ot_units=0,l.to_units=0,l.occupancy=0;for(let s=0;s<o.length;s++)o[s].to_units=o[s].rr_units+o[s].oc_units+o[s].ot_units,o[s].occupancy=o[s].oc_units/o[s].to_units,s==o.length-1&&o[s].tranche_name!=o[s-1].tranche_name?(i.push(o[s]),l.rr_units+=o[s].rr_units,l.oc_units+=o[s].oc_units,l.ot_units+=o[s].ot_units,l.to_units+=o[s].to_units,l.occupancy=l.oc_units/l.to_units):s>0&&o[s].tranche_name!=o[s-1].tranche_name?(i.push(o[s-1]),l.rr_units+=o[s-1].rr_units,l.oc_units+=o[s-1].oc_units,l.ot_units+=o[s-1].ot_units,l.to_units+=o[s-1].to_units,l.occupancy=l.oc_units/l.to_units):s==o.length-1&&(i.push(o[s]),l.rr_units+=o[s].rr_units,l.oc_units+=o[s].oc_units,l.ot_units+=o[s].ot_units,l.to_units+=o[s].to_units,l.occupancy=l.oc_units/l.to_units);i.push(l),this.gridOLData=i},n=>{console.log("getVacancyStats:",n)})}getAppInfo(){return this.utility.date2ISO(this.start_date),this.utility.date2ISO(this.end_date),!0}getProperties(){this.REQ.get("p","").subscribe(i=>{this.pList=i.data,console.log("getProperties:",this.pList)},i=>{console.log("getProperties: error:",i)})}getInvestorInfo(e){const i={params:{investor_id:e,FINANCIALS:"YES"}};console.log("Entering getInvestorInfo:",i),this.REQ.get("investor/info",{query:JSON.stringify(i)}).subscribe(n=>{if(this.investor=n,console.log("getInvestorInfo:",this.investor),void 0!==this.investor.financials&&""!==this.investor.financials){let o=JSON.parse(this.investor.financials).data;o=o.map(l=>Object.assign(Object.assign({},l),{equity:`${(100*l.equity).toFixed(2)}%`,last_payment_date:new Date(l.last_payment_date).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})})),this.iFinancials=o}console.log("getInvestorInfo:",this.iFinancials)},n=>{console.log(n)})}getTenantInfo(e){const i={params:{tenant_id:this.tenant_id,FINANCIALS:"YES"}};console.log("Entering getTenantInfo:",i),this.REQ.get("tenant",{query:JSON.stringify(i)}).subscribe(n=>{this.tenant=n,this.payment_due_date=this.tenant.payment_due_date.slice(0,this.tenant.lease_start_date.indexOf("T")),this.last_payment_date=this.tenant.last_payment_date.slice(0,this.tenant.lease_end_date.indexOf("T")),this.lease_start_date=this.tenant.lease_start_date.slice(0,this.tenant.lease_start_date.indexOf("T")),this.lease_end_date=this.tenant.lease_end_date.slice(0,this.tenant.lease_end_date.indexOf("T")),this.move_in_date=this.tenant.move_in_date.slice(0,this.tenant.move_in_date.indexOf("T")),(null!=this.tenant.move_out_date||""!=this.tenant.move_out_date)&&(this.move_in_date=this.tenant.move_in_date.slice(0,this.tenant.move_in_date.indexOf("T"))),this.tenant.company=this.companyList[this.tenant.company],console.log("Tenant:",this.tenant)},n=>{console.log(n)})}getPaymentURL(){let e=this.REQ.getPaymentURL();console.log("getPaymentURL :",e),this.modalRef=this.modalService.show(M.s,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Leaving Company Website",content:{description:"You will be redirected to our payment partner. Are you sure, you want to make a payment?"}}}),this.modalRef.content.onClose.subscribe(n=>{console.log("updateTXData: Confirm:",n),"OK"===n.action?window.open(e):console.log("getPaymentURL: cancel clicked")})}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}getDeliquencies(){const e={params:{function:"ANALYSIS",action:"DELIQUENCIES",company:"ALL"}};console.log("getDeliquencies:",e),this.REQ.get("analysis",{query:JSON.stringify(e)}).subscribe(i=>{console.log("getDeliquencies:",i.data),this.gridRDData=i.data;for(let n=0;n<this.gridRDData.length;n++)this.gridRDData[n].field="tenant_name",this.gridRDData[n].tenant_name=this.gridRDData[n].first_name+" "+this.gridRDData[n].last_name},i=>{console.log(i)})}getVacancies(){this.REQ.get("pcommercial","").subscribe(e=>{console.log("getVacancies:",e.data),this.gridVACData=e.data;for(let i=0;i<this.gridVACData.length;i++)this.gridVACData[i].address2=this.gridVACData[i].city+" "+this.gridVACData[i].state,this.gridVACData[i].features=this.gridVACData[i].bed+"B / "+this.gridVACData[i].bath+"B"},e=>{console.log(e)})}getUpcomingTenancy(){this.REQ.get("get_u_tenancy",{query:JSON.stringify({params:{period:90}})}).subscribe(i=>{this.gridTCData=i.data,console.log("getUpcomingTenancy:",i.data);for(let n=0;n<this.gridTCData.length;n++)this.gridTCData[n].field="tenant_name",this.gridTCData[n].tenant_name=this.gridTCData[n].first_name+" "+this.gridTCData[n].last_name},i=>{console.log("get_u_tenancy:",i),this.toastr.error("Tenancy report failed : "+i)})}getWOS(){const e={params:{status:"1,2,3"}};"Tenant"===this.view?e.params.tenant_id=this.tenant_id:"Vendor"===this.view&&(e.params.vendor_id=this.vendor_id),this.REQ.get("gwos",{query:JSON.stringify(e)}).subscribe(i=>{let n=i.data;if(console.log("getWOS:",n),void 0!==n){for(let o=0;o<n.length;o++)n[o].priority=this.priorityList[n[o].priority],n[o].status=this.wosList[n[o].status],n[o].cellClass="card-title";this.gridWOData=n}},i=>{console.log("WOS:",i),this.toastr.error("Work order report failed : "+i)})}onGridReady(e,i){console.log("grid ready pamkkk",e),this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var n=e.api.getColumnDefs();n.forEach(function(o,l){o.resizable=!0,o.sortable=!0,o.filter=!0}),e.api.setColumnDefs(n)}onModelUpdated(e,i){console.log("ModelUpdated"),e.api.sizeColumnsToFit()}onCellClicked(e,i){}onCellDoubleClicked(e,i){console.log("onCellDoubleClicked:",e),"WO"===i?this.router.navigate([this.urlPrefix+"wo"],{queryParams:{wo_id:e.data.wo_id}}):"TENANCY"===i?this.router.navigate([this.urlPrefix+"tenancy"],{queryParams:{tenancy_id:e.data.tenancy_id}}):"VACANCY"===i?this.router.navigate([this.urlPrefix+"property"],{queryParams:{property_id:e.data.property_id}}):"DELIQUENCY"===i?this.router.navigate([this.urlPrefix+"tenant"],{queryParams:{tenant_id:e.data.tenant_id}}):"Assets"===i&&this.router.navigate([this.user.navigation+"/investor"],{queryParams:{investor_id:e.data.tranche_id}})}woPriorityStyle(e){return"Urgent"==e.value?{color:"red",textAlign:"center"}:"Normal"==e.value?{color:"blue",textAlign:"center"}:{textAlign:"center"}}woStatusStyle(e){return"Open"==e.value?{color:"red",textAlign:"center"}:"New"==e.value?{color:"blue",textAlign:"center"}:"In Progress"==e.value?{color:"green",textAlign:"center"}:"On Hold"==e.value?{color:"orange",textAlign:"center"}:"Closed"==e.value?{color:"gray",textAlign:"center"}:{textAlign:"center"}}currencyFormatter(e){return void 0===e.value?"UDF":"$"+e.value.toLocaleString(void 0,{minimumFractionDigits:2})}agUnitPCellStyle(e){return void 0===e.value?"":e.value<.9?{color:"red",textAlign:"right"}:e.value>=.95?{color:"blue",textAlign:"right"}:{textAlign:"right"}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(C.t),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard"]],decls:7,vars:6,consts:[[1,"d-block","w-100","dashboard"],[4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-lg-6","col-md-12","mb-2"],["cascade","true","narrower","true"],[1,"view","view-cascade"],[3,"href"],[1,"fas","fa-user-circle","text-white"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","250px",3,"columnDefs","rowData","gridReady","modelUpdated","cellDoubleClicked"],["gridOL",""],[1,"col-lg-6","col-md-12","col-sm-12","mb-2"],[3,"click"],[1,"fas","fa-user","text-white"],["gridRD",""],[1,"col-md-6"],[1,"fas","fa-home","text-white"],["gridTC",""],[1,"col-lg-4","col-md-12","col-sm-12","mb-2"],["fas","","icon","hand-holding-usd text-white"],["class","text-danger",4,"ngIf"],["fas","","icon","caret-right"],["mdbBtn","","rounded","true","color","primary","mdbWavesEffect","",3,"routerLink"],["fas","","icon","angle-double-right text-white"],[1,"col-lg-8","col-md-12","col-sm-12","mb-2"],["fas","","icon","hands-helping text-white"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","300px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["gridWO",""],[1,"text-center"],[1,"d-block"],[1,"mb-1"],[1,"text-danger"],[1,"text-success"],["mdbBtn","","rounded","true","color","primary",3,"href"],["fas","","icon","file-invoice-dollar text-white"],[1,"mb-2"],["src","./assets/img/cashapp.png","height","30"],[1,"mb-0","ms-2"],["src","./assets/img/venmo.png","height","30"],["src","./assets/img/zelle.png","height","30"],["fas","","icon","building text-white"],["far","","icon","envelope"],["fas","","icon","phone-alt"],["far","","icon","comment"],[1,"d-block","text"],[1,"col-lg-4","col-md-12","mb-2"],[1,"col-lg-8","col-md-12","mb-2"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","450px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["mdbBtn","","rounded","true","color","primary","mdbWavesEffect","",3,"href"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","350px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["fas","","icon","tools text-primary"],["mdbBtn","","rounded","true","color","primary","mdbWavesEffect","",3,"click"],[1,"col-xl-4","col-lg-6","col-md-6","col-sm-12","mb-2"],["fas","","icon","file-alt text-primary"],["mdbBtn","","rounded","true","color","primary",3,"click"],[1,"align-items-center","justify-content-center","mb-3"],[1,"me-3"],[1,"mb-0"],[1,"align-items-center","mb-3"],[1,"align-items-center"],["mdbBtn","","rounded","true","color","danger",3,"click"],["far","","icon","arrow-alt-circle-right text-primary"],[1,""],[1,"my-2","d-block","text"],["fas","","icon","exclamation-triangle text-white"],[1,"my-2","d-block","text","text-danger"],["href","https://www.pplelectric.com/"],["href","https://www.ugi.com/"],["href","http://harrisburgpa.gov/sanitation/"],["href","http://harrisburgpa.gov/bureau-of-police/"],["href","https://www.firstenergycorp.com/jersey_central_power_light.html"],["href","https://nj.pseg.com/"],["href","https://www.townofmorristown.org/recycle"],["href","https://www.townofmorristown.org/police"],["href","https://www.bgmu.com/"],["href","https://www.bgky.org/government/department-list"],["href","https://www.bgky.org/police"],["fas","","icon","user-tie text-white"],["class","d-block mb-3",4,"ngFor","ngForOf"],["mdbBtn","","rounded","true","color","primary",1,"w-75","d-table","mx-auto","mb-2",3,"routerLink"],["mdbBtn","","rounded","true","color","primary",1,"w-75","d-table","mx-auto","my-2",3,"click"],["disabled","","mdbBtn","","rounded","true","color","grey",1,"w-75","d-table","mx-auto","my-2"],["mdbBtn","","rounded","true","color","primary",1,"w-75","d-table","mx-auto","mt-2",3,"click"],[1,"col-lg-12","col-md-12","col-sm-12","mb-2"],["id","TL","name","TL"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","250px",3,"columnDefs","rowData","gridReady","cellDoubleClicked"],["grid1",""],[1,"d-block","mb-3"],[1,"d-flex","mb-2","financials-text"],[1,"d-flex","justify-content-between","financials-text"],[1,"d-inline-flex"],[1,"col-lg-12","col-md-12","mb-2"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","400px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,mt,188,37,"div",1),t.YNc(2,Tt,180,37,"div",1),t.YNc(3,xt,141,27,"div",1),t.YNc(4,Dt,209,45,"div",1),t.YNc(5,Ot,63,12,"div",1),t.YNc(6,Pt,75,13,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view),t.xp6(1),t.Q6J("ngIf","Manager"===i.view),t.xp6(1),t.Q6J("ngIf","Super"===i.view),t.xp6(1),t.Q6J("ngIf","Tenant"===i.view),t.xp6(1),t.Q6J("ngIf","Investor"===i.view),t.xp6(1),t.Q6J("ngIf","Vendor"===i.view))},directives:[c.O5,d.n3K,d.W60,d.KSw,d.gRC,v.N8,d.UiO,d.XIm,d.Et0,h.yS,d.mTE,d.b6v,d.CWd,c.sg],pipes:[c.H9],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .financials-text[_ngcontent-%COMP%]{line-height:24px;font-size:14px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}"]}),a})();function St(a,r){1&a&&(t.TgZ(0,"mdb-error"),t._uU(1,"Full name is required"),t.qZA())}function Lt(a,r){1&a&&(t.TgZ(0,"mdb-error"),t._uU(1,"Email is required"),t.qZA())}function Jt(a,r){1&a&&(t.TgZ(0,"mdb-error"),t._uU(1,"Phone Number is required"),t.qZA())}function Rt(a,r){1&a&&(t.TgZ(0,"mdb-error"),t._uU(1,"Please choose an option"),t.qZA())}function Et(a,r){1&a&&(t.TgZ(0,"mdb-error"),t._uU(1,"This is required field"),t.qZA())}let It=(()=>{class a{constructor(e,i,n){this.REQ=e,this.toastr=i,this.AS=n,this.urlPrefix="",this.userData={},this.user=this.AS.currentUserValue,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.validationForm=new _.cw({fullName:new _.NI("",{validators:[_.kI.required,_.kI.minLength(5)],updateOn:"blur"}),emailID:new _.NI("",{validators:[_.kI.required,_.kI.email],updateOn:"blur"}),phoneID:new _.NI("",{validators:[_.kI.required,_.kI.pattern("[- +()0-9]+"),_.kI.minLength(10)],updateOn:"blur"}),subject:new _.NI("",{validators:_.kI.required,updateOn:"blur"}),pullDown:new _.NI("",{validators:_.kI.required,updateOn:"blur"}),otherMessage:new _.NI("",{validators:[_.kI.required,_.kI.minLength(10)],updateOn:"blur"})})}ngOnInit(){this.getUser(this.user.user_id)}getUser(e){const i={params:{user_id:e,caller:"HCAPP"}};console.log("user:getUser:",i),this.REQ.get("gu",{query:JSON.stringify(i)}).subscribe(n=>{console.log("getUser:",n),this.userData=Object.assign(Object.assign({},n),{full_name:n.first_name+" "+n.last_name})},n=>{console.log(n),console.log("User login failed for : ")})}get fullName(){return this.validationForm.get("fullName")}get emailID(){return this.validationForm.get("emailID")}get phoneID(){return this.validationForm.get("phoneID")}get subject(){return this.validationForm.get("subject")}get otherMessage(){return this.validationForm.get("otherMessage")}onSubmit(){if(this.validationForm.markAllAsTouched(),this.fullName.valid&&this.emailID.valid&&this.phoneID.valid&&this.subject.valid&&this.otherMessage.valid){const e={name:this.fullName.value,email:this.emailID.value,phone:this.phoneID.value,subject:this.subject.value,message:this.otherMessage.value};console.log("formSubmit:",e),this.REQ.post("",e).subscribe(i=>{this.toastr.success("request has been submitted.","success",{extendedTimeOut:0})},i=>{console.log(i),this.toastr.error("request failed.","fail",{extendedTimeOut:0})})}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(d.klp),t.Y36(b.$))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-contact"]],decls:73,vars:13,consts:[[1,"d-block","w-100","dashboard","contact-information"],[1,"card"],[1,"card-header"],["fas","","icon","comment-alt text-white"],[1,"card-body"],[1,"container-fluid"],[1,"row"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"d-block","information"],[1,"mb-5"],["href","mailto:hi@himalayacapitalgroup.com"],[1,"col-lg-8","col-md-6","col-sm-12"],[1,"d-block","w-100","form",3,"formGroup","ngSubmit"],[1,"col-sm-12"],[1,"md-form","mb-0"],[1,"position-relative"],["mdbInput","","placeholder","Full Name","type","text","id","fullName","mdbValidate","","formControlName","fullName","required","","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"col-sm-12","col-md-6"],["mdbInput","","placeholder","Email","type","text","id","email","mdbValidate","","formControlName","emailID","required","","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","placeholder","Phone","type","text","id","phone","mdbValidate","","formControlName","phoneID","required","","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"md-form","mb-2"],["id","reportSelect","mdbValidate","","formControlName","subject","required",""],[3,"value"],[1,"md-form","mb-0","textarea"],["mdbInput","","cols","60","placeholder","","rows","4","mdbValidate","","formControlName","otherMessage","required","",1,"md-textarea","form-control"],[1,"col-sm-12","text-right"],["mdbBtn","","color","primary","rounded","true","type","button","type","submit"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._UZ(5,"mdb-icon",3),t._uU(6," \xa0Contact "),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"h4"),t._uU(13,"Contact Information"),t.qZA(),t.TgZ(14,"p"),t._uU(15,"Himalaya Capital Group PO Box 396 Princeton JCT NJ 08550"),t.qZA(),t.TgZ(16,"p",9)(17,"a",10),t._uU(18,"hi@himalayacapitalgroup.com"),t.qZA()(),t.TgZ(19,"strong"),t._uU(20,"Your Ralationship Manager"),t.qZA(),t.TgZ(21,"p"),t._uU(22," Tristan Lavalle 646-877-0792 "),t._UZ(23,"br"),t._uU(24," Tristan@himalayacapitalgroup.com "),t.qZA()()(),t.TgZ(25,"div",11)(26,"form",12),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(27,"div",6)(28,"div",13)(29,"div",14)(30,"label",15),t._uU(31,"Full Name"),t.qZA(),t.TgZ(32,"input",16),t.NdJ("ngModelChange",function(o){return i.userData.full_name=o}),t.qZA(),t.YNc(33,St,2,0,"mdb-error",17),t.qZA()()(),t.TgZ(34,"div",6)(35,"div",18)(36,"div",14)(37,"label",15),t._uU(38,"Email"),t.qZA(),t.TgZ(39,"input",19),t.NdJ("ngModelChange",function(o){return i.userData.email=o}),t.qZA(),t.YNc(40,Lt,2,0,"mdb-error",17),t.qZA()(),t.TgZ(41,"div",18)(42,"div",14)(43,"label",15),t._uU(44,"Phone"),t.qZA(),t.TgZ(45,"input",20),t.NdJ("ngModelChange",function(o){return i.userData.phone=o}),t.qZA(),t.YNc(46,Jt,2,0,"mdb-error",17),t.qZA()()(),t.TgZ(47,"div",6)(48,"div",18)(49,"div",21)(50,"label",15),t._uU(51,"Subject"),t.qZA(),t.TgZ(52,"mdb-select-2",22)(53,"mdb-select-option",23),t._uU(54,"Investment Question"),t.qZA(),t.TgZ(55,"mdb-select-option",23),t._uU(56,"Property Question"),t.qZA(),t.TgZ(57,"mdb-select-option",23),t._uU(58,"Tax Question"),t.qZA(),t.TgZ(59,"mdb-select-option",23),t._uU(60,"Other"),t.qZA()(),t.YNc(61,Rt,2,0,"mdb-error",17),t.qZA()()(),t.TgZ(62,"div",6)(63,"div",13)(64,"div",24)(65,"label",15),t._uU(66,"Type Your question / message here"),t.qZA(),t._UZ(67,"textarea",25),t.YNc(68,Et,2,0,"mdb-error",17),t.qZA()()(),t.TgZ(69,"div",6)(70,"div",26)(71,"button",27),t._uU(72," Submit "),t.qZA()()()()()()()()()()),2&e&&(t.xp6(26),t.Q6J("formGroup",i.validationForm),t.xp6(6),t.Q6J("ngModel",i.userData.full_name),t.xp6(1),t.Q6J("ngIf",(null==i.fullName?null:i.fullName.invalid)&&((null==i.fullName?null:i.fullName.dirty)||(null==i.fullName?null:i.fullName.touched))),t.xp6(6),t.Q6J("ngModel",i.userData.email),t.xp6(1),t.Q6J("ngIf",(null==i.emailID?null:i.emailID.invalid)&&((null==i.emailID?null:i.emailID.dirty)||(null==i.emailID?null:i.emailID.touched))),t.xp6(5),t.Q6J("ngModel",i.userData.phone),t.xp6(1),t.Q6J("ngIf",(null==i.phoneID?null:i.phoneID.invalid)&&((null==i.phoneID?null:i.phoneID.dirty)||(null==i.phoneID?null:i.phoneID.touched))),t.xp6(7),t.Q6J("value","Investment Question"),t.xp6(2),t.Q6J("value","Property Question"),t.xp6(2),t.Q6J("value","Tax Question"),t.xp6(2),t.Q6J("value","Other"),t.xp6(2),t.Q6J("ngIf",(null==i.subject?null:i.subject.invalid)&&((null==i.subject?null:i.subject.dirty)||(null==i.subject?null:i.subject.touched))),t.xp6(7),t.Q6J("ngIf",(null==i.otherMessage?null:i.otherMessage.invalid)&&((null==i.otherMessage?null:i.otherMessage.dirty)||(null==i.otherMessage?null:i.otherMessage.touched))))},directives:[d.gRC,d.UiO,d.XIm,_._Y,_.JL,_.sg,_.Fj,d.HqI,d.pvJ,_.JJ,_.u,_.Q7,c.O5,d.$Jo,d.lPY,d.x8v,d.mTE],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}.contact-information[_ngcontent-%COMP%]   .information[_ngcontent-%COMP%]{display:block;padding:20px;border:1px solid #bdc3c7}.contact-information[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transform:translateY(0)}.contact-information[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{top:75px}.contact-information[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{top:185px}"]}),a})();const Ft=["agGrid"];function Qt(a,r){1&a&&(t.TgZ(0,"option",28),t._uU(1,"All"),t.qZA())}function Ht(a,r){if(1&a&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.label),t.xp6(1),t.hij(" ",e.name," ")}}function Yt(a,r){1&a&&(t.TgZ(0,"option",28),t._uU(1,"All"),t.qZA())}function jt(a,r){if(1&a&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function Wt(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",29),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Vt(a,r){if(1&a&&(t.TgZ(0,"div",30)(1,"div",31)(2,"div",12)(3,"label"),t._uU(4,"Income | Expenses"),t.qZA(),t._uU(5),t.ALo(6,"currency"),t.ALo(7,"currency"),t.qZA()(),t.TgZ(8,"div",31)(9,"div",12)(10,"label"),t._uU(11,"Receivable"),t.qZA(),t._uU(12),t.ALo(13,"currency"),t.qZA()(),t.TgZ(14,"div",32)(15,"div",12)(16,"label"),t._uU(17,"Due | Balance"),t.qZA(),t._uU(18),t.ALo(19,"currency"),t.ALo(20,"currency"),t.qZA()(),t.TgZ(21,"div",33)(22,"div",12)(23,"label"),t._uU(24,"Market Rent | Security Deposit"),t.qZA(),t._uU(25),t.ALo(26,"currency"),t.ALo(27,"currency"),t.qZA()(),t.TgZ(28,"div",31)(29,"div",12)(30,"label"),t._uU(31,"Occupancy"),t.qZA(),t._uU(32),t.ALo(33,"percent"),t.qZA()()()),2&a){const e=t.oxw();t.xp6(5),t.AsE(" ",t.lcZ(6,10,e.financial.total_income)," | ",t.lcZ(7,12,e.financial.total_expense)," "),t.xp6(7),t.hij(" ",t.lcZ(13,14,e.financial.total_receivable)," "),t.xp6(6),t.AsE(" ",t.lcZ(19,16,e.financial.total_due)," | ",t.lcZ(20,18,e.financial.total_balance)," "),t.xp6(7),t.AsE(" ",t.lcZ(26,20,e.financial.total_market_rent)," | ",t.lcZ(27,22,e.financial.total_deposit)," "),t.xp6(7),t.lnq(" ",t.lcZ(33,24,e.financial.occupancy),"\xa0",e.financial.occupied,"\xa0out of\xa0",e.financial.total_units," ")}}function Gt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"ag-grid-angular",34,35),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n)})("cellClicked",function(n){t.CHM(e);const o=t.oxw();return o.onCellClicked(n,o.report)})("cellDoubleClicked",function(n){t.CHM(e);const o=t.oxw();return o.onCellDoubleClicked(n,o.report)}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("columnDefs",e.gridC1Columns)("rowData",e.gridC1Data)}}function zt(a,r){1&a&&t._UZ(0,"img",36)}let Bt=(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.rd=i,this.activeRoute=n,this.router=o,this.AS=l,this.toastr=s,this.utility=u,this.user=this.AS.currentUserValue,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.reportGenTime=new Date,this.report_title="Cashflow Report",this.report="PCF",this.showGrid=!0,this.showPROJECT=!1,this.showPNL2=!1,this.dtList={},this.companyList={},this.trancheList=[],this.myTrancheList={},this.start_date=new Date,this.end_date=new Date,this.group_id="",this.schema="",this.company_id="AHKY",this.tranche_id=-1,this.finList=[],this.reportList={PCF:"PCF",PNL:"P&L",PROJECT:"Project"},this.financial={},this.pnl2=[38,57,60,39,68,41,40,42,43,34,56,59],this.gridC1Options={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0}},this.gridC1Columns=[],this.gridC1Data=[],this.gridP1Columns=[],this.gridP1Data=[],this.gridReadyStatus=!0}ngOnInit(){this.dtList=this.rd.GetDates(),this.rd.companySubject.subscribe(e=>this.companyList=e),this.rd.trancheSubject.subscribe(e=>this.trancheList=e),this.start_date=this.dtList.tdate_MSD,this.end_date=this.dtList.tdate_MED,this.updateTranche(),this.refreshAnalytics(),("Admin"===this.user.type||"SManager"===this.user.type)&&(this.reportList.TAX="TAX",this.reportList.PNL2="P&L - HL"),console.log("Tranche:",this.trancheList)}ngOnChanges(){this.ngOnInit()}updateTranche(){this.myTrancheList={},console.log("updateTranche:",this.trancheList);for(let e=0;e<this.trancheList.length;e++)this.trancheList[e].label==this.company_id&&(this.myTrancheList[this.trancheList[e].tranche_id]=this.trancheList[e].tranche_name);this.tranche_id=-1,console.log("updateTranche:",this.myTrancheList)}refreshReport(e,i){console.log("refreshReport:",e,i),"COMPANY"===i&&this.updateTranche()}refreshAnalytics(){this.gridReadyStatus=!1;const e={params:{company:this.company_id,report:this.report,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};this.tranche_id>0&&(e.params.tranche_id=this.tranche_id),this.gridC1Data=[],console.log("refreshAnalytics:",e,this.tranche_id),this.REQ.get("pmcf",{query:JSON.stringify(e)}).subscribe(i=>{if(this.gridReadyStatus=!0,console.log("refreshAnalytics: data:",i),!this.AS.checkResponseError(i,"Cashflow Data",this.AS.login))return!1;this.finList=i.data,this.schema=i.schema,"TAX"==this.report?(this.fetchTAXReport(),this.showGrid=!0,this.showPNL2=!1,this.report_title="Cashflow Report: TAX view "):"PCF"==this.report?(this.fetchPCFReport(i.data),this.showGrid=!0,this.showPNL2=!1,this.report_title="Cashflow Report: PCF view "):"PNL"==this.report?(this.fetchPNLReport(i.data,1),this.showGrid=!0,this.showPNL2=!1,this.report_title="Cashflow Report: PnL view "):"PNL2"==this.report?(this.fetchPNLReport(i.data,2),this.showGrid=!1,this.showPNL2=!0,this.report_title="Cashflow Report: PnL HL view "):"PROJECT"==this.report&&(this.fetchPROJECTReport(i.data,3),this.showGrid=!1,this.showPROJECT=!0,this.report_title="Cashflow Report: Project view ")},i=>{this.gridReadyStatus=!0,console.log("refreshAnalytics:",i)}),this.reportGenTime=new Date}fetchTAXReport(){var e=this.schema.fields;for(let i=0;i<e.length;i++)e[i].headerName=this.CapitlizeString(e[i].name),e[i].field=e[i].name,e[i].filter=!0,"category"==e[i].name||"parent"==e[i].name?e[i].hide=!0:"name"==e[i].name?e[i].pinned="left":(e[i].valueFormatter=this.utility.agCurrencyFormatter,e[i].editable=!0,e[i].cellStyle=this.utility.agNumberCellStyle,e[i].cellClass="card-title",e[i].filter="agNumberColumnFilter");for(let i=0;i<this.finList.length;i++)this.financial[this.finList[i].name]=this.finList[i].total,this.finList[i].field=this.finList.name,this.finList[i].pinned="right",this.finList[i].cellClass="card-title";console.log("CF Columns = "+JSON.stringify(e)),console.log("CF Data = "+JSON.stringify(this.finList)),this.gridC1Columns=e,this.gridC1Data=this.finList}fetchPCFReport(e){this.financial=[],this.gridC1Columns=[{headerName:"ID",width:50,field:"property_id",filter:"agNumberColumnFilter"},{headerName:"Name",width:270,field:"label",filter:!0,sort:"ASCE"},{headerName:"City",width:125,field:"city",hide:!0},{headerName:"State",width:50,field:"state",hide:!0},{headerName:"Status",width:165,field:"p_status",cellStyle:this.tenancyStatusStyle},{headerName:"ZIP",width:65,field:"zip",hide:!0},{headerName:"First",field:"first_name",filter:!0},{headerName:"Last",field:"last_name",filter:!0},{headerName:"Income",field:"income",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Expenses",field:"expense",sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Receivable",field:"receivable",sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Due",field:"due",sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Balance",field:"balance",sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"From Lease",field:"lease_start_date",filter:"agDateColumnFilter"},{headerName:"Lease To",field:"lease_end_date",filter:"agDateColumnFilter"},{headerName:"Move In",field:"move_in",filter:"agDateColumnFilter"},{headerName:"Move Out",field:"move_out",filter:"agDateColumnFilter"},{headerName:"Market Rent",field:"market_rent",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Rent",field:"rent",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Deposit",field:"deposit",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Company",width:100,field:"company",filter:!0},{headerName:"Group",width:70,field:"group",filter:!0},{headerName:"property_id",field:"property_id",hide:!0},{headerName:"tenant_id",field:"tenant_id",hide:!0}];let i=0,n=0,o=0,l=0,s=0,u=0,p=0,f=0,x=0,q=0;for(let Z=0;Z<this.finList.length;Z++)this.finList[Z].field=this.finList.name,this.finList[Z].due=this.finList[Z].income-this.finList[Z].receivable,this.finList[Z].pinned="right",this.finList[Z].cellClass="card-title","OCCUPIED"==this.finList[Z].p_status?p+=1:"RENT READY"==this.finList[Z].p_status?f+=1:q+=1,l+=this.finList[Z].deposit,o+=this.finList[Z].expense,n+=this.finList[Z].income,i+=this.finList[Z].receivable,s+=this.finList[Z].due,u+=this.finList[Z].balance,x+=this.finList[Z].market_rent;this.financial.total_receivable=i,this.financial.total_income=n,this.financial.total_expense=o,this.financial.total_due=s,this.financial.total_deposit=l,this.financial.total_balance=u,this.financial.total_market_rent=x,this.financial.occupied=p,this.financial.occupancy=p/(p+f),this.financial.total_units=p+f+q,console.log("Units:"+p+":"+f),this.gridC1Data=this.finList}fetchPNLReport(e,i){var n=this.schema.fields;for(let s=0;s<n.length;s++)n[s].headerName=this.CapitlizeString(n[s].name),n[s].field=n[s].name,n[s].filter=!0,"category"==n[s].name||"parent"==n[s].name?n[s].hide=!0:"name"==n[s].name?n[s].pinned="left":"ratio"==n[s].name?(n[s].valueFormatter=this.utility.agPercentFormatter,n[s].editable=!0,n[s].cellStyle=this.utility.agNumberCellStyle,n[s].cellClass="card-title",n[s].filter="agNumberColumnFilter"):(n[s].valueFormatter=this.utility.agCurrencyFormatter,n[s].editable=!0,n[s].cellStyle=this.utility.agNumberCellStyle,n[s].cellClass="card-title",n[s].filter="agNumberColumnFilter");let o=[],l=0;console.log("fetchPNLReport:",i," Type of:"+typeof this.finList);for(let s=0;s<this.finList.length;s++)this.financial[this.finList[s].name]=this.finList[s].total,this.finList[s].field=this.finList.name,this.finList[s].pinned="right",this.finList[s].cellClass="card-title",2==i&&this.pnl2.includes(this.finList[s].category)&&(console.log("LOOP:[",1,"] ",this.finList[s]),o[l]=this.finList[s],l+=1),this.finList[s].category=this.finList[s].parent+":"+this.finList[s].category;console.log("CF Columns = ",n),console.log("CF Data = ",this.finList),console.log("CF Data 2 = ",o),this.gridC1Columns=n,this.gridC1Data=2==i?o:this.finList}fetchPROJECTReport(e,i){this.gridC1Columns=[{headerName:"Period",width:120,field:"index",filter:!0},{headerName:"Occupancy",field:"occupancy",filter:"agNumberColumnFilter",valueFormatter:this.utility.agPercentFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Income",field:"38",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Fixed",field:"56",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Operating",field:"42",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Total Expenses",field:"39",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"NOI - After Payment",field:"59",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Principal",field:"200",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Interest",field:"201",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Loan Payment",field:"189",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle}];let o=[];console.log("fetchPROJECTReport:",e,i);for(let l=0;l<e.length;l++){let s=e[l];console.log("fetchPROJECTReport:LOOP:[",l,"] ",s.index),"name"!=s.index&&"total"!=s.index&&"parent"!=s.index&&o.push(s)}console.log("CF Data 2 = ",o),this.gridC1Data=o}onDChange(e,i){console.log("25: onDChange--\x3e"),console.log(i)}onGridReady(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e){console.log("ModelUpdated",e),e.api.sizeColumnsToFit()}onCellClicked(e,i){console.log("Column:",e.colDef.field)}onCellDoubleClicked(e,i){console.log(e),"PCF"!==i||"Admin"!==this.user.type&&"SManager"!==this.user.type&&"Manager"!==this.user.type||("first_name"==e.colDef.field||"last_name"==e.colDef.field||"income"==e.colDef.field||"receivable"==e.colDef.field||"balance"==e.colDef.field||"lease_start_date"==e.colDef.field||"lease_end_date"==e.colDef.field||"deposit"==e.colDef.field?this.router.navigate([this.user.navigation+"/tenant"],{queryParams:{tenant_id:e.data.tenant_id}}):this.router.navigate([this.user.navigation+"/property"],{queryParams:{property_id:e.data.property_id}}))}CapitlizeString(e){return e.charAt(0).toUpperCase()+e.slice(1)}exportData(e){var o={columnDefs:[{headerName:this.company_id+": Transaction report from "+this.start_date+" to "+this.end_date,children:[{field:"athlete",minWidth:200},{field:"country",minWidth:200}]}],defaultColDef:{sortable:!0,filter:!0,resizable:!0,minWidth:100,flex:1}};"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv(o)):(console.log("Exporting Excel"),this.grid1Api.exportDataAsExcel(o))}CurrencyCellRendererUSD(e){return void 0===e.value?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e.value)}bracketsFormatter(e){return"("+e.value+")"}tenancyStatusStyle(e){return"RENT READY"==e.value?{color:"red",textAlign:"center"}:"OCCUPIED"==e.value?{color:"blue",textAlign:"center"}:{textAlign:"center"}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(C.t))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-cashflow"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ft,7),2&e){let n;t.iGM(n=t.CRH())&&(i.agGrid=n.first)}},features:[t.TTD],decls:49,vars:24,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","mb-1"],[1,"col-lg-2","col-md-4","col-sm-12"],[1,"form-group","mb-1"],[1,"position-relative"],["label","company","id","company","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],["value","ALL",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["label","Tranche","id","tranche","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],[1,"md-form","mb-1"],["label","From","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["label","To","name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],["label","Report","id","reportSelect",3,"ngModel","ngModelChange"],[1,"col-lg-2","col-md-4","col-sm-12","text-md-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-4"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],[1,"fas","fa-download"],["class","row mb-4",4,"ngIf"],[1,"row"],["style","width: 100%; height: 650px;","class","ag-theme-balham","animateRows","","rowHeight","22","rowSelection","multiple",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked",4,"ngIf"],["src","../../../assets/img/loading.gif","class","mx-auto d-block w-auto",4,"ngIf"],[1,"card-footer"],["value","ALL"],[3,"value"],[1,"row","mb-4"],[1,"col-sm-12","col-md-4","col-lg-2"],[1,"col-sm-12","col-md-4","col-lg-3","text-danger"],[1,"col-sm-12","col-md-4","col-lg-3"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","650px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""],["src","../../../assets/img/loading.gif",1,"mx-auto","d-block","w-auto"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._uU(5," Cashflow Report "),t.qZA()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"label",7),t._uU(11,"Company"),t.qZA(),t.TgZ(12,"select",8),t.NdJ("ngModelChange",function(o){return i.company_id=o})("ngModelChange",function(o){return i.refreshReport(o,"COMPANY")}),t.YNc(13,Qt,2,0,"option",9),t.YNc(14,Ht,2,2,"option",10),t.qZA()()(),t.TgZ(15,"div",5)(16,"div",6)(17,"label",7),t._uU(18,"Tranche / Asset"),t.qZA(),t.TgZ(19,"select",11),t.NdJ("ngModelChange",function(o){return i.tranche_id=o}),t.YNc(20,Yt,2,0,"option",9),t.YNc(21,jt,2,2,"option",10),t.ALo(22,"keyvalue"),t.qZA()()(),t.TgZ(23,"div",5)(24,"div",12)(25,"mdb-date-picker",13,14),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()()(),t.TgZ(27,"div",5)(28,"div",12)(29,"mdb-date-picker",15,16),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()()(),t.TgZ(31,"div",5)(32,"div",12)(33,"mdb-select-2",17),t.NdJ("ngModelChange",function(o){return i.report=o})("ngModelChange",function(o){return i.refreshReport(o,"REPORT")}),t.YNc(34,Wt,2,2,"mdb-select-option",10),t.ALo(35,"keyvalue"),t.qZA()()(),t.TgZ(36,"div",18)(37,"div",19)(38,"button",20),t.NdJ("click",function(){return i.refreshAnalytics()}),t._UZ(39,"i",21),t.qZA(),t._uU(40,"\xa0 "),t.TgZ(41,"button",20),t.NdJ("click",function(){return i.exportData("CSV")}),t._UZ(42,"i",22),t.qZA()()()(),t.YNc(43,Vt,34,26,"div",23),t.TgZ(44,"div",24),t.YNc(45,Gt,2,2,"ag-grid-angular",25),t.YNc(46,zt,1,0,"img",26),t.qZA()(),t.TgZ(47,"div",27),t._uU(48),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("ngModel",i.company_id),t.xp6(1),t.Q6J("ngIf","Admin"===i.user.type),t.xp6(1),t.Q6J("ngForOf",i.companyList),t.xp6(5),t.Q6J("ngModel",i.tranche_id),t.xp6(1),t.Q6J("ngIf","Admin"===i.user.type),t.xp6(1),t.Q6J("ngForOf",t.lcZ(22,20,i.myTrancheList)),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(4),t.Q6J("ngModel",i.report),t.xp6(1),t.Q6J("ngForOf",t.lcZ(35,22,i.reportList)),t.xp6(9),t.Q6J("ngIf","PCF"===i.report),t.xp6(2),t.Q6J("ngIf",(i.showGrid||i.showPNL2||i.showPROJECT)&&i.gridReadyStatus),t.xp6(1),t.Q6J("ngIf",!i.gridReadyStatus),t.xp6(2),t.hij(" Report generated as of ",i.reportGenTime," "))},directives:[d.gRC,_.EJ,_.JJ,_.On,c.O5,_.YN,_.Kr,c.sg,d.JNR,_.Q7,d.lPY,d.x8v,d.mTE,v.N8],pipes:[c.Nd,c.H9,c.Zx],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;position:relative;transform:translateY(0)}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}}@media screen and (max-width: 992px) and (max-width: 992px){.dashboard[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}}"]}),a})();var L=T(315);function Xt(a,r){if(1&a&&(t.TgZ(0,"option",21),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_name),t.xp6(1),t.Oqu(e.co_value)}}function $t(a,r){1&a&&t._UZ(0,"mdb-spinner",22)}let A=(()=>{class a{constructor(e,i,n,o,l,s){this.modalRef=e,this.REQ=i,this.utility=n,this.rd=o,this.AS=l,this.toastr=s,this.user=this.AS.currentUserValue,this.heading="Fileupload Dialogue",this.onClose=new U.x,this.file_saved=0,this.file_name="",this.file_type="gen",this.file_gd_name="",this.file_gd_name_m=0,this.is_uploading=!1,this.fileTypesList=[],this.fileToUpload=null,this.confirmButtonText="Yes",this.cancelButtonText="Cancel",this.files=[],this.uploadInput=new t.vpe,this.humanizeBytes=d.kK5}ngOnInit(){console.log("INIT:",this.heading,this.content),this.rd.fileTypesSubject.subscribe(e=>this.fileTypesList=e),this.file_gd_name=this.content.file_info}showFiles(){let e="";for(let i=0;i<this.files.length;i++)e+=this.files[i].name,this.files.length-1!==i&&(e+=",");return e}cancelUpload(e){this.uploadInput.emit({type:"cancel",id:e})}onUploadOutput(e){if(console.log("onUploadOutput:"),this.file_saved=0,"allAddedToQueue"!==e.type)if("addedToQueue"===e.type)this.files.push(e.file);else if("uploading"===e.type){const n=this.files.findIndex(o=>o.id===e.file.id);this.files[n]=e.file}else"removed"===e.type?this.files=this.files.filter(n=>n!==e.file):"dragOver"===e.type?this.dragOver=!0:"dragOut"===e.type||"drop"===e.type&&(this.dragOver=!1);var i=this.showFiles();console.log("onUploadOutput:",i)}closeDialogue(){this.onClose.next({file_saved:this.file_saved,file_type:this.file_type,file_name:this.file_name}),this.modalRef.hide()}uploadFileToServer(){console.log("uploading file to server:",this.files[0].nativeFile);const e={key_type:this.content.owner_type,key_value:this.content.owner_id,doc_type:this.file_type,doc_name:this.file_gd_name,updatedby:this.user.login};this.fileToUpload=this.files[0].nativeFile,this.file_saved=0,console.log("uploadFileToServer:",e),this.REQ.postFile(this.fileToUpload,e).subscribe(i=>{this.is_uploading=!1,this.toastr.success("File upload successful"),this.file_saved=1},i=>{console.log(i),this.is_uploading=!1,this.toastr.error("File upload failed, please contact support","Major Error",{timeOut:3e3})})}fileTypeChange(){if(console.log("filetypechange"),this.file_gd_name_m<1){let e=this.file_type.toLowerCase();this.file_gd_name=this.file_gd_name.replace(/_app|_gen|_lease|_other/gi,""),this.file_gd_name+="_"+e}}fileGDName_KP(){this.file_gd_name_m=1}uploadFile(){""==this.file_gd_name?alert("Please select a file to upload"):(this.is_uploading=!0,this.uploadFileToServer())}clearFile(){this.file_name="",this.file_gd_name="",this.fileToUpload=null}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.iX6),t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(b.$),t.Y36(d.klp))},a.\u0275cmp=t.Xpm({type:a,selectors:[["fileupload-modal"]],decls:33,vars:9,consts:[[1,"modal-content","card"],[1,"card-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],["id","myModalLabel",1,"modal-title","w-100"],[1,"card-body"],[1,"form-group"],["id","file_type",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"md-form","mb-2"],["mdbInput","","name","fileGDName","type","text","placeholder","User Friendly File Name",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"form"],[1,"file-field","md-form"],["mdbBtn","","color","primary","size","sm","mdbWavesEffect","",1,"waves-light"],["type","file","mdbFileSelect","",3,"uploadInput","uploadOutput"],[1,"file-path-wrapper"],["type","text","placeholder","Upload your file",1,"file-path",3,"value"],[1,"card-footer"],["type","button","mdbBtn","","color","primary","rounded","true","aria-label","Upload","mdbWavesEffect","",3,"disabled","click"],["spinnerType","big",4,"ngIf"],["type","button","mdbBtn","","color","default","rounded","true","aria-label","Close","mdbWavesEffect","",2,"float","right",3,"click"],[3,"value"],["spinnerType","big"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return i.closeDialogue()}),t.TgZ(3,"span",3),t._uU(4,"\xd7"),t.qZA()(),t.TgZ(5,"h4",4),t._uU(6),t.qZA()(),t.TgZ(7,"div",5)(8,"p"),t._uU(9),t.qZA(),t.TgZ(10,"div",6)(11,"label"),t._uU(12,"Document Type"),t.qZA(),t.TgZ(13,"select",7),t.NdJ("ngModelChange",function(o){return i.file_type=o})("change",function(){return i.fileTypeChange}),t.YNc(14,Xt,2,2,"option",8),t.qZA()(),t.TgZ(15,"div",9)(16,"label"),t._uU(17,"Document Name"),t.qZA(),t.TgZ(18,"input",10),t.NdJ("ngModelChange",function(o){return i.file_gd_name=o})("keyup",function(){return i.fileGDName_KP()}),t.qZA()(),t.TgZ(19,"div",11)(20,"div",12)(21,"div",13)(22,"span"),t._uU(23,"Choose file"),t.qZA(),t.TgZ(24,"input",14),t.NdJ("uploadOutput",function(o){return i.onUploadOutput(o)}),t.qZA()(),t.TgZ(25,"div",15),t._UZ(26,"input",16),t.qZA()()()(),t.TgZ(27,"div",17)(28,"button",18),t.NdJ("click",function(){return i.uploadFile()}),t._uU(29,"Upload"),t.qZA(),t.YNc(30,$t,1,0,"mdb-spinner",19),t.TgZ(31,"button",20),t.NdJ("click",function(){return i.closeDialogue()}),t._uU(32,"Close"),t.qZA()()()),2&e&&(t.xp6(6),t.Oqu(i.heading),t.xp6(3),t.Oqu(i.content.description),t.xp6(4),t.Q6J("ngModel",i.file_type),t.xp6(1),t.Q6J("ngForOf",i.fileTypesList),t.xp6(4),t.Q6J("ngModel",i.file_gd_name),t.xp6(6),t.Q6J("uploadInput",i.uploadInput),t.xp6(2),t.Q6J("value",i.showFiles()),t.xp6(2),t.Q6J("disabled",i.is_uploading),t.xp6(2),t.Q6J("ngIf",i.is_uploading))},directives:[_.EJ,_.JJ,_.On,c.sg,_.YN,_.Kr,_.Fj,d.HqI,L.VP,d.mTE,d.b6v,d.r_7,c.O5,d.Os0],encapsulation:2}),a})();const Kt=["staticTabs"];function te(a,r){1&a&&(t.TgZ(0,"option",42),t._uU(1,"All"),t.qZA())}function ee(a,r){if(1&a&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.company_id),t.xp6(1),t.hij(" ",e.name," ")}}function ie(a,r){1&a&&(t.TgZ(0,"option",42),t._uU(1,"All"),t.qZA())}function ne(a,r){if(1&a&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function oe(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().addDocuments()}),t._UZ(1,"mdb-icon",45),t.qZA()}}let ae=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.utility=e,this.rd=i,this.activeRoute=n,this.router=o,this.toastr=l,this.REQ=s,this.AS=u,this.modalService=p,this.user=this.AS.currentUserValue,this.authority="Company",this.urlPrefix="",this.queryParams={},this.view="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.reportGenTime=new Date,this.display_tab=0,this.groupList={},this.companyList=[],this.trancheList=[],this.company={},this.dtList=this.rd.GetDates(),this.group_id="",this.company_id=-1,this.tranche_id=-1,this.finList=[],this.cList=this.rd.GetCategories("ALL"),this.cFList={},this.financial={},this.myTrancheList={},this.file_info="Company",this.tDocuments=[],this.start_date=this.dtList.tdate_YTD,this.end_date=this.dtList.tdate,this.today=new Date,this.schema="",this.gridC1Data=[],this.gridC1Options={enableRangeSelection:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0}},this.gridC1Columns=[{headerName:"Category",colId:"c1",witdh:100,field:"category"},{headerName:"Name",field:"name",sort:"ASCE",filter:!0},{headerName:"Total",field:"total",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Ratio",field:"ratio",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agPercentFormatter},{headerName:"Parent",field:"parent_name"}],this.gridDocData=[],this.gridDocColumns=[{headerName:"ID",field:"index",width:40,sortable:!0,filter:"agNumberColumnFilter"},{headerName:"D",width:25,field:"doc_format",cellRenderer:this.utility.agImageRenderer},{headerName:"Document",width:130,field:"doc_type"},{headerName:"Name",field:"doc_name",sortable:!0,filter:!0},{headerName:"Updated By",field:"updatedby",sortable:!0,filter:!0},{headerName:"Updated",field:"updated",width:140,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Tranche ID",field:"tranche_id",hide:!0},{headerName:"Company ID",field:"company_id",hide:!0},{headerName:"Doc ID",field:"doc_id",hide:!0},{headerName:"Doc Path",field:"doc_path",hide:!0}],this.verifyAccess()}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.rd.companySubject.subscribe(e=>this.companyList=e),this.rd.trancheSubject.subscribe(e=>this.trancheList=e),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("company_id")&&(this.tranche_id=this.queryParams.company_id),this.init()}),this.gridDocColumns.push({headerName:"Trash",width:25,field:"doc_delete",cellRenderer:this.utility.agImageRenderer})}init(){this.view=this.user.type,this.company_id>0&&(this.getCompanyInfo(this.company_id,"company_id"),this.getCategories(),this.updateTranche(),this.refreshAnalytics("INIT")),console.log("Company: INIT:",this.view)}getCompanyInfo(e,i){}verifyAccess(){console.log("verifyAccess");var e=this.user.authority,i=-1;for(var n in console.log("verifyaccess.1",e),e)"company"==n&&(console.log("verifyAccess: GOOD"),i=0);if(-1==i)return this.router.navigate(["unAuthorized"],{queryParams:{property_id:"test"}}),!1}updateTranche(){this.myTrancheList={};for(let e=0;e<this.trancheList.length;e++)this.trancheList[e].label==this.company.label&&(this.myTrancheList[this.trancheList[e].tranche_id]=this.trancheList[e].tranche_name);this.tranche_id=-1,console.log("updateTranche:",this.myTrancheList)}getCategories(){this.REQ.get("c","").subscribe(e=>{this.cFList=e.data,console.log("getCategories:",this.cFList)},e=>{console.log(e),this.toastr.error("Category reuest failed : "+e)})}refreshReport(e,i){if(console.log("refreshReport:",e,i),"COMPANY"===i){for(let n=0;n<this.companyList.length;n++)this.companyList[n].company_id==this.company_id&&(this.company=this.companyList[n],this.company_id=this.company.company_id);console.log("refreshReport:",this.company),this.updateTranche()}this.refreshAnalytics(i)}onGridReadyTX(e,i){var n=e.api.getColumnDefs();n.forEach(function(o,l){o.resizable=!0,o.sortable=!0,o.filter=!0}),e.api.setColumnDefs(n)}refreshData(e){this.refreshAnalytics(e),this.refreshDocs(this.company_id),console.log("Company: ",this.companyList)}refreshAnalytics(e){const i={authority:this.authority,sub_authority:"MASTER",operation:"VIEW",params:{company:this.company.label,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};this.tranche_id>0&&(i.params.tranche_id=this.tranche_id),console.log("refreshAnalytics:",i),this.financial={},this.REQ.get("pmcf",{query:JSON.stringify(i)}).subscribe(n=>{this.finList=n.data,console.log(" financial:",this.finList,this.cList),this.schema=n.schema;for(let l=0;l<this.finList.length;l++)this.financial[this.finList[l].name]=this.finList[l].total,this.financial[this.finList[l].name+"_PCT"]=this.finList[l].ratio,this.finList[l].parent_name=this.finList[l].parent+" "+this.cList[this.finList[l].parent];this.financial.COC=this.financial.NOI-this.financial["LOAN PAYMENT"],this.financial.ROI=this.financial.NOI-this.financial["LOAN PAYMENT"]+this.financial["LOAN PRINCIPAL"],console.log("Data:",this.financial),this.gridC1Data=this.finList},n=>{console.log(n)}),this.reportGenTime=new Date}refreshDocs(e){this.gridDocData=[];const i={params:{company_id:e,key_type:"COMPANY"},usage:{authority:this.authority,sub_authority:"Documents",operation:"REFRESH",data:"NA"}};console.log("refreshDocs:",i),this.REQ.get("fl",{query:JSON.stringify(i)}).subscribe(n=>{console.log("getDocs.1:",n),this.tDocuments=n.data},n=>{console.log(n)}),this.gridDocData=this.tDocuments,this.reportGenTime=new Date}addDocuments(){this.file_info=this.company.label,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Company Document",content:{owner_type:"COMPANY",owner_id:this.company_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i)})}getDocument(e){console.log("getDocument: ",e),e.tranche_id=this.tranche_id;let i={params:e,usage:{authority:this.authority,sub_authority:"Documents",operation:"DOWNLOAD",data:"NA"}},n=i.params.doc_id+"_"+i.params.doc_name+"."+i.params.doc_format;console.log("getDocument: ",i,n),this.REQ.getDocument({query:JSON.stringify(i)},n)}delDocument(e){let i={doc_id:e,key_type:"TRANCHE"};console.log(i),this.REQ.post("fd",i).subscribe(n=>{console.log(n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}onTabChange(e){console.log("onTabChange:",e)}onGridReady(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e,i){e.api.sizeColumnsToFit()}onCellClicked(e,i){console.log("onCellClicked:",e,i);var n=e.api.getSelectedRows()[0],o=e.api.getFocusedCell();console.log("CellClicked:"+o.id+" event: "+e),console.log("CellClicked:"+n.category+" cell="+e.id+" "+e.value),"DOCUMENTS"==i&&"doc_format"===e.column.colId&&this.getDocument(e.data)}onCellDoubleClicked(e,i){console.log("DoubleClicked:"+e)}bracketsFormatter(e){return"("+e.value+")"}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(d.klp),t.Y36(m.s),t.Y36(b.$),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-company"]],viewQuery:function(e,i){if(1&e&&t.Gf(Kt,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:527,vars:375,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"container-fluid"],[1,"row"],[1,"col-lg-3","col-md-4","col-sm-12"],[1,"form-group"],[1,"position-relative"],["label","company","id","company","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],["value","ALL",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-sm-12","text-left"],["label","Tranche","id","tranche","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-2","col-md-4","col-sm-12"],[1,"md-form","mb-2"],["label","From","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["label","To","name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],[1,"col-lg-2","col-md-4","col-sm-12","text-md-right","mb-md-0","mb-4"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",1,"mt-4",3,"click"],[1,"fas","fa-sync"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","tooltip","Add Document",3,"click",4,"ngIf"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass","activeTabChange"],["staticTabs",""],["heading","Performance"],[1,"col-sm-6"],[1,"row","font-weight-bold"],[1,"card-title","col-lg-6","col-md-4","col-sm-12","font-weight-bold"],[1,"card-title","col-lg-4","col-md-4","col-sm-12","text-right","font-weight-bold"],[1,"card-title","col-lg-2","col-md-4","col-sm-12","text-right","font-weight-bold"],[1,"col-sm-4","text-right"],[1,"col-sm-2","text-right"],[1,"col","text-right"],["heading","Analysis"],["heading","Detailed"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","500px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""],["heading","Documents"],[1,"card-footer"],["value","ALL"],[3,"value"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","tooltip","Add Document",3,"click"],["fas","","icon","plus-square"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._uU(5," Company Report "),t.qZA()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),t._uU(12,"Company"),t.qZA(),t.TgZ(13,"select",9),t.NdJ("ngModelChange",function(o){return i.company_id=o})("ngModelChange",function(o){return i.refreshReport(o,"COMPANY")}),t.YNc(14,te,2,0,"option",10),t.YNc(15,ee,2,2,"option",11),t.qZA()()(),t.TgZ(16,"div",12)(17,"div",7)(18,"label",8),t._uU(19,"Tranche / Asset"),t.qZA(),t.TgZ(20,"select",13),t.NdJ("ngModelChange",function(o){return i.tranche_id=o})("ngModelChange",function(){return i.refreshAnalytics("TRANCHE")}),t.YNc(21,ie,2,0,"option",10),t.YNc(22,ne,2,2,"option",11),t.ALo(23,"keyvalue"),t.qZA()()(),t.TgZ(24,"div",14)(25,"div",15)(26,"mdb-date-picker",16,17),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()()(),t.TgZ(28,"div",14)(29,"div",15)(30,"mdb-date-picker",18,19),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()()(),t.TgZ(32,"div",20)(33,"button",21),t.NdJ("click",function(){return i.refreshData("REFRESH")}),t._UZ(34,"i",22),t.qZA(),t.YNc(35,oe,2,0,"button",23),t.qZA()()(),t.TgZ(36,"div",24)(37,"mdb-tabset",25,26),t.NdJ("activeTabChange",function(o){return i.onTabChange(o)}),t.TgZ(39,"mdb-tab",27)(40,"div",5)(41,"div",28)(42,"div",29)(43,"div",30),t._uU(44," NOI "),t.qZA(),t.TgZ(45,"div",31),t._uU(46),t.ALo(47,"currency"),t.qZA(),t.TgZ(48,"div",32),t._uU(49),t.ALo(50,"percent"),t.qZA()()()(),t.TgZ(51,"div",5)(52,"div",28)(53,"div",29)(54,"div",28),t._uU(55,"Income"),t.qZA(),t.TgZ(56,"div",33),t._uU(57),t.ALo(58,"currency"),t.qZA(),t.TgZ(59,"div",34),t._uU(60),t.ALo(61,"percent"),t.qZA()(),t.TgZ(62,"div",5)(63,"div",28),t._uU(64,"Rent"),t.qZA(),t.TgZ(65,"div",33),t._uU(66),t.ALo(67,"currency"),t.qZA(),t.TgZ(68,"div",34),t._uU(69),t.ALo(70,"percent"),t.qZA()(),t.TgZ(71,"div",5)(72,"div",28),t._uU(73,"Utility Reimbursed"),t.qZA(),t.TgZ(74,"div",35),t._uU(75),t.ALo(76,"currency"),t.qZA(),t.TgZ(77,"div",34),t._uU(78),t.ALo(79,"percent"),t.qZA()(),t.TgZ(80,"div",5)(81,"div",28),t._uU(82,"Late Fees"),t.qZA(),t.TgZ(83,"div",35),t._uU(84),t.ALo(85,"currency"),t.qZA(),t.TgZ(86,"div",34),t._uU(87),t.ALo(88,"percent"),t.qZA()(),t.TgZ(89,"div",5)(90,"div",28),t._uU(91,"Application Fees"),t.qZA(),t.TgZ(92,"div",35),t._uU(93),t.ALo(94,"currency"),t.qZA(),t.TgZ(95,"div",34),t._uU(96),t.ALo(97,"percent"),t.qZA()(),t.TgZ(98,"div",5)(99,"div",28),t._uU(100,"Other"),t.qZA(),t.TgZ(101,"div",35),t._uU(102),t.ALo(103,"currency"),t.qZA(),t.TgZ(104,"div",34),t._uU(105),t.ALo(106,"percent"),t.qZA()(),t.TgZ(107,"div",5)(108,"div",28),t._uU(109,"Pet Fees"),t.qZA(),t.TgZ(110,"div",35),t._uU(111),t.ALo(112,"currency"),t.qZA(),t.TgZ(113,"div",34),t._uU(114),t.ALo(115,"percent"),t.qZA()(),t.TgZ(116,"div",5)(117,"div",28),t._uU(118,"Laundry"),t.qZA(),t.TgZ(119,"div",35),t._uU(120),t.ALo(121,"currency"),t.qZA(),t.TgZ(122,"div",34),t._uU(123),t.ALo(124,"percent"),t.qZA()(),t.TgZ(125,"div",5)(126,"div",28),t._uU(127,"Rent Subsidy"),t.qZA(),t.TgZ(128,"div",35),t._uU(129),t.ALo(130,"currency"),t.qZA(),t.TgZ(131,"div",34),t._uU(132),t.ALo(133,"percent"),t.qZA()()(),t.TgZ(134,"div",28)(135,"div",29)(136,"div",28),t._uU(137,"Expenses"),t.qZA(),t.TgZ(138,"div",33),t._uU(139),t.ALo(140,"currency"),t.qZA(),t.TgZ(141,"div",34),t._uU(142),t.ALo(143,"percent"),t.qZA()(),t.TgZ(144,"div"),t._uU(145,"\xa0"),t.qZA(),t.TgZ(146,"div",29)(147,"div",28),t._uU(148,"Fixed"),t.qZA(),t.TgZ(149,"div",33),t._uU(150),t.ALo(151,"currency"),t.qZA(),t.TgZ(152,"div",34),t._uU(153),t.ALo(154,"percent"),t.qZA()(),t.TgZ(155,"div",5)(156,"div",28),t._uU(157,"Insurance"),t.qZA(),t.TgZ(158,"div",33),t._uU(159),t.ALo(160,"currency"),t.qZA(),t.TgZ(161,"div",34),t._uU(162),t.ALo(163,"percent"),t.qZA()(),t.TgZ(164,"div",5)(165,"div",28),t._uU(166,"Property Tax"),t.qZA(),t.TgZ(167,"div",33),t._uU(168),t.ALo(169,"currency"),t.qZA(),t.TgZ(170,"div",34),t._uU(171),t.ALo(172,"percent"),t.qZA()(),t.TgZ(173,"div"),t._uU(174,"\xa0"),t.qZA(),t.TgZ(175,"div",29)(176,"div",28),t._uU(177,"Operating"),t.qZA(),t.TgZ(178,"div",33),t._uU(179),t.ALo(180,"currency"),t.qZA(),t.TgZ(181,"div",34),t._uU(182),t.ALo(183,"percent"),t.qZA()(),t.TgZ(184,"div",5)(185,"div",28),t._uU(186,"CapEx"),t.qZA(),t.TgZ(187,"div",33),t._uU(188),t.ALo(189,"currency"),t.qZA(),t.TgZ(190,"div",34),t._uU(191),t.ALo(192,"percent"),t.qZA()(),t.TgZ(193,"div",5)(194,"div",28),t._uU(195,"Maintenance"),t.qZA(),t.TgZ(196,"div",33),t._uU(197),t.ALo(198,"currency"),t.qZA(),t.TgZ(199,"div",34),t._uU(200),t.ALo(201,"percent"),t.qZA()(),t.TgZ(202,"div",29)(203,"div",28),t._uU(204,"Professional Fees"),t.qZA(),t.TgZ(205,"div",33),t._uU(206),t.ALo(207,"currency"),t.qZA(),t.TgZ(208,"div",34),t._uU(209),t.ALo(210,"percent"),t.qZA()(),t.TgZ(211,"div",5)(212,"div",28),t._uU(213,"Automobile Expense"),t.qZA(),t.TgZ(214,"div",33),t._uU(215),t.ALo(216,"currency"),t.qZA(),t.TgZ(217,"div",34),t._uU(218),t.ALo(219,"percent"),t.qZA()(),t.TgZ(220,"div",5)(221,"div",28),t._uU(222,"Management Fees"),t.qZA(),t.TgZ(223,"div",33),t._uU(224),t.ALo(225,"currency"),t.qZA(),t.TgZ(226,"div",34),t._uU(227),t.ALo(228,"percent"),t.qZA()(),t.TgZ(229,"div",5)(230,"div",28),t._uU(231,"Payroll"),t.qZA(),t.TgZ(232,"div",33),t._uU(233),t.ALo(234,"currency"),t.qZA(),t.TgZ(235,"div",34),t._uU(236),t.ALo(237,"percent"),t.qZA()(),t.TgZ(238,"div",5)(239,"div",28),t._uU(240,"Business License"),t.qZA(),t.TgZ(241,"div",33),t._uU(242),t.ALo(243,"currency"),t.qZA(),t.TgZ(244,"div",34),t._uU(245),t.ALo(246,"percent"),t.qZA()(),t.TgZ(247,"div",5)(248,"div",28),t._uU(249,"Business Travel"),t.qZA(),t.TgZ(250,"div",33),t._uU(251),t.ALo(252,"currency"),t.qZA(),t.TgZ(253,"div",34),t._uU(254),t.ALo(255,"percent"),t.qZA()(),t.TgZ(256,"div",5)(257,"div",28),t._uU(258,"Charitable Contribution"),t.qZA(),t.TgZ(259,"div",33),t._uU(260),t.ALo(261,"currency"),t.qZA(),t.TgZ(262,"div",34),t._uU(263),t.ALo(264,"percent"),t.qZA()(),t.TgZ(265,"div",5)(266,"div",28),t._uU(267,"Government Fees"),t.qZA(),t.TgZ(268,"div",33),t._uU(269),t.ALo(270,"currency"),t.qZA(),t.TgZ(271,"div",34),t._uU(272),t.ALo(273,"percent"),t.qZA()(),t.TgZ(274,"div",5)(275,"div",28),t._uU(276,"Legal"),t.qZA(),t.TgZ(277,"div",33),t._uU(278),t.ALo(279,"currency"),t.qZA(),t.TgZ(280,"div",34),t._uU(281),t.ALo(282,"percent"),t.qZA()(),t.TgZ(283,"div",5)(284,"div",28),t._uU(285,"Marketing"),t.qZA(),t.TgZ(286,"div",33),t._uU(287),t.ALo(288,"currency"),t.qZA(),t.TgZ(289,"div",34),t._uU(290),t.ALo(291,"percent"),t.qZA()(),t.TgZ(292,"div",5)(293,"div",28),t._uU(294,"Technology"),t.qZA(),t.TgZ(295,"div",33),t._uU(296),t.ALo(297,"currency"),t.qZA(),t.TgZ(298,"div",34),t._uU(299),t.ALo(300,"percent"),t.qZA()(),t.TgZ(301,"div",5)(302,"div",28),t._uU(303,"Services"),t.qZA(),t.TgZ(304,"div",33),t._uU(305),t.ALo(306,"currency"),t.qZA(),t.TgZ(307,"div",34),t._uU(308),t.ALo(309,"percent"),t.qZA()(),t.TgZ(310,"div",29)(311,"div",28),t._uU(312,"Utilities"),t.qZA(),t.TgZ(313,"div",33),t._uU(314),t.ALo(315,"currency"),t.qZA(),t.TgZ(316,"div",34),t._uU(317),t.ALo(318,"percent"),t.qZA()(),t.TgZ(319,"div",5)(320,"div",28),t._uU(321,"Water"),t.qZA(),t.TgZ(322,"div",33),t._uU(323),t.ALo(324,"currency"),t.qZA(),t.TgZ(325,"div",34),t._uU(326),t.ALo(327,"percent"),t.qZA()(),t.TgZ(328,"div",5)(329,"div",28),t._uU(330,"Sewer"),t.qZA(),t.TgZ(331,"div",33),t._uU(332),t.ALo(333,"currency"),t.qZA(),t.TgZ(334,"div",34),t._uU(335),t.ALo(336,"percent"),t.qZA()(),t.TgZ(337,"div",5)(338,"div",28),t._uU(339,"Electric"),t.qZA(),t.TgZ(340,"div",33),t._uU(341),t.ALo(342,"currency"),t.qZA(),t.TgZ(343,"div",34),t._uU(344),t.ALo(345,"percent"),t.qZA()(),t.TgZ(346,"div",5)(347,"div",28),t._uU(348,"Gas"),t.qZA(),t.TgZ(349,"div",33),t._uU(350),t.ALo(351,"currency"),t.qZA(),t.TgZ(352,"div",34),t._uU(353),t.ALo(354,"percent"),t.qZA()(),t.TgZ(355,"div",5)(356,"div",28),t._uU(357,"Internet"),t.qZA(),t.TgZ(358,"div",33),t._uU(359),t.ALo(360,"currency"),t.qZA(),t.TgZ(361,"div",34),t._uU(362),t.ALo(363,"percent"),t.qZA()(),t.TgZ(364,"div",5)(365,"div",28),t._uU(366,"Security"),t.qZA(),t.TgZ(367,"div",33),t._uU(368),t.ALo(369,"currency"),t.qZA(),t.TgZ(370,"div",34),t._uU(371),t.ALo(372,"percent"),t.qZA()(),t.TgZ(373,"div",5)(374,"div",28),t._uU(375,"Trash"),t.qZA(),t.TgZ(376,"div",33),t._uU(377),t.ALo(378,"currency"),t.qZA(),t.TgZ(379,"div",34),t._uU(380),t.ALo(381,"percent"),t.qZA()(),t.TgZ(382,"div",5)(383,"div",28),t._uU(384,"Landscaping"),t.qZA(),t.TgZ(385,"div",33),t._uU(386),t.ALo(387,"currency"),t.qZA(),t.TgZ(388,"div",34),t._uU(389),t.ALo(390,"percent"),t.qZA()()()(),t.TgZ(391,"div",5)(392,"div",28)(393,"div",29)(394,"div",28),t._uU(395,"Finance"),t.qZA()(),t.TgZ(396,"div",5)(397,"div",28),t._uU(398,"Loan Payments"),t.qZA(),t.TgZ(399,"div",33),t._uU(400),t.ALo(401,"currency"),t.qZA(),t.TgZ(402,"div",34),t._uU(403),t.ALo(404,"percent"),t.qZA()(),t.TgZ(405,"div",5)(406,"div",28),t._uU(407,"Principal Paid"),t.qZA(),t.TgZ(408,"div",33),t._uU(409),t.ALo(410,"currency"),t.qZA(),t.TgZ(411,"div",34),t._uU(412),t.ALo(413,"percent"),t.qZA()(),t.TgZ(414,"div",5)(415,"div",28),t._uU(416,"Interest Paid"),t.qZA(),t.TgZ(417,"div",33),t._uU(418),t.ALo(419,"currency"),t.qZA(),t.TgZ(420,"div",34),t._uU(421),t.ALo(422,"percent"),t.qZA()(),t._UZ(423,"hr"),t.TgZ(424,"div",5)(425,"div",28),t._uU(426,"Cash on Cash"),t.qZA(),t.TgZ(427,"div",33),t._uU(428),t.ALo(429,"currency"),t.qZA(),t.TgZ(430,"div",34),t._uU(431),t.ALo(432,"percent"),t.qZA()(),t.TgZ(433,"div",5)(434,"div",28),t._uU(435,"Total Return"),t.qZA(),t.TgZ(436,"div",33),t._uU(437),t.ALo(438,"currency"),t.qZA(),t.TgZ(439,"div",34),t._uU(440),t.ALo(441,"percent"),t.qZA()()()()(),t.TgZ(442,"mdb-tab",36)(443,"div",5)(444,"div",28)(445,"div",29)(446,"div",30),t._uU(447," NOI "),t.qZA(),t.TgZ(448,"div",31),t._uU(449),t.ALo(450,"currency"),t.qZA(),t.TgZ(451,"div",32),t._uU(452),t.ALo(453,"percent"),t.qZA()(),t.TgZ(454,"div",29)(455,"div",28),t._uU(456,"Income"),t.qZA(),t.TgZ(457,"div",33),t._uU(458),t.ALo(459,"currency"),t.qZA(),t.TgZ(460,"div",34),t._uU(461),t.ALo(462,"percent"),t.qZA()()()(),t.TgZ(463,"div",5)(464,"div",28)(465,"div",29)(466,"div",28),t._uU(467,"Finance"),t.qZA(),t._UZ(468,"div",33),t.TgZ(469,"div",34),t._uU(470,"DCR"),t.qZA()(),t.TgZ(471,"div",5)(472,"div",28),t._uU(473,"Loan Payments"),t.qZA(),t.TgZ(474,"div",33),t._uU(475),t.ALo(476,"currency"),t.qZA(),t.TgZ(477,"div",34),t._uU(478),t.ALo(479,"number"),t.qZA()(),t.TgZ(480,"div",5)(481,"div",28),t._uU(482,"Principal Paid"),t.qZA(),t.TgZ(483,"div",33),t._uU(484),t.ALo(485,"currency"),t.qZA(),t.TgZ(486,"div",34),t._uU(487),t.ALo(488,"number"),t.qZA()(),t.TgZ(489,"div",5)(490,"div",28),t._uU(491,"Interest Paid"),t.qZA(),t.TgZ(492,"div",33),t._uU(493),t.ALo(494,"currency"),t.qZA(),t.TgZ(495,"div",34),t._uU(496),t.ALo(497,"number"),t.qZA()(),t._UZ(498,"hr"),t.TgZ(499,"div",5)(500,"div",28),t._uU(501,"Cash on Cash"),t.qZA(),t.TgZ(502,"div",33),t._uU(503),t.ALo(504,"currency"),t.qZA(),t.TgZ(505,"div",34),t._uU(506),t.ALo(507,"percent"),t.qZA()(),t.TgZ(508,"div",5)(509,"div",28),t._uU(510,"Total Return"),t.qZA(),t.TgZ(511,"div",33),t._uU(512),t.ALo(513,"currency"),t.qZA(),t.TgZ(514,"div",34),t._uU(515),t.ALo(516,"percent"),t.qZA()()()()(),t.TgZ(517,"mdb-tab",37)(518,"div",5)(519,"ag-grid-angular",38,39),t.NdJ("gridReady",function(o){return i.onGridReadyTX(o,"DETAILED")})("modelUpdated",function(o){return i.onModelUpdated(o,"DETAILED")})("cellClicked",function(o){return i.onCellClicked(o,"DETAILED")})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o,"DETAILED")}),t.qZA()()(),t.TgZ(521,"mdb-tab",40)(522,"div",5)(523,"ag-grid-angular",38,39),t.NdJ("gridReady",function(o){return i.onGridReadyTX(o,"DOCUMENTS")})("modelUpdated",function(o){return i.onModelUpdated(o,"DOCUMENTS")})("cellClicked",function(o){return i.onCellClicked(o,"DOCUMENTS")})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o,"DOCUMENTS")}),t.qZA()()()()()(),t.TgZ(525,"div",41),t._uU(526),t.qZA()()()),2&e&&(t.xp6(13),t.Q6J("ngModel",i.company_id),t.xp6(1),t.Q6J("ngIf","Admin"===i.user.type),t.xp6(1),t.Q6J("ngForOf",i.companyList),t.xp6(5),t.Q6J("ngModel",i.tranche_id),t.xp6(1),t.Q6J("ngIf","Admin"===i.user.type),t.xp6(1),t.Q6J("ngForOf",t.lcZ(23,123,i.myTrancheList)),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(5),t.Q6J("ngIf","Admin"===i.view),t.xp6(2),t.Q6J("buttonClass","nav md-pills border-bottom")("justified",!0)("contentClass","card"),t.xp6(9),t.hij(" ",t.lcZ(47,125,i.financial.NOI)," "),t.xp6(3),t.hij(" ",t.xi3(50,127,i.financial.NOI_PCT,"0.2")," "),t.xp6(8),t.Oqu(t.lcZ(58,130,i.financial.INCOME)),t.xp6(3),t.Oqu(t.xi3(61,132,i.financial.INCOME_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(67,135,i.financial.RENT)),t.xp6(3),t.Oqu(t.xi3(70,137,i.financial.RENT_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(76,140,i.financial.UTILITY_RF)),t.xp6(3),t.Oqu(t.xi3(79,142,i.financial.UTILITY_RF_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(85,145,i.financial.LATE_FEE)),t.xp6(3),t.Oqu(t.xi3(88,147,i.financial.LATE_FEE_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(94,150,i.financial.APP_FEE)),t.xp6(3),t.Oqu(t.xi3(97,152,i.financial.APP_FEE_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(103,155,i.financial.OTHER)),t.xp6(3),t.Oqu(t.xi3(106,157,i.financial.OTHER_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(112,160,i.financial["PET FEES I"])),t.xp6(3),t.Oqu(t.xi3(115,162,i.financial["PET FEES I_PCT"],"0.2")),t.xp6(6),t.Oqu(t.lcZ(121,165,i.financial.LAUNDRY)),t.xp6(3),t.Oqu(t.xi3(124,167,i.financial.LAUNDRY_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(130,170,i.financial.RENT_SUBSIDY)),t.xp6(3),t.Oqu(t.xi3(133,172,i.financial.RENT_SUBSIDY_PCT,"0.2")),t.xp6(7),t.Oqu(t.lcZ(140,175,i.financial.EXPENSE)),t.xp6(3),t.Oqu(t.xi3(143,177,i.financial.EXPENSE_PCT,"0.2")),t.xp6(8),t.Oqu(t.lcZ(151,180,i.financial.FIXED)),t.xp6(3),t.Oqu(t.xi3(154,182,i.financial.FIXED_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(160,185,i.financial.INSURANCE)),t.xp6(3),t.Oqu(t.xi3(163,187,i.financial.INSURANCE_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(169,190,i.financial.PROPERTY_TAX)),t.xp6(3),t.Oqu(t.xi3(172,192,i.financial.PROPERTY_TAX_PCT,"0.2")),t.xp6(8),t.Oqu(t.lcZ(180,195,i.financial.OPERATING)),t.xp6(3),t.Oqu(t.xi3(183,197,i.financial.OPERATING_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(189,200,i.financial.CAPEX)),t.xp6(3),t.Oqu(t.xi3(192,202,i.financial.CAPEX_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(198,205,i.financial.GENERAL)),t.xp6(3),t.Oqu(t.xi3(201,207,i.financial.GENERAL_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(207,210,i.financial.PROFESSIONAL_FEES)),t.xp6(3),t.Oqu(t.xi3(210,212,i.financial.PROFESSIONAL_FEES_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(216,215,i.financial["AUTOMOBILE EXPENSE"])),t.xp6(3),t.Oqu(t.xi3(219,217,i.financial["AUTOMOBILE EXPENSE_PCT"],"0.2")),t.xp6(6),t.hij("",t.lcZ(225,220,i.financial.MANAGEMENT)," "),t.xp6(3),t.hij("",t.xi3(228,222,i.financial.MANAGEMENT_PCT,"0.2")," "),t.xp6(6),t.hij("",t.lcZ(234,225,i.financial.PAYROLL)," "),t.xp6(3),t.hij("",t.xi3(237,227,i.financial.PAYROLL_PCT,"0.2")," "),t.xp6(6),t.Oqu(t.lcZ(243,230,i.financial.BUSINESS_LICENSE)),t.xp6(3),t.Oqu(t.xi3(246,232,i.financial.BUSINESS_LICENSE_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(252,235,i.financial.BUSINESS_TRAVEL)),t.xp6(3),t.Oqu(t.xi3(255,237,i.financial.BUSINESS_TRAVEL_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(261,240,i.financial["CHARITABLE CONTRIBUTION"])),t.xp6(3),t.hij("",t.xi3(264,242,i.financial["CHARITABLE CONTRIBUTION_PCT"],"0.2")," "),t.xp6(6),t.Oqu(t.lcZ(270,245,i.financial.GOVERNMENT_FEES)),t.xp6(3),t.Oqu(t.xi3(273,247,i.financial.GOVERNMENT_FEES_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(279,250,i.financial.LEGAL)),t.xp6(3),t.Oqu(t.xi3(282,252,i.financial.LEGAL_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(288,255,i.financial["MARKETING CHARGES"])),t.xp6(3),t.Oqu(t.xi3(291,257,i.financial["MARKETING CHARGES_PCT"],"0.2")),t.xp6(6),t.Oqu(t.lcZ(297,260,i.financial["TECHNOLOGY CHARGES"])),t.xp6(3),t.Oqu(t.xi3(300,262,i.financial["TECHNOLOGY CHARGES_PCT"],"0.2")),t.xp6(6),t.Oqu(t.lcZ(306,265,i.financial["PROFESSIONAL SERVICES"])),t.xp6(3),t.Oqu(t.xi3(309,267,i.financial["PROFESSIONAL SERVICES_PCT"],"0.2")),t.xp6(6),t.Oqu(t.lcZ(315,270,i.financial.UTILITY)),t.xp6(3),t.Oqu(t.xi3(318,272,i.financial.UTILITY_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(324,275,i.financial.WATER)),t.xp6(3),t.Oqu(t.xi3(327,277,i.financial.WATER_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(333,280,i.financial.SEWER)),t.xp6(3),t.Oqu(t.xi3(336,282,i.financial.SEWER_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(342,285,i.financial.ELECTRIC)),t.xp6(3),t.Oqu(t.xi3(345,287,i.financial.ELECTRIC_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(351,290,i.financial.GAS)),t.xp6(3),t.Oqu(t.xi3(354,292,i.financial.GAS_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(360,295,i.financial.INTERNET)),t.xp6(3),t.Oqu(t.xi3(363,297,i.financial.INTERNET_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(369,300,i.financial.SECURITY)),t.xp6(3),t.Oqu(t.xi3(372,302,i.financial.SECURITY_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(378,305,i.financial.GARBAGE_RECYCLE)),t.xp6(3),t.hij("",t.xi3(381,307,i.financial.GARBAGE_RECYCLE_PCT,"0.2")," "),t.xp6(6),t.Oqu(t.lcZ(387,310,i.financial.LANDSCAPING)),t.xp6(3),t.Oqu(t.xi3(390,312,i.financial.LANDSCAPING_PCT,"0.2")),t.xp6(11),t.Oqu(t.lcZ(401,315,i.financial["LOAN PAYMENT"])),t.xp6(3),t.Oqu(t.xi3(404,317,i.financial["LOAN PAYMENT_PCT"],"0.2")),t.xp6(6),t.Oqu(t.lcZ(410,320,i.financial["LOAN PRINCIPAL"])),t.xp6(3),t.hij("",t.xi3(413,322,i.financial["LOAN PRINCIPAL_PCT"],"0.2")," "),t.xp6(6),t.Oqu(t.lcZ(419,325,i.financial["LOAN INTEREST"])),t.xp6(3),t.Oqu(t.xi3(422,327,i.financial["LOAN INTEREST_PCT"],"0.2")),t.xp6(7),t.Oqu(t.lcZ(429,330,i.financial.COC)),t.xp6(3),t.Oqu(t.xi3(432,332,i.financial.COC_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(438,335,i.financial.ROI)),t.xp6(3),t.Oqu(t.xi3(441,337,i.financial.ROI_PCT,"0.2")),t.xp6(9),t.hij(" ",t.lcZ(450,340,i.financial.NOI)," "),t.xp6(3),t.hij(" ",t.xi3(453,342,i.financial.NOI_PCT,"0.2")," "),t.xp6(6),t.Oqu(t.lcZ(459,345,i.financial.INCOME)),t.xp6(3),t.Oqu(t.xi3(462,347,i.financial.INCOME_PCT,"0.2")),t.xp6(14),t.Oqu(t.lcZ(476,350,i.financial["LOAN PAYMENT"])),t.xp6(3),t.Oqu(t.xi3(479,352,i.financial.NOI/i.financial["LOAN PAYMENT"],"1.2-2")),t.xp6(6),t.Oqu(t.lcZ(485,355,i.financial["LOAN PRINCIPAL"])),t.xp6(3),t.hij("",t.xi3(488,357,i.financial.NOI/i.financial["LOAN PRINCIPAL"],"1.2-2")," "),t.xp6(6),t.Oqu(t.lcZ(494,360,i.financial["LOAN INTEREST"])),t.xp6(3),t.Oqu(t.xi3(497,362,i.financial.NOI/i.financial["LOAN INTEREST"],"1.2-2")),t.xp6(7),t.Oqu(t.lcZ(504,365,i.financial.COC)),t.xp6(3),t.Oqu(t.xi3(507,367,i.financial.COC_PCT,"0.2")),t.xp6(6),t.Oqu(t.lcZ(513,370,i.financial.ROI)),t.xp6(3),t.Oqu(t.xi3(516,372,i.financial.ROI_PCT,"0.2")),t.xp6(4),t.Q6J("columnDefs",i.gridC1Columns)("rowData",i.gridC1Data),t.xp6(4),t.Q6J("columnDefs",i.gridDocColumns)("rowData",i.gridDocData),t.xp6(3),t.hij(" Report generated as of ",i.reportGenTime," "))},directives:[d.gRC,_.EJ,_.JJ,_.On,c.O5,_.YN,_.Kr,c.sg,d.JNR,_.Q7,d.mTE,d.UiO,d.XIm,d.AH5,d.wWr,v.N8],pipes:[c.Nd,c.H9,c.Zx,c.JJ],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}}"]}),a})();var J=T(8675),R=T(4004),w=T(5928);const re=["staticTabs"];function le(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function de(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addDocuments("PROPERTY")}),t._UZ(1,"mdb-icon",47),t.qZA()}}function se(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(n){return t.CHM(e),t.oxw(2).createPDF(n,"PROPERTY")}),t._UZ(1,"mdb-icon",49),t.qZA()}}function _e(a,r){if(1&a&&(t.TgZ(0,"a",6),t._UZ(1,"i",50),t.qZA()),2&a){const e=t.oxw(2);t.hYB("href","",e.urlPrefix,"property?property_id=",e.property_id,"",t.LSH)}}function ce(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function ue(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.name),t.xp6(1),t.Oqu(e.name)}}function pe(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.value)}}function he(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",51)(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","13")}),t._uU(2,"GML"),t.qZA(),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","147")}),t._uU(4,"Flooring"),t.qZA(),t.TgZ(5,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","52")}),t._uU(6,"Painting"),t.qZA(),t.TgZ(7,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","35")}),t._uU(8,"Appliances"),t.qZA(),t.TgZ(9,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","12")}),t._uU(10,"Janitorial"),t.qZA()()}}function ge(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",51)(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","14")}),t._uU(2,"Landscape"),t.qZA(),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","27")}),t._uU(4,"Electric"),t.qZA(),t.TgZ(5,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","28")}),t._uU(6,"Gas"),t.qZA(),t.TgZ(7,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","29")}),t._uU(8,"Water"),t.qZA(),t.TgZ(9,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("PROPERTY","30")}),t._uU(10,"Trash"),t.qZA()()}}function me(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_value),t.xp6(1),t.Oqu(e.co_value)}}function fe(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function be(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",53)(1,"div",3)(2,"div",54)(3,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateTXData("PROPERTY")}),t._uU(4,"Save"),t.qZA(),t.TgZ(5,"button",56),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveASTXData("PROPERTY")}),t._uU(6,"Save As"),t.qZA()(),t.TgZ(7,"div",57)(8,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearTXData()}),t._uU(9,"Clear"),t.qZA(),t.TgZ(10,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cloneTXData()}),t._uU(11,"Clone"),t.qZA()()()()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("disabled",e.tx_readonly),t.xp6(2),t.Q6J("disabled",e.tx_readonly)}}function ye(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).addDocuments("PROPERTY")}),t._UZ(1,"mdb-icon",47),t.qZA()}}function Ce(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",66)(1,"td")(2,"p",67),t._uU(3),t.qZA()(),t.TgZ(4,"td",68),t._uU(5),t.qZA(),t.TgZ(6,"td",69)(7,"a",70),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(3).getDocument(o.index,"PROPERTY")}),t._UZ(8,"i"),t.qZA()(),t.TgZ(9,"td",71),t._uU(10),t.qZA(),t.TgZ(11,"td",71),t._uU(12),t.qZA(),t.TgZ(13,"td",72)(14,"a",70),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(3).delDocument(o.doc_id)}),t._UZ(15,"i"),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(3);t.xp6(3),t.Oqu(e.index),t.xp6(2),t.Oqu(e.doc_id),t.xp6(3),t.Tol(i.imageList[e.doc_format]),t.xp6(2),t.Oqu(e.doc_type),t.xp6(2),t.Oqu(e.doc_name),t.xp6(3),t.Tol(i.imageList.trash)}}function Te(a,r){if(1&a&&(t.TgZ(0,"div",11)(1,"div",59)(2,"table",60)(3,"thead")(4,"tr")(5,"th",61),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",61),t._uU(8,"Doc ID"),t.qZA(),t.TgZ(9,"th",61),t._uU(10,"Action"),t.qZA(),t.TgZ(11,"th",61),t._uU(12,"Type"),t.qZA(),t.TgZ(13,"th",61),t._uU(14,"Name"),t.qZA(),t.TgZ(15,"th",61),t.YNc(16,ye,2,0,"button",62),t.qZA()()(),t.TgZ(17,"tbody",63),t.YNc(18,Ce,16,10,"tr",64),t.qZA()()()()),2&a){const e=t.oxw(2);t.xp6(16),t.Q6J("ngIf",e.add_docs>0),t.xp6(2),t.Q6J("ngForOf",e.tnDocuments.data)}}function Ze(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",17)(2,"div",3)(3,"div",18)(4,"h5",19),t._uU(5),t.qZA()(),t.TgZ(6,"div",20),t.YNc(7,de,2,0,"button",21),t.YNc(8,se,2,0,"button",22),t.qZA()()(),t.TgZ(9,"div",11)(10,"div",3)(11,"div",18)(12,"div",23)(13,"label",24),t._uU(14,"Property\xa0"),t.TgZ(15,"span",25),t._uU(16,"*"),t.qZA(),t.YNc(17,_e,2,2,"a",26),t.qZA(),t.TgZ(18,"app-select-with-search",27),t.NdJ("selectedValue",function(n){t.CHM(e);const o=t.oxw();return o.resetT(n,"PROPERTY"),o.getTS(n,"PROPERTY")}),t.qZA()()(),t.TgZ(19,"div",18)(20,"div",23)(21,"label",24),t._uU(22,"Payee / Vendor "),t.TgZ(23,"span",25),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"select",28),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_vendor=n}),t.YNc(26,ce,2,2,"option",10),t.ALo(27,"keyvalue"),t.YNc(28,ue,2,2,"option",10),t.TgZ(29,"option",29),t._uU(30,"Other"),t.qZA()()()()(),t.TgZ(31,"div",3)(32,"div",30)(33,"div",23)(34,"label"),t._uU(35,"Transaction Date"),t.qZA(),t.TgZ(36,"mdb-date-picker",31,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_date=n}),t.qZA()()(),t.TgZ(38,"div",30)(39,"div",23)(40,"label",24),t._uU(41,"Category "),t.TgZ(42,"span",25),t._uU(43,"*"),t.qZA()(),t.TgZ(44,"select",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().category_id=n})("change",function(n){return t.CHM(e),t.oxw().getTS(n,"PROPERTY")}),t.YNc(45,pe,2,2,"option",10),t.ALo(46,"keyvalue"),t.qZA()()(),t.TgZ(47,"div",18),t.YNc(48,he,11,0,"div",34),t.qZA()(),t.TgZ(49,"div",3)(50,"div",30)(51,"div",23)(52,"label",24),t._uU(53,"Debit "),t.qZA(),t.TgZ(54,"input",35),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_debit=n}),t.qZA()()(),t.TgZ(55,"div",30)(56,"div",23)(57,"label",24),t._uU(58,"Credit "),t.qZA(),t.TgZ(59,"input",36),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_credit=n}),t.qZA()()(),t.TgZ(60,"div",18),t.YNc(61,ge,11,0,"div",34),t.qZA()(),t.TgZ(62,"div",3)(63,"div",30)(64,"div",23)(65,"label",24),t._uU(66,"Payment Type "),t.TgZ(67,"span",25),t._uU(68,"*"),t.qZA()(),t.TgZ(69,"select",37),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_type=n}),t.YNc(70,me,2,2,"option",10),t.qZA()()(),t.TgZ(71,"div",30)(72,"div",23)(73,"label",24),t._uU(74,"Reference"),t.qZA(),t.TgZ(75,"input",38),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_ref=n}),t.qZA()()(),t.TgZ(76,"div",30)(77,"div",23)(78,"label",24),t._uU(79,"Invoice"),t.qZA(),t.TgZ(80,"input",39),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_invoice=n}),t.qZA()()(),t.TgZ(81,"div",30)(82,"div",23)(83,"label"),t._uU(84,"Invoice Date"),t.qZA(),t.TgZ(85,"mdb-date-picker",31,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_invoice_dt=n}),t.qZA()()()(),t.TgZ(87,"div",3)(88,"div",18)(89,"div",23)(90,"label",24),t._uU(91,"Description "),t.TgZ(92,"span",25),t._uU(93,"*"),t.qZA()(),t.TgZ(94,"textarea",40),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_description=n}),t._uU(95,"\t\t\t\t\t\t\t\t\tEnter description Here\n\t\t\t\t\t\t\t\t"),t.qZA()()(),t.TgZ(96,"div",41)(97,"div",23)(98,"label",24),t._uU(99,"Tags "),t.qZA(),t.TgZ(100,"textarea",42),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tr_tags=n}),t._uU(101,"\t\t\t\t\t\t\t\t\tEnter Tags Here\n\t\t\t\t\t\t\t\t"),t.qZA()()(),t.TgZ(102,"div",41)(103,"div",23)(104,"label",24),t._uU(105,"Status"),t.qZA(),t.TgZ(106,"select",43),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_status=n})("change",function(n){return t.CHM(e),t.oxw().statusChange(n,"PROPERTY")}),t.YNc(107,fe,2,2,"option",10),t.ALo(108,"keyvalue"),t.qZA()()(),t.TgZ(109,"div",41)(110,"div",44)(111,"label"),t._uU(112,"Clear Date"),t.qZA(),t.TgZ(113,"mdb-date-picker",31,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().s_date=n}),t.qZA()()()()(),t.YNc(115,be,12,2,"div",45),t.YNc(116,Te,19,2,"div",15),t.qZA()}if(2&a){const e=t.oxw();t.xp6(5),t.hij("Property Transaction ID : ",e.tx_id,""),t.xp6(2),t.Q6J("ngIf",e.add_docs>0),t.xp6(1),t.Q6J("ngIf",e.tx_id>0),t.xp6(9),t.Q6J("ngIf",e.property_id>0),t.xp6(1),t.ekj("bg-bad-data",e.property_id<0),t.Q6J("contentList",e.pList)("selectedID",e.property_id)("disabled",e.tx_readonly),t.xp6(7),t.Q6J("ngModel",e.tx_vendor)("disabled",e.tx_readonly)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(27,57,e.tfList)),t.xp6(2),t.Q6J("ngForOf",e.vList),t.xp6(8),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.tx_date)("disabled",e.tx_readonly),t.xp6(8),t.ekj("bg-bad-data",e.category_id<0),t.Q6J("ngModel",e.category_id)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(46,59,e.cEList)),t.xp6(3),t.Q6J("ngIf",!e.tx_readonly),t.xp6(6),t.Q6J("ngModel",e.tx_debit)("disabled",e.tx_readonly),t.xp6(5),t.Q6J("ngModel",e.tx_credit)("disabled",e.tx_readonly),t.xp6(2),t.Q6J("ngIf",!e.tx_readonly),t.xp6(8),t.ekj("bg-bad-data",e.tx_type.length<3),t.Q6J("ngModel",e.tx_type)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",e.ptList),t.xp6(5),t.Q6J("ngModel",e.tx_ref)("disabled",e.tx_readonly),t.xp6(5),t.Q6J("ngModel",e.tx_invoice)("disabled",e.tx_readonly),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.tx_invoice_dt)("disabled",e.tx_readonly),t.xp6(9),t.ekj("bg-bad-data",e.tx_description.length<5),t.Q6J("ngModel",e.tx_description)("disabled",e.tx_readonly),t.xp6(6),t.Q6J("ngModel",e.tr_tags)("disabled",e.tx_readonly),t.xp6(6),t.Q6J("ngModel",e.tx_status)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(108,61,e.tStatusList)),t.xp6(6),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.s_date)("disabled",e.tx_readonly),t.xp6(2),t.Q6J("ngIf",e.tx_displayactions),t.xp6(1),t.Q6J("ngIf",e.tx_id>0)}}function ve(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addDocuments("TENANT")}),t._UZ(1,"mdb-icon",47),t.qZA()}}function xe(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(n){return t.CHM(e),t.oxw(2).createPDF(n,"TENANT")}),t._UZ(1,"mdb-icon",49),t.qZA()}}function Ae(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("tenant","tenant_id",n.tenant_id)}),t._UZ(1,"i",84),t.qZA()}}function qe(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("property","property_id",n.property_id)}),t._UZ(1,"i",50),t.qZA()}}function Me(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function we(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.name),t.xp6(1),t.Oqu(e.name)}}function Ue(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"div",23)(2,"label",24),t._uU(3,"Other Name"),t.qZA(),t.TgZ(4,"input",85),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tx_vendor2=n}),t.qZA()()()}if(2&a){const e=t.oxw(2);t.xp6(4),t.ekj("bg-bad-data",e.tx_vendor2.length<3),t.Q6J("ngModel",e.tx_vendor2)("disabled",e.tx_readonly)}}function De(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.value)}}function Ne(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",51)(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","8")}),t._uU(2,"Rent"),t.qZA(),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","11")}),t._uU(4,"LateFees"),t.qZA(),t.TgZ(5,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","208")}),t._uU(6,"Electric"),t.qZA(),t.TgZ(7,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","54")}),t._uU(8,"Water"),t.qZA(),t.TgZ(9,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","80")}),t._uU(10,"Trash"),t.qZA(),t.TgZ(11,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","186")}),t._uU(12,"Pet"),t.qZA()()}}function Oe(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",51)(1,"button",86),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","78")}),t._uU(2,"Legal"),t.qZA(),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","70")}),t._uU(4,"Other"),t.qZA(),t.TgZ(5,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","53")}),t._uU(6,"NSF"),t.qZA(),t.TgZ(7,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","10")}),t._uU(8,"Application"),t.qZA(),t.TgZ(9,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("T","71")}),t._uU(10,"Subsidy"),t.qZA()()}}function Pe(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_value),t.xp6(1),t.Oqu(e.co_value)}}function ke(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Se(a,r){1&a&&t._UZ(0,"mdb-spinner",90)}function Le(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",53)(1,"div",3)(2,"div",54)(3,"button",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateTXData("TENANT")}),t._uU(4,"Save"),t.qZA(),t.TgZ(5,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveASTXData("TENANT")}),t._uU(6,"Save As"),t.qZA(),t.YNc(7,Se,1,0,"mdb-spinner",89),t.qZA(),t.TgZ(8,"div",57)(9,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearTXData()}),t._uU(10,"Clear"),t.qZA(),t.TgZ(11,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cloneTXData()}),t._uU(12,"Clone"),t.qZA()()()()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("disabled",e.is_uploading)("disabled",e.tx_readonly),t.xp6(2),t.Q6J("disabled",e.is_uploading)("disabled",e.tx_readonly),t.xp6(2),t.Q6J("ngIf",e.is_uploading)}}function Je(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).addDocuments("TENANT")}),t._UZ(1,"mdb-icon",47),t.qZA()}}function Re(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",66)(1,"td")(2,"p",67),t._uU(3),t.qZA()(),t.TgZ(4,"td",68),t._uU(5),t.qZA(),t.TgZ(6,"td",69)(7,"a",70),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(3).getDocument(o.index,"TENANT")}),t._UZ(8,"i"),t.qZA()(),t.TgZ(9,"td",71),t._uU(10),t.qZA(),t.TgZ(11,"td",71),t._uU(12),t.qZA(),t.TgZ(13,"td",72)(14,"a",70),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(3).delDocument(o.doc_id)}),t._UZ(15,"i"),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(3);t.xp6(3),t.Oqu(e.index),t.xp6(2),t.Oqu(e.doc_id),t.xp6(3),t.Tol(i.imageList[e.doc_format]),t.xp6(2),t.Oqu(e.doc_type),t.xp6(2),t.Oqu(e.doc_name),t.xp6(3),t.Tol(i.imageList.trash)}}function Ee(a,r){if(1&a&&(t.TgZ(0,"div",11)(1,"div",59)(2,"table",60)(3,"thead")(4,"tr")(5,"th",61),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",61),t._uU(8,"Doc ID"),t.qZA(),t.TgZ(9,"th",61),t._uU(10,"Action"),t.qZA(),t.TgZ(11,"th",61),t._uU(12,"Type"),t.qZA(),t.TgZ(13,"th",61),t._uU(14,"Name"),t.qZA(),t.TgZ(15,"th",61),t.YNc(16,Je,2,0,"button",62),t.qZA()()(),t.TgZ(17,"tbody",63),t.YNc(18,Re,16,10,"tr",64),t.qZA()()()()),2&a){const e=t.oxw(2);t.xp6(16),t.Q6J("ngIf",e.add_docs>0),t.xp6(2),t.Q6J("ngForOf",e.tnDocuments.data)}}function Ie(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",17)(2,"div",3)(3,"div",18)(4,"h5"),t._uU(5),t.qZA()(),t.TgZ(6,"div",20),t.YNc(7,ve,2,0,"button",21),t.YNc(8,xe,2,0,"button",22),t.qZA()()(),t.TgZ(9,"div",11)(10,"div",3)(11,"div",18)(12,"div",23)(13,"label",24),t._uU(14,"Tenant\xa0"),t.TgZ(15,"span",25),t._uU(16,"*"),t.qZA(),t.YNc(17,Ae,2,0,"a",73),t.qZA(),t.TgZ(18,"app-select-with-search",74),t.NdJ("selectedValue",function(n){return t.CHM(e),t.oxw().resetP(n,"T")}),t.qZA()()(),t.TgZ(19,"div",18)(20,"div",23)(21,"label",24),t._uU(22,"Property\xa0"),t.TgZ(23,"span",25),t._uU(24,"*"),t.qZA(),t.YNc(25,qe,2,0,"a",73),t.qZA(),t.TgZ(26,"app-select-with-search",27),t.NdJ("selectedValue",function(n){t.CHM(e);const o=t.oxw();return o.resetT(n,"TENANT"),o.getTS(n,"TENANT")}),t.qZA()()()(),t.TgZ(27,"div",3)(28,"div",18)(29,"div",23)(30,"label",24),t._uU(31,"Payee / Vendor "),t.TgZ(32,"span",25),t._uU(33,"*"),t.qZA()(),t.TgZ(34,"select",28),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_vendor=n}),t.YNc(35,Me,2,2,"option",10),t.ALo(36,"keyvalue"),t.YNc(37,we,2,2,"option",10),t.TgZ(38,"option",29),t._uU(39,"Other"),t.qZA()()()(),t.TgZ(40,"div",18),t.YNc(41,Ue,5,4,"div",75),t.qZA()(),t.TgZ(42,"div",3)(43,"div",30)(44,"div",23)(45,"label",24),t._uU(46,"Transaction Date"),t.qZA(),t.TgZ(47,"mdb-date-picker",31,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_date=n}),t.qZA()()(),t.TgZ(49,"div",30)(50,"div",23)(51,"label",24),t._uU(52,"Category "),t.TgZ(53,"span",25),t._uU(54,"*"),t.qZA()(),t.TgZ(55,"select",76),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().category_id=n})("change",function(n){return t.CHM(e),t.oxw().getTS(n,"T")}),t.YNc(56,De,2,2,"option",10),t.ALo(57,"keyvalue"),t.qZA()()(),t.TgZ(58,"div",18),t.YNc(59,Ne,13,0,"div",34),t.qZA()(),t.TgZ(60,"div",3)(61,"div",30)(62,"div",23)(63,"label",24),t._uU(64,"Debit "),t.qZA(),t.TgZ(65,"input",77),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_debit=n}),t.qZA()()(),t.TgZ(66,"div",30)(67,"div",23)(68,"label",24),t._uU(69,"Credit "),t.qZA(),t.TgZ(70,"input",36),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_credit=n}),t.qZA()()(),t.TgZ(71,"div",18),t.YNc(72,Oe,11,0,"div",34),t.qZA()(),t.TgZ(73,"div",3)(74,"div",30)(75,"div",23)(76,"label",24),t._uU(77,"Payment Type "),t.TgZ(78,"span",25),t._uU(79,"*"),t.qZA()(),t.TgZ(80,"select",78),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_type=n}),t.YNc(81,Pe,2,2,"option",10),t.qZA()()(),t.TgZ(82,"div",30)(83,"div",23)(84,"label",24),t._uU(85,"Reference / Check"),t.qZA(),t.TgZ(86,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_ref=n}),t.qZA()()()(),t.TgZ(87,"div",3)(88,"div",18)(89,"div",23)(90,"label",80),t._uU(91,"Description "),t.TgZ(92,"span",25),t._uU(93,"*"),t.qZA()(),t.TgZ(94,"textarea",81),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_description=n}),t._uU(95,"\t\t\t\t\t\t\t\t\tEnter description Here\n\t\t\t\t\t\t\t\t"),t.qZA()()(),t.TgZ(96,"div",41)(97,"div",23)(98,"label",82),t._uU(99,"Tags"),t.qZA(),t.TgZ(100,"textarea",83),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tr_tags=n}),t._uU(101,"\t\t\t\t\t\t\t\t\tEnter Tags Here\n\t\t\t\t\t\t\t\t"),t.qZA()()(),t.TgZ(102,"div",41)(103,"div",23)(104,"label",24),t._uU(105,"Status"),t.qZA(),t.TgZ(106,"select",43),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_status=n})("change",function(n){return t.CHM(e),t.oxw().statusChange(n,"TENANT")}),t.YNc(107,ke,2,2,"option",10),t.ALo(108,"keyvalue"),t.qZA()()(),t.TgZ(109,"div",41)(110,"div",23)(111,"label"),t._uU(112,"Clear Date"),t.qZA(),t.TgZ(113,"mdb-date-picker",31,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().s_date=n}),t.qZA()()()()(),t.YNc(115,Le,13,5,"div",45),t.YNc(116,Ee,19,2,"div",15),t.qZA()}if(2&a){const e=t.oxw();t.xp6(5),t.hij("Tenant Payments Transaction ID : ",e.tx_id,""),t.xp6(2),t.Q6J("ngIf",e.add_docs>0),t.xp6(1),t.Q6J("ngIf",e.tx_id>0),t.xp6(9),t.Q6J("ngIf",e.tenant_id>0),t.xp6(1),t.Q6J("contentList",e.tnList)("selectedID",e.tenant_id)("disabled",e.tx_readonly),t.xp6(7),t.Q6J("ngIf",e.property_id>0),t.xp6(1),t.Q6J("contentList",e.pList)("selectedID",e.property_id)("disabled",e.tx_readonly),t.xp6(8),t.ekj("bg-bad-data",e.tx_vendor.length<3),t.Q6J("ngModel",e.tx_vendor)("disabled",e.tx_readonly)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(36,58,e.tfList)),t.xp6(2),t.Q6J("ngForOf",e.vList),t.xp6(4),t.Q6J("ngIf","Other"==e.tx_vendor),t.xp6(6),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.tx_date)("disabled",e.tx_readonly),t.xp6(8),t.ekj("bg-bad-data",e.category_id<0),t.Q6J("ngModel",e.category_id)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(57,60,e.cIList)),t.xp6(3),t.Q6J("ngIf",!e.tx_readonly),t.xp6(6),t.Q6J("ngModel",e.tx_debit)("disabled",e.tx_readonly),t.xp6(5),t.Q6J("ngModel",e.tx_credit)("disabled",e.tx_readonly),t.xp6(2),t.Q6J("ngIf",!e.tx_readonly),t.xp6(8),t.ekj("bg-bad-data",e.tx_type.length<3),t.Q6J("ngModel",e.tx_type)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",e.ptList),t.xp6(5),t.ekj("bg-bad-data",e.tx_ref.length<4),t.Q6J("ngModel",e.tx_ref)("disabled",e.tx_readonly),t.xp6(8),t.ekj("bg-bad-data",e.tx_description.length<5),t.Q6J("ngModel",e.tx_description)("disabled",e.tx_readonly),t.xp6(6),t.Q6J("ngModel",e.tr_tags)("disabled",!0),t.xp6(6),t.Q6J("ngModel",e.tx_status)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(108,62,e.tStatusList)),t.xp6(6),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.s_date)("disabled",e.tx_readonly),t.xp6(2),t.Q6J("ngIf",e.tx_displayactions),t.xp6(1),t.Q6J("ngIf",e.tx_id>0)}}function Fe(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("tenant","tenant_id",n.tenant_id)}),t._UZ(1,"i",84),t.qZA()}}function Qe(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("property","property_id",n.property_id)}),t._UZ(1,"i",50),t.qZA()}}function He(a,r){if(1&a&&(t.TgZ(0,"option",101),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.hij("",e.value," ")}}function Ye(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.name),t.xp6(1),t.Oqu(e.name)}}function je(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.value)}}function We(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",51)(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","102")}),t._uU(2,"Rent"),t.qZA(),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","106")}),t._uU(4,"Late Fees"),t.qZA(),t.TgZ(5,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","116")}),t._uU(6,"Pet Fees"),t.qZA(),t.TgZ(7,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","103")}),t._uU(8,"Water"),t.qZA(),t.TgZ(9,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","108")}),t._uU(10,"Trash"),t.qZA(),t.TgZ(11,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","110")}),t._uU(12,"Electric"),t.qZA()()}}function Ve(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",51)(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","198")}),t._uU(2,"Application"),t.qZA(),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","105")}),t._uU(4,"Legal"),t.qZA(),t.TgZ(5,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","187")}),t._uU(6,"NSF"),t.qZA(),t.TgZ(7,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("TR","104")}),t._uU(8,"Other"),t.qZA()()}}function Ge(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",53)(1,"button",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateReceivable()}),t._uU(2,"Save"),t.qZA(),t._uU(3,"\xa0 "),t.TgZ(4,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveASReceivable()}),t._uU(5,"Save As"),t.qZA(),t.TgZ(6,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearTXData()}),t._uU(7,"Clear"),t.qZA(),t._uU(8,"\xa0 "),t.TgZ(9,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cloneTXData()}),t._uU(10,"Clone"),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.tx_readonly),t.xp6(3),t.Q6J("disabled",e.tx_readonly)}}function ze(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",17)(2,"h5"),t._uU(3),t.qZA()(),t.TgZ(4,"div",11)(5,"div",3)(6,"div",18)(7,"div",23)(8,"label",24),t._uU(9,"Tenant\xa0"),t.TgZ(10,"span",25),t._uU(11,"*"),t.qZA(),t.YNc(12,Fe,2,0,"a",73),t.qZA(),t.TgZ(13,"app-select-with-search",74),t.NdJ("selectedValue",function(n){return t.CHM(e),t.oxw().resetP(n,"TR")}),t.qZA()()(),t.TgZ(14,"div",18)(15,"div",23)(16,"label",24),t._uU(17,"Property\xa0"),t.TgZ(18,"span",25),t._uU(19,"*"),t.qZA(),t.YNc(20,Qe,2,0,"a",73),t.qZA(),t.TgZ(21,"app-select-with-search",27),t.NdJ("selectedValue",function(n){return t.CHM(e),t.oxw().resetT(n,"TR")}),t.qZA()()()(),t.TgZ(22,"div",3)(23,"div",30)(24,"div",23)(25,"label",24),t._uU(26,"Payee / Vendor "),t.TgZ(27,"span",25),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"select",28),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_vendor=n}),t.YNc(30,He,2,2,"option",91),t.ALo(31,"keyvalue"),t.YNc(32,Ye,2,2,"option",10),t.TgZ(33,"option",29),t._uU(34,"Other"),t.qZA()()()(),t.TgZ(35,"div",30)(36,"div",23)(37,"label",24),t._uU(38,"Category "),t.TgZ(39,"span",25),t._uU(40,"*"),t.qZA()(),t.TgZ(41,"select",92),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().category_id=n}),t.YNc(42,je,2,2,"option",10),t.ALo(43,"keyvalue"),t.qZA()()(),t.TgZ(44,"div",18),t.YNc(45,We,13,0,"div",34),t.qZA()(),t.TgZ(46,"div",3)(47,"div",30)(48,"div",23)(49,"label",24),t._uU(50,"Transaction Date"),t.qZA(),t.TgZ(51,"mdb-date-picker",31,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_date=n}),t.qZA()()(),t.TgZ(53,"div",30)(54,"div",23)(55,"label",24),t._uU(56,"Amount "),t.qZA(),t.TgZ(57,"input",93),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_amount=n}),t.qZA()()(),t.TgZ(58,"div",41)(59,"div",23)(60,"label",94),t._uU(61,"TX ID"),t.qZA(),t.TgZ(62,"input",95),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tr_tx_id=n}),t.qZA()()(),t.TgZ(63,"div",96),t.YNc(64,Ve,9,0,"div",34),t.qZA()(),t.TgZ(65,"div",3)(66,"div",97)(67,"div",23)(68,"textarea",98),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_description=n}),t._uU(69,"\t\t\t\t\t\t\t\t\tEnter description Here\n\t\t\t\t\t\t\t\t"),t.qZA(),t.TgZ(70,"label",99),t._uU(71,"Description "),t.TgZ(72,"span",25),t._uU(73,"*"),t.qZA()()()()()(),t.YNc(74,Ge,11,2,"div",100),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.hij("Tenant Receivable Transaction ID : ",e.tr_id,""),t.xp6(9),t.Q6J("ngIf",e.tenant_id>0),t.xp6(1),t.Q6J("contentList",e.tnList)("selectedID",e.tenant_id)("disabled",e.tx_readonly),t.xp6(7),t.Q6J("ngIf",e.property_id>0),t.xp6(1),t.Q6J("contentList",e.pList)("selectedID",e.property_id)("disabled",e.tx_readonly),t.xp6(8),t.Q6J("ngModel",e.tx_vendor)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(31,33,e.tfList)),t.xp6(2),t.Q6J("ngForOf",e.vList),t.xp6(9),t.ekj("bg-bad-data",e.category_id<0),t.Q6J("ngModel",e.category_id)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(43,35,e.cRList)),t.xp6(3),t.Q6J("ngIf",!e.tx_readonly),t.xp6(6),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.tx_date)("disabled",e.tx_readonly),t.xp6(6),t.Q6J("ngModel",e.tx_amount)("disabled",e.tx_readonly),t.xp6(5),t.Q6J("ngModel",e.tr_tx_id)("disabled",e.tx_readonly),t.xp6(2),t.Q6J("ngIf",!e.tx_readonly),t.xp6(4),t.ekj("bg-bad-data",e.tx_description.length<5),t.Q6J("ngModel",e.tx_description)("disabled",e.tx_readonly),t.xp6(6),t.Q6J("ngIf",e.tx_displayactions)}}function Be(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("tenant","tenant_id",n.tenant_id)}),t._UZ(1,"i",84),t.qZA()}}function Xe(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("property","property_id",n.property_id)}),t._UZ(1,"i",50),t.qZA()}}function $e(a,r){if(1&a&&(t.TgZ(0,"option",101),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.hij("",e.value," ")}}function Ke(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.name),t.xp6(1),t.Oqu(e.name)}}function ti(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",108)(1,"label"),t._uU(2,"Other Name"),t.qZA(),t.TgZ(3,"input",121),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tx_vendor2=n}),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.tx_vendor2)("disabled",e.tx_readonly)}}function ei(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.value)}}function ii(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",122)(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("SD","3")}),t._uU(2,"Payment"),t.qZA(),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("SD","4")}),t._uU(4,"Refund"),t.qZA(),t.TgZ(5,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).setUtils("SD","115")}),t._uU(6,"TX Owner"),t.qZA()()}}function ni(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_value),t.xp6(1),t.Oqu(e.co_value)}}function oi(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function ai(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",53)(1,"button",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateSTXData("DEPOSIT")}),t._uU(2,"Save"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveASSTXData("DEPOSIT")}),t._uU(5,"Save As"),t.qZA(),t.TgZ(6,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearTXData()}),t._uU(7,"Clear"),t.qZA(),t._uU(8,"\xa0 "),t.TgZ(9,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cloneTXData()}),t._uU(10,"Clone"),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.tx_readonly),t.xp6(3),t.Q6J("disabled",e.tx_readonly)}}function ri(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",103)(2,"h5"),t._uU(3),t.qZA()(),t.TgZ(4,"div",104)(5,"div",3)(6,"div",105)(7,"label"),t._uU(8,"Tenant\xa0"),t.TgZ(9,"span",25),t._uU(10,"*"),t.qZA(),t.YNc(11,Be,2,0,"a",73),t.qZA(),t.TgZ(12,"app-select-with-search",74),t.NdJ("selectedValue",function(n){return t.CHM(e),t.oxw().resetP(n,"SD")}),t.qZA()(),t.TgZ(13,"div",106)(14,"label"),t._uU(15,"Property\xa0"),t.TgZ(16,"span",25),t._uU(17,"*"),t.qZA(),t.YNc(18,Xe,2,0,"a",73),t.qZA(),t.TgZ(19,"app-select-with-search",27),t.NdJ("selectedValue",function(n){return t.CHM(e),t.oxw().resetT(n,"SD")}),t.qZA()()(),t.TgZ(20,"div",3)(21,"div",107)(22,"div",108)(23,"label"),t._uU(24,"Payee / Vendor "),t.TgZ(25,"span",25),t._uU(26,"*"),t.qZA()(),t.TgZ(27,"select",109),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_vendor=n})("change",function(n){return t.CHM(e),t.oxw().getTS(n,"PROPERTY")}),t.YNc(28,$e,2,2,"option",91),t.ALo(29,"keyvalue"),t.YNc(30,Ke,2,2,"option",10),t.TgZ(31,"option",29),t._uU(32,"Other"),t.qZA()()()(),t.TgZ(33,"div",107),t.YNc(34,ti,4,2,"div",110),t.qZA()(),t.TgZ(35,"div",3)(36,"div",107)(37,"div",23)(38,"mdb-date-picker",111,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_date=n}),t.qZA()()(),t.TgZ(40,"div",112)(41,"label"),t._uU(42,"Category "),t.TgZ(43,"span",25),t._uU(44,"*"),t.qZA()(),t.TgZ(45,"select",92),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().category_id=n}),t.YNc(46,ei,2,2,"option",10),t.ALo(47,"keyvalue"),t.qZA()(),t.TgZ(48,"div",113),t.YNc(49,ii,7,0,"div",114),t.qZA()(),t.TgZ(50,"div",3)(51,"div",115)(52,"div",23)(53,"label"),t._uU(54," Debit "),t.qZA(),t.TgZ(55,"input",35),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_debit=n}),t.qZA()()(),t.TgZ(56,"div",115)(57,"div",23)(58,"label"),t._uU(59," Credit "),t.qZA(),t.TgZ(60,"input",36),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_credit=n}),t.qZA()()()(),t.TgZ(61,"div",3)(62,"div",115)(63,"label"),t._uU(64,"Payment Type "),t.TgZ(65,"span",25),t._uU(66,"*"),t.qZA()(),t.TgZ(67,"select",78),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_type=n}),t.YNc(68,ni,2,2,"option",10),t.qZA()(),t.TgZ(69,"div",115)(70,"div",23)(71,"label"),t._uU(72,"Reference "),t.qZA(),t.TgZ(73,"input",116),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_ref=n}),t.qZA()()()(),t.TgZ(74,"div",3)(75,"div",18)(76,"div",23)(77,"textarea",117),t.NdJ("keyup",function(){return t.CHM(e),t.oxw().changed("desc")})("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_description=n}),t._uU(78,"\t\t\t\t\t\t\t\tEnter description Here\n\t\t\t\t\t\t\t"),t.qZA(),t.TgZ(79,"label",118),t._uU(80,"Description "),t.TgZ(81,"span",25),t._uU(82,"*"),t.qZA()()()(),t.TgZ(83,"div",41)(84,"div",23)(85,"textarea",119),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tr_tags=n}),t._uU(86,"\t\t\t\t\t\t\t\tEnter Tags Here\n\t\t\t\t\t\t\t"),t.qZA(),t.TgZ(87,"label",120),t._uU(88,"Tags "),t.qZA()()(),t.TgZ(89,"div",41)(90,"div",23)(91,"label",24),t._uU(92,"Status"),t.qZA(),t.TgZ(93,"select",43),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_status=n})("change",function(n){return t.CHM(e),t.oxw().statusChange(n,"PROPERTY")}),t.YNc(94,oi,2,2,"option",10),t.ALo(95,"keyvalue"),t.qZA()()(),t.TgZ(96,"div",41)(97,"div",44)(98,"label"),t._uU(99,"Clear Date"),t.qZA(),t.TgZ(100,"mdb-date-picker",31,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().s_date=n}),t.qZA()()()()(),t.YNc(102,ai,11,2,"div",45),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.hij("Security Deposit Transaction ID : ",e.stx_id,""),t.xp6(8),t.Q6J("ngIf",e.tenant_id>0),t.xp6(1),t.Q6J("contentList",e.tnList)("selectedID",e.tenant_id)("disabled",e.tx_readonly),t.xp6(6),t.Q6J("ngIf",e.property_id>0),t.xp6(1),t.Q6J("contentList",e.pList)("selectedID",e.property_id)("disabled",e.tx_readonly),t.xp6(8),t.Q6J("ngModel",e.tx_vendor)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(29,49,e.tfList)),t.xp6(2),t.Q6J("ngForOf",e.vList),t.xp6(4),t.Q6J("ngIf","Other"==e.tx_vendor),t.xp6(4),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.tx_date)("disabled",e.tx_readonly),t.xp6(7),t.ekj("bg-bad-data",e.category_id<0),t.Q6J("ngModel",e.category_id)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(47,51,e.cSDList)),t.xp6(3),t.Q6J("ngIf",!e.tx_readonly),t.xp6(6),t.Q6J("ngModel",e.tx_debit)("disabled",e.tx_readonly),t.xp6(5),t.Q6J("ngModel",e.tx_credit)("disabled",e.tx_readonly),t.xp6(7),t.ekj("bg-bad-data",e.tx_type.length<3),t.Q6J("ngModel",e.tx_type)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",e.ptList),t.xp6(5),t.Q6J("ngModel",e.tx_ref)("disabled",e.tx_readonly),t.xp6(4),t.ekj("bg-bad-data",e.tx_description.length<5),t.Q6J("ngModel",e.tx_description)("disabled",e.tx_readonly),t.xp6(8),t.Q6J("ngModel",e.tr_tags)("disabled",e.tx_readonly),t.xp6(8),t.Q6J("ngModel",e.tx_status)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(95,53,e.tStatusList)),t.xp6(6),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.s_date)("disabled",e.tx_readonly),t.xp6(2),t.Q6J("ngIf",e.tx_displayactions)}}function li(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("investor","investor_id",n.investor_id)}),t._UZ(1,"i",84),t.qZA()}}function di(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.investor_id),t.xp6(1),t.AsE(" ",e.name,"\xa0-\xa0",e.label," ")}}function si(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("company","company_id",n.company_id)}),t._UZ(1,"i",142),t.qZA()}}function _i(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.company_id),t.xp6(1),t.Oqu(e.name)}}function ci(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.value)}}function ui(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_value),t.xp6(1),t.Oqu(e.co_value)}}function pi(a,r){1&a&&t._UZ(0,"mdb-spinner",90)}function hi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",53)(1,"button",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateITXData("INVESTOR")}),t._uU(2,"Save"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveASITXData("INVESTOR")}),t._uU(5,"Save As"),t.qZA(),t._uU(6,"\xa0 "),t.YNc(7,pi,1,0,"mdb-spinner",89),t.TgZ(8,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearTXData()}),t._uU(9,"Clear"),t.qZA(),t._uU(10,"\xa0 "),t.TgZ(11,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cloneTXData()}),t._uU(12,"Clone"),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.is_uploading)("disabled",e.tx_readonly),t.xp6(3),t.Q6J("disabled",e.is_uploading)("disabled",e.tx_readonly),t.xp6(3),t.Q6J("ngIf",e.is_uploading)}}function gi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",103)(2,"h5"),t._uU(3),t.qZA()(),t.TgZ(4,"div",104)(5,"div",3)(6,"div",123)(7,"label"),t._uU(8,"Investor\xa0"),t.TgZ(9,"span",25),t._uU(10,"*"),t.qZA(),t.YNc(11,li,2,0,"a",73),t.qZA(),t.TgZ(12,"select",124),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor_id=n})("change",function(n){return t.CHM(e),t.oxw().resetINV(n)}),t.YNc(13,di,2,3,"option",10),t.qZA()(),t.TgZ(14,"div",97)(15,"label"),t._uU(16,"Company\xa0"),t.TgZ(17,"span",25),t._uU(18,"*"),t.qZA(),t.YNc(19,si,2,0,"a",73),t.qZA(),t.TgZ(20,"select",125),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().company_id=n}),t.YNc(21,_i,2,2,"option",10),t.qZA()()(),t.TgZ(22,"div",3)(23,"div",126)(24,"div",23)(25,"label"),t._uU(26,"Payee "),t.TgZ(27,"span",25),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"input",127),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_vendor=n}),t.qZA()()()(),t.TgZ(30,"div",3)(31,"div",128)(32,"div",23)(33,"mdb-date-picker",129,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_date=n}),t.qZA()()(),t.TgZ(35,"div",112)(36,"label"),t._uU(37,"Category "),t.TgZ(38,"span",25),t._uU(39,"*"),t.qZA()(),t.TgZ(40,"select",130),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().category_id=n})("change",function(n){return t.CHM(e),t.oxw().getTS(n,"INVESTOR")}),t.YNc(41,ci,2,2,"option",10),t.ALo(42,"keyvalue"),t.qZA()(),t.TgZ(43,"div",113)(44,"div",122)(45,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().setUtils("INVESTOR","177")}),t._uU(46,"Contribution"),t.qZA(),t.TgZ(47,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().setUtils("INVESTOR","178")}),t._uU(48,"Distribution"),t.qZA(),t.TgZ(49,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().setUtils("INVESTOR","179")}),t._uU(50,"Dividend"),t.qZA(),t.TgZ(51,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().setUtils("INVESTOR","180")}),t._uU(52,"Tax Adjust"),t.qZA()()()(),t.TgZ(53,"div",3)(54,"div",128)(55,"div",23)(56,"label"),t._uU(57,"Debit "),t.qZA(),t.TgZ(58,"input",131),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_debit=n}),t.qZA()()(),t.TgZ(59,"div",128)(60,"div",23)(61,"label"),t._uU(62,"Credit "),t.qZA(),t.TgZ(63,"input",132),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_credit=n}),t.qZA()()()(),t.TgZ(64,"div",3)(65,"div",133)(66,"label"),t._uU(67,"Payment Type "),t.TgZ(68,"span",25),t._uU(69,"*"),t.qZA()(),t.TgZ(70,"select",37),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_type=n}),t.YNc(71,ui,2,2,"option",10),t.qZA()(),t.TgZ(72,"div",134)(73,"div",23)(74,"label"),t._uU(75,"Reference "),t.qZA(),t.TgZ(76,"input",135),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_ref=n}),t.qZA()()()(),t.TgZ(77,"div",3)(78,"div",126)(79,"div",136)(80,"textarea",137),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_description=n}),t._uU(81,"\t\t\t\t\t\t\t\tEnter description Here\n\t\t\t\t\t\t\t"),t.qZA(),t.TgZ(82,"label",138),t._uU(83,"Description "),t.TgZ(84,"span",25),t._uU(85,"*"),t.qZA()()()(),t.TgZ(86,"div",139)(87,"div",136)(88,"textarea",140),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tr_tags=n}),t._uU(89,"\t\t\t\t\t\t\t\tEnter Tags Here\n\t\t\t\t\t\t\t"),t.qZA(),t.TgZ(90,"label",141),t._uU(91,"Tags "),t.qZA()()()()(),t.YNc(92,hi,13,5,"div",100),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.hij("Investor Transaction ID : ",e.itx_id,""),t.xp6(8),t.Q6J("ngIf",e.investor_id>0),t.xp6(1),t.Q6J("ngModel",e.investor_id),t.xp6(1),t.Q6J("ngForOf",e.inList),t.xp6(6),t.Q6J("ngIf",e.company_id>0),t.xp6(1),t.Q6J("ngModel",e.company_id),t.xp6(1),t.Q6J("ngForOf",e.companyList),t.xp6(8),t.Q6J("ngModel",e.tx_vendor)("disabled",e.tx_readonly),t.xp6(4),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.tx_date),t.xp6(7),t.ekj("bg-bad-data",e.category_id<0),t.Q6J("ngModel",e.category_id),t.xp6(1),t.Q6J("ngForOf",t.lcZ(42,29,e.cInvList)),t.xp6(17),t.Q6J("ngModel",e.tx_debit),t.xp6(5),t.Q6J("ngModel",e.tx_credit),t.xp6(7),t.ekj("bg-bad-data",e.tx_type.length<3),t.Q6J("ngModel",e.tx_type)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",e.ptList),t.xp6(5),t.Q6J("ngModel",e.tx_ref),t.xp6(4),t.ekj("bg-bad-data",e.tx_description.length<5),t.Q6J("ngModel",e.tx_description),t.xp6(8),t.Q6J("ngModel",e.tr_tags),t.xp6(4),t.Q6J("ngIf",e.tx_displayactions)}}function mi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("tranche","loan_id",n.lt_tx.loan_id)}),t._UZ(1,"i",84),t.qZA()}}function fi(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.loan_id),t.xp6(1),t.AsE(" ",e.label,"\xa0[",e.account,"] ")}}function bi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("company","company_id",n.company_id)}),t._UZ(1,"i",142),t.qZA()}}function yi(a,r){if(1&a&&(t.TgZ(0,"option",101),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.hij("",e.value," ")}}function Ci(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.name),t.xp6(1),t.Oqu(e.name)}}function Ti(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.value)}}function Zi(a,r){if(1&a&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_value),t.xp6(1),t.Oqu(e.co_value)}}function vi(a,r){1&a&&t._UZ(0,"mdb-spinner",90)}function xi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",53)(1,"button",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateLTTXData("LOANTRANCHE")}),t._uU(2,"Save"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveASLTTXData("LOANTRANCHE")}),t._uU(5,"Save As"),t.qZA(),t._uU(6,"\xa0 "),t.YNc(7,vi,1,0,"mdb-spinner",89),t.TgZ(8,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearLTTXData()}),t._uU(9,"Clear"),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.is_uploading)("disabled",e.tx_readonly),t.xp6(3),t.Q6J("disabled",e.is_uploading)("disabled",e.tx_readonly),t.xp6(3),t.Q6J("ngIf",e.is_uploading)}}function Ai(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",103)(2,"h5"),t._uU(3),t.qZA()(),t.TgZ(4,"div",104)(5,"div",3)(6,"div",123)(7,"label"),t._uU(8,"Loan\xa0"),t.TgZ(9,"span",25),t._uU(10,"*"),t.qZA(),t.YNc(11,mi,2,0,"a",73),t.qZA(),t.TgZ(12,"select",124),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().lt_tx.loan_id=n})("change",function(n){t.CHM(e);const o=t.oxw();return o.resetLOAN(n,o.lt_tx.loan_id)}),t.YNc(13,fi,2,3,"option",10),t.qZA()(),t.TgZ(14,"div",97)(15,"label"),t._uU(16,"Tranche\xa0"),t.YNc(17,bi,2,0,"a",73),t.qZA(),t._uU(18),t.qZA()(),t.TgZ(19,"div",3)(20,"div",126)(21,"div",108)(22,"label"),t._uU(23,"Payee / Vendor "),t.TgZ(24,"span",25),t._uU(25,"*"),t.qZA()(),t.TgZ(26,"select",109),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_vendor=n})("change",function(n){return t.CHM(e),t.oxw().getTS(n,"LOANTRANCHE")}),t.YNc(27,yi,2,2,"option",91),t.ALo(28,"keyvalue"),t.YNc(29,Ci,2,2,"option",10),t.TgZ(30,"option",29),t._uU(31,"Other"),t.qZA()()()()(),t.TgZ(32,"div",3)(33,"div",128)(34,"div",23)(35,"mdb-date-picker",129,32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_date=n}),t.qZA()()(),t.TgZ(37,"div",112)(38,"label"),t._uU(39,"Category "),t.TgZ(40,"span",25),t._uU(41,"*"),t.qZA()(),t.TgZ(42,"select",130),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().category_id=n})("change",function(n){return t.CHM(e),t.oxw().getTS(n,"LOANTRANCHE")}),t.YNc(43,Ti,2,2,"option",10),t.ALo(44,"keyvalue"),t.qZA()(),t.TgZ(45,"div",113)(46,"div",122)(47,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().setUtils("LOANTRANCHE","189")}),t._uU(48,"PAYMENT"),t.qZA(),t.TgZ(49,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().setUtils("LOANTRANCHE","190")}),t._uU(50,"Principal"),t.qZA()()()(),t.TgZ(51,"div",3)(52,"div",128)(53,"div",23)(54,"label"),t._uU(55,"Payment"),t.qZA(),t.TgZ(56,"input",143),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().lt_tx.payment=n}),t.qZA()()(),t.TgZ(57,"div",128)(58,"div",23)(59,"label"),t._uU(60,"Principal "),t.qZA(),t.TgZ(61,"input",144),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().lt_tx.principal=n}),t.qZA()()(),t.TgZ(62,"div",128)(63,"div",23)(64,"label"),t._uU(65,"Interest "),t.qZA(),t.TgZ(66,"input",145),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().lt_tx.interest=n}),t.qZA()()()(),t.TgZ(67,"div",3)(68,"div",133)(69,"label"),t._uU(70,"Payment Type "),t.TgZ(71,"span",25),t._uU(72,"*"),t.qZA()(),t.TgZ(73,"select",37),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_type=n}),t.YNc(74,Zi,2,2,"option",10),t.qZA()(),t.TgZ(75,"div",134)(76,"div",23)(77,"label"),t._uU(78,"Reference "),t.qZA(),t.TgZ(79,"input",135),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().lt_tx.reference=n}),t.qZA()()()(),t.TgZ(80,"div",3)(81,"div",126)(82,"div",136)(83,"textarea",137),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().lt_tx.description=n}),t._uU(84,"\t\t\t\t\t\t\t\tEnter description Here\n\t\t\t\t\t\t\t"),t.qZA(),t.TgZ(85,"label",138),t._uU(86,"Description "),t.TgZ(87,"span",25),t._uU(88,"*"),t.qZA()()()(),t.TgZ(89,"div",139)(90,"div",136)(91,"textarea",140),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tr_tags=n}),t._uU(92,"\t\t\t\t\t\t\t\tEnter Tags Here\n\t\t\t\t\t\t\t"),t.qZA(),t.TgZ(93,"label",141),t._uU(94,"Tags "),t.qZA()()()()(),t.YNc(95,xi,10,5,"div",100),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.hij("Tranche Loan Transaction ID : ",e.lt_tx_id,""),t.xp6(8),t.Q6J("ngIf",e.lt_tx.loan_id>0),t.xp6(1),t.Q6J("ngModel",e.lt_tx.loan_id),t.xp6(1),t.Q6J("ngForOf",e.loanList),t.xp6(4),t.Q6J("ngIf",e.company_id>0),t.xp6(1),t.hij(" ",e.tranche_name," "),t.xp6(8),t.Q6J("ngModel",e.tx_vendor)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(28,31,e.tfList)),t.xp6(2),t.Q6J("ngForOf",e.vList),t.xp6(6),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.tx_date),t.xp6(7),t.ekj("bg-bad-data",e.category_id<0),t.Q6J("ngModel",e.category_id),t.xp6(1),t.Q6J("ngForOf",t.lcZ(44,33,e.cLTList)),t.xp6(13),t.Q6J("ngModel",e.lt_tx.payment),t.xp6(5),t.Q6J("ngModel",e.lt_tx.principal),t.xp6(5),t.Q6J("ngModel",e.lt_tx.interest),t.xp6(7),t.ekj("bg-bad-data",e.tx_type.length<3),t.Q6J("ngModel",e.tx_type)("disabled",e.tx_readonly),t.xp6(1),t.Q6J("ngForOf",e.ptList),t.xp6(5),t.Q6J("ngModel",e.lt_tx.reference),t.xp6(4),t.ekj("bg-bad-data",e.lt_tx.description.length<5),t.Q6J("ngModel",e.lt_tx.description),t.xp6(8),t.Q6J("ngModel",e.tr_tags),t.xp6(4),t.Q6J("ngIf",e.tx_displayactions)}}function qi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",146)(2,"ag-grid-angular",147,148),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"TS")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"TS")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"TS")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"TS")}),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("columnDefs",e.gridTSColumns)("rowData",e.gridTSData)}}function Mi(a,r){if(1&a&&(t.TgZ(0,"tr",154)(1,"td",155),t._uU(2),t.qZA(),t.TgZ(3,"td",155),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",155),t._uU(7),t.qZA(),t.TgZ(8,"td",155),t._uU(9),t.qZA(),t.TgZ(10,"td",155),t._uU(11),t.qZA(),t.TgZ(12,"td",156),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"td",156),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"td",155),t._uU(19),t.qZA(),t.TgZ(20,"td",155),t._uU(21),t.qZA(),t.TgZ(22,"td",155),t._uU(23),t.ALo(24,"date"),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.tx_id),t.xp6(2),t.Oqu(t.xi3(5,10,e.tdate,"yyyy-MM-dd")),t.xp6(3),t.Oqu(e.payee),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.reference),t.xp6(2),t.Oqu(t.lcZ(14,13,e.debit)),t.xp6(3),t.Oqu(t.lcZ(17,15,e.credit)),t.xp6(3),t.Oqu(e.description),t.xp6(2),t.Oqu(e.updatedby),t.xp6(2),t.Oqu(t.xi3(24,17,e.updated,"yyyy-MM-dd, h:mm:ss a"))}}function wi(a,r){if(1&a&&(t.TgZ(0,"div",11)(1,"div",149),t._uU(2," Transaction Update History "),t.qZA(),t.TgZ(3,"div",59)(4,"table",150)(5,"thead")(6,"tr")(7,"th",61),t._uU(8,"TX ID"),t.qZA(),t.TgZ(9,"th",61),t._uU(10,"Date"),t.qZA(),t.TgZ(11,"th",151),t._uU(12,"Payee"),t.qZA(),t.TgZ(13,"th",151),t._uU(14,"Type"),t.qZA(),t.TgZ(15,"th",151),t._uU(16,"Reference"),t.qZA(),t.TgZ(17,"th",151),t._uU(18,"Debit"),t.qZA(),t.TgZ(19,"th",151),t._uU(20,"Credit"),t.qZA(),t.TgZ(21,"th",151),t._uU(22,"Desc"),t.qZA(),t.TgZ(23,"th",151),t._uU(24,"Updatedby"),t.qZA(),t.TgZ(25,"th",151),t._uU(26,"Updated"),t.qZA()()(),t.TgZ(27,"tbody",152),t.YNc(28,Mi,25,20,"tr",153),t.qZA()()()()),2&a){const e=t.oxw();t.xp6(28),t.Q6J("ngForOf",e.tnHistory)}}let Ui=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.toastr=s,this.AS=u,this.modalService=p,this.authority="DM",this.user=this.AS.currentUserValue,this.urlPrefix="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.searchText=new U.x,this.view="",this.DELIMITER="-",this.display_report=1,this.is_uploading=!1,this.showTS=!1,this.queryParams={},this.property=[],this.tenant=[],this.trancheList=[],this.loanList=[],this.imageList=this.rd.GetImages(),this.companyList={},this.optionList={1:"Property Expense",2:"Tenant Payment",3:"Tenant Receivable",4:"Security Deposit"},this.cList=this.rd.GetCategories("ALL"),this.tStatusList=this.rd.GetTXStatus(),this.cInvList=this.rd.GetCategories("INVESTOR"),this.cEList=this.rd.GetCategories("EXPENSE"),this.cIList=this.rd.GetCategories("INCOME"),this.cRList=this.rd.GetCategories("RECEIVABLE"),this.cSDList=this.rd.GetCategories("SD"),this.cLTList=this.rd.GetCategories("LOAN"),this.c_refresh=0,this.ptList={},this.vList=[],this.tfList=[],this.rhaList=this.rd.GetRentHAgencies(),this.pList=[],this.tnList=[],this.tnFamily=[],this.tsList=[],this.inList=[],this.tnDocuments=[],this.tnHistory=[],this.showModal=!1,this.showHistory=!1,this.file_info="",this.owner_id=-1,this.owner_type="",this.modalTitle="",this.tr_tags="",this.tx_tags="",this.add_docs=0,this.tr_checked=!0,this.start_date="",this.end_date="",this.tr_tx_id=-1,this.tx_data_default=!0,this.tx_status="1",this.lt_tx_id=-1,this.lt_tx={principal:0,interest:0,payment:0,loan_id:0,payee:"",reference:"",description:" ",status:1},this.loan_id=-1,this.tranche_name="",this.category_id=-1,this.tx_vendor="",this.tx_vendor2="",this.tx_amount=0,this.tx_debit=0,this.tx_credit=0,this.tx_description="",this.tx_type="",this.tx_ref="",this.tx_invoice="",this.tx_invoice_dt="",this.tx_family_members=0,this.tx_readonly=!1,this.tx_displayactions=!1,this.updated="",this.updatedby="",this.tenant_id=-1,this.property_id=-1,this.investor_id=-1,this.company_id=-1,this.itx_id=-1,this.tx_id=-1,this.tr_id=-1,this.ttx_id=-1,this.stx_id=-1,this.property_info="",this.tenant_info="",this.dtList=this.rd.GetDates(),this.tx_date=this.dtList.tdate,this.s_date="",this.today=new Date,this.alertModalOptions={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Modify Transaction",content:{description:"Are you sure, you want to modify this transaction?"}}},this.gridOptions={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0}},this.gridTSColumns=[{headerName:"ID",width:70,field:"tx_id",filter:"agNumberColumnFilter"},{headerName:"Date",field:"tdate",width:100,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Payee",width:100,field:"payee",filter:!0},{headerName:"Debit",field:"debit",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Credit",field:"credit",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Type",field:"type",filter:!0},{headerName:"Reference",field:"reference",filter:!0},{headerName:"Description",field:"description",filter:!0}],this.gridTSData=[]}ngOnInit(){if(this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.view=this.user.type,console.log("DM:",this.vList),this.rd.companySubject.subscribe(e=>this.companyList=e),this.rd.vendorSubject.subscribe(e=>this.vList=e),this.rd.paymentTypesSubject.subscribe(e=>this.ptList=e),this.getProperties(),this.getTenants(),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("tenant_id")&&(this.tenant_id=parseInt(this.queryParams.tenant_id,10)),this.queryParams.hasOwnProperty("property_id")&&(this.property_id=parseInt(this.queryParams.property_id,10)),this.queryParams.hasOwnProperty("tx_id")?this.tx_id=parseInt(this.queryParams.tx_id,10):this.queryParams.hasOwnProperty("tr_id")?this.tr_id=parseInt(this.queryParams.tr_id,10):this.queryParams.hasOwnProperty("stx_id")?this.stx_id=parseInt(this.queryParams.stx_id,10):this.queryParams.hasOwnProperty("itx_id")?this.itx_id=parseInt(this.queryParams.itx_id,10):this.queryParams.hasOwnProperty("lttx_id")&&(this.lt_tx_id=parseInt(this.queryParams.lttx_id,10)),this.queryParams.hasOwnProperty("report")&&(this.display_report=this.queryParams.report),this.queryParams.hasOwnProperty("reference")&&(this.tx_ref=this.queryParams.reference),this.queryParams.hasOwnProperty("wo_desc")&&(this.tx_description=this.queryParams.wo_desc),this.tx_id>0?this.getTX():this.tr_id>0?(this.getTR(),this.display_report=3):this.stx_id>0?(this.getSTX(),this.display_report=4):this.itx_id>0?(this.getITX(),this.display_report=5):this.lt_tx_id>0&&(this.getLTTX(),this.display_report=6)}),console.log("NGINIT: ",this.tx_date,this.lt_tx_id,this.display_report),"Admin"===this.view||"SManager"===this.view)this.tx_readonly=!1,this.tx_displayactions=!0,this.optionList[5]="Investor",this.optionList[6]="Loan Payment",this.getInvestors(),this.getLoans();else if("Manager"===this.view)this.tx_readonly=!1,this.tx_displayactions=!0;else{this.tx_readonly=!0,this.tx_displayactions=!1;for(let e=1;e<6;e++)this.staticTabs.tabs[e].disabled=!0}this.end_date=this.dtList.tdate,this.start_date=this.dtList.tdate_1Y,this.filteredOptions=this.searchText.pipe((0,J.O)(""),(0,R.U)(e=>this.filterT(e)))}ngAfterViewInit(){console.log("ngAfterViewInit: tx, stx, tr:",this.tx_id,this.stx_id,this.tr_id," Report:",this.display_report),this.onChangeReportType("")}filterT(e){const i=e.toLowerCase();return this.tnList.filter(n=>n.other_names.toLowerCase().includes(i))}onChangeReportType(e){console.log("onChangeReportType:",e,this.display_report),this.cRList=this.rd.GetCategories("RECEIVABLE"),this.cEList=this.rd.GetCategories("EXPENSE"),this.cIList=this.rd.GetCategories("INCOME"),this.cSDList=this.rd.GetCategories("SD"),this.cLTList=this.rd.GetCategories("LOAN"),this.cInvList=this.rd.GetCategories("INVESTOR"),this.tx_vendor="",this.category_id=-1}getProperties(){this.REQ.get("p","").subscribe(i=>{this.pList=i.data},i=>{console.log(i)})}getLoans(){const e={params:{}};console.log("getLoans Tranche:",e),this.REQ.get("tranche/loanlist",{query:JSON.stringify(e)}).subscribe(i=>{this.loanList=i.data,console.log("getLoans:",i,this.loanList)},i=>{console.log(i)})}getPropertyInfo(e){this.REQ.get("p",{query:JSON.stringify({params:{property_id:e}})}).subscribe(n=>{this.property=n,this.tenant_id=this.property.tenant_id,""!=n.children&&(this.tnFamily=JSON.parse(n.children))},n=>{console.log(n)})}getTX(){const e={params:{tx_id:this.tx_id},usage:{authority:this.authority,sub_authority:"TX",operation:"REFRESH",data:"NA"}};this.showHistory=!1,console.log("getTX: entered:",e),this.REQ.get("gtx",{query:JSON.stringify(e)}).subscribe(i=>{var n=i;this.tenant_id=n.tenant_id,this.property_id=n.property_id,this.category_id=n.category_id,this.tx_vendor=n.payee,void 0===this.vList[this.tx_vendor]&&this.vList.push({vendor_id:-1,name:this.tx_vendor,label:this.tx_vendor}),this.tx_date=n.tdate,this.tx_debit=n.debit,this.tx_credit=n.credit,this.tx_description=n.description,this.tx_type=n.type,this.tx_ref=n.reference,this.tx_invoice=n.invoice,this.tx_invoice_dt=n.invoice_dt,this.s_date=n.sdate,this.tx_status=n.status,n.documents&&(this.tnDocuments=JSON.parse(n.documents)),n.history&&(this.tnHistory=JSON.parse(n.history).data,console.log("History:************* ",this.tnHistory.length," =>",this.tnHistory),this.tnHistory.length>0&&("Super"===this.view||"Admin"===this.view||"SManager"===this.view)&&(this.showHistory=!0));let o=new Date(this.tx_date),l=(this.today.getTime()-o.getTime())/864e5;this.tx_status=""+n.status,("0"===this.tx_status&&"Admin"!==this.view&&"SManager"!==this.view||"Admin"!==this.view&&"SManager"!==this.view&&l>7)&&(this.tx_readonly=!0),console.log("getTX: response:",this.tx_readonly,this.tx_status,n),this.add_docs=1,this.owner_id=this.tx_id,this.owner_type="TX",this.modalTitle="Transaction Document Upload",this.updated=n.updated,this.updatedby=n.updatedby},i=>{console.log(i)})}getSTX(){const e={params:{stx_id:this.stx_id},usage:{authority:this.authority,sub_authority:"STX",operation:"REFRESH",data:"NA"}};console.log("getSTX: entered:",e),this.REQ.get("gstx",{query:JSON.stringify(e)}).subscribe(i=>{console.log("getSTX:",i);var n=i;this.tenant_id=n.tenant_id,this.property_id=n.property_id,this.category_id=n.category_id,this.tx_vendor=n.payee,console.log("vendor:",this.vList),void 0===this.vList[this.tx_vendor]&&this.vList.push({vendor_id:-1,name:this.tx_vendor,label:this.tx_vendor}),console.log("vendor2:",this.vList),this.tx_vendor=n.payee,this.tx_date=n.tdate,this.tx_debit=n.debit,this.tx_credit=n.credit,this.tx_description=n.description,this.tx_type=n.type,this.tx_ref=n.reference,this.s_date=n.sdate,this.tx_status=n.status,n.documents&&(this.tnDocuments=JSON.parse(n.documents)),this.add_docs=1,this.owner_id=this.stx_id,this.owner_type="STX",this.modalTitle="Security Transaction Document Upload";let o=new Date(this.tx_date),l=(this.today.getTime()-o.getTime())/864e5;"Admin"!==this.view&&"SManager"!==this.view&&l>15&&(this.tx_readonly=!0),this.updated=n.updated,this.updatedby=n.updatedby,console.log("getSTX:",this.tx_readonly,this.property_id,this.tenant_id,n)},i=>{console.log(i)})}getInvestors(){const e={params:{status:"ACTIVE"}};console.log("getInvestor:entering:",e),this.REQ.get("investor/list",{query:JSON.stringify(e)}).subscribe(i=>{this.inList=i.data,console.log("getInvestor:",this.inList)},i=>{console.log("getInvestor:",i)})}getITX(){const e={params:{itx_id:this.itx_id}};console.log("getITX: entered:",e),this.tnDocuments=[],this.REQ.get("investor/gtx",{query:JSON.stringify(e)}).subscribe(i=>{console.log("getITX:",i);var n=i;this.investor_id=n.investor_id,this.company_id=n.company_id,this.category_id=n.category_id,this.tx_date=n.tdate,this.tx_debit=n.debit,this.tx_credit=n.credit,this.tx_description=n.description,this.tx_type=n.type,this.tx_vendor=n.payee,this.tx_ref=n.reference,n.documents&&(this.tnDocuments=JSON.parse(n.documents)),void 0===this.vList[this.tx_vendor]&&this.vList.push({vendor_id:-1,name:this.tx_vendor,label:this.tx_vendor}),this.add_docs=1,this.owner_id=this.itx_id,this.owner_type="ITX",this.modalTitle="Investor Transaction Document Upload",console.log("getITX:",this.company_id,this.investor_id),this.is_uploading=!1,this.updated=n.updated,this.updatedby=n.updatedby},i=>{console.log("getITX:",i),this.is_uploading=!1})}resetINV(e){if(""!==this.tx_vendor)return!1;for(let i=0;i<this.inList.length;i++)this.inList[i].investor_id==this.investor_id&&(this.tx_vendor=this.inList[i].name)}saveASITXData(e){this.itx_id=-1,this.tnDocuments=[],this.updateITXData(e)}updateITXData(e){if(!this.validateData(e,this.itx_id))return!1;let n=this.tx_vendor;const o={tx_tab:e,itx_id:this.itx_id,tx_type:"TRANSACTION",company_id:this.company_id,investor_id:this.investor_id,category_id:this.category_id,credit:this.tx_credit,debit:this.tx_debit,tdate:this.utility.date2ISO(this.tx_date),description:this.tx_description,reference:this.tx_ref,type:this.tx_type,payee:n};console.log("updateITXData:",o),this.tx_id>0?(this.modalRef=this.modalService.show(M.s,this.alertModalOptions),this.modalRef.content.onClose.subscribe(l=>{console.log("updateTXData: Confirm:",l),"OK"===l.action?(this.is_uploading=!0,this.REQ.post("investor/utx",o).subscribe(s=>{console.log(s),this.itx_id=s.itx_id,this.add_docs=1,this.toastr.success("Transaction updated tx id: "+this.itx_id),console.log("Transaction updated tx id: "+this.itx_id),this.is_uploading=!1},s=>{this.is_uploading=!1,console.log("updateITXData:",s),this.toastr.error("Transaction failed for : "+this.investor_id)})):this.is_uploading=!1})):this.REQ.post("investor/utx",o).subscribe(l=>{console.log(l),this.itx_id=l.itx_id,this.add_docs=1,this.toastr.success("Transaction updated tx id: "+this.itx_id),console.log("Transaction updated tx id: "+this.itx_id),this.is_uploading=!1},l=>{this.is_uploading=!1,console.log("updateITXData:",l),this.toastr.error("Transaction failed for : "+this.investor_id)})}checkForDups(e){let n={};return n.params=e,console.log("checkForDups: Entered:",n),this.REQ.get("gtxsdups",{query:JSON.stringify(n)}).subscribe(o=>(console.log("checkForDups: ",o),!0),o=>{console.log(o)}),!0}getTR(){const e={params:{tr_id:this.tr_id}};console.log("getTR: entered"),this.tnDocuments=[],this.REQ.get("gtx",{query:JSON.stringify(e)}).subscribe(i=>{var n=i;this.tx_date=n.tdate,this.tr_tx_id=n.tx_id,this.tenant_id=n.tenant_id,this.property_id=n.property_id,this.category_id=n.category_id,this.tx_amount=n.amount,this.tx_description=n.description,this.tx_type=n.type,this.tx_ref=n.reference,this.tx_vendor=n.payee,void 0===this.vList[this.tx_vendor]&&this.vList.push({vendor_id:-1,name:this.tx_vendor,label:this.tx_vendor}),n.documents&&(this.tnDocuments=JSON.parse(n.documents));let o=new Date(this.tx_date),l=(this.today.getTime()-o.getTime())/864e5;"Admin"!==this.view&&"SManager"!==this.view&&l>15&&(this.tx_readonly=!0),console.log("getTR:",n),this.updated=n.updated,this.updatedby=n.updatedby,this.add_docs=2},i=>{console.log(i)})}resetV(e,i){console.log("resetV:",e,i),this.tx_vendor=e.name}resetT(e,i){this.property_id=e.property_id,this.tenant_id<1&&(this.getPropertyInfo(this.property_id),this.property.tenant_id&&(this.tenant_id=this.property.tenant_id))}resetP(e,i){this.tenant_id=e.tenant_id,this.getTenantInfo(this.tenant_id),this.tenant.property_id&&(this.property_id=this.tenant.property_id),this.getTS("NA",i)}refreshP(){for(let e=0;e<this.pList.length;e++)this.pList[e].property_id==this.property_id&&(this.property_info=this.property_id+" : "+this.pList[e].label2+"  "+this.pList[e].city+"   "+this.pList[e].state+" "+this.pList[e].zip+" -> "+this.pList[e].p_status)}refreshT(){this.tenant_info="qas",this.getTenantInfo(this.tenant_id)}getTenantInfo(e){const i={params:{tenant_id:e}};this.tx_vendor="",this.tfList=[],console.log("getTenantInfo: vList:",this.vList," vendor:",this.tx_vendor," T List:",this.tfList),this.REQ.get("tenant",{query:JSON.stringify(i)}).subscribe(n=>{this.tenant=n,this.property_id=this.tenant.property_id,console.log("getTenantInfo:",this.tenant),this.tx_vendor=this.tenant.first_name+" "+this.tenant.last_name,this.tfList[this.tx_vendor]=this.tx_vendor;let o=JSON.parse(n.family).data;for(let l=0;l<o.length;l++)this.tfList[o[0].first_name+" "+o[0].last_name]=o[0].first_name+" "+o[0].last_name},n=>{console.log(n)})}statusChange(e,i){console.log("statusChange:",e,i,this.tx_status)}getTS(e,i){console.log("getTS: Entered:",this.category_id,i);var o={params:{category_id:this.category_id,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};if("PROPERTY"==i&&this.property_id>0&&this.category_id>0)o.params.property_id=this.property_id;else if("T"==i&&this.tenant_id>0&&this.category_id>0)o.params.tenant_id=this.tenant_id;else if("TR"==i&&this.tenant_id>0&&this.category_id>0)o.params.tenant_id=this.tenant_id;else{if(!("SD"==i&&this.tenant_id>0&&this.category_id>0))return-1;o.params.tenant_id=this.tenant_id}return this.gridTSData=[],console.log("getTS:",o),this.REQ.get("ctr",{query:JSON.stringify(o)}).subscribe(l=>{if(this.tsList=l.data.reverse(),this.gridTSData=this.tsList,console.log("getTS: Data:",this.tsList),console.log("getTS: Data2:",this.tx_vendor,this.tx_type),this.tsList.length>0)return this.showTS=!0,""===this.tx_vendor&&(this.tx_vendor=this.tsList[0].payee),this.tx_id<0&&((0===this.tx_debit||this.tx_data_default)&&(this.tx_debit=this.tsList[0].debit),(0===this.tx_credit||this.tx_data_default)&&(this.tx_credit=this.tsList[0].credit),(""===this.tx_type||this.tx_data_default)&&(this.tx_type=this.tsList[0].type),(""===this.tx_ref||this.tx_data_default)&&(this.tx_ref=this.tsList[0].reference),(""===this.tx_description||this.tx_data_default)&&(this.tx_description=this.tsList[0].description)),this.tr_tags=this.tsList[0].tags,0},l=>{console.log(l)}),-1}getTenants(){this.REQ.get("tenant",{query:JSON.stringify({params:{},usage:{authority:this.authority,sub_authority:"TENANTS",operation:"VIEW",data:"NA"}})}).subscribe(i=>{this.tnList=i.data,console.log("getTenants:",this.tnList)},i=>{console.log(i)})}cloneTXData(){this.tx_readonly=!1,this.is_uploading=!1,this.tnDocuments=[],this.tx_id=-1,this.tr_id=-1,this.itx_id=-1,this.stx_id=-1,this.tr_tx_id=-1,this.tx_status="1",this.s_date="",this.updated="",this.updatedby=""}clearTXData(){this.tx_id=-1,this.tr_id=-1,this.itx_id=-1,this.stx_id=-1,this.tr_tx_id=-1,this.tenant_id=-1,this.investor_id=-1,this.property_id=-1,this.tx_vendor="",this.tx_vendor2="",this.category_id=-1,this.tx_amount=0,this.tx_debit=0,this.tx_credit=0,this.tx_description="",this.tx_date=new Date,this.s_date="",this.tx_ref="",this.tx_invoice="",this.tx_invoice_dt="",this.tx_type="-1",this.add_docs=0,this.owner_id=-1,this.owner_type="",this.modalTitle="",this.tnDocuments=[],this.is_uploading=!1,this.tx_readonly=!1,this.tx_status="1",this.updated="",this.updatedby=""}validateData(e,i){console.log("validateData:["+e+"] property["+this.property_id+"] tenant["+this.tenant_id+"] amount:["+this.tx_amount+"] date["+this.tx_date+"] payee["+this.tx_vendor+"] category["+this.category_id+"] payment["+this.tx_type+"] reference["+this.tx_ref+"] desc["+this.tx_description+"]");let n={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Transaction",content:{description:"Please enter data into all the fields !",buttonText:"OK"}}};return"TENANT"===e&&(this.tenant_id<0||this.property_id<0||this.category_id<0||this.tx_type.length<2||this.tx_description.length<5)?(n.data.heading="Tenant Transaction",this.modalRef=this.modalService.show(w.V,n),!1):"PROPERTY"===e&&(this.tx_vendor.length<3||this.property_id<0||this.category_id<0||this.tx_type.length<2||this.tx_description.length<5)?(n.data.heading="Property Transaction",this.modalRef=this.modalService.show(w.V,n),!1):"DEPOSIT"===e&&(this.tenant_id<0||this.property_id<0||this.category_id<0||this.tx_vendor.length<3||this.tx_type.length<2||this.tx_description.length<5)?(n.data.heading="Security Deposit Transaction",this.modalRef=this.modalService.show(w.V,n),!1):"RECEIVABLE"===e&&(this.tx_vendor.length<3||this.tenant_id<0||this.property_id<0||this.category_id<0||this.tx_description.length<5)?(n.data.heading="Tenant Receivable Transaction",this.modalRef=this.modalService.show(w.V,n),!1):"INVESTOR"!==e||!(this.investor_id<0||this.company_id<0||this.category_id<0||this.tx_vendor.length<3||this.tx_type.length<2||this.tx_description.length<5)||(n.data.heading="Investor Transaction",this.modalRef=this.modalService.show(w.V,n),!1)}setUtils(e,i){console.log("setUtils:",e),this.category_id=i,this.getTS("NA",e),console.log("setUtils: desc:",this.tx_description),"PROPERTY"==e?""===this.tx_description&&(this.tx_description="Expenses"):"T"===e?(""===this.tx_description&&("8"==i?this.tx_description="Rent Payments":"54"==i?this.tx_description="Water Charges Reimbursed":"80"==i&&(this.tx_description="Trash Charges Reimbursed")),""==this.tx_vendor&&(this.tx_vendor="Tenant")):"TR"===e?""==this.tx_description&&("102"==i?this.tx_description="Monthly Rent":"106"==i?this.tx_description="Late Fees":"103"==i&&(this.tx_description="Water Charges")):"SD"===e?""==this.tx_description&&("3"==i?this.tx_description="Security Deposit payment":"4"==i?this.tx_description="Deposit returned to Tenant":"115"==i&&(this.tx_description="Deposit transferred to owner for unpaid charges")):"INVESTOR"===e&&(""==this.tx_description&&("118"==i?this.tx_description="Capital Contribution from Investor":"119"==i?this.tx_description="Capital Distribution to Investor":"120"==i&&(this.tx_description="Tax Adjustment")),""==this.tx_vendor&&(this.tx_vendor="Investor"))}changed(e){console.log("changed:",e,this.tx_description)}saveASReceivable(){this.tr_id=-1,this.tnDocuments=[],this.updateReceivable()}updateReceivable(){if(!this.validateData("RECEIVABLE",this.tr_id))return!1;const i={tx_type:"TENANT_RECEIVABLE",tr_id:this.tr_id,tx_id:this.tr_tx_id,qualifier:"NEW",tenant_id:this.tenant_id,property_id:this.property_id,category_id:this.category_id,type:this.tx_type,payee:this.tx_vendor,amount:this.tx_amount,tdate:this.utility.date2ISO(this.tx_date),description:this.tx_description};console.log("updateReceivable:",i),this.tr_id>0?(this.modalRef=this.modalService.show(M.s,this.alertModalOptions),this.modalRef.content.onClose.subscribe(n=>{console.log("updateReceivable: Confirm:",n),"OK"===n.action&&this.REQ.post("utr",i).subscribe(o=>{console.log(o),this.tr_id=o.tr_id,this.toastr.success("Tenant Receivable ok for : "+this.tr_id),this.add_docs=2},o=>{console.log(o),this.toastr.error("Tenant Receivable failed for : "+this.tr_id)})})):this.REQ.post("utr",i).subscribe(n=>{console.log(n),this.tr_id=n.tr_id,this.toastr.success("Tenant Receivable created for : "+this.tenant_id),this.add_docs=2},n=>{console.log(n),this.toastr.error("Tenant Receivable failed for : "+this.tenant_id)})}saveASTXData(e){this.tx_id=-1,this.tnDocuments=[],this.updateTXData(e)}updateTXData(e){if(!this.validateData(e,this.tx_id))return!1;var n=this.tenant_id;"PROPERTY"==e&&(n=-1);let o=this.tx_vendor;"Tenant"===o&&this.tenant_id>0?(console.log("Datamanagement:",this.tnList[this.tenant_id]),o=this.tenant.first_name+" "+this.tenant.last_name):"Other"===o&&""!=this.tx_vendor2&&(o=this.tx_vendor2);let l=this.utility.date2ISO(this.s_date);const s={tx_tab:e,tx_id:this.tx_id,tx_type:"TRANSACTION",property_id:this.property_id,tenant_id:n,category_id:this.category_id,credit:this.tx_credit,debit:this.tx_debit,tdate:this.utility.date2ISO(this.tx_date),sdate:l,description:this.tx_description,reference:this.tx_ref,invoice:this.tx_invoice,invoice_dt:this.utility.date2ISO(this.tx_invoice_dt),type:this.tx_type,status:this.tx_status,payee:o,usage:{authority:this.authority,sub_authority:"TX",operation:"UPDATE",data:"NA"}};console.log("updateTXData:",s),this.tx_id>0?(this.modalRef=this.modalService.show(M.s,this.alertModalOptions),this.modalRef.content.onClose.subscribe(u=>{console.log("updateTXData: Confirm:",u),"OK"===u.action?(this.is_uploading=!0,this.REQ.post("utx",s).subscribe(p=>{console.log(p),this.tx_id=p.tx_id,this.add_docs=1,this.toastr.success("Transaction updated for  tx id: "+this.tx_id),console.log("Transaction updated for  tx id: "+this.tx_id),this.is_uploading=!1},p=>{console.log(p),this.toastr.error("Transaction failed for : "+this.tenant_id),this.is_uploading=!1})):this.is_uploading=!1})):(this.is_uploading=!0,this.REQ.post("utx",s).subscribe(u=>{console.log(u),this.tx_id=u.tx_id,this.add_docs=1,this.toastr.success("Transaction updated for  tx id: "+this.tx_id),console.log("Transaction updated for  tx id: "+this.tx_id),this.is_uploading=!1},u=>{console.log(u),this.toastr.error("Transaction failed for : "+this.tenant_id),this.is_uploading=!1}))}resetSpinner(){this.is_uploading=!1,console.log("resetting spinner")}saveASSTXData(e){this.stx_id=-1,this.tnDocuments=[],this.updateSTXData(e)}updateSTXData(e){if(!this.validateData(e,this.stx_id))return!1;var i="NEW";this.stx_id>0&&(i="UPDATE");var o=this.tenant_id;"PROPERTY"==e&&(o=-1);let l=this.tx_vendor;"Tenant"===l&&this.tenant_id>0?(console.log("Datamanagement:",this.tnList[this.tenant_id]),l=this.tenant.first_name+" "+this.tenant.last_name):"Other"===l&&""!=this.tx_vendor2&&(l=this.tx_vendor2);let s=this.utility.date2ISO(this.s_date);const u={qualifier:i,tx_tab:e,stx_id:this.stx_id,tx_type:"STRANSACTION",property_id:this.property_id,tenant_id:o,category_id:this.category_id,credit:this.tx_credit,debit:this.tx_debit,tdate:this.utility.date2ISO(this.tx_date),description:this.tx_description,reference:this.tx_ref,type:this.tx_type,payee:l,sdate:s,status:this.tx_status};console.log("updateSTXData:",u),this.stx_id>0?(this.modalRef=this.modalService.show(M.s,this.alertModalOptions),this.modalRef.content.onClose.subscribe(p=>{console.log("updateTXData: Confirm:",p),"OK"===p.action?(this.is_uploading=!0,this.REQ.post("ustx",u).subscribe(f=>{console.log("updateSTXData:",f),this.stx_id=f.stx_id,this.add_docs=1,this.toastr.success("Transaction updated for  stx id: "+this.stx_id),console.log("Transaction updated for  stx id: "+this.stx_id)},f=>{console.log(f),this.toastr.error("Transaction failed for : "+this.tenant_id)})):this.is_uploading=!1})):this.REQ.post("ustx",u).subscribe(p=>{console.log(p),this.stx_id=p.stx_id,this.add_docs=1,this.toastr.success("Transaction updated for  stx id: "+this.stx_id),console.log("Transaction updated for  stx id: "+this.stx_id)},p=>{console.log(p),this.toastr.error("Transaction failed for : "+this.tenant_id)})}resetLOAN(e,i){console.log("resetLOAN:",i),this.tranche_name="";for(let n in this.loanList)this.loanList[n].loan_id==i&&(this.tranche_name=this.loanList[n].company_name+" - "+this.loanList[n].tranche_name,this.lt_tx.tranche_id=this.loanList[n].tranche_id)}getLTTX(){const e={params:{tx_id:this.lt_tx_id},usage:{authority:this.authority,sub_authority:"LTTX",operation:"REFRESH",data:"NA"}};console.log("getLTTX: entered:",e),this.REQ.get("tranche/gltx",{query:JSON.stringify(e)}).subscribe(i=>{this.lt_tx=i.data,this.lt_tx_id=this.lt_tx.tx_id,this.tx_type=this.lt_tx.type,this.tx_description=this.lt_tx.description,void 0===this.vList[this.lt_tx.payee]&&this.vList.push({vendor_id:-1,name:this.lt_tx.payee,label:this.lt_tx.payee}),this.tx_vendor=this.lt_tx.payee,this.tx_date=this.lt_tx.tdate,this.category_id=this.lt_tx.category_id,this.resetLOAN("",this.lt_tx.loan_id),this.lt_tx.documents&&(this.tnDocuments=JSON.parse(this.lt_tx.documents));let n=new Date(this.tx_date),o=(this.today.getTime()-n.getTime())/864e5;this.tx_status=""+this.lt_tx.status,("0"===this.tx_status&&"Admin"!==this.view&&"SManager"!==this.view||"Admin"!==this.view&&"SManager"!==this.view&&o>7)&&(this.tx_readonly=!0),console.log("getLTTX: response:",i),this.add_docs=1,this.owner_id=this.lt_tx_id,this.owner_type="LTTX",this.modalTitle="Loan Tranche Document Upload",this.updated=this.lt_tx.updated,this.updatedby=this.lt_tx.updatedby},i=>{console.log(i)})}saveASLTTXData(e){this.lt_tx_id=-1,this.tnDocuments=[],this.updateLTTXData(e)}updateLTTXData(e){let n=this.tx_vendor;"Other"===n&&""!=this.tx_vendor2&&(n=this.tx_vendor2);var o={usage:{authority:this.authority,sub_authority:"LTTX",operation:"UPDATE",data:"NA"}};o.params=this.lt_tx,o.params.tx_id=this.lt_tx_id,o.params.tdate=this.utility.date2ISO(this.tx_date),o.params.payee=n,o.params.category_id=this.category_id,o.params.type=this.tx_type,console.log("updateLTTXData:",o),this.lt_tx_id>0?(this.modalRef=this.modalService.show(M.s,this.alertModalOptions),this.modalRef.content.onClose.subscribe(l=>{console.log("updateLTTXData: Confirm:",l),"OK"===l.action?(this.is_uploading=!0,this.REQ.post("tranche/ultx",o).subscribe(s=>{console.log("updateLTTXData response1:",s),this.lt_tx_id=s.data.tx_id,this.add_docs=1,this.toastr.success("Transaction updated for Loan Tranche id: "+this.lt_tx_id),console.log("Transaction updated for Loan Tranche id: "+this.lt_tx_id)},s=>{console.log(s),this.toastr.error("Transaction failed for : "+this.lt_tx_id)}),this.is_uploading=!1):this.is_uploading=!1})):(o.tx_id=-1,this.REQ.post("tranche/ultx",o).subscribe(l=>{console.log("updateLTTXData response2:",l),this.lt_tx_id=l.data.tx_id,this.add_docs=1,this.toastr.success("Transaction updated for Loan Tranche id: "+this.lt_tx_id),console.log("Transaction updated for Loan Tranche id: "+this.lt_tx_id)},l=>{console.log(l),this.toastr.error("Transaction failed for : "+this.lt_tx_id)}))}clearLTTXData(){}getDocs(e){this.REQ.get("fl",{query:JSON.stringify({params:{tx_id:this.tx_id,key_type:"TX"},usage:{authority:this.authority,sub_authority:"Documents",operation:"REFRESH",data:"NA"}})}).subscribe(n=>{console.log("getDocs.1:",n),this.tnDocuments=n},n=>{console.log(n)})}simplifyText(e){return e.match(/\b(\w)/g).join("")}addDocuments(e){let i="",n="";for(let l=0;l<this.pList.length;l++)this.pList[l].property_id==this.property_id&&(i=this.property_id+"_"+this.simplifyText(this.pList[l].label));for(let l=0;l<this.tnList.length;l++)this.tnList[l].tenant_id==this.tenant_id&&(n=this.tenant_id+"_"+this.tnList[l].last_name);console.log(i+"|"+n+"|"+this.tx_vendor+"|"+this.category_id+"|"+this.tenant_id),this.file_info=1==this.display_report?i+"_"+this.simplifyText(this.tx_vendor):n+"_"+this.category_id,this.file_info=this.tx_id+"_"+this.file_info,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/\(/g,""),this.file_info=this.file_info.replace(/\)/g,""),this.file_info=this.file_info.replace(/  /g," "),this.file_info=this.file_info.replace(/ /g,"_"),console.log(this.file_info),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Transaction Document",content:{owner_type:this.owner_type,owner_id:this.owner_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(l=>{console.log("Result received:",l),this.getDocs(this.tx_id)})}getDocument(e,i){console.log("getDocument: ",this.tnDocuments.data[e]);let n={params:this.tnDocuments.data[e],usage:{authority:this.authority,sub_authority:i,operation:"DOWNLOAD",data:"NA"}},o=n.params.doc_id+"_"+n.params.doc_name+"."+n.params.doc_format;console.log("getDocument: ",n,o),this.REQ.getDocument({query:JSON.stringify(n)},o)}delDocument(e){let i={doc_id:e,key_type:"TENANT"};console.log(i),this.REQ.post("fd",i).subscribe(n=>{console.log(n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}onFileUploadClose(e){this.showModal=!1,console.log("onFileUploadClose"),console.log(e)}createPDF(e,i){console.log("createPDF:",e,i),this.REQ.createDocument("gpdf",{tab:i,type:"TX",tx_id:this.tx_id},"TX_"+this.tx_id+".pdf")}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}onGridReady(e,i){var n=e.api.getColumnDefs();n.forEach(function(o,l){o.resizable=!0,o.sortable=!0,o.filter=!0}),e.api.setColumnDefs(n)}onModelUpdated(e,i){e.api.sizeColumnsToFit()}onCellClicked(e,i){console.log("onCellClicked:",e,i)}onCellDoubleClicked(e,i){console.log("Double Clicked:",e,i)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(d.klp),t.Y36(b.$),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dm"]],viewQuery:function(e,i){if(1&e&&t.Gf(re,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:26,vars:16,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-lg-9","col-md-6","col-sm-12"],[1,"mb-md-0","mb-3"],[3,"href"],["fas","","icon","hand-holding-usd text-white"],[1,"col-lg-3","col-md-6","col-sm-12","text-right"],["id","tp_type",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"card-body"],["class","card",4,"ngIf"],[1,"row","pt-3"],[1,"col-12","small","text-muted"],["class","card-body",4,"ngIf"],[3,"value"],[1,"card-header","blue-grey","lighten-4"],[1,"col-lg-6","col-md-6","col-sm-12"],[1,"mb-0"],[1,"col-lg-6","col-md-6","col-sm-12","text-right"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","class"," btn-simple btn-sm",3,"click",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm",3,"click",4,"ngIf"],[1,"md-form","mb-2"],[1,"position-relative"],[2,"color","red"],[3,"href",4,"ngIf"],["keyOfID","property_id","firstLine","!!label>> !!state>> !!city>>","secondLine"," !!p_status>>","searchInKeys","label,city,state",3,"contentList","selectedID","disabled","selectedValue"],["name","tx_vendor","id","vSelect","optionHeight","30",1,"form-control",3,"ngModel","disabled","ngModelChange"],["value","Other"],[1,"col-lg-3","col-md-6","col-sm-12"],["required","",3,"inline","options","ngModel","disabled","ngModelChange"],["sd",""],["name","category_id","id","ceSelect","optionHeight","30",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["class","btn-group shadow-0 mt-md-5 mt-3 overflow-btn-group","role","group","aria-label","Basic example",4,"ngIf"],["mdbInput","","name","debit","type","number","value","0.0",1,"form-control",3,"ngModel","disabled","ngModelChange"],["mdbInput","","name","credit","type","number","value","0.0",1,"form-control",3,"ngModel","disabled","ngModelChange"],["id","tp_type",1,"form-control",3,"ngModel","disabled","ngModelChange"],["mdbInput","","id","txRef1","name","reference","type","text","value","NA",1,"form-control",3,"ngModel","disabled","ngModelChange"],["mdbInput","","id","txinv","name","reference","type","text","value","NA",1,"form-control",3,"ngModel","disabled","ngModelChange"],["mdbInput","","id","description","cols","80","name","tx_description","rows","2",1,"md-textarea","form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-lg-2","col-md-6","col-sm-12"],["mdbInput","","id","tr_tags","cols","80","name","tx_tags","rows","2",1,"md-textarea","form-control",3,"ngModel","disabled","ngModelChange"],["id","txStatus",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],[1,"md-form","mb-2","mt-4"],["class","card-footer",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm",1,"btn-simple","btn-sm",3,"click"],["fas","","icon","file-import text-primary","size","2x"],["mdbBtn","","type","button","color","white","rounded","true","size","sm",3,"click"],["fas","","icon","file-pdf text-danger","size","2x"],[1,"fas","fa-home","text-primary"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-5","mt-3","overflow-btn-group"],["mdbBtn","","type","button","color","default","rounded","true","size","sm","outline","true",3,"click"],[1,"card-footer"],[1,"col-md-6","col-sm-12"],["mdbBtn","","color","info","rounded","true","type","button",3,"disabled","click"],["mdbBtn","","color","default","rounded","true","type","button",3,"disabled","click"],[1,"col-md-6","col-sm-12","text-md-right"],["mdbBtn","","type","button",1,"btn","btn-link",3,"click"],[1,"row","col-sm-12"],["id","tableDocuments","name","tableDocuments","width","100%"],["scope","col"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","style","float:right","class"," btn-simple btn-sm",3,"click",4,"ngIf"],["id","tbA",1,"card-body"],["id","tARow",4,"ngFor","ngForOf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","",1,"btn-simple","btn-sm",2,"float","right",3,"click"],["id","tARow"],[1,"card-category","d-inline"],["nowrap",""],[1,"text-info"],[3,"click"],["nowrap","","name","size"],["align","right","z","",1,"text-danger"],[3,"click",4,"ngIf"],["keyOfID","tenant_id","firstLine","!!first_name>> !!last_name>>","searchInKeys","first_name,last_name,other_names",3,"contentList","selectedID","disabled","selectedValue"],[4,"ngIf"],["name","category_id","id","ciSelect","optionHeight","30",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["mdbInput","","name","debit","id","formTDB","type","number","value","0.0",1,"form-control",3,"ngModel","disabled","ngModelChange"],["name","tx_type","id","tSelect",1,"form-control",3,"ngModel","disabled","ngModelChange"],["mdbInput","","id","txRef2","name","reference","type","text","value","NA",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","tx_description2",1,"position-relative"],["mdbInput","","id","description","cols","80","name","tx_description2","rows","2",1,"md-textarea","form-control",3,"ngModel","disabled","ngModelChange"],["for","tr_tags2",1,"position-relative"],["mdbInput","","id","tr_tags2","rows","2",1,"md-textarea","form-control",3,"ngModel","disabled","ngModelChange"],[1,"fas","fa-user","text-primary"],["mdbInput","","id","tx_vendor2","placeholder","Other Name","type","text","value","NA",1,"form-control",3,"ngModel","disabled","ngModelChange"],["mdbBtn","","type","Legal","color","default","rounded","true","size","sm","outline","true",3,"click"],["type","button","mdbBtn","","color","info","rounded","true",3,"disabled","click"],["type","button","mdbBtn","","color","default","rounded","true",3,"disabled","click"],["spinnerType","big",4,"ngIf"],["spinnerType","big"],["selected","",3,"value",4,"ngFor","ngForOf"],["name","category_id","id","cSelect","optionHeight","30",1,"form-control",3,"ngModel","disabled","ngModelChange"],["mdbInput","","name","amount","type","number","value","0.0",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","tx_id3",1,"position-relative"],["mdbInput","","name","tx","type","text","id","tx_id3",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"col-sm-6","form-group"],["mdbInput","","id","description3","cols","80","rows","4",1,"md-textarea","form-control",3,"ngModel","disabled","ngModelChange"],["for","description3"],["class"," card-footer",4,"ngIf"],["selected","",3,"value"],["mdbBtn","","type","button",1,"btn","btn-link",2,"float","right",3,"click"],[1,"card-header","blue-grey","lighten-4",2,"margin-bottom","0px"],[1,"card-body",2,"margin-bottom","0px"],[1,"col-sm-6","pr-md-1","form-group","mb-2"],[1,"col-sm-6","pr-md-1","form-group"],[1,"col-sm-3","pr-md-1"],[1,"form-group"],["name","tx_vendor","id","vSelect",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["class"," form-group",4,"ngIf"],["label","Transaction Date","required","",3,"inline","options","ngModel","disabled","ngModelChange"],[1,"col-sm-3","form-group","mb-2"],[1,"col-sm-6","pr-md-1"],["class","btn-group","role","group","aria-label","Basic example",4,"ngIf"],[1,"col-sm-3","pr-md-1","form-group"],["mdbInput","","id","txRef","name","reference","type","text","value","NA",1,"form-control",3,"ngModel","disabled","ngModelChange"],["mdbInput","","id","description4","name","tx_description4","rows","2",1,"md-textarea","form-control",3,"ngModel","disabled","keyup","ngModelChange"],["for","description4"],["mdbInput","","id","tr_tags4","rows","2",1,"md-textarea","form-control",3,"ngModel","disabled","ngModelChange"],["for","tr_tags4"],["id","tx_vendor2","placeholder","Tenant Name","type","text","value","NA",1,"form-control",3,"ngModel","disabled","ngModelChange"],["role","group","aria-label","Basic example",1,"btn-group"],[1,"col-sm-6","form-group","mb-2"],["id","investSelect","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange","change"],["name","pSelect","id","pSelect",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-6"],["mdbInput","","id","itx_vendor","placeholder","Payee Name","type","text","value","NA",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"col-sm-3"],["label","Transaction Date","required","",3,"inline","options","ngModel","ngModelChange"],["name","category_id","id","cSelect","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange","change"],["mdbInput","","name","debit","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","credit","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-3","form-group"],[1,"col-3","pr-md-1"],["mdbInput","","id","txRef2","name","reference","type","text","value","NA",1,"form-control",3,"ngModel","ngModelChange"],[1,"md-form"],["mdbInput","","id","description5","cols","80","name","tx_description5","rows","2",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],["for","tx_description5"],[1,"col-sm-4"],["mdbInput","","id","tr_tagsi","rows","2",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],["for","tr_tagsi"],[1,"fas","fa-company","text-primary"],["mdbInput","","name","payment","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","principal","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","interest","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["id","TL","name","TL"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","350px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["grid1",""],[1,"row","mt-3","mb-3"],["id","tableHistory","name","tableHistory","width","100%"],["scope","col",1,"text-center"],["id","tbH",1,"card-body"],["id","tHRow",4,"ngFor","ngForOf"],["id","tHRow"],["nowrap","",1,"text-info"],["nowrap","",1,"text-right"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"div",3)(5,"div",4)(6,"h3",5)(7,"a",6),t._UZ(8,"mdb-icon",7),t.qZA(),t._uU(9," \xa0Transaction Entry / Edit "),t.qZA()(),t.TgZ(10,"div",8)(11,"select",9),t.NdJ("ngModelChange",function(o){return i.display_report=o})("change",function(o){return i.onChangeReportType(o)}),t.YNc(12,le,2,2,"option",10),t.ALo(13,"keyvalue"),t.qZA()()()()(),t.TgZ(14,"div",11),t.YNc(15,Ze,117,63,"div",12),t.YNc(16,Ie,117,64,"div",12),t.YNc(17,ze,75,37,"div",12),t.YNc(18,ri,103,55,"div",12),t.YNc(19,gi,93,31,"div",12),t.YNc(20,Ai,96,35,"div",12),t.TgZ(21,"div",13)(22,"div",14),t._uU(23),t.qZA()(),t.YNc(24,qi,4,2,"div",15),t.YNc(25,wi,29,1,"div",15),t.qZA()()()),2&e&&(t.xp6(7),t.MGl("href","",i.urlPrefix,"dm",t.LSH),t.xp6(4),t.Q6J("ngModel",i.display_report)("disabled",i.tx_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(13,14,i.optionList)),t.xp6(3),t.Q6J("ngIf",1==i.display_report),t.xp6(1),t.Q6J("ngIf",2==i.display_report),t.xp6(1),t.Q6J("ngIf",3==i.display_report),t.xp6(1),t.Q6J("ngIf",4==i.display_report),t.xp6(1),t.Q6J("ngIf",5==i.display_report&&("Admin"===i.view||"SManager"===i.view)),t.xp6(1),t.Q6J("ngIf",6==i.display_report&&("Admin"===i.view||"SManager"===i.view||"Manager"===i.view)),t.xp6(3),t.AsE("\xa0\xa0Last updated by ",i.updatedby," on ",i.updated," "),t.xp6(1),t.Q6J("ngIf",i.showTS),t.xp6(1),t.Q6J("ngIf",i.showHistory))},directives:[d.gRC,d.UiO,d.XIm,_.EJ,_.JJ,_.On,c.sg,_.YN,_.Kr,c.O5,d.mTE,D,d.JNR,_.Q7,_.wV,_.Fj,d.HqI,d.b6v,d.Os0,v.N8],pipes:[c.Nd,c.uU,c.H9],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;position:relative;font-size:14px;transform:translateY(0)}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .overflow-btn-group[_ngcontent-%COMP%]{overflow-x:auto;width:100%}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}}"]}),a})();function Di(a,r){1&a&&(t.TgZ(0,"div",10)(1,"div",12),t._uU(2,"Leasing Documents"),t.qZA()())}function Ni(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.getURL("tenant","tenant_id",n.tenant_id)}),t._UZ(1,"i",28),t.qZA()}}function Oi(a,r){if(1&a&&(t.TgZ(0,"div",10)(1,"div",23)(2,"label",12),t._uU(3,"Tenant\xa0"),t.TgZ(4,"span",24),t._uU(5,"*"),t.qZA(),t.YNc(6,Ni,2,0,"a",25),t.qZA(),t._UZ(7,"app-select-with-search",26),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.tenant_id>0),t.xp6(1),t.Q6J("contentList",e.tnList)("selectedID",e.tenant_id)("disabled",e.tx_readonly)}}function Pi(a,r){if(1&a&&(t.TgZ(0,"a",31),t._UZ(1,"i",32),t.qZA()),2&a){const e=t.oxw(3);t.hYB("href","",e.urlPrefix,"property?property_id=",e.property_id,"",t.LSH)}}function ki(a,r){if(1&a&&(t.TgZ(0,"div",10)(1,"div",23)(2,"label",12),t._uU(3,"Property\xa0"),t.TgZ(4,"span",24),t._uU(5,"*"),t.qZA(),t.YNc(6,Pi,2,2,"a",29),t.qZA(),t._UZ(7,"app-select-with-search",30),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.property_id>0),t.xp6(1),t.ekj("bg-bad-data",e.property_id<0),t.Q6J("contentList",e.pList)("selectedID",e.property_id)("disabled",e.tx_readonly)}}function Si(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",10)(2,"div",11)(3,"label",12),t._uU(4,"Type"),t.qZA(),t.TgZ(5,"select",13),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().doc_key_type=n})("ngModelChange",function(n){return t.CHM(e),t.oxw().resetKeyType(n)}),t.TgZ(6,"option",14),t._uU(7,"KY Documents"),t.qZA()()()(),t.YNc(8,Di,3,0,"div",15),t.YNc(9,Oi,8,4,"div",15),t.YNc(10,ki,8,6,"div",16),t.TgZ(11,"div",17)(12,"div",18)(13,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().getDocs()}),t._UZ(14,"i",20),t.qZA(),t._uU(15,"\xa0 "),t.TgZ(16,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("CSV")}),t._UZ(17,"i",22),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.doc_key_type),t.xp6(3),t.Q6J("ngIf","GENERAL"===e.key_type),t.xp6(1),t.Q6J("ngIf","TENANT"===e.key_type),t.xp6(1),t.Q6J("ngIf","PROPERTY"===e.key_type)}}let Li=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.utility=e,this.REQ=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.urlPrefix="",this.user=this.AS.currentUserValue,this.authority="Documents",this.searchText=new U.x,this.tx_readonly=!1,this.tenant_id=-1,this.property_id=-1,this.tenancy_id=-1,this.master_id=1,this.view="Tenant",this.reportGenTime=new Date,this.investor={},this.pageTitle="Documents",this.queryParams={},this.tnList=[],this.pList=[],this.tcList=[],this.dataList=[],this.key_type="",this.doc_key_type="MASTER.KY",this.imageList=this.rd.GetImages(),this.pdfContent=null,this.gridDocOptions={enableRangeSelection:!0,defaultColDef:{resizable:!0}},this.gridDocData=[],this.gridDocColumns=[{headerName:"ID",field:"index",width:40,sortable:!0,filter:"agNumberColumnFilter"},{headerName:"Download",width:25,field:"doc_format",cellRenderer:this.utility.agImageRenderer},{headerName:"Document",width:130,field:"doc_type"},{headerName:"Name",field:"doc_name",sortable:!0,filter:!0},{headerName:"Updated By",field:"updatedby",sortable:!0,filter:!0},{headerName:"Updated",field:"updated",width:140,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Tenant ID",field:"tenant_id",hide:!0},{headerName:"Property ID",field:"property_id",hide:!0},{headerName:"Doc ID",field:"doc_id",hide:!0},{headerName:"Doc Path",field:"doc_path",hide:!0}],this.gridAdminColumns=[{headerName:"ID",field:"index",width:40,sortable:!0,filter:"agNumberColumnFilter"},{headerName:"Download",width:25,field:"doc_format",cellRenderer:this.utility.agImageRenderer},{headerName:"Delete",width:25,field:"doc_delete",cellRenderer:this.utility.agImageRenderer},{headerName:"Document",width:130,field:"doc_type"},{headerName:"Name",field:"doc_name",sortable:!0,filter:!0},{headerName:"Updated By",field:"updatedby",sortable:!0,filter:!0},{headerName:"Updated",field:"updated",width:140,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Tenant ID",field:"tenant_id",hide:!0},{headerName:"Property ID",field:"property_id",hide:!0},{headerName:"Doc ID",field:"doc_id",hide:!0},{headerName:"Doc Path",field:"doc_path",hide:!0}]}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.view=this.user.type,this.getTenancies(),"Tenant"===this.view?(this.tenant_id=this.user.id_value,this.pageTitle="Tenant Documents",this.key_type="TENANT",this.user.tenancy_id>0&&(this.tenancy_id=this.user.tenancy_id),this.user.property_id>0&&(this.property_id=this.user.property_id),this.getDocs()):"Investor"===this.user.type&&this.user.id_value>0||("Admin"===this.view?(this.getTenants(),this.getProperties(),this.gridDocColumns=this.gridAdminColumns):(this.getTenants(),this.getProperties())),"Investor"===this.user.type&&this.user.id_value>0&&this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("investor_id")?console.log("investor document page loaded"):console.log("company documents page loaded")})}resetKeyType(e){console.log("resetKeyType:",this.key_type,e),"MASTER.KY"==this.doc_key_type&&(this.key_type="MASTER",this.master_id=1)}getDocs(){this.dataList=[],this.gridDocData=[];const e={params:{},usage:{authority:this.authority,sub_authority:"",operation:"VIEW",data:"NA"}};this.property_id>0?(e.params.key_type="PROPERTY",e.params.property_id=this.property_id):this.tenant_id>0?(e.params.key_type="TENANT",e.params.tenant_id=this.tenant_id):this.tenancy_id>0?(e.params.key_type="TENANCY",e.params.tenancy_id=this.tenancy_id):this.master_id>0&&(e.params.key_type="MASTER",e.params.master_id=this.master_id),console.log("getDocs.1:",this.key_type,e),this.REQ.get("fl",{query:JSON.stringify(e)}).subscribe(i=>{console.log("getDocs.3:",i);for(let n=0;n<i.data.length;n++)this.dataList.push(i.data[n]);this.gridDocData=this.dataList},i=>{console.log(i)}),this.tenant_id>0&&this.getDocs2(),console.log("getDocs.6:",this.dataList),this.reportGenTime=new Date}getDocs2(){if(this.tenancy_id<1)for(let e=0;e<this.tcList.length;e++)this.tcList[e].tenant_id==this.tenant_id&&(this.tenancy_id=this.tcList[e].tenancy_id);if(this.tenancy_id>0){const e={params:{tenancy_id:this.tenancy_id,key_type:"TENANCY"}};console.log("getDocs2.2:",e),this.REQ.get("fl",{query:JSON.stringify(e)}).subscribe(i=>{console.log("getDocs2.5:",i);for(let n=0;n<i.data.length;n++)this.dataList.push(i.data[n]);this.gridDocData=this.dataList},i=>{console.log(i)})}}getTenants(){this.REQ.get("tenant","").subscribe(e=>{this.tnList=e.data},e=>{console.log(e)})}getProperties(){this.REQ.get("p","").subscribe(i=>{this.pList=i.data},i=>{console.log(i)})}getTenancies(){this.REQ.get("tenancy","").subscribe(i=>{this.tcList=i.data},i=>{console.log(i)})}refreshT(){this.tenant_id>0&&(this.property_id=-1,this.tenancy_id=-1,this.key_type="TENANT",this.getDocs())}refreshP(){this.property_id>0&&(this.tenant_id=-1,this.tenancy_id=-1,this.key_type="PROPERTY",this.getDocs())}refreshTC(){this.tenancy_id>0&&(this.tenant_id=-1,this.property_id=-1,this.key_type="TENANCY",this.getDocs())}getDocument(e){console.log("getDocument: ",e),console.log("getDocument: ",this.dataList);let i={params:e,usage:{authority:this.authority,sub_authority:"MASTER",operation:"DOWNLOAD",data:"NA"}},n=i.params.doc_id+"_"+i.params.doc_name+"."+i.params.doc_format;console.log("getDocument: ",i,n),this.REQ.getDocument({query:JSON.stringify(i)},n)}delDocument(e){let i={doc_id:e.doc_id,key_type:"INVESTOR"};console.log("delDocument:",i),this.REQ.post("",i).subscribe(n=>{console.log("delDocument:",n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}showDeleteConfirmationPopup(e){this.modalRef=this.modalService.show(M.s,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Confirmation",content:{description:"are you sure you want to delete this entry ?"}}}),this.modalRef.content.onClose.subscribe(n=>{console.log("updateTXData: Confirm:",n),"OK"===n.action&&this.delDocument(e.data)})}showPDFPopupModal(){this.modalRef=this.modalService.show(w.V,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"PDF Viewer",content:{description:"<div class='container'>TEXT</div>",buttonText:"close"}}})}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}setSortingDynamically(e){e.sortService.updateSorting([{columnId:"llc",direction:"ASC"},{columnId:"group",direction:"DESC"}])}onGridReady(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e){e.api.sizeColumnsToFit()}onCellClicked(e){console.log("onCellClicked: ",e),"doc_format"===e.column.colId||"doc_action"===e.column.colId&&"doc_download"===e.event.target.id?this.getDocument(e.data):"doc_action"===e.column.colId&&"doc_delete"===e.event.target.id?this.showDeleteConfirmationPopup(e):"doc_action"===e.column.colId&&"doc_view"===e.event.target.id&&(this.pdfContent=this.getDocument(e.data),this.showPDFPopupModal())}onCellDoubleClicked(e){console.log("onCellDoubleClicked:",e)}exportData(e){"CSV"==e&&this.grid1Api.exportDataAsCsv({suppressQuotes:!0,columnSeparator:",",customHeader:"Document from ",customFooter:"Himalaya Capital"})}imageRenderer(e){console.log("imageRenderer:",e);let i="<span class='text-info'><i class='fas fa-download'></i></span>";return"doc_delete"===e.colDef.field&&(i="<span class='text-danger'><i class='fas fa-trash-alt'></i></span>"),i}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C.t),t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-documents"]],decls:14,vars:4,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],["fas","","icon","file-alt text-white"],[1,"card-body"],["class","row",4,"ngIf"],[1,"row"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","350px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""],[1,"card-footer"],[1,"col-sm-4"],[1,"form-group","mb-1"],[1,"position-relative"],["label","tp","id","tp","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],["selected","","value","MASTER.KY"],["class","col-sm-4",4,"ngIf"],["class"," col-sm-4",4,"ngIf"],[1,"col-sm-2"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-3","mb-4","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","ngbTooltip","Refresh Results",3,"click"],[1,"fas","fa-sync"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","ngbTooltip","Download Data",3,"click"],[1,"fas","fa-download"],[1,""],[2,"color","red"],[3,"click",4,"ngIf"],["keyOfID","tenant_id","firstLine","!!first_name>> !!last_name>>","searchInKeys","first_name,last_name,other_names",3,"contentList","selectedID","disabled"],[3,"click"],[1,"fas","fa-user","text-primary"],[3,"href",4,"ngIf"],["keyOfID","property_id","firstLine","!!label>> !!state>> !!city>>","secondLine"," !!p_status>>","searchInKeys","label,city,state",3,"contentList","selectedID","disabled"],[3,"href"],[1,"fas","fa-home","text-primary"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._UZ(5,"mdb-icon",3),t._uU(6,"\xa0Documents "),t.qZA()()(),t.TgZ(7,"div",4),t.YNc(8,Si,18,4,"div",5),t.TgZ(9,"div",6)(10,"ag-grid-angular",7,8),t.NdJ("gridReady",function(o){return i.onGridReady(o)})("modelUpdated",function(o){return i.onModelUpdated(o)})("cellClicked",function(o){return i.onCellClicked(o)})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o)}),t.qZA()()(),t.TgZ(12,"div",9),t._uU(13),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("ngIf","Admin"===i.view||"Super"===i.view||"Manager"===i.view),t.xp6(2),t.Q6J("columnDefs",i.gridDocColumns)("rowData",i.gridDocData),t.xp6(3),t.hij(" Report generated as of ",i.reportGenTime," "))},directives:[d.gRC,d.UiO,d.XIm,c.O5,_.EJ,_.JJ,_.On,_.YN,_.Kr,D,d.mTE,v.N8],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}}"]}),a})();function Ji(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(n){return t.CHM(e),t.oxw().createPDF(n)}),t._UZ(1,"mdb-icon",13),t.qZA()}}function Ri(a,r){if(1&a&&(t.TgZ(0,"div",2)(1,"div",11)(2,"label"),t._uU(3,"Tenant Name"),t.qZA(),t._uU(4),t.qZA()()),2&a){const e=t.oxw();t.xp6(4),t.hij(" ",e.content.tenant_name," ")}}let N=(()=>{class a{constructor(e,i,n,o,l,s){this.router=e,this.AS=i,this.REQ=n,this.modalRef=o,this.toastr=l,this.utility=s,this.user=this.AS.currentUserValue,this.urlPrefix="",this.heading="Search",this.tx_id=-1,this.tenant_id=-1,this.tx_type="TX",this.onClose=new U.x}ngOnInit(){this.tx_id=this.content.t_id,this.tx_type=this.content.type,this.tenant_id=this.content.tenant_id,console.log("INIT:",this.heading,this.content,this.tx_id),this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1)}closeDialogue(){this.onClose.next({action:"select"}),this.modalRef.hide()}createPDF(e){console.log("createPDF:",e,this.tx_type,this.tx_id);const i={type:this.tx_type};"TR"===this.tx_type?i.tr_id=this.tx_id:i.tx_id=this.tx_id;let n=this.tx_type+"_"+this.tx_id+".pdf";console.log("createPDF2:",i),this.REQ.createDocument("gpdf",i,n)}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.F0),t.Y36(b.$),t.Y36(m.s),t.Y36(d.iX6),t.Y36(d.klp),t.Y36(C.t))},a.\u0275cmp=t.Xpm({type:a,selectors:[["tx-modal"]],decls:59,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-9","text-left"],["fas","","icon","hand-holding-usd text-white"],[1,"col-sm-3","text-right"],["size","sm","color","primary","mdbWavesEffect","",3,"click",4,"ngIf"],["type","button","placement","left",1,"btn-medium","btn-danger",3,"click"],[1,"card-body"],["class","row",4,"ngIf"],[1,"col-sm-6"],[1,"col-sm-12"],["size","sm","color","primary","mdbWavesEffect","",3,"click"],["fas","","icon","file-pdf text-dark"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mdb-card-title")(5,"h4"),t._UZ(6,"mdb-icon",4),t._uU(7),t.qZA()()(),t.TgZ(8,"div",5),t.YNc(9,Ji,2,0,"button",6),t._uU(10,"\xa0 "),t.TgZ(11,"button",7),t.NdJ("click",function(){return i.closeDialogue()}),t._uU(12,"X"),t.qZA()()()(),t.TgZ(13,"div",8),t.YNc(14,Ri,5,1,"div",9),t.TgZ(15,"div",2)(16,"div",10)(17,"label"),t._uU(18,"Property"),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"div",10)(21,"label"),t._uU(22,"Payee"),t.qZA(),t._uU(23),t.qZA()(),t.TgZ(24,"div",2)(25,"div",10)(26,"label"),t._uU(27,"Date"),t.qZA(),t._uU(28),t.ALo(29,"date"),t.qZA(),t.TgZ(30,"div",10)(31,"label"),t._uU(32,"Category"),t.qZA(),t._uU(33),t.qZA()(),t.TgZ(34,"div",2)(35,"div",10)(36,"label"),t._uU(37,"Debit"),t.qZA(),t._uU(38),t.ALo(39,"currency"),t.qZA(),t.TgZ(40,"div",10)(41,"label"),t._uU(42,"Credit"),t.qZA(),t._uU(43),t.ALo(44,"currency"),t.qZA()(),t.TgZ(45,"div",2)(46,"div",10)(47,"label"),t._uU(48,"Type"),t.qZA(),t._uU(49),t.qZA(),t.TgZ(50,"div",10)(51,"label"),t._uU(52,"Reference"),t.qZA(),t._uU(53),t.qZA()(),t.TgZ(54,"div",2)(55,"div",11)(56,"label"),t._uU(57,"Description"),t.qZA(),t._uU(58),t.qZA()()()()),2&e&&(t.xp6(7),t.hij("\xa0Transaction ID ",i.tx_id," "),t.xp6(2),t.Q6J("ngIf",i.tx_id>0),t.xp6(5),t.Q6J("ngIf",i.tenant_id>0),t.xp6(5),t.hij(" ",i.content.label," "),t.xp6(4),t.hij("",i.content.payee," "),t.xp6(5),t.hij("",t.lcZ(29,14,i.content.tdate)," "),t.xp6(5),t.AsE("",i.content.name,"",i.content.category_name," "),t.xp6(5),t.hij("",t.lcZ(39,16,i.content.debit)," "),t.xp6(5),t.hij("",t.lcZ(44,18,i.content.credit)," "),t.xp6(6),t.AsE("",i.content.type,"",i.content.ref," "),t.xp6(4),t.hij("",i.content.reference," "),t.xp6(5),t.hij("",i.content.description," "))},directives:[d.gRC,d.UiO,d.XIm,c.O5,d.b6v],pipes:[c.uU,c.H9],styles:[""]}),a})();const Ei=["staticTabs"];function Ii(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",57),t._uU(2),t.qZA(),t.TgZ(3,"td",57),t._uU(4),t.ALo(5,"percent"),t.qZA(),t.TgZ(6,"td",57),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"td",57),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",57),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"td",57),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"td",57),t._uU(19),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.legal_name),t.xp6(2),t.Oqu(t.xi3(5,8,e.equity,"0.2")),t.xp6(3),t.Oqu(t.lcZ(8,11,e.balance)),t.xp6(3),t.Oqu(t.lcZ(11,13,e.last_payment_date)),t.xp6(3),t.Oqu(t.lcZ(14,15,e.last_payment)),t.xp6(3),t.Oqu(t.lcZ(17,17,e.payment_due_date)),t.xp6(3),t.Oqu(t.lcZ(20,19,e.payment_due)),t.xp6(3),t.Oqu(e.notes)}}function Fi(a,r){if(1&a&&(t.TgZ(0,"div",13)(1,"div",51)(2,"table",52)(3,"thead")(4,"tr")(5,"th",53),t._uU(6,"Company"),t.qZA(),t.TgZ(7,"th",53),t._uU(8,"Equity"),t.qZA(),t.TgZ(9,"th",53),t._uU(10,"Investment"),t.qZA(),t.TgZ(11,"th",54),t._uU(12,"Last Payment Date"),t.qZA(),t.TgZ(13,"th",54),t._uU(14,"Last Payment"),t.qZA(),t.TgZ(15,"th",54),t._uU(16,"Payment Due Date"),t.qZA(),t.TgZ(17,"th",54),t._uU(18,"Payment Due"),t.qZA(),t.TgZ(19,"th",54),t._uU(20,"Notes"),t.qZA()()(),t.TgZ(21,"tbody",55),t.YNc(22,Ii,23,21,"tr",56),t.qZA()()()()),2&a){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",e.iFinancials)}}function Qi(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",22),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.company_id),t.xp6(1),t.hij("",e.name," ")}}function Hi(a,r){if(1&a&&(t.TgZ(0,"p",58),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.investor.balance))}}function Yi(a,r){if(1&a&&(t.TgZ(0,"p",59),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.investor.balance))}}function ji(a,r){if(1&a&&(t.TgZ(0,"div",36)(1,"label"),t._uU(2,"Payment "),t.qZA(),t._uU(3),t.ALo(4,"currency"),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,1,e.total_payment)," ")}}function Wi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",60)(1,"div",7)(2,"div",13)(3,"div",61)(4,"label"),t._uU(5,"Title"),t.qZA(),t.TgZ(6,"textarea",62),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().history_title=n}),t._uU(7,"\t\t\t\t\t\t\t\t\t\tBrief Description\n\t\t\t\t\t\t\t\t\t"),t.qZA()(),t.TgZ(8,"div",63)(9,"label"),t._uU(10,"Comments"),t.qZA(),t.TgZ(11,"textarea",64),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().history_comment=n}),t._uU(12,"\t\t\t\t\t\t\t\t\t\tEnter Comments Here\n\t\t\t\t\t\t\t\t\t"),t.qZA()(),t.TgZ(13,"div",65)(14,"label"),t._uU(15,"Log Date"),t.qZA(),t.TgZ(16,"mdb-date-picker",66,67),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().history_date=n}),t.qZA()(),t.TgZ(18,"div",68)(19,"div",69)(20,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateHistory()}),t._uU(21,"Add"),t.qZA(),t.TgZ(22,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.refreshHistory(n.investor_id)}),t._UZ(23,"i",31),t.qZA()()()(),t.TgZ(24,"div",13)(25,"ag-grid-angular",70,71),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n)}),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.history_title),t.xp6(5),t.Q6J("ngModel",e.history_comment),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.history_date),t.xp6(9),t.Q6J("columnDefs",e.gridILColumns)("rowData",e.gridILData)("getRowHeight",e.getRowHeight2)}}function Vi(a,r){if(1&a&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Gi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",93),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.getURL("company","company_id",n.investor.company_id)}),t._UZ(1,"i",94),t.qZA()}}function zi(a,r){if(1&a&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.company_id),t.xp6(1),t.hij("",e.name," ")}}function Bi(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",72)(1,"div",7)(2,"div",13)(3,"div",73)(4,"div",74)(5,"label"),t._uU(6,"Name "),t.TgZ(7,"span",75),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"input",76),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.name=n}),t.qZA()()(),t.TgZ(10,"div",73)(11,"div",74)(12,"label"),t._uU(13,"Legal Name "),t.TgZ(14,"span",75),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"input",76),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.legal_name=n}),t.qZA()()(),t.TgZ(17,"div",61)(18,"div",74)(19,"mdb-select-2",77),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.status=n}),t.TgZ(20,"mdb-select-option",78),t._uU(21,"In-Active"),t.qZA(),t.TgZ(22,"mdb-select-option",79),t._uU(23,"Active"),t.qZA(),t.TgZ(24,"mdb-select-option",80),t._uU(25,"NA"),t.qZA()()()()(),t.TgZ(26,"div",13)(27,"div",73)(28,"div",74)(29,"label"),t._uU(30,"Address"),t.qZA(),t.TgZ(31,"input",81),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.address1=n}),t.qZA()()(),t.TgZ(32,"div",73)(33,"div",74)(34,"label"),t._uU(35,"Address2"),t.qZA(),t.TgZ(36,"input",81),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.address2=n}),t.qZA()()(),t.TgZ(37,"div",73)(38,"div",74)(39,"label"),t._uU(40,"Phone"),t.qZA(),t.TgZ(41,"input",81),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.phone=n}),t.qZA()()()(),t.TgZ(42,"div",13)(43,"div",73)(44,"div",74)(45,"label"),t._uU(46,"City"),t.qZA(),t.TgZ(47,"input",81),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.city=n}),t.qZA()()(),t.TgZ(48,"div",61)(49,"label"),t._uU(50,"State"),t.qZA(),t.TgZ(51,"select",82),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.state=n}),t.YNc(52,Vi,2,2,"option",23),t.ALo(53,"keyvalue"),t.qZA()(),t.TgZ(54,"div",61)(55,"div",74)(56,"label"),t._uU(57,"ZIP"),t.qZA(),t.TgZ(58,"input",83),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.zip=n}),t.qZA()()(),t.TgZ(59,"div",73)(60,"div",74)(61,"label"),t._uU(62,"Email"),t.qZA(),t.TgZ(63,"input",84),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.email=n}),t.qZA()()()(),t.TgZ(64,"div",13)(65,"div",85)(66,"label"),t._uU(67,"Equity"),t.qZA(),t.TgZ(68,"input",86),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.equity=n}),t.qZA()(),t.TgZ(69,"div",85)(70,"label"),t._uU(71,"Company\xa0"),t.TgZ(72,"span",75),t._uU(73,"*"),t.qZA(),t.YNc(74,Gi,2,0,"a",87),t.qZA(),t.TgZ(75,"select",88),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.company=n}),t.YNc(76,zi,2,2,"option",23),t.qZA()()(),t.TgZ(77,"div",13)(78,"div",63)(79,"div",74)(80,"label"),t._uU(81,"Notes"),t.qZA(),t.TgZ(82,"textarea",89),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().investor.note=n}),t._uU(83,"\t                \t\t\t\t\t\tNotes\n\t              \t\t\t\t\t\t"),t.qZA()()()()(),t.TgZ(84,"div",46)(85,"button",90),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("")}),t._uU(86,"Save"),t.qZA(),t._uU(87," \xa0\xa0 "),t.TgZ(88,"button",91),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveASData("")}),t._uU(89,"Save As"),t.qZA(),t.TgZ(90,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("")}),t._uU(91,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.investor.name),t.xp6(7),t.Q6J("ngModel",e.investor.legal_name),t.xp6(3),t.Q6J("ngModel",e.investor.status),t.xp6(12),t.Q6J("ngModel",e.investor.address1),t.xp6(5),t.Q6J("ngModel",e.investor.address2),t.xp6(5),t.Q6J("ngModel",e.investor.phone),t.xp6(6),t.Q6J("ngModel",e.investor.city),t.xp6(4),t.Q6J("ngModel",e.investor.state),t.xp6(1),t.Q6J("ngForOf",t.lcZ(53,16,e.stateList)),t.xp6(6),t.Q6J("ngModel",e.investor.zip),t.xp6(5),t.Q6J("ngModel",e.investor.email),t.xp6(5),t.Q6J("ngModel",e.investor.equity),t.xp6(6),t.Q6J("ngIf",e.investor.company_id>0),t.xp6(1),t.Q6J("ngModel",e.investor.company),t.xp6(1),t.Q6J("ngForOf",e.companyList),t.xp6(6),t.Q6J("ngModel",e.investor.note)}}let Xi=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.authority="Investor",this.user=this.AS.currentUserValue,this.urlPrefix="",this.queryParams={},this.view="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.showModal=!1,this.file_info="",this.owner_id=-1,this.owner_type="INVESTOR",this.modalTitle="",this.start_date=new Date("2020-01-01"),this.end_date=new Date,this.minTXDate=new Date("2020-01-01"),this.iDocuments=[],this.iFinancials=[],this.investor={},this.investor_id=-1,this.last_payment_date="",this.total_payment=0,this.total_receivable=0,this.cList=this.rd.GetCategories("INVESTOR"),this.tList=this.rd.GetPaymentTypes(),this.dtList=this.rd.GetDates(),this.stateList=this.rd.GetStates("USA"),this.imageList=this.rd.GetImages(),this.companyList={},this.reportGenTime=new Date,this.history_date=new Date,this.history_comment="",this.history_title="",this.userData=[],this.gridAOptions={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.gridTXOptions=this.gridAOptions,this.gridTXColumns=[{headerName:"ID",width:70,field:"itx_id",resizable:!0,sortable:!0,filter:!0},{headerName:"Company",width:110,field:"company_label",resizable:!0,sortable:!0,filter:!0},{headerName:"Date",field:"tdate",width:130,resizable:!0,sortable:!0,filter:!0,valueFormatter:this.utility.agISODateRenderer},{headerName:"Credit",field:"credit",width:110,resizable:!0,sortable:!0,filter:!0,cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Debit",field:"debit",width:110,resizable:!0,sortable:!0,filter:!0,cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Balance",field:"balance",width:120,resizable:!0,sortable:!0,filter:!0,cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Category",field:"category",width:140,resizable:!0,sortable:!0,filter:!0},{headerName:"Payee",field:"payee",resizable:!0,sortable:!0,filter:!0},{headerName:"Description",field:"description",resizable:!0,sortable:!0,filter:!0},{headerName:"Category ID",field:"category_id",hide:!0}],this.gridTXData=[],this.gridILOptions=this.gridAOptions,this.gridILColumns=[{headerName:"ID",width:25,field:"id",resizable:!0,sortable:!0,filter:!0},{headerName:"Date",width:130,field:"tdate",type:"dateColumn",resizable:!0,sortable:!0,filter:!0,cellRenderer:this.utility.agISODateRenderer},{headerName:"Title",field:"title",resizable:!0,sortable:!0,filter:!0},{headerName:"Comments",width:250,field:"comments",cellStyle:{"white-space":"normal"},resizable:!0,sortable:!0,filter:!0}],this.gridILData=[],this.gridDocOptions=this.gridAOptions,this.gridDocData=[],this.gridDocColumns=[{headerName:"ID",field:"index",width:40,resizable:!0,sortable:!0,filter:!0},{headerName:" ",width:25,field:"doc_format",cellRenderer:this.imageRenderer,resizable:!0,sortable:!0,filter:!0},{headerName:"Document",width:130,field:"doc_type",resizable:!0,sortable:!0,filter:!0},{headerName:"Name",field:"doc_name",resizable:!0,sortable:!0,filter:!0},{headerName:"Updated By",field:"updatedby",resizable:!0,sortable:!0,filter:!0},{headerName:"Updated",field:"updated",width:140,resizable:!0,sortable:!0,filter:!0,cellRenderer:this.utility.agDateRenderer},{headerName:"Doc ID",field:"doc_id",hide:!0},{headerName:"Doc Path",field:"doc_path",hide:!0}],this.getRowHeight2=function(f){return console.log("getRowHeight:",f),void 0===f.data.ta_value||f.data.ta_value.length<50?25:25*Math.ceil(f.data.ta_value.length/50)}}ngOnInit(){this.rd.companySubject.subscribe(e=>this.companyList=e),this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.view=this.user.type,this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("investor_id")&&(this.investor_id=this.queryParams.investor_id,console.log("Investor ID:"+this.investor_id)),"Investor"===this.user.type&&this.user.id_value>0&&(this.investor_id=this.user.id_value),this.investor_id>0?(this.getInfo(this.investor_id),this.getTX(this.investor_id,-1),this.initData()):this.router.navigate([this.urlPrefix+"report"],{queryParams:{report:"INVESTOR"}})})}initData(){"Admin"===this.user.type&&(this.gridDocColumns=[{headerName:"ID",field:"index",width:40,resizable:!0,sortable:!0,filter:!0},{headerName:" ",width:25,field:"doc_format",cellRenderer:this.imageRenderer,resizable:!0,sortable:!0,filter:!0},{headerName:"D",width:25,field:"doc_delete",cellRenderer:this.imageRenderer,resizable:!0,sortable:!0,filter:!0},{headerName:"Document",width:130,field:"doc_type",resizable:!0,sortable:!0,filter:!0},{headerName:"Name",field:"doc_name",resizable:!0,sortable:!0,filter:!0},{headerName:"Updated By",field:"updatedby",resizable:!0,sortable:!0,filter:!0},{headerName:"Updated",field:"updated",width:140,resizable:!0,sortable:!0,filter:!0,cellRenderer:this.utility.agDateRenderer},{headerName:"Doc ID",field:"doc_id",hide:!0},{headerName:"Doc Path",field:"doc_path",hide:!0}])}getInfo(e){const i={params:{investor_id:e},usage:{authority:this.authority,sub_authority:"MASTER",operation:"REFRESH",data:"NA"}};this.gridDocData=[],console.log("Entering getInfo:",i),this.REQ.get("investor/info",{query:JSON.stringify(i)}).subscribe(n=>{console.log("investor:getInfo:",n),this.validateResponse(n),this.investor=n,void 0!==this.investor.documents&&""!==this.investor.documents&&(this.iDocuments=JSON.parse(this.investor.documents),this.gridDocData=this.iDocuments.data),void 0!==this.investor.financials&&""!==this.investor.financials&&(this.iFinancials=JSON.parse(this.investor.financials).data),console.log("getInfo:",this.gridDocData,this.iDocuments,this.iFinancials)},n=>{console.log("getInfo: error:",n)}),console.log("getInfo2:",this.companyList)}refreshAnalytics(){this.getTX(this.investor_id,this.companyID)}getTX(e,i){this.total_payment=0,this.total_receivable=0,console.log("Minimum TX Date allowed:",this.minTXDate,this.start_date);const n={params:{investor_id:e,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date),company_id:i},usage:{authority:this.authority,sub_authority:"Transactions",operation:"REFRESH",data:"NA"}};-1===i&&delete n.params.company_id,console.log("getTX:",n);let o=[],l=0;this.REQ.get("investor/gtxs",{query:JSON.stringify(n)}).subscribe(s=>{console.log("getTX response:",s);let u=s.data;for(let p=0;p<u.length;p++)console.log("getTX1:",u[p],this.start_date),u[p].category=this.cList[u[p].category_id],this.total_payment+=u[p].credit,o[l]=u[p],l+=1;this.gridTXData=o,this.toastr.success("success"),console.log("getTX response2:",this.gridTXData,o)},s=>{console.log("getTX:",s),this.toastr.error("There is some error")})}getUser(e){this.REQ.get("gu",{query:JSON.stringify({params:{user_id:e,id_type:"investor_id",id_value:this.investor_id,caller:"HCAPP-Tenant"}})}).subscribe(n=>{this.userData=n,this.userData.online_access="Request Access",void 0!==this.userData.avatar&&(this.userData.online_access="Enabled"),void 0!==this.userData.phone&&(this.userData.online_phone_id=this.userData.phone.replace(/[^0-9]/g,""))},n=>{console.log(n),console.log("User request failed for :",this.investor_id)})}refreshHistory(e){const i={params:{investor_id:e},usage:{authority:this.authority,sub_authority:"History",operation:"REFRESH",data:"NA"}};console.log("Entering getInfo:",i),this.REQ.get("investor/history",{query:JSON.stringify(i)}).subscribe(n=>{this.investor.history=n,console.log("investor:getInfo:",this.investor.history),this.gridILData=JSON.parse(n.history).data},n=>{console.log(n)})}updateHistory(){if(this.history_title.length<3||this.history_comment.length<5)return void this.toastr.error("History update failed for : "+this.investor_id);this.toastr.error("History update failed for : "+this.investor_id);const e={id_type:"investor_id",key_type:"INVESTOR",id_value:this.investor_id,title:this.history_title,comment:this.history_comment,tdate:this.history_date,caller:"HCAPP-Tenant"};console.log("updateHistory:",e),this.REQ.post("uchistory",e).subscribe(i=>{console.log(i),this.toastr.success("History updated "),console.log("History updated ")},i=>{console.log(i),this.toastr.error("History update failed for : "+this.investor_id)})}myStatement(){const e={start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date),type:"INVESTOR",investor_id:this.investor_id};let i="Tenant_"+this.investor_id+".pdf";console.log("getTenantStatement:",e),this.REQ.createDocument("pdftstmt",e,i)}refreshDocuments(){const e={params:{investor_id:this.investor_id,key_type:"INVESTOR"},usage:{authority:this.authority,sub_authority:"Documents",operation:"REFRESH",data:"NA"}};console.log("refreshDocuments.2:",e,this.gridDocData),this.REQ.get("fl",{query:JSON.stringify(e)}).subscribe(i=>{console.log("refreshDocuments.3[response]:",i),this.gridDocData=i.data},i=>{console.log(i)})}validateResponse(e){void 0!==e.code&&1===e.code&&(console.log("tenant request failed"),this.utility.ClearLocalStorage())}getURL(e,i,n){const o={};o[i]=n,console.log("getURL:",this.urlPrefix,e),this.router.navigate([this.urlPrefix+e],{queryParams:o})}addDocuments(){this.file_info=this.investor_id+"_"+this.investor.label,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.owner_id=this.investor_id,console.log(this.file_info),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Investor Document",content:{owner_type:this.owner_type,owner_id:this.owner_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i),this.refreshDocuments()})}delDocument(e){let i={doc_id:e.doc_id,key_type:"INVESTOR"};console.log("delDocument:",i),this.REQ.post("fd",i).subscribe(n=>{console.log("delDocument:",n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}onFileUploadClose(e){this.showModal=!1,console.log("onFileUploadClose"),console.log(e)}getDocument(e){e.investor_id=this.investor_id,console.log("getDocument: ",e);let i={params:e,usage:{authority:this.authority,sub_authority:"Documents",operation:"DOWNLOAD",data:"NA"}},n=i.params.doc_id+"_"+i.params.doc_name+"."+i.params.doc_format;console.log("getDocument: ",i,n),this.REQ.getDocument({query:JSON.stringify(i)},n)}newInvestor(){this.investor_id=-1,this.investor.name="",this.investor.label="",this.investor.address1="",this.investor.address2="",this.investor.city="",this.investor.state="",this.investor.phone="",this.investor.email="",this.investor.zip="",this.investor.account="",this.investor.status="ACTIVE",this.gridDocData=[],this.gridILData=[],this.gridTXData=[]}clearData(e){this.newInvestor()}saveASData(e){this.investor_id=-1,this.updateData(e)}updateData(e){console.log("updateTenancy:entered");let i=this.investor;if(i.investor_id=this.investor_id,this.investor.name.length<3||this.investor.label<2)return this.toastr.error("Please provide correct values"),!1;console.log("updateData[",e,"]:",i),this.REQ.post("investor/update",i).subscribe(n=>{console.log("updateData:",n);var o=n;o.code<0?this.toastr.error(o.message,"Investor Update Error"):o.investor_id>0&&(this.investor_id!=o.investor_id?(this.investor_id=o.investor_id,this.toastr.success("New Investor Created with id: "+this.investor_id)):this.toastr.success("Investor data updated for : "+this.investor_id))},n=>{console.log(n),this.toastr.error("Investor update failed for : "+this.investor_id)})}showTXDetails(e,i){let n={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Transaction Details",content:{description:"Data"}}};n.data.content=e.data,n.data.content.label=this.investor.label,n.data.content.tenant_name=this.investor.first_name+" "+this.investor.last_name,this.modalRef=this.modalService.show(N,n)}onModelUpdated(e){e.api.sizeColumnsToFit()}onGridReady(e,i){"TX"===i?(this.gridTXApi=e.api,this.gridTXColumnApi=e.columnApi):(this.gridILApi=e.api,this.gridILColumnApi=e.columnApi);var n=e.api.getColumnDefs();n.forEach(function(o,l){o.resizable=!0,o.sortable=!0,o.filter=!0}),e.api.setColumnDefs(n)}onGridReadyDoc(e){}exportData(e){"CSV"==e?(console.log("Exporting Excel"),this.gridTXApi.exportDataAsCsv({suppressQuotes:!0,columnSeparator:",",customHeader:"Report",customFooter:"Himalaya Capital"})):console.log("Exporting Excel")}onCellClicked(e,i){console.log("onCellClicked:",e),"doc_format"==e.column.colId?this.getDocument(e.data):"doc_delete"==e.column.colId&&(console.log("onCellClicked: Deleting"),this.delDocument(e.data))}onCellDoubleClicked(e,i){if(console.log("Double Clicked:",i,e),"Admin"===this.user.type||"SManager"===this.user.type){let n=e.data.itx_id;"TX"===i&&this.router.navigate([this.urlPrefix+"dm"],{queryParams:{report:5,itx_id:n}})}else this.showTXDetails(e,i)}imageRenderer(e){console.log("imageRenderer:",e);let i="<span class='text-info'><i class='fas fa-download'></i></span>";return"doc_delete"===e.colDef.field&&(i="<span class='text-danger'><i class='fas fa-trash-alt'></i></span>"),i}currencyFormatter(e){return void 0===e.value?"UDF":"$"+e.value.toLocaleString(void 0,{minimumFractionDigits:2})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-investor"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ei,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:112,vars:44,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"row","m-0"],[1,"col-md-9","col-sm-12"],[1,"fas","fa-user","text-white"],[1,"col-md-3","col-sm-12","text-md-right"],[1,"card-body"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass"],["staticTabs",""],["heading","Details"],[1,"card-body","py-3"],[1,"row"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"row","mb-2"],["class","row",4,"ngIf"],[1,"card-text","col-sm-12"],["heading","Financial"],[1,"row","mb-3"],[1,"col-lg-3","col-md-6","col-sm-12"],["id","coSelect","optionHeight","32",3,"ngModel","dropdownClass","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],[1,"col-lg-3","col-md-6","col-sm-12","text-md-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-4"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],[1,"fas","fa-download"],[1,"col-lg-2","col-md-3","col-sm-12"],["class","card-text-number text-danger text-center",4,"ngIf"],["class","card-text-number text-center",4,"ngIf"],[1,"col-lg-3","col-md-4","col-sm-12"],["class","col-lg-3 col-md-4 col-sm-12",4,"ngIf"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","600px",3,"columnDefs","rowData","gridReady","modelUpdated","cellDoubleClicked"],["GridFin",""],["heading","Documents"],[1,"col-sm-12","text-right",2,"align-content","right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0"],["fas","","icon","plus-square"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","500px",3,"columnDefs","rowData","modelUpdated","gridReady","cellClicked","cellDoubleClicked"],["GridDoc",""],[1,"card-footer"],["heading","Log","width","100%",4,"ngIf"],["heading","Administrative",4,"ngIf"],[1,"col-12","text-muted"],[1,"text"],[1,"col-12","title"],["id","",1,"table","tablesorter"],["scope","col"],["scope","col",1,"text-center"],[1,"card-text"],[4,"ngFor","ngForOf"],["nowrap",""],[1,"card-text-number","text-danger","text-center"],[1,"card-text-number","text-center"],["heading","Log","width","100%"],[1,"col-sm-2"],["id","tr_tags","cols","30","name","tx_tags","rows","2","placeholder","Enter Title here",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-6"],["id","notes","placeholder","Enter Update here","cols","60","name","wo_notes","rows","2",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-2",2,"align-content","right"],["name","history_date","required","",3,"inline","options","ngModel","ngModelChange"],["hd",""],[1,"col-sm-2",2,"text-align","right"],["role","group","aria-label","Vertical button group",1,"btn-group","shadow-0","mt-md-4","mt-3","mb-4","mb-md-0"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","600px",3,"columnDefs","rowData","getRowHeight","gridReady","modelUpdated"],["grid2",""],["heading","Administrative"],[1,"col-sm-4"],[1,"md-form","mb-2"],[2,"color","red"],["mdbInput","","name","name","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["label","Status","name","t_select","id","trSelect",3,"ngModel","ngModelChange"],["value","INACTIVE"],["selected","","value","ACTIVE"],["value","NA"],["mdbInput","","name","street","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["name","sSelect","id","sSelect",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","zip","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","em","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-4","form-group"],["mdbInput","","name","em","type","number","value","",1,"form-control",3,"ngModel","ngModelChange"],[3,"click",4,"ngIf"],["name","pSelect","id","pSelect",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","id","descr","cols","40","rows","2",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",3,"click"],["mdbBtn","","color","default","rounded","true","mdbWavesEffect","","type","button",3,"click"],["type","button","mdbBtn","",1,"btn","btn-link",2,"float","right",3,"click"],[3,"click"],[1,"fas","fa-company","text-primary"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),t._UZ(6,"i",5),t._uU(7),t.qZA()(),t._UZ(8,"div",6),t.qZA()(),t.TgZ(9,"div",7)(10,"div",8)(11,"mdb-tabset",9,10)(13,"mdb-tab",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"label"),t._uU(18,"Name"),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"div",14)(21,"label"),t._uU(22,"Legal Name"),t.qZA(),t._uU(23),t.qZA()(),t.TgZ(24,"div",13)(25,"div",14)(26,"label"),t._uU(27,"Phone"),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"div",14)(30,"label"),t._uU(31,"Address"),t.qZA(),t._uU(32),t.qZA()(),t.TgZ(33,"div",15)(34,"div",14)(35,"label"),t._uU(36,"Email"),t.qZA(),t._uU(37),t.qZA(),t.TgZ(38,"div",14)(39,"label"),t._uU(40,"City State ZIP"),t.qZA(),t._uU(41),t.qZA()(),t.YNc(42,Fi,23,1,"div",16),t.TgZ(43,"div",13)(44,"div",17)(45,"label"),t._uU(46,"Additional Information"),t.qZA(),t._uU(47),t.qZA()()()(),t.TgZ(48,"mdb-tab",18)(49,"div",12)(50,"div",19)(51,"div",20)(52,"label"),t._uU(53,"Company"),t.qZA(),t.TgZ(54,"mdb-select-2",21),t.NdJ("ngModelChange",function(o){return i.companyID=o})("ngModelChange",function(){return i.refreshAnalytics()}),t.TgZ(55,"mdb-select-option",22),t._uU(56,"All"),t.qZA(),t.YNc(57,Qi,2,2,"mdb-select-option",23),t.qZA()(),t.TgZ(58,"div",20)(59,"label"),t._uU(60,"From"),t.qZA(),t.TgZ(61,"mdb-date-picker",24,25),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()(),t.TgZ(63,"div",20)(64,"label"),t._uU(65,"To"),t.qZA(),t.TgZ(66,"mdb-date-picker",26,27),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()(),t.TgZ(68,"div",28)(69,"div",29)(70,"button",30),t.NdJ("click",function(){return i.refreshAnalytics()}),t._UZ(71,"i",31),t.qZA(),t._uU(72,"\xa0 "),t.TgZ(73,"button",30),t.NdJ("click",function(){return i.exportData("CSV")}),t._UZ(74,"i",32),t.qZA()()()(),t.TgZ(75,"div",19)(76,"div",33)(77,"label"),t._uU(78,"Balance"),t.qZA(),t.YNc(79,Hi,3,3,"p",34),t.YNc(80,Yi,3,3,"p",35),t.qZA(),t.TgZ(81,"div",36)(82,"label"),t._uU(83,"Last Payment / Payment Date"),t.qZA(),t._uU(84),t.ALo(85,"currency"),t.qZA(),t.YNc(86,ji,5,3,"div",37),t.qZA(),t.TgZ(87,"div",13)(88,"ag-grid-angular",38,39),t.NdJ("gridReady",function(o){return i.onGridReady(o,"TX")})("modelUpdated",function(o){return i.onModelUpdated(o)})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o,"TX")}),t.qZA()()()(),t.TgZ(90,"mdb-tab",40)(91,"div",12)(92,"div",15)(93,"div",41)(94,"div",42)(95,"button",30),t.NdJ("click",function(){return i.addDocuments()}),t._UZ(96,"mdb-icon",43),t.qZA(),t._uU(97,"\xa0 "),t.TgZ(98,"button",30),t.NdJ("click",function(){return i.refreshDocuments()}),t._UZ(99,"i",31),t.qZA()()()(),t.TgZ(100,"div",13)(101,"ag-grid-angular",44,45),t.NdJ("modelUpdated",function(o){return i.onModelUpdated(o)})("gridReady",function(o){return i.onGridReady(o,"")})("cellClicked",function(o){return i.onCellClicked(o,"DOCUMENTS")})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o,"DOCUMENTS")}),t.qZA()()(),t.TgZ(103,"div",46),t._uU(104),t.qZA()(),t.YNc(105,Wi,27,8,"mdb-tab",47),t.YNc(106,Bi,92,18,"mdb-tab",48),t.qZA()()(),t.TgZ(107,"div",46)(108,"div",13)(109,"div",49)(110,"div",50),t._uU(111),t.qZA()()()()()()),2&e&&(t.xp6(7),t.lnq("\xa0",i.investor_id," ",i.investor.name,"\xa0-\xa0",i.investor.label," "),t.xp6(4),t.Q6J("buttonClass","nav md-pills border-bottom")("justified",!0)("contentClass","card"),t.xp6(8),t.hij(" ",i.investor.name," "),t.xp6(4),t.hij(" ",i.investor.legal_name," "),t.xp6(5),t.hij(" ",i.investor.phone," "),t.xp6(4),t.hij(" ",i.investor.address1," "),t.xp6(5),t.hij(" ",i.investor.email," "),t.xp6(4),t.lnq(" ",i.investor.city,"\xa0\xa0",i.investor.state,"\xa0\xa0",i.investor.zip," "),t.xp6(1),t.Q6J("ngIf",void 0!==i.iFinancials&&i.iFinancials.length>0),t.xp6(5),t.hij(" ",i.investor.note," "),t.xp6(7),t.Q6J("ngModel",i.companyID)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("value",-1),t.xp6(2),t.Q6J("ngForOf",i.companyList),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(5),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(13),t.Q6J("ngIf",i.investor.balance<0),t.xp6(1),t.Q6J("ngIf",i.investor.balance>0),t.xp6(4),t.AsE(" ",t.lcZ(85,42,i.investor.last_payment)," | ",i.last_payment_date," "),t.xp6(2),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view),t.xp6(2),t.Q6J("columnDefs",i.gridTXColumns)("rowData",i.gridTXData),t.xp6(13),t.Q6J("columnDefs",i.gridDocColumns)("rowData",i.gridDocData),t.xp6(3),t.hij(" Report generated as of ",i.reportGenTime," "),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view),t.xp6(5),t.AsE(" Last updated by ",i.investor.updatedby," on ",i.investor.updated," "))},directives:[d.AH5,d.wWr,c.O5,c.sg,d.lPY,_.JJ,_.On,d.x8v,d.JNR,_.Q7,d.mTE,v.N8,d.UiO,d.XIm,_.Fj,d.HqI,_.EJ,_.YN,_.Kr,_.wV,d.b6v],pipes:[c.Zx,c.H9,c.uU,c.Nd],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .btn-group-vertical[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-end}"]}),a})();function $i(a,r){if(1&a&&(t.TgZ(0,"div",9)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t._UZ(4,"img",18),t._uU(5),t.qZA(),t.TgZ(6,"div",12),t._uU(7),t.qZA(),t.TgZ(8,"div",11),t._uU(9),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.attribute),t.xp6(2),t.MGl("src","./assets/img/",e.logo,"",t.LSH),t.xp6(1),t.hij("\xa0",e.name," "),t.xp6(2),t.Oqu(e.login),t.xp6(2),t.Oqu(e.other)}}function Ki(a,r){if(1&a&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"mdb-card-title")(4,"h4"),t._UZ(5,"mdb-icon",4),t._uU(6,"\xa0Payment Information "),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"h5"),t._uU(10,"PLEASE READ THIS CAREFULLY BEFORE SENDING MONEY"),t.qZA()(),t.TgZ(11,"div",7),t._uU(12," 1. Always include your name and address with any payment. "),t.qZA(),t.TgZ(13,"div",7),t._uU(14," 2. Please confirm the payment method by trying with small amount first. Once you receive confirmation for any electronic payment methods, only then send larger amounts. "),t.qZA(),t.TgZ(15,"div",7),t._uU(16,"3. Always be extra careful when you send payment through electronic means as they may not be reversible. "),t.qZA(),t.TgZ(17,"div",7),t._uU(18," 4. We will never send you money requests or try to deduct money from your account. "),t.qZA()()(),t._UZ(19,"br"),t.TgZ(20,"mdb-card")(21,"mdb-card-header",8),t._uU(22," Digital Payments "),t.qZA(),t.TgZ(23,"mdb-card-body")(24,"div",9)(25,"div",10)(26,"label"),t._uU(27,"Type"),t.qZA()(),t.TgZ(28,"div",11)(29,"label"),t._uU(30,"Name"),t.qZA()(),t.TgZ(31,"div",12)(32,"label"),t._uU(33,"ID"),t.qZA()(),t.TgZ(34,"div",11)(35,"label"),t._uU(36,"ID2"),t.qZA()()(),t.YNc(37,$i,10,5,"div",13),t.qZA()(),t._UZ(38,"br"),t.TgZ(39,"mdb-card")(40,"mdb-card-header",8),t._uU(41," ACH Payments "),t.qZA(),t.TgZ(42,"mdb-card-body")(43,"div",9)(44,"div",14)(45,"label"),t._uU(46,"Institution"),t.qZA(),t._uU(47),t.qZA(),t.TgZ(48,"div",15)(49,"label"),t._uU(50,"Address"),t.qZA(),t._uU(51),t._UZ(52,"BR"),t._uU(53),t.qZA(),t.TgZ(54,"div",14)(55,"label"),t._uU(56,"Phone"),t.qZA(),t._uU(57),t.qZA(),t.TgZ(58,"div",14)(59,"label"),t._uU(60,"Routing Number"),t.qZA(),t._uU(61),t.qZA(),t.TgZ(62,"div",14)(63,"label"),t._uU(64,"Account Number"),t.qZA(),t._uU(65),t.qZA()()()(),t._UZ(66,"br"),t.TgZ(67,"mdb-card")(68,"mdb-card-header",8),t._uU(69," Payments by Mail\xa0"),t.TgZ(70,"span",16),t._uU(71,"(check or money order)"),t.qZA()(),t.TgZ(72,"mdb-card-body")(73,"div",9)(74,"div",11)(75,"label"),t._uU(76,"Pay to"),t.qZA(),t._uU(77),t.qZA(),t.TgZ(78,"div",11)(79,"label"),t._uU(80,"Address"),t.qZA(),t._uU(81),t._UZ(82,"br"),t._uU(83),t.qZA(),t.TgZ(84,"div",14)(85,"label"),t._uU(86,"Contact"),t.qZA(),t._uU(87),t._UZ(88,"BR"),t._uU(89,"M-F 8:30AM-5:00PM"),t.qZA(),t.TgZ(90,"div",15)(91,"label"),t._uU(92,"Email"),t.qZA(),t.TgZ(93,"a",17),t._uU(94,"payments@himalayaproperties.org"),t.qZA()()()()()()),2&a){const e=t.oxw();t.xp6(37),t.Q6J("ngForOf",e.digital),t.xp6(10),t.Oqu(e.bank.name),t.xp6(4),t.Oqu(e.bank.address),t.xp6(2),t.lnq("",e.bank.city," ",e.bank.state," ",e.bank.zip,""),t.xp6(4),t.Oqu(e.bank.phone),t.xp6(4),t.Oqu(e.bank.routing),t.xp6(4),t.Oqu(e.bank.account),t.xp6(12),t.Oqu(e.data.legal_name),t.xp6(4),t.Oqu(e.data.m_address),t.xp6(2),t.lnq("",e.data.m_city,"\xa0",e.data.m_state,"\xa0",e.data.m_zip," "),t.xp6(4),t.Oqu(e.data.phone)}}let tn=(()=>{class a{constructor(e,i,n){this.REQ=e,this.rd=i,this.AS=n,this.user=this.AS.currentUserValue,this.companyList=this.rd.GetCompanies(),this.tenant_id=-1,this.view="Tenant",this.data=[],this.digital=[],this.bank=[]}ngOnInit(){"Tenant"===this.user.type?(this.tenant_id=this.user.id_value,this.view="Tenant",this.getInfo("tenant_id",this.tenant_id)):this.getInfo("tenant_id",39)}getInfo(e,i){const n={params:{id_type:e,id_value:i,ACTION:"PAYMENT INFO"}};console.log("payment: Entering getInfo:",n),this.REQ.get("payment",{query:JSON.stringify(n)}).subscribe(o=>{this.data=o,console.log("Payment response:",o),console.log("Payment info:",this.data.attributes),this.data.company=this.companyList[this.data.company];let l=JSON.parse(this.data.attributes).data;for(let s=0;s<l.length;s++)"BANK"===l[s].attribute?this.bank=l[s]:this.digital.push(l[s]);console.log("Payment Digital:",this.digital),console.log("Payment Bank:",this.bank)},o=>{console.log(o)})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(b.$))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-payment"]],decls:1,vars:1,consts:[["class","d-block w-100 dashboard",4,"ngIf"],[1,"d-block","w-100","dashboard"],["id","data1",1,"card"],[1,"card-header"],["fas","","icon","file-invoice-dollar text-white"],[1,"card-body"],[1,"row","text-danger"],[1,"row","col-12"],[1,"blue-grey","lighten-4"],[1,"row","col-sm-12"],[1,"card-text-date","col-sm-1"],[1,"card-text-date","col-sm-3"],[1,"card-text-date","col-sm-5"],["class","row col-sm-12",4,"ngFor","ngForOf"],[1,"card-text-date","col-sm-2"],[1,"card-text-date","col-sm-4"],[1,"text-info"],["href","mailto:support@himalayaproperties.org"],["height","30",3,"src"]],template:function(e,i){1&e&&t.YNc(0,Ki,95,15,"div",0),2&e&&t.Q6J("ngIf","Tenant"===i.view)},directives:[c.O5,d.gRC,d.UiO,d.XIm,d.n3K,d.W60,d.KSw,c.sg],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px}.card[_ngcontent-%COMP%]{overflow:hidden}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.card[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]{font-size:14px}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px}.dashboard[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:15px}}"]}),a})();const en=["agGrid"];function nn(a,r){1&a&&(t.TgZ(0,"mdb-select-option",25),t._uU(1,"All"),t.qZA())}function on(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",26),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.label),t.xp6(1),t.hij("",e.name," ")}}function an(a,r){1&a&&(t.TgZ(0,"mdb-select-option",25),t._uU(1,"All"),t.qZA())}function rn(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",26),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function ln(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",26),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function dn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",4)(1,"ag-grid-angular",27,28),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n)})("cellClicked",function(n){t.CHM(e);const o=t.oxw();return o.onCellClicked(n,o.report)})("cellDoubleClicked",function(n){t.CHM(e);const o=t.oxw();return o.onCellDoubleClicked(n,o.report)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("columnDefs",e.gridC1Columns)("rowData",e.gridC1Data)}}let sn=(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.rd=i,this.activeRoute=n,this.router=o,this.AS=l,this.toastr=s,this.utility=u,this.user=this.AS.currentUserValue,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.reportGenTime=new Date,this.report_title="Profit & Loss Report",this.report="P & L",this.showGrid=!0,this.showPNL2=!1,this.finList=[],this.financial=[],this.dtList={},this.companyList={},this.trancheList=[],this.myTrancheList={},this.start_date=new Date,this.end_date=new Date,this.company_id="AHKY",this.schema="",this.tranche_id=-1,this.pnl2=[38,57,60,39,68,41,40,42,43,34,56,59],this.reportList={PNL:"P&L",PNL2:"P&L - HL"},this.gridC1Options={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0}},this.gridC1Columns=[],this.gridC1Data=[]}ngOnInit(){this.dtList=this.rd.GetDates(),this.rd.companySubject.subscribe(e=>this.companyList=e),this.rd.trancheSubject.subscribe(e=>this.trancheList=e),this.start_date=this.dtList.tdate_MSD,this.end_date=this.dtList.tdate_MED,this.updateTranche(),this.refreshAnalytics()}refreshReport(e,i){console.log("refreshReport:",e,i),"COMPANY"===i&&this.updateTranche()}refreshAnalytics(){const e={params:{company:this.company_id,report:this.report,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};this.tranche_id>0&&(e.params.tranche_id=this.tranche_id),this.gridC1Data=[],console.log("refreshAnalytics:",e,this.tranche_id),this.REQ.get("pmcf",{query:JSON.stringify(e)}).subscribe(i=>{if(console.log("refreshAnalytics:",i),!this.AS.checkResponseError(i,"Cashflow Data",this.AS.login))return!1;this.finList=i.data,this.schema=i.schema,"PNL"==this.report?(this.fetchPNLReport(i.data,1),this.showGrid=!0,this.showPNL2=!1,this.report_title="Cashflow Report: PnL view "):"PNL2"==this.report&&(this.fetchPNLReport(i.data,2),this.showGrid=!1,this.showPNL2=!0,this.report_title="Cashflow Report: PnL HL view ")},i=>{console.log("refreshAnalytics:",i)}),this.reportGenTime=new Date}fetchPNLReport(e,i){var n=this.schema.fields;for(let s=0;s<n.length;s++)n[s].headerName=this.CapitlizeString(n[s].name),n[s].field=n[s].name,n[s].filter=!0,"category"==n[s].name||"parent"==n[s].name||("name"==n[s].name?n[s].pinned="left":"ratio"==n[s].name?(n[s].valueFormatter=this.utility.agPercentFormatter,n[s].editable=!0,n[s].cellStyle=this.utility.agNumberCellStyle,n[s].cellClass="card-title",n[s].filter="agNumberColumnFilter"):(n[s].valueFormatter=this.utility.agCurrencyFormatter,n[s].editable=!0,n[s].cellStyle=this.utility.agNumberCellStyle,n[s].cellClass="card-title",n[s].filter="agNumberColumnFilter"));let o=[],l=0;console.log("fetchPNLReport:",i," Type of:"+typeof this.finList);for(let s=0;s<this.finList.length;s++)this.financial[this.finList[s].name]=this.finList[s].total,this.finList[s].field=this.finList.name,this.finList[s].pinned="right",this.finList[s].cellClass="card-title",2==i&&this.pnl2.includes(this.finList[s].category)&&(console.log("LOOP:[",1,"] ",this.finList[s]),o[l]=this.finList[s],l+=1),this.finList[s].parent>0&&(this.finList[s].category=this.finList[s].parent+":"+this.finList[s].category,this.finList[s].name="1    "+this.finList[s].name);console.log("CF Columns = ",n),console.log("CF Data = ",this.finList),console.log("CF Data 2 = ",o),this.gridC1Columns=n,this.gridC1Data=2==i?o:this.finList}updateTranche(){this.myTrancheList={},console.log("updateTranche:",this.trancheList);for(let e=0;e<this.trancheList.length;e++)this.trancheList[e].label==this.company_id&&(this.myTrancheList[this.trancheList[e].tranche_id]=this.trancheList[e].tranche_name);this.tranche_id=-1,console.log("updateTranche:",this.myTrancheList)}onDChange(e,i){console.log("25: onDChange--\x3e"),console.log(i)}onGridReady(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e){console.log("ModelUpdated",e),e.api.sizeColumnsToFit()}onCellClicked(e,i){console.log("Column:",e.colDef.field)}onCellDoubleClicked(e,i){console.log(e)}CapitlizeString(e){return e.charAt(0).toUpperCase()+e.slice(1)}exportData(e){var o={suppressQuotes:!0,columnSeparator:",",customHeader:this.report_title+" for "+this.company_id+" : as of "+this.reportGenTime,customFooter:"Himalaya Properties"};"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv(o)):console.log("Exporting Excel")}CurrencyCellRendererUSD(e){return void 0===e.value?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e.value)}bracketsFormatter(e){return"("+e.value+")"}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(C.t))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-pnl"]],viewQuery:function(e,i){if(1&e&&t.Gf(en,7),2&e){let n;t.iGM(n=t.CRH())&&(i.agGrid=n.first)}},decls:41,vars:24,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-lg-3","col-md-4","col-sm-12"],[1,"md-form","mb-2"],["label","Company","id","coSelect","optionHeight","32",3,"ngModel","dropdownClass","ngModelChange"],["value","ALL",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-2","col-md-4","col-sm-12"],["label","Tranche","id","tranche","optionHeight","32",3,"ngModel","dropdownClass","ngModelChange"],["label","From","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["label","To","name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],[1,"col-lg-1","col-md-4","col-sm-12"],["label","Report","id","reportSelect",3,"ngModel","ngModelChange"],[1,"col-lg-2","col-md-4","col-sm-12","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-4","mt-2","mb-3","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],[1,"fas","fa-download"],["class","row",4,"ngIf"],[1,"card-footer"],["value","ALL"],[3,"value"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","650px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._uU(5," Cashflow Report "),t.qZA()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"mdb-select-2",7),t.NdJ("ngModelChange",function(o){return i.company_id=o})("ngModelChange",function(o){return i.refreshReport(o,"COMPANY")}),t.YNc(11,nn,2,0,"mdb-select-option",8),t.YNc(12,on,2,2,"mdb-select-option",9),t.qZA()()(),t.TgZ(13,"div",10)(14,"div",6)(15,"mdb-select-2",11),t.NdJ("ngModelChange",function(o){return i.tranche_id=o}),t.YNc(16,an,2,0,"mdb-select-option",8),t.YNc(17,rn,2,2,"mdb-select-option",9),t.ALo(18,"keyvalue"),t.qZA()()(),t.TgZ(19,"div",10)(20,"div",6)(21,"mdb-date-picker",12,13),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()()(),t.TgZ(23,"div",10)(24,"div",6)(25,"mdb-date-picker",14,15),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()()(),t.TgZ(27,"div",16)(28,"div",6)(29,"mdb-select-2",17),t.NdJ("ngModelChange",function(o){return i.report=o})("ngModelChange",function(o){return i.refreshReport(o,"REPORT")}),t.YNc(30,ln,2,2,"mdb-select-option",9),t.ALo(31,"keyvalue"),t.qZA()()(),t.TgZ(32,"div",18)(33,"div",19)(34,"button",20),t.NdJ("click",function(){return i.refreshAnalytics()}),t._UZ(35,"i",21),t.qZA(),t.TgZ(36,"button",20),t.NdJ("click",function(){return i.exportData("CSV")}),t._UZ(37,"i",22),t.qZA()()()(),t.YNc(38,dn,3,2,"div",23),t.qZA(),t.TgZ(39,"div",24),t._uU(40),t.qZA()()()),2&e&&(t.xp6(10),t.Q6J("ngModel",i.company_id)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngIf","Admin"===i.user.type),t.xp6(1),t.Q6J("ngForOf",i.companyList),t.xp6(3),t.Q6J("ngModel",i.tranche_id)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngIf","Admin"===i.user.type),t.xp6(1),t.Q6J("ngForOf",t.lcZ(18,20,i.myTrancheList)),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(4),t.Q6J("ngModel",i.report),t.xp6(1),t.Q6J("ngForOf",t.lcZ(31,22,i.reportList)),t.xp6(8),t.Q6J("ngIf",i.showGrid||i.showPNL2),t.xp6(2),t.hij(" Report generated as of ",i.reportGenTime," "))},directives:[d.gRC,d.lPY,_.JJ,_.On,c.O5,d.x8v,c.sg,d.JNR,_.Q7,d.mTE,v.N8],pipes:[c.Nd],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .financials-text[_ngcontent-%COMP%]{line-height:24px;font-size:14px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}}"]}),a})();const _n=["staticTabs"];function cn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("propertye","property_id",n.property.property_id)}),t._UZ(1,"mdb-icon",58),t.qZA()}}function un(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().getURL("propertye","property_id",-1)}),t._UZ(1,"mdb-icon",60),t.qZA()}}function pn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshAnalytics()}),t._UZ(1,"i",62),t.qZA()}}function hn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",63),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenant","tenant_id",n.property.tenant_id)}),t._UZ(1,"i",64),t.qZA()}}function gn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",63),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenancy","tenant_id",n.property.tenant_id)}),t._UZ(1,"i",65),t.qZA()}}function mn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",63),t.NdJ("click",function(){return t.CHM(e),t.oxw().getURL("tenancye","tenancy_id",-1)}),t._UZ(1,"mdb-icon",66),t.qZA()}}function fn(a,r){if(1&a&&(t.TgZ(0,"div",3)(1,"div",67)(2,"label"),t._uU(3,"Tax ID"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",68)(6,"label"),t._uU(7,"First Date"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"div",68)(10,"label"),t._uU(11,"Sell Date"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"div",67)(14,"label"),t._uU(15,"Location"),t.qZA(),t._uU(16),t.qZA()()),2&a){const e=t.oxw();t.xp6(4),t.hij("",e.property.tax_id," "),t.xp6(4),t.hij("",e.purchase_date," "),t.xp6(4),t.hij("",e.sell_date," "),t.xp6(4),t.hij("",e.property.location," ")}}function bn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",63),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).getURL("tenant","tenant_id",n.tenant_id)}),t._UZ(1,"i",64),t.qZA()}}function yn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",73),t._uU(2),t.qZA(),t.TgZ(3,"td",74)(4,"a",63),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).getURL("property","property_id",o.property_id)}),t._UZ(5,"i",75),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"td",76),t._uU(8),t.qZA(),t.TgZ(9,"td",73),t.YNc(10,bn,2,0,"a",18),t._uU(11),t.qZA(),t.TgZ(12,"td",77),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"td",77),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"td",77),t._uU(19),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"td",78),t._uU(22),t.qZA()()}if(2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(4),t.hij("\xa0",e.label,""),t.xp6(2),t.AsE("",e.bed," / ",e.bath,""),t.xp6(2),t.Q6J("ngIf",e.tenant_id>0),t.xp6(1),t.hij("\xa0",e.tenant,""),t.xp6(2),t.Oqu(t.lcZ(14,10,e.market_rent)),t.xp6(3),t.Oqu(t.lcZ(17,12,e.rent)),t.xp6(3),t.Oqu(t.lcZ(20,14,e.deposit)),t.xp6(3),t.hij(" ",e.lease_end?e.lease_end.slice(0,e.lease_end.indexOf("T")):""," ")}}function Cn(a,r){if(1&a&&(t.TgZ(0,"div",3)(1,"mdb-card-body")(2,"div",69)(3,"table",70)(4,"thead")(5,"tr")(6,"th",71),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th",71),t._uU(9,"Label"),t.qZA(),t.TgZ(10,"th",71),t._uU(11,"Bed / Bath"),t.qZA(),t.TgZ(12,"th",71),t._uU(13,"Tenant"),t.qZA(),t.TgZ(14,"th",71),t._uU(15,"Market"),t.qZA(),t.TgZ(16,"th",71),t._uU(17,"Rent"),t.qZA(),t.TgZ(18,"th",71),t._uU(19,"Deposit"),t.qZA(),t.TgZ(20,"th",71),t._uU(21,"Lease End"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,yn,23,16,"tr",72),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",e.children.data)}}function Tn(a,r){if(1&a&&(t.TgZ(0,"mdb-tab",79)(1,"div",11)(2,"div",3)(3,"div",67)(4,"label"),t._uU(5,"Availability"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"div",67)(8,"label"),t._uU(9,"Market Rent"),t.qZA(),t._uU(10),t.ALo(11,"currency"),t.qZA(),t._UZ(12,"div",68),t.TgZ(13,"div",68)(14,"label"),t._uU(15,"Rental Status"),t.qZA(),t._uU(16),t.qZA()(),t._UZ(17,"hr"),t.TgZ(18,"div",3)(19,"div",21)(20,"label"),t._uU(21,"Special"),t.qZA(),t._uU(22),t.qZA()(),t.TgZ(23,"div",3)(24,"div",21)(25,"label"),t._uU(26,"Marketing Description"),t.qZA(),t._uU(27),t.qZA()(),t._UZ(28,"hr"),t.TgZ(29,"div",3)(30,"div",21)(31,"label"),t._uU(32,"Zillow"),t.qZA(),t._uU(33),t.qZA()(),t.TgZ(34,"div",3)(35,"div",21)(36,"label"),t._uU(37,"Apartments.com"),t.qZA(),t._uU(38),t.qZA()(),t.TgZ(39,"div",3)(40,"div",21)(41,"label"),t._uU(42,"Trulia"),t.qZA(),t._uU(43),t.qZA()()()()),2&a){const e=t.oxw();t.xp6(6),t.hij(" ",e.rental.move_in," "),t.xp6(4),t.hij("",t.lcZ(11,8,e.rental.market_rent)," "),t.xp6(6),t.hij(" ",e.rental.pr_status," "),t.xp6(6),t.hij("",e.rental.special," "),t.xp6(5),t.hij("",e.rental.description," "),t.xp6(6),t.hij("",e.rental.zillow," "),t.xp6(5),t.hij("",e.rental.apartments," "),t.xp6(5),t.hij("",e.rental.trulia," ")}}function Zn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"div",82)(2,"div",83)(3,"label"),t._uU(4,"Tenant"),t.qZA(),t._uU(5),t.TgZ(6,"a",63),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(3).getURL("tenant","tenant_id",o.tenant_id)}),t._UZ(7,"i",64),t.qZA(),t.TgZ(8,"a",63),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(3).getURL("tenancy","tenancy_id",o.tenancy_id)}),t._UZ(9,"i",65),t.qZA()(),t.TgZ(10,"div",83)(11,"label"),t._uU(12,"Start Date"),t.qZA(),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"div",83)(16,"label"),t._uU(17,"End Date"),t.qZA(),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"div",83)(21,"label"),t._uU(22,"Move Out"),t.qZA(),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"div",83)(26,"label"),t._uU(27,"Rent"),t.qZA(),t._uU(28),t.ALo(29,"currency"),t.qZA(),t.TgZ(30,"div",83)(31,"label"),t._uU(32,"Deposit"),t.qZA(),t._uU(33),t.ALo(34,"currency"),t.qZA(),t.TgZ(35,"div",83)(36,"label"),t._uU(37,"Status"),t.qZA(),t._uU(38),t.qZA()()()}if(2&a){const e=r.$implicit;t.xp6(5),t.hij("",e.responsible,"\xa0 "),t.xp6(8),t.hij("",t.xi3(14,7,e.start_date,"YYYY-MM-dd")," "),t.xp6(5),t.hij("",t.xi3(19,10,e.end_date,"YYYY-MM-dd")," "),t.xp6(5),t.hij("",t.xi3(24,13,e.move_out,"YYYY-MM-dd")," "),t.xp6(5),t.hij("",t.lcZ(29,16,e.rent)," "),t.xp6(5),t.hij("",t.lcZ(34,18,e.deposit)," "),t.xp6(5),t.hij("",e.tenancy_status," ")}}function vn(a,r){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,Zn,39,20,"div",72),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.gridTenancyData)}}function xn(a,r){if(1&a&&(t.TgZ(0,"mdb-tab",80)(1,"div",11),t.YNc(2,vn,2,1,"div",81),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",void 0!==e.gridTenancyData&&e.gridTenancyData.length>0)}}function An(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).refreshAnalytics()}),t._UZ(1,"mdb-icon",93),t.qZA()}}function qn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",84)(1,"div",85)(2,"div",3)(3,"div",86)(4,"label"),t._uU(5,"Period"),t.qZA()(),t.TgZ(6,"div",83)(7,"label"),t._uU(8,"From"),t.qZA(),t.TgZ(9,"mdb-date-picker",37,38),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()(),t.TgZ(11,"div",83)(12,"label"),t._uU(13,"To"),t.qZA(),t.TgZ(14,"mdb-date-picker",39,40),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()(),t._UZ(16,"div",68),t.TgZ(17,"div",87)(18,"div",42)(19,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshAnalytics()}),t._UZ(20,"i",44),t.qZA(),t.YNc(21,An,2,0,"button",89),t.TgZ(22,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("CSV")}),t._uU(23,"CSV"),t.qZA()()()(),t.TgZ(24,"div",90)(25,"div",67)(26,"table")(27,"tr")(28,"th",86)(29,"label"),t._uU(30,"NOI"),t.qZA()(),t.TgZ(31,"th",91),t._uU(32),t.ALo(33,"currency"),t.qZA()(),t.TgZ(34,"tr")(35,"td",86)(36,"label"),t._uU(37,"Income"),t.qZA()(),t.TgZ(38,"td",91),t._uU(39),t.ALo(40,"currency"),t.qZA()(),t.TgZ(41,"tr")(42,"td",86)(43,"label"),t._uU(44,"Utility Reimbursed"),t.qZA()(),t.TgZ(45,"td",91),t._uU(46),t.ALo(47,"currency"),t.qZA()(),t.TgZ(48,"tr")(49,"td",86)(50,"label"),t._uU(51,"Late Fees"),t.qZA()(),t.TgZ(52,"td",91),t._uU(53),t.ALo(54,"currency"),t.qZA()(),t.TgZ(55,"tr")(56,"td",86)(57,"label"),t._uU(58,"CapEx"),t.qZA()(),t.TgZ(59,"td",91),t._uU(60),t.ALo(61,"currency"),t.qZA()()()(),t.TgZ(62,"div",67)(63,"table")(64,"tr")(65,"th",86)(66,"label"),t._uU(67,"Expenses"),t.qZA()(),t.TgZ(68,"th",91),t._uU(69),t.ALo(70,"currency"),t.qZA()(),t.TgZ(71,"tr")(72,"td",86)(73,"label"),t._uU(74,"Fixed"),t.qZA()(),t.TgZ(75,"td",91),t._uU(76),t.ALo(77,"currency"),t.qZA()(),t.TgZ(78,"tr")(79,"td",86)(80,"label"),t._uU(81,"Professional Fees"),t.qZA()(),t.TgZ(82,"td",91),t._uU(83),t.ALo(84,"currency"),t.qZA()(),t.TgZ(85,"tr")(86,"td",86)(87,"label"),t._uU(88,"Management"),t.qZA()(),t.TgZ(89,"td",91),t._uU(90),t.ALo(91,"currency"),t.qZA()(),t.TgZ(92,"tr")(93,"td",86)(94,"label"),t._uU(95,"Maintenance"),t.qZA()(),t.TgZ(96,"td",91),t._uU(97),t.ALo(98,"currency"),t.qZA()(),t.TgZ(99,"tr")(100,"td",86)(101,"label"),t._uU(102,"Plumbing"),t.qZA()(),t.TgZ(103,"td",91),t._uU(104),t.ALo(105,"currency"),t.qZA()(),t.TgZ(106,"tr")(107,"td",86)(108,"label"),t._uU(109,"HVAC"),t.qZA()(),t.TgZ(110,"td",91),t._uU(111),t.ALo(112,"currency"),t.qZA()(),t.TgZ(113,"tr")(114,"td",86)(115,"label"),t._uU(116,"Contracts"),t.qZA()(),t.TgZ(117,"td",91),t._uU(118),t.ALo(119,"currency"),t.qZA()()()(),t.TgZ(120,"div",67)(121,"table")(122,"tr")(123,"th",86)(124,"label"),t._uU(125,"Utilities"),t.qZA()(),t.TgZ(126,"th",91),t._uU(127),t.ALo(128,"currency"),t.qZA()(),t.TgZ(129,"tr")(130,"td",86)(131,"label"),t._uU(132,"Water"),t.qZA()(),t.TgZ(133,"td",91),t._uU(134),t.ALo(135,"currency"),t.qZA()(),t.TgZ(136,"tr")(137,"td",86)(138,"label"),t._uU(139,"Electric"),t.qZA()(),t.TgZ(140,"td",91),t._uU(141),t.ALo(142,"currency"),t.qZA()(),t.TgZ(143,"tr")(144,"td",86)(145,"label"),t._uU(146,"Gas"),t.qZA()(),t.TgZ(147,"td",91),t._uU(148),t.ALo(149,"currency"),t.qZA()(),t.TgZ(150,"tr")(151,"td",86)(152,"label"),t._uU(153,"Trash"),t.qZA()(),t.TgZ(154,"td",91),t._uU(155),t.ALo(156,"currency"),t.qZA()(),t.TgZ(157,"tr")(158,"td",86)(159,"label"),t._uU(160,"Landscaping"),t.qZA()(),t.TgZ(161,"td",91),t._uU(162),t.ALo(163,"currency"),t.qZA()(),t.TgZ(164,"tr")(165,"td",86)(166,"label"),t._uU(167,"Snow"),t.qZA()(),t.TgZ(168,"td",91),t._uU(169),t.ALo(170,"currency"),t.qZA()()()()()()()}if(2&a){const e=t.oxw();t.xp6(9),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.start_date),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.end_date),t.xp6(7),t.Q6J("ngIf","Admin"===e.view||"SManager"===e.view),t.xp6(11),t.Oqu(t.lcZ(33,27,e.financial.NOI)),t.xp6(7),t.Oqu(t.lcZ(40,29,e.financial.INCOME)),t.xp6(7),t.Oqu(t.lcZ(47,31,e.financial.UTILITY_RF)),t.xp6(7),t.Oqu(t.lcZ(54,33,e.financial.LATE_FEE)),t.xp6(7),t.Oqu(t.lcZ(61,35,e.financial.CAPEX)),t.xp6(9),t.Oqu(t.lcZ(70,37,e.financial.EXPENSE)),t.xp6(7),t.Oqu(t.lcZ(77,39,e.financial.FIXED)),t.xp6(7),t.Oqu(t.lcZ(84,41,e.financial.PROFESSIONAL_FEES)),t.xp6(7),t.Oqu(t.lcZ(91,43,e.financial.MANAGEMENT)),t.xp6(7),t.Oqu(t.lcZ(98,45,e.financial.GENERAL)),t.xp6(7),t.Oqu(t.lcZ(105,47,e.financial.PLUMBING)),t.xp6(7),t.Oqu(t.lcZ(112,49,e.financial.HVAC)),t.xp6(7),t.Oqu(t.lcZ(119,51,e.financial.CONTRACTS)),t.xp6(9),t.Oqu(t.lcZ(128,53,e.financial.UTILITY)),t.xp6(7),t.Oqu(t.lcZ(135,55,e.financial.WATER)),t.xp6(7),t.Oqu(t.lcZ(142,57,e.financial.ELECTRIC)),t.xp6(7),t.Oqu(t.lcZ(149,59,e.financial.GAS)),t.xp6(7),t.Oqu(t.lcZ(156,61,e.financial.GARBAGE_RECYCLE)),t.xp6(7),t.Oqu(t.lcZ(163,63,e.financial.LANDSCAPING)),t.xp6(7),t.Oqu(t.lcZ(170,65,e.financial.SNOW))}}function Mn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).refreshAnalytics()}),t._UZ(1,"mdb-icon",93),t.qZA()}}function wn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",94)(1,"div",11)(2,"div",3)(3,"div",86)(4,"label"),t._uU(5,"Period"),t.qZA()(),t.TgZ(6,"div",83)(7,"label"),t._uU(8,"From"),t.qZA(),t.TgZ(9,"mdb-date-picker",37,38),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()(),t.TgZ(11,"div",83)(12,"label"),t._uU(13,"To"),t.qZA(),t.TgZ(14,"mdb-date-picker",39,40),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()(),t._UZ(16,"div",68),t.TgZ(17,"div",87)(18,"div",42)(19,"button",88),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getPropertyTX(n.property_id)}),t._UZ(20,"i",44),t.qZA(),t.YNc(21,Mn,2,0,"button",89),t.TgZ(22,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("CSV")}),t._uU(23,"CSV"),t.qZA()()()(),t.TgZ(24,"div",3)(25,"ag-grid-angular",95,96),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady1(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated1(n)})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"TX")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked1(n,"TX")}),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(9),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.start_date),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.end_date),t.xp6(7),t.Q6J("ngIf","Admin"===e.view),t.xp6(4),t.Q6J("columnDefs",e.grid1Columns)("rowData",e.grid1Data)("getRowHeight",e.getRowHeight1)}}let Un=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.utility=e,this.REQ=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.authority="Property",this.user=this.AS.currentUserValue,this.urlPrefix="",this.queryParams={},this.chartOptions={},this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2020},this.showModal=!1,this.file_info="",this.owner_id=-1,this.owner_type="PROPERTY",this.modalTitle="",this.purchase_date="",this.sell_date="",this.start_date=(new Date).toISOString(),this.end_date=(new Date).toISOString(),this.minTXDate=new Date("2020-01-01"),this.lease_start="",this.lease_end="",this.property_id=-1,this.tenant_id=-1,this.display_tab=1,this.view="Tenant",this.tx_category="",this.tx_vendor="",this.tx_amount=0,this.tx_description="",this.tx_type="",this.tx_ref="",this.pList=[],this.dataList=[],this.trList=[],this.property=[],this.financial=[],this.TSData=[],this.TSSchema=[],this.children=[],this.pAttributes=[],this.amenities=[],this.schools=[],this.adminInfo=[],this.rental=[],this.isPropertyEdit=!1,this.closeResult="",this.p_status="",this.cList=this.rd.GetCategories("ALL"),this.tList=this.rd.GetPaymentTypes(),this.vList=this.rd.GetVendors(),this.psList=this.rd.GetPropertyStatus(),this.dtList=this.rd.GetDates(),this.wosList=this.rd.GetWOStatus(),this.priorityList=this.rd.GetWOPriorities(),this.companyList={},this.trancheList={},this.tStatusList=[],this.tTermsList=[],this.grid1Options={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.gridAOptions=this.grid1Options,this.gridAColumns=[{headerName:"Attribute",field:"co_value",sortable:!0,filter:!0},{headerName:"Description",width:300,field:"pa_value",sortable:!0,cellStyle:{"white-space":"normal"},filter:!0}],this.gridAData=[],this.gridBOptions=this.grid1Options,this.gridBColumns=[{headerName:"Appliance",field:"co_value",sortable:!0,filter:!0},{headerName:"Make",field:"make",sortable:!0,filter:!0},{headerName:"Model",field:"model",sortable:!0,filter:!0},{headerName:"Note",field:"value",sortable:!0,filter:!0},{headerName:"Status",field:"a_status",sortable:!0,filter:!0},{headerName:"Date",field:"start_date",sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer}],this.gridBData=[],this.gridCOptions=this.grid1Options,this.gridCColumns=[{headerName:"Service",field:"service",sortable:!0,filter:!0},{headerName:"Provider",field:"label",sortable:!0,filter:!0},{headerName:"Account",field:"account",sortable:!0,filter:!0},{headerName:"Reference",field:"reference",sortable:!0,filter:!0},{headerName:"Note",field:"value",sortable:!0,filter:!0}],this.gridCData=[],this.grid1Data=[],this.grid1Columns=[{headerName:"TX",field:"type"},{headerName:"ID",width:100,field:"t_id",filter:"agNumberColumnFilter"},{headerName:"Date",field:"tdate",width:140,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Credit",field:"credit",width:120,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Debit",field:"debit",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Balance",field:"amount",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Name",field:"category_name",filter:!0,resizable:!0},{headerName:"Payee",field:"payee"},{headerName:"Description",field:"description",resizable:!0}],this.gridWOOptions=this.grid1Options,this.gridWOData=[],this.gridWOColumns=[{headerName:"ID",width:70,field:"wo_id",filter:"agNumberColumnFilter"},{headerName:"Created",width:120,field:"tdate",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Label",field:"label"},{headerName:"Tenant",field:"contact_name"},{headerName:"Title",field:"title"},{headerName:"Priority",width:130,field:"priority_label",cellStyle:this.woPriorityStyle},{headerName:"Priority ID",field:"priority",hide:!0},{headerName:"Status",width:130,field:"status_label",cellStyle:this.woStatusStyle},{headerName:"Status ID",field:"status",hide:!0},{headerName:"Assignee",field:"owner"},{headerName:"Updated",width:120,field:"updated",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer}],this.gridDocOptions=this.grid1Options,this.gridDocData=[],this.gridDocColumns=[{headerName:"ID",field:"index",width:40,sortable:!0,filter:"agNumberColumnFilter"},{headerName:" ",width:25,field:"doc_format",cellRenderer:this.imageRenderer},{headerName:"Document",width:130,field:"doc_type"},{headerName:"Name",field:"doc_name",sortable:!0,filter:!0},{headerName:"Updated By",field:"updatedby",sortable:!0,filter:!0},{headerName:"Updated",field:"updated",width:140,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Property ID",field:"property_id",hide:!0},{headerName:"Doc ID",field:"doc_id",hide:!0},{headerName:"Doc Path",field:"doc_path",hide:!0}],this.gridTenancyData=[]}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.rd.companySubject.subscribe(e=>this.companyList=e),this.rd.trancheSubject.subscribe(e=>this.trancheList=e),this.rd.tenancyStatusSubject.subscribe(e=>this.tStatusList=e),this.rd.tenancyTermsSubject.subscribe(e=>this.tTermsList=e),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("property_id")&&(this.property_id=this.queryParams.property_id),this.init()}),this.property_id<1&&this.router.navigate([this.urlPrefix+"report"],{queryParams:{report:"PROPERTY"}}),this.start_date=this.dtList.tdate_6M1,this.getProperties()}init(){"Tenant"===this.user.type?(this.tenant_id=this.user.id_value,this.view="Tenant",this.display_tab=1,this.getPropertyInfo(this.tenant_id,"tenant_id"),this.getWOS(this.property_id)):(this.view=this.user.type,this.property_id>-1&&(this.getPropertyInfo(this.property_id,"property_id"),this.refreshAnalytics())),console.log("Property: INIT:",this.view)}ngOnChanges(){this.ngOnInit()}refreshAnalytics(){this.getWOS(this.property_id),this.getPropertyTX(this.property_id),this.getPropertyCF(this.property_id),this.getPropertyTS(),this.getDocs()}getPropertyTX(e){const i={params:{property_id:e,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};console.log("getPropertyTX: ",i),this.REQ.get("ptr",{query:JSON.stringify(i)}).subscribe(n=>{this.trList=n.data,console.log("getPropertyTX:",this.trList),this.grid1Data=this.trList},n=>{console.log(n)})}getPropertyCF(e){const i={params:{property_id:e,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};console.log("getPropertyCF:",i),this.REQ.get("pcfa",{query:JSON.stringify(i)}).subscribe(n=>{this.financial=n},n=>{console.log(n)})}getPropertyInfo(e,i){const n={params:{NOP:"NOP"}};n.params[i]=e,n.params.info="ALL",console.log("getPropertyInfo Entered:",n),this.gridAData=[],this.gridBData=[],this.children=[],this.REQ.get("p",{query:JSON.stringify(n)}).subscribe(o=>{if(this.property=o,console.log("getPropertyInfo:",o),this.property.children&&(this.children=JSON.parse(this.property.children)),this.property.appliances&&(this.gridBData=JSON.parse(this.property.appliances).data),this.property.services&&(this.gridCData=JSON.parse(this.property.services).data),this.property.tenancies){let s=JSON.parse(this.property.tenancies).data;console.log("tenancygrid data:",s);for(let u=0;u<s.length;u++)for(let p=0;p<this.tStatusList.length;p++)if(this.tStatusList[p].co_name==s[u].status){s[u].tenancy_status=this.tStatusList[p].co_value;break}this.gridTenancyData=s}this.p_status=this.psList[this.property.p_status],this.property.hasOwnProperty("tenant_id")||(this.property.tenant_id=-1),this.property.hasOwnProperty("start_date")&&(this.minTXDate=new Date(this.property.start_date)),this.property.hasOwnProperty("lease_start")&&(this.lease_start=this.property.lease_start.slice(0,this.property.lease_start.indexOf("T"))),this.property.hasOwnProperty("lease_end")&&(this.lease_end=this.property.lease_end.slice(0,this.property.lease_end.indexOf("T"))),this.purchase_date=this.property.start_date.slice(0,this.property.start_date.indexOf("T")),this.property.hasOwnProperty("end_date")&&(this.sell_date=this.property.end_date.slice(0,this.property.end_date.indexOf("T")));for(let s in this.trancheList)console.log("LOOP:Tranche:",this.trancheList[s]),this.trancheList[s].tranche_id===this.property.tranche_id&&(this.property.tranche_name=this.trancheList[s].tranche_name);for(let s in this.companyList)this.companyList[s].label===this.property.company&&(this.property.company=this.companyList[s].name);this.amenities=JSON.parse(this.property.amenities).data;let l=this.amenities;this.gridAData=[];for(let s=0;s<l.length;s++)this.gridAData.push(l[s]);this.schools=JSON.parse(this.property.schools).data,console.log("School:",this.schools),l=this.schools;for(let s=0;s<l.length;s++)this.gridAData.push(l[s]);this.property.rental.length>4&&(this.rental=JSON.parse(this.property.rental).data[0]),console.log("Rental:",this.rental),this.adminInfo=JSON.parse(this.property.admin).data,console.log("adminInfo:",this.adminInfo)},o=>{console.log(o)})}getPropertyTS(){console.log("getPropertyTS"),this.initChartOptions(this.property.label,this.start_date+" to "+this.end_date,""),this.getTS(this.property_id,"Tenant"===this.view||"Super"===this.view?8:38,this.start_date,this.end_date),this.getTS(this.property_id,27,this.start_date,this.end_date),this.getTS(this.property_id,28,this.start_date,this.end_date),this.getTS(this.property_id,29,this.start_date,this.end_date),this.getTS(this.property_id,39,this.start_date,this.end_date),this.getTS(this.property_id,100,this.start_date,this.end_date)}getTS(e,i,n,o){let l=[],s={},u=[],f={params:{property_id:e,category_id:i,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};this.REQ.get("ts",{query:JSON.stringify(f)}).subscribe(x=>{l=x.data;for(let q=0;q<l.length;q++)u.push([new Date(l[q].tdate).getTime(),l[q].value]);s.data=u,s.name=this.cList[i],this.chartOptions.series.push(s)},x=>{console.log(x)})}refreshP(){this.getPropertyInfo(this.property_id,"property_id")}getProperties(){this.REQ.get("p","").subscribe(i=>{this.pList=i.data},i=>{console.log(i)})}getURL(e,i,n){console.log("getURL:",e,i,n);const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}openAddTX(e){}getWOS(e){const i={params:{start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date),property_id:this.property_id}};this.gridWOData=[],console.log("getWOS: Entered:",i),this.REQ.get("gwos",{query:JSON.stringify(i)}).subscribe(n=>{if(console.log("getWOS:",n),void 0===n.data)console.log("getWOS: NO data returned");else{for(let o=0;o<n.data.length;o++)n.data[o].priority_label=this.priorityList[n.data[o].priority],n.data[o].status_label=this.wosList[n.data[o].status],n.data[o].cellClass="card-title";this.gridWOData=n.data}},n=>{console.log(n),this.toastr.error("Work order report failed : "+n)})}initChartOptions(e,i,n){console.log("initChartOptions.XLabels:"+e+":"+i),this.chartOptions={title:{text:e},subtitle:{text:i},colors:["#ec250d","#1c2ffd","#f45b5b","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],credits:{enabled:!1},chart:{type:"column",style:{fontFamily:"'Unica One', sans-serif",backgroundColor:"red"},plotBorderColor:"#606063"},xAxis:{title:"Period",type:"datetime",labels:{value:n,formatter:function(){return"xxx-xx-xx"}}},yAxis:{title:{text:"Amount"}},series:[],legend:{layout:"vertical",align:"right",verticalAlign:"middle",backgroundColor:"red",color:"white"},tooltip:{xDateFormat:"%Y-%m",shared:!0},plotOptions:{series:{dataLabels:{enabled:!0},label:{connectorAllowed:!1},pointStart:2019}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]},exporting:{buttons:{contextButton:{menuItems:null,onclick:function(){this.exportChart()}}}}},console.log("Chart Element1:"+this.chartOptions)}showTXDetails(e){let i={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Transaction Details",content:{description:"Are you sure, you want to modify this transaction?"}}};i.data.content=e.data,this.modalRef=this.modalService.show(N,i)}getDocs(){this.gridDocData=[];const e={params:{property_id:this.property_id,key_type:"PROPERTY"}};console.log("getDocs.1:",e),this.REQ.get("fl",{query:JSON.stringify(e)}).subscribe(i=>{console.log("getDocs.Response:",i),this.gridDocData=i.data},i=>{console.log(i)})}addDocuments(){this.file_info=this.property_id+"_"+this.property.label2,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,""),this.file_info=this.file_info.replace(/,/g,""),this.owner_id=this.property_id,console.log(this.file_info),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Property Document",content:{owner_type:this.owner_type,owner_id:this.owner_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i),this.getDocs()})}delDocument(e){let i={doc_id:e.doc_id,key_type:"PROPERTY"};console.log("delDocument:",i),this.REQ.post("fd",i).subscribe(n=>{console.log("delDocument:",n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}onFileUploadClose(e){this.showModal=!1,console.log("onFileUploadClose"),console.log(e)}getDocument(e){e.property_id=this.property_id,console.log("getDocument: ",e),console.log("getDocument: ",e);let i={params:e,usage:{authority:this.authority,sub_authority:"Documents",operation:"DOWNLOAD",data:"NA"}},n=i.params.doc_id+"_"+i.params.doc_name+"."+i.params.doc_format;console.log("getDocument: ",i,n),this.REQ.getDocument({query:JSON.stringify(i)},n)}getRowHeightA(e){return void 0===e.data.pa_value||e.data.pa_value.length<50?25:25*Math.ceil(e.data.pa_value.length/50)}getRowHeight1(e){return 24}onModelUpdatedA(e,i){e.api.sizeColumnsToFit()}onGridReady1(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated1(e){e.api.sizeColumnsToFit()}exportData(e){"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv({suppressQuotes:!0,columnSeparator:",",customHeader:"Report",customFooter:"Himalaya Capital"})):console.log("Exporting Excel")}onCellClicked(e,i){console.log("onCellClicked:",e),console.log(" ["+e.column.colId+" , "+e.value+" ]"+e.data.property_id+" : "+e.data.type),"doc_format"==e.column.colId?this.getDocument(e.data):"doc_delete"==e.column.colId&&(console.log("onCellClicked: Deleting"),this.delDocument(e.data))}onCellDoubleClicked1(e,i){console.log("Double Clicked:",i),console.log(e);let n=e.data.t_id;"Admin"===this.view||"SManager"===this.view||"Manager"===this.view?"TX"===e.data.type?this.router.navigate([this.urlPrefix+"dm"],e.data.debit>0?{queryParams:{report:1,tx_id:n}}:{queryParams:{report:2,tx_id:n}}):"WO"===i?(n=e.data.wo_id,this.router.navigate([this.urlPrefix+"wo"],{queryParams:{wo_id:n}})):"TENANCY"===i?(n=e.data.tenancy_id,this.router.navigate([this.urlPrefix+"tenancy"],{queryParams:{tenancy_id:n}})):this.router.navigate([this.urlPrefix+"dm"],{queryParams:{report:3,tr_id:n}}):this.showTXDetails(e)}onGridReadyDoc(e){var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}woPriorityStyle(e){return"Urgent"==e.value?{color:"red",textAlign:"center"}:"Normal"==e.value?{color:"blue",textAlign:"center"}:{textAlign:"center"}}woStatusStyle(e){return"Open"==e.value?{color:"red",textAlign:"center"}:"New"==e.value?{color:"blue",textAlign:"center"}:"In Progress"==e.value?{color:"green",textAlign:"center"}:"On Hold"==e.value?{color:"orange",textAlign:"center"}:"Closed"==e.value?{color:"gray",textAlign:"center"}:{textAlign:"center"}}imageRenderer(e){console.log("imageRenderer:",e);let i="<span class='text-info'><i class='fas fa-download'></i></span>";return"doc_delete"===e.colDef.field&&(i="<span class='text-danger'><i class='fas fa-trash-alt'></i></span>"),i}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C.t),t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-property"]],viewQuery:function(e,i){if(1&e&&t.Gf(_n,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},features:[t.TTD],decls:157,vars:61,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"fas","fa-home","text-white"],[1,"col-md-6","col-sm-12","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","placement","left","ngbTooltip","Edit Property Info",3,"click",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","ngbTooltip","Add new Property",3,"click",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","class","btn-medium btn-info",3,"click",4,"ngIf"],[1,"card-body"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass"],["staticTabs",""],["heading","Details"],[1,"col-sm-12","col-lg-4","col-md-6"],[1,"col-sm-12","col-lg-2","col-md-6"],[3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","mt-3"],[1,"col-sm-12"],[1,"fw-bold"],["id","agGridA","name","agGridA",1,"col-sm-12","mt-3"],["animateRows","","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","250px",3,"columnDefs","rowData","getRowHeight","modelUpdated","gridReady"],["agGridC",""],["id","agGridB",1,"col-sm-12","col-lg-8","col-md-12"],["animateRows","","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","325px",3,"columnDefs","rowData","getRowHeight","modelUpdated","gridReady"],["agGridB",""],["id","agGridC",1,"col-sm-12","col-lg-4","col-md-12"],["agGridA",""],[1,"col-12","text-right","text-muted"],[1,"col-12","text-left","pt-md-3","pt-2","pb-md-0","pb-2","update-text"],["heading","Rental",4,"ngIf"],["heading","Maintenance"],[1,"col-sm-12","col-md-6","col-lg-1"],[1,"col-sm-12","col-md-6","col-lg-3"],["required","",3,"inline","options","ngModel","ngModelChange"],["sd",""],["name","end_date","required","",3,"inline","options","ngModel","ngModelChange"],["ed",""],[1,"col-sm-12","col-md-6","col-lg-5","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-4","mt-3","mb-4","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","600px",3,"columnDefs","rowData","modelUpdated","cellDoubleClicked","gridReady"],["gridSD",""],["heading","Documents"],[1,"col-sm-12","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-2","mt-3","mb-4"],["mdbBtn","","type","button","color","info","rounded","true",1,"btn-sm",3,"click"],["fas","","icon","plus-square"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","500px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""],["heading","Tenancy",4,"ngIf"],["heading","Performance",4,"ngIf"],["heading","Transactions",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","placement","left","ngbTooltip","Edit Property Info",3,"click"],["fas","","icon","pen-square text-danger","size","2x"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","ngbTooltip","Add new Property",3,"click"],["far","","icon","plus-square text-danger","size","2x"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","",1,"btn-medium","btn-info",3,"click"],["size","2x",1,"fas","fa-sync","text-danger"],[3,"click"],[1,"fas","fa-user","text-primary"],[1,"fas","fa-user-circle","text-primary"],["far","","icon","plus-square text-primary"],[1,"col-sm-4"],[1,"col-sm-2"],[1,"table-responsive"],["id","",1,"table","tablehover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-left"],["nowrap","",1,"text-left"],[1,"fas","fa-home","text-primary"],[1,"text-center"],[1,"text-right"],["nowrap","",1,"text-center"],["heading","Rental"],["heading","Tenancy"],[4,"ngIf"],[1,"row","mb-3","pb-3","border-bottom"],[1,"col-sm-3"],["heading","Performance"],["id","tab0",1,"card-body"],[1,"col-sm-1"],[1,"col-sm-3",2,"text-align","right"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","",3,"click"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","","tooltip","Email tenant the financials",3,"click",4,"ngIf"],["id","tab0data",1,"row"],[1,"col-sm-3","card-text-number"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","","tooltip","Email tenant the financials",3,"click"],["far","","icon","envelope"],["heading","Transactions"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","700px",3,"columnDefs","rowData","getRowHeight","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["grid1",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"div",3)(5,"div",4)(6,"h3"),t._UZ(7,"i",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div",7),t.YNc(11,cn,2,0,"button",8),t.YNc(12,un,2,0,"button",9),t.YNc(13,pn,2,0,"button",10),t.qZA()()()()(),t.TgZ(14,"div",11)(15,"div",12)(16,"mdb-tabset",13,14)(18,"mdb-tab",15)(19,"div",11)(20,"div",3)(21,"div",16)(22,"label"),t._uU(23,"Address"),t.qZA(),t._uU(24),t.qZA(),t.TgZ(25,"div",17)(26,"label"),t._uU(27,"Type"),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"div",17)(30,"label"),t._uU(31,"Size"),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"div",16)(34,"label"),t._uU(35,"Market Rent"),t.qZA(),t._uU(36),t.ALo(37,"currency"),t.qZA()(),t.TgZ(38,"div",3)(39,"div",16)(40,"label"),t._uU(41,"City State ZIP"),t.qZA(),t._uU(42),t.qZA(),t.TgZ(43,"div",17)(44,"label"),t._uU(45,"Bedroom"),t.qZA(),t._uU(46),t.qZA(),t.TgZ(47,"div",17)(48,"label"),t._uU(49,"Bath"),t.qZA(),t._uU(50),t.qZA(),t.TgZ(51,"div",16)(52,"label"),t._uU(53,"Property Status"),t.qZA(),t._uU(54),t.qZA()(),t.TgZ(55,"div",3)(56,"div",16)(57,"label"),t._uU(58,"Company"),t.qZA(),t._uU(59),t.qZA(),t.TgZ(60,"div",17)(61,"label"),t._uU(62,"Total Rooms"),t.qZA(),t._uU(63),t.qZA(),t.TgZ(64,"div",17)(65,"label"),t._uU(66,"Built"),t.qZA(),t._uU(67),t.qZA(),t.TgZ(68,"div",16)(69,"label"),t._uU(70,"Tenant"),t.qZA(),t._uU(71),t.YNc(72,hn,2,0,"a",18),t._uU(73,"\xa0"),t.YNc(74,gn,2,0,"a",18),t.YNc(75,mn,2,0,"a",18),t.qZA()(),t.TgZ(76,"div",3)(77,"div",16)(78,"label"),t._uU(79,"Group"),t.qZA(),t._uU(80),t.qZA(),t.TgZ(81,"div",17)(82,"label"),t._uU(83,"Label2"),t.qZA(),t._uU(84),t.qZA(),t.TgZ(85,"div",17)(86,"label"),t._uU(87,"Tranche"),t.qZA(),t._uU(88),t.qZA(),t.TgZ(89,"div",16)(90,"label"),t._uU(91,"Rent"),t.qZA(),t._uU(92),t.ALo(93,"currency"),t.qZA()(),t.YNc(94,fn,17,4,"div",19),t.TgZ(95,"div",20)(96,"div",21)(97,"label",22),t._uU(98,"Additional Information"),t.qZA(),t.TgZ(99,"span",22),t._uU(100),t.qZA()(),t.TgZ(101,"div",23)(102,"ag-grid-angular",24,25),t.NdJ("modelUpdated",function(o){return i.onModelUpdatedA(o,"SERVICE")})("gridReady",function(o){return i.onGridReady1(o)}),t.qZA()()(),t.TgZ(104,"div",20)(105,"div",26)(106,"ag-grid-angular",27,28),t.NdJ("modelUpdated",function(o){return i.onModelUpdatedA(o,"APPLIANCE")})("gridReady",function(o){return i.onGridReady1(o)}),t.qZA()(),t.TgZ(108,"div",29)(109,"ag-grid-angular",27,30),t.NdJ("modelUpdated",function(o){return i.onModelUpdatedA(o,"ATTRIBUTE")})("gridReady",function(o){return i.onGridReady1(o)}),t.qZA()()(),t.YNc(111,Cn,24,1,"div",19),t.TgZ(112,"div",3)(113,"div",31)(114,"div",32),t._uU(115),t.qZA()()()()(),t.YNc(116,Tn,44,10,"mdb-tab",33),t.TgZ(117,"mdb-tab",34)(118,"div",11)(119,"div",3)(120,"div",35)(121,"label"),t._uU(122,"Period"),t.qZA()(),t.TgZ(123,"div",36)(124,"label"),t._uU(125,"From"),t.qZA(),t.TgZ(126,"mdb-date-picker",37,38),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()(),t.TgZ(128,"div",36)(129,"label"),t._uU(130,"To"),t.qZA(),t.TgZ(131,"mdb-date-picker",39,40),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()(),t.TgZ(133,"div",41)(134,"div",42)(135,"button",43),t.NdJ("click",function(){return i.getWOS(i.property_id)}),t._UZ(136,"i",44),t.qZA(),t.TgZ(137,"button",43),t.NdJ("click",function(){return i.exportData("CSV")}),t._uU(138,"CSV"),t.qZA()()()(),t.TgZ(139,"div",3)(140,"ag-grid-angular",45,46),t.NdJ("modelUpdated",function(o){return i.onModelUpdated1(o)})("cellDoubleClicked",function(o){return i.onCellDoubleClicked1(o,"WO")})("gridReady",function(o){return i.onGridReady1(o)}),t.qZA()()()(),t.TgZ(142,"mdb-tab",47)(143,"div",11)(144,"div",3)(145,"div",48)(146,"div",49)(147,"button",50),t.NdJ("click",function(){return i.getDocs()}),t._UZ(148,"i",44),t.qZA(),t.TgZ(149,"button",50),t.NdJ("click",function(){return i.addDocuments()}),t._UZ(150,"mdb-icon",51),t.qZA()()()(),t.TgZ(151,"div",3)(152,"ag-grid-angular",52,53),t.NdJ("gridReady",function(o){return i.onGridReadyDoc(o)})("modelUpdated",function(o){return i.onModelUpdated1(o)})("cellClicked",function(o){return i.onCellClicked(o,"DOCUMENTS")})("cellDoubleClicked",function(o){return i.onCellDoubleClicked1(o,"DOCUMENTS")}),t.qZA()()()(),t.YNc(154,xn,3,1,"mdb-tab",54),t.YNc(155,qn,171,67,"mdb-tab",55),t.YNc(156,wn,27,10,"mdb-tab",56),t.qZA()()()()()),2&e&&(t.xp6(8),t.AsE("\xa0",i.property.property_id,"\xa0 ",i.property.label," "),t.xp6(3),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view),t.xp6(3),t.Q6J("buttonClass","nav md-pills  border-bottom")("justified",!0)("contentClass","card"),t.xp6(8),t.hij(" ",i.property.label," "),t.xp6(4),t.hij("",i.property.p_type," "),t.xp6(4),t.hij("",i.property.size," "),t.xp6(4),t.hij("",t.lcZ(37,57,i.property.market_rent)," "),t.xp6(6),t.lnq(" ",i.property.city,"\xa0\xa0",i.property.state,"\xa0",i.property.zip," "),t.xp6(4),t.hij("",i.property.bed," "),t.xp6(4),t.hij("",i.property.bath," "),t.xp6(4),t.hij("",i.property.p_status," "),t.xp6(5),t.hij("",i.property.company," "),t.xp6(4),t.hij("",i.property.total_rooms," "),t.xp6(4),t.hij("",i.property.built," "),t.xp6(4),t.hij("",i.property.tenant," "),t.xp6(1),t.Q6J("ngIf",i.property.tenant_id>0),t.xp6(2),t.Q6J("ngIf",i.property.tenant_id>0),t.xp6(1),t.Q6J("ngIf",i.property.tenant_id<0),t.xp6(5),t.hij("",i.property.group," "),t.xp6(4),t.hij("",i.property.label2," "),t.xp6(4),t.hij("",i.property.tranche_name," "),t.xp6(4),t.hij(" ",t.lcZ(93,59,i.property.rent)," "),t.xp6(2),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(6),t.Oqu(i.property.description),t.xp6(2),t.Q6J("columnDefs",i.gridCColumns)("rowData",i.gridCData)("getRowHeight",i.getRowHeightA),t.xp6(4),t.Q6J("columnDefs",i.gridBColumns)("rowData",i.gridBData)("getRowHeight",i.getRowHeightA),t.xp6(3),t.Q6J("columnDefs",i.gridAColumns)("rowData",i.gridAData)("getRowHeight",i.getRowHeightA),t.xp6(2),t.Q6J("ngIf",void 0!==i.children.data&&i.children.data.length>0),t.xp6(4),t.AsE(" Last updated by ",i.property.updatedby," on ",i.property.updated," "),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(10),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("ngModel",i.start_date),t.xp6(5),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("ngModel",i.end_date),t.xp6(9),t.Q6J("columnDefs",i.gridWOColumns)("rowData",i.gridWOData),t.xp6(12),t.Q6J("columnDefs",i.gridDocColumns)("rowData",i.gridDocData),t.xp6(2),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view))},directives:[d.gRC,c.O5,d.mTE,d.b6v,d.UiO,d.XIm,d.CWd,d.AH5,d.wWr,v.N8,d.KSw,c.sg,d.JNR,_.Q7,_.JJ,_.On],pipes:[c.H9,c.uU],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]{font-size:14px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}}"]}),a})();const Dn=["staticTabs"];function Nn(a,r){if(1&a&&(t.TgZ(0,"a",64),t._UZ(1,"i",65),t.qZA()),2&a){const e=t.oxw();t.hYB("href","",e.urlPrefix,"property?property_id=",e.property_id,"",t.LSH)}}function On(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.property_id),t.xp6(1),t.hij("",e.label," ")}}function Pn(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_name),t.xp6(1),t.hij("",e.co_value," ")}}function kn(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Sn(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Ln(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.label),t.xp6(1),t.hij("",e.name," ")}}function Jn(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.tranche_id),t.xp6(1),t.hij("",e.tranche_name," ")}}function Rn(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_name),t.xp6(1),t.hij("",e.co_name," ")}}function En(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",18)(1,"label"),t._uU(2,"Purchase"),t.qZA(),t.TgZ(3,"mdb-date-picker",66,67),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Select a date")("ngModel",e.start_date)}}function In(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",18)(1,"label"),t._uU(2,"Sell"),t.qZA(),t.TgZ(3,"mdb-date-picker",66,68),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Select a date")("ngModel",e.end_date)}}function Fn(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Qn(a,r){if(1&a&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.vendor_id),t.xp6(1),t.Oqu(e.name)}}function Hn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",76)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"select",77),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.vendor_id=n}),t.YNc(7,Qn,2,2,"option",15),t.TgZ(8,"option",78),t._uU(9,"Other"),t.qZA()()(),t.TgZ(10,"td")(11,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.account=n}),t.qZA()(),t.TgZ(12,"td")(13,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.reference=n}),t.qZA()(),t.TgZ(14,"td")(15,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.value=n}),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.index),t.xp6(2),t.hij(" ",e.co_value," "),t.xp6(2),t.Q6J("ngModel",e.vendor_id),t.xp6(1),t.Q6J("ngForOf",i.vList),t.xp6(4),t.Q6J("ngModel",e.account),t.xp6(2),t.Q6J("ngModel",e.reference),t.xp6(2),t.Q6J("ngModel",e.value)}}function Yn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",69)(1,"div",4)(2,"div",5)(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th",72),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",73),t._uU(10,"Service"),t.qZA(),t.TgZ(11,"th",73),t._uU(12,"Providor"),t.qZA(),t.TgZ(13,"th",73),t._uU(14,"Account"),t.qZA(),t.TgZ(15,"th",73),t._uU(16,"Reference"),t.qZA(),t.TgZ(17,"th",73),t._uU(18,"Notes"),t.qZA()()(),t.TgZ(19,"tbody",74),t.YNc(20,Hn,16,7,"tr",75),t.qZA()()()()(),t.TgZ(21,"div",48)(22,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("SERVICES")}),t._uU(23,"Save"),t.qZA(),t.TgZ(24,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("SERVICES")}),t._uU(25,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.pServices.data)}}function jn(a,r){if(1&a&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_name),t.xp6(1),t.Oqu(e.co_value)}}function Wn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",76)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.make=n}),t.qZA()(),t.TgZ(7,"td")(8,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.model=n}),t.qZA()(),t.TgZ(9,"td")(10,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.value=n}),t.qZA()(),t.TgZ(11,"td")(12,"mdb-date-picker",66,67),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.start_date=n}),t.qZA()(),t.TgZ(14,"td")(15,"select",81),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.status=n}),t.YNc(16,jn,2,2,"option",15),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.co_value),t.xp6(2),t.Q6J("ngModel",e.make),t.xp6(2),t.Q6J("ngModel",e.model),t.xp6(2),t.Q6J("ngModel",e.value),t.xp6(2),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",e.start_date),t.xp6(3),t.Q6J("ngModel",e.status),t.xp6(1),t.Q6J("ngForOf",i.applianceStatus)}}function Vn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",80)(1,"div",4)(2,"div",5)(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th",72),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",73),t._uU(10,"Appliance"),t.qZA(),t.TgZ(11,"th",73),t._uU(12,"Make"),t.qZA(),t.TgZ(13,"th",73),t._uU(14,"Model"),t.qZA(),t.TgZ(15,"th",73),t._uU(16,"Notes"),t.qZA(),t.TgZ(17,"th",73),t._uU(18,"Start Date"),t.qZA(),t.TgZ(19,"th",73),t._uU(20,"Status"),t.qZA()()(),t.TgZ(21,"tbody",74),t.YNc(22,Wn,17,11,"tr",75),t.qZA()()()()(),t.TgZ(23,"div",48)(24,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("APPLIANCES")}),t._uU(25,"Save"),t.qZA(),t.TgZ(26,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("APPLIANCES")}),t._uU(27,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",e.pAppliances.data)}}function Gn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",76)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.pa_value=n}),t.qZA()()()}if(2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(2),t.hij(" ",e.co_value," "),t.xp6(2),t.Q6J("ngModel",e.pa_value)}}function zn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",76)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.pa_value=n}),t.qZA()()()}if(2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(2),t.hij(" ",e.co_value," "),t.xp6(2),t.Q6J("ngModel",e.pa_value)}}function Bn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",82)(1,"div",4)(2,"div",5)(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th",72),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",73),t._uU(10,"Type"),t.qZA(),t.TgZ(11,"th",73),t._uU(12,"Name of School"),t.qZA()()(),t.TgZ(13,"tbody",74),t.YNc(14,Gn,7,3,"tr",75),t.qZA()()()(),t.TgZ(15,"div",5)(16,"div",70)(17,"table",71)(18,"thead")(19,"tr")(20,"th",72),t._uU(21,"#"),t.qZA(),t.TgZ(22,"th",73),t._uU(23,"Amenity"),t.qZA(),t.TgZ(24,"th",73),t._uU(25,"Details"),t.qZA()()(),t.TgZ(26,"tbody",74),t.YNc(27,zn,7,3,"tr",75),t.qZA()()()()(),t.TgZ(28,"div",48)(29,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("ATTRIBUTES")}),t._uU(30,"Save"),t.qZA(),t.TgZ(31,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("ATTRIBUTES")}),t._uU(32,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.pSchools.data),t.xp6(13),t.Q6J("ngForOf",e.pAmenities.data)}}function Xn(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",76)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.pa_value=n}),t.qZA()()()}if(2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(2),t.hij(" ",e.co_value," "),t.xp6(2),t.Q6J("ngModel",e.pa_value)}}function $n(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",83)(1,"div",4)(2,"div",5)(3,"div",70)(4,"table",71)(5,"thead")(6,"tr")(7,"th",72),t._uU(8,"#"),t.qZA(),t.TgZ(9,"th",73),t._uU(10,"Type"),t.qZA(),t.TgZ(11,"th",73),t._uU(12,"Details"),t.qZA()()(),t.TgZ(13,"tbody",74),t.YNc(14,Xn,7,3,"tr",75),t.qZA()()()()(),t.TgZ(15,"div",48)(16,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("ADMIN")}),t._uU(17,"Save"),t.qZA(),t.TgZ(18,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("ADMIN")}),t._uU(19,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.pAdmin.data)}}let Kn=(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.toastr=s,this.AS=u,this.user=this.AS.currentUserValue,this.urlPrefix="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.property_id=-1,this.not_admin=!0,this.pList=[],this.p_building="1",this.p_floor="1",this.p_side="R",this.p_door="1",this.dataList=[],this.qualifier="NEW",this.queryParams={},this.property={},this.children=[],this.pAmenities=[],this.pSchools=[],this.pAdmin=[],this.pAppliances=[],this.pServices=[],this.pRental=[],this.vList={},this.oProperty={},this.groupList={},this.trancheList={},this.companyList={},this.pkList={},this.applianceStatus={},this.start_date=new Date,this.end_date="",this.ptList={},this.prStatus=this.rd.GetPropertyRentalStatus(),this.psList=this.rd.GetPropertyStatus(),this.stateList=this.rd.GetStates("US")}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.rd.companySubject.subscribe(i=>this.companyList=i),this.rd.trancheSubject.subscribe(i=>this.trancheList=i),this.rd.propertyGroupSubject.subscribe(i=>this.groupList=i),this.rd.parkingLotSubject.subscribe(i=>this.pkList=i),this.rd.vendorSubject.subscribe(i=>this.vList=i),this.rd.propertyTypesSubject.subscribe(i=>this.ptList=i),this.rd.applianceStatusSubject.subscribe(i=>this.applianceStatus=i),console.log("OnInit 1 VENDOR:",this.applianceStatus),("Admin"===this.user.type||"SManager"===this.user.type||"Manager"===this.user.type||"Super"===this.user.type)&&(this.not_admin=!1),this.activeRoute.queryParams.subscribe(i=>{this.activeRoute.queryParamMap.forEach(n=>{n.keys.forEach(o=>this.queryParams[o]=n.get(o))}),this.queryParams.hasOwnProperty("property_id")&&(this.property_id=this.queryParams.property_id,console.log("Property ID:"+this.property_id))}),this.initData(),this.property_id>0?(this.qualifier="UPDATE",this.getInfo(this.property_id)):(this.clearData("PRIMARY"),this.qualifier="NEW"),console.log("Qualifier="+this.qualifier)}initData(){this.getProperties()}getInfo(e){const i={params:{property_id:e,info:"ALL"}};console.log("getInfo:"+JSON.stringify(i)),this.REQ.get("p",{query:JSON.stringify(i)}).subscribe(n=>{if(this.property=n,this.property_id=this.property.property_id,this.oProperty=n,console.log("Property:",this.property),this.property.children&&(this.children=JSON.parse(this.property.children)),this.property.schools&&(this.pSchools=JSON.parse(this.property.schools)),this.property.amenities&&(this.pAmenities=JSON.parse(this.property.amenities)),this.property.appliances&&(this.pAppliances=JSON.parse(this.property.appliances),console.log("Appliances:",this.pAppliances)),this.property.admin&&(this.pAdmin=JSON.parse(this.property.admin),console.log("Admin:",this.pAdmin)),""!=this.property.location){let o=this.property.location.split(",");this.p_floor=o[0].replace("Floor: ",""),this.p_side=o[1].replace("Side: ",""),this.p_door=o[2].replace("Door: ","")}this.property.services&&(this.pServices=JSON.parse(this.property.services)),this.property_id>0&&(this.qualifier="UPDATE"),this.property.rental&&(this.pRental=JSON.parse(this.property.rental).data[0]),this.start_date=this.property.start_date,this.end_date=this.property.end_date},n=>{console.log(n)})}refreshProperty(e){this.getInfo(this.property_id)}saveAS(e){this.property.property_id=-1,this.updateData(e)}updateData(e){this.property.start_date=this.utility.date2ISO(this.start_date),this.end_date&&(this.property.end_date=this.utility.date2ISO(this.end_date));const i=this.property;i.qualifier=e,this.property.location="Floor: "+this.p_floor+", Side: "+this.p_side+", Door: "+this.p_door,"RENTAL"===e?this.property.rental=this.pRental:"ATTRIBUTES"===e?(this.property.amenities=this.pAmenities,this.property.schools=this.pSchools):"APPLIANCES"===e?this.property.appliances=this.pAppliances:"SERVICES"===e?this.property.services=this.pServices:"ADMIN"===e&&(this.property.admin=this.pAdmin),console.log("updateData[",e,"]:",i),this.REQ.post("pu",i).subscribe(n=>{var o=n;console.log("updateData:",o),o.property_id>0&&(this.property_id!=o.property_id?(this.property_id=o.property_id,this.getInfo(this.property_id),this.toastr.success("New Property Created with id: "+this.property_id)):this.toastr.success("Property data updated for : "+this.property_id))},n=>{console.log(n),this.toastr.error("Property data update failed for : "+this.property_id)})}clearData(e){console.log("ClearData:"+this.property.label),this.property_id=-1,this.property.property_id=-1,this.property.parent=1,this.property.label=" ",this.property.label2=" ",this.property.children="",this.property.street="",this.property.unit="",this.property.city="",this.property.state="PA",this.property.zip="",this.property.bed=1,this.property.bath=1,this.property.total_rooms=2,this.property.market_rent=1e3,this.property.rent="",this.property.built=1900,this.property.size="0",this.property.tax_id="",this.property.p_type="MFR - 2 Story",this.property.p_status="RENT READY",this.property.company="",this.property.group="",this.property.status="",this.property.start_date=new Date,this.property.end_date="",this.property.sub_units=1,this.property.description="",this.property.location="",this.qualifier="NEW",document.getElementById("tUnit")}resetData(){console.log("ResetData:"+this.oProperty.label),this.property=this.oProperty,this.property.children&&(this.children=JSON.parse(this.property.children)),this.property.label=this.oProperty.label,this.property.tax_id=this.oProperty.tax_id}getProperties(){this.REQ.get("p","").subscribe(e=>{this.pList=e.data},e=>{console.log(e)})}loadProperty(e){e>0&&this.router.navigate([this.user.navigation+"/property"],{queryParams:{property_id:e}})}initLabels(){if(void 0===this.property.label||this.property.label.length<4){var e=this.property.street;e.length>3&&(void 0===this.property.unit?console.log(" unit not defined yet.. "):e=this.property.street+" # "+this.property.unit,this.property.label=e,this.property.label2=e)}else console.log("Label already set, no update will be done")}editProperty(e){e>0&&this.router.navigate([this.user.navigation+"/propertye"],{queryParams:{property_id:e}})}newProperty(){this.clearData("PRIMARY"),this.property_id=-1,this.property.property_id=this.property_id,this.property.parent="0"}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(d.klp),t.Y36(b.$))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-property-e"]],viewQuery:function(e,i){if(1&e&&t.Gf(Dn,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:213,vars:88,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[3,"href",4,"ngIf"],[1,"card-body"],[1,"row"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass"],["statictabs",""],["heading","Details"],[1,"card-body","form-group"],[1,"col-lg-8","col-md-6","col-sm-12"],[1,"md-form","mb-2"],["placeholder","Choose One","optionHeight","32",3,"disabled","label","ngModel","dropdownClass","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","col-sm-12"],["placeholder","Choose One","label","Type","optionHeight","32","optionHeight","32",3,"disabled","ngModel","dropdownClass","ngModelChange"],[1,"col-lg-3","col-md-6","col-sm-12"],["mdbInput","","name","street","type","text","value"," ","required","",1,"form-control",3,"disabled","ngModel","ngModelChange","change"],[1,"col-lg-2","col-md-6","col-sm-12"],["mdbInput","","name","unit","type","text","value","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["mdbInput","","name","city","type","text","value"," ","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["placeholder","Choose One","label","State","optionHeight","35",3,"disabled","ngModel","ngModelChange"],["mdbInput","","name","size","type","text","value","","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["mdbInput","","name","label","type","text","value","","placeholder","st # unit","requuired","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["mdbInput","","name","pd","placeholder","street # unit","type","text","value","1",1,"form-control",3,"disabled","ngModel","ngModelChange"],["placeholder","Choose One","label","Status","optionHeight","32",3,"disabled","ngModel","dropdownClass","ngModelChange"],["mdbInput","","name","mrent","type","number","value","1","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-2","col-md-4","col-sm-12"],["mdbInput","","label","Total Rooms","name","total_rooms","type","number","value","1",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","beds","type","number","value","1",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","baths","type","number","value","1",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","size","type","text","value","1",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","pd","type","text","value","1",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"md-form","mb-1"],["type","text","id","formDD","mdbInput","",1,"md-textarea","md-textarea-auto","form-control",3,"ngModel","ngModelChange"],["for","formDD"],["mdbInput","","name","pd","type","text","value","R",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-3","col-md-4","col-sm-12"],[1,"md-form"],["name","company","label","Company","id","companySel","optionHeight","32",3,"disabled","ngModel","dropdownClass","ngModelChange"],["label","Tranche","id","groupSel","optionHeight","32",3,"disabled","ngModel","dropdownClass","ngModelChange"],["label","Group","id","groupSel","optionHeight","32",3,"disabled","ngModel","dropdownClass","ngModelChange"],["mdbInput","","name","street","type","text","value","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["mdbInput","","name","built","type","number","value","1900",1,"form-control",3,"ngModel","ngModelChange"],["class","col-lg-3 col-md-6 col-sm-12",4,"ngIf"],[1,"card-footer"],["mdbBtn","","color","info","rounded","true","type","button",3,"click"],["mdbBtn","","color","default","rounded","true","type","button",3,"click"],["mdbBtn","","type","button",1,"btn","btn-link",2,"float","right",3,"click"],["heading","Rental"],["mdbInput","","name","move_in","type","text","value","NA",1,"form-control",3,"disabled","ngModel","ngModelChange"],["mdbInput","","name","move_in","type","number","value","0.0",1,"form-control",3,"disabled","ngModel","ngModelChange"],["label","Rental Status","id","prsSel","optionHeight","32",3,"disabled","ngModel","dropdownClass","ngModelChange"],["mdbInput","","name","zillow","type","text","value","NA",1,"form-control",3,"disabled","ngModel","ngModelChange"],["mdbInput","","name","apartments","type","text","value","NA",1,"form-control",3,"disabled","ngModel","ngModelChange"],["mdbInput","","name","trulia","type","text","value","NA",1,"form-control",3,"disabled","ngModel","ngModelChange"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",3,"click"],["heading","Services",4,"ngIf"],["heading","Appliances",4,"ngIf"],["heading","Attributes",4,"ngIf"],["heading","Admin",4,"ngIf"],[3,"href"],[1,"fas","fa-home","text-white"],["required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["ed",""],["heading","Services"],["id","table",1,"col-12","table-editable"],["id","tableAttributes","name","tableAttributes",1,"table","table-responsive-sm",2,"margin-bottom","1px"],["scope","col"],["scope","col",1,"text-center"],["id","tbA"],["id","tARow",4,"ngFor","ngForOf"],["id","tARow"],["name","tx_vendor","id","vSelect","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],["value","Other"],["mdbInput","","name","size","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["heading","Appliances"],["name","appl_st","id","applSt","optionHeight","30",1,"form-control",3,"ngModel","ngModelChange"],["heading","Attributes"],["heading","Admin"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t.YNc(5,Nn,2,2,"a",3),t._uU(6),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"mdb-tabset",7,8)(12,"mdb-tab",9)(13,"div",10)(14,"div",5)(15,"div",11)(16,"div",12)(17,"mdb-select-2",13),t.NdJ("ngModelChange",function(o){return i.property.parent=o}),t.TgZ(18,"mdb-select-option",14),t._uU(19,"Self"),t.qZA(),t.YNc(20,On,2,2,"mdb-select-option",15),t.qZA()()(),t.TgZ(21,"div",16)(22,"div",12)(23,"mdb-select-2",17),t.NdJ("ngModelChange",function(o){return i.property.p_type=o}),t.YNc(24,Pn,2,2,"mdb-select-option",15),t.qZA()()()(),t.TgZ(25,"div",5)(26,"div",18)(27,"div",12)(28,"label"),t._uU(29,"Street "),t.qZA(),t.TgZ(30,"input",19),t.NdJ("ngModelChange",function(o){return i.property.street=o})("change",function(){return i.initLabels()}),t.qZA()()(),t.TgZ(31,"div",20)(32,"div",12)(33,"label"),t._uU(34,"Apartment"),t.qZA(),t.TgZ(35,"input",21),t.NdJ("ngModelChange",function(o){return i.property.unit=o}),t.qZA()()(),t.TgZ(36,"div",18)(37,"div",12)(38,"label"),t._uU(39," City "),t.qZA(),t.TgZ(40,"input",22),t.NdJ("ngModelChange",function(o){return i.property.city=o}),t.qZA()()(),t.TgZ(41,"div",20)(42,"div",12)(43,"mdb-select-2",23),t.NdJ("ngModelChange",function(o){return i.property.state=o}),t.YNc(44,kn,2,2,"mdb-select-option",15),t.ALo(45,"keyvalue"),t.qZA()()(),t.TgZ(46,"div",20)(47,"div",12)(48,"label"),t._uU(49," ZIP "),t.qZA(),t.TgZ(50,"input",24),t.NdJ("ngModelChange",function(o){return i.property.zip=o}),t.qZA()()()(),t.TgZ(51,"div",5)(52,"div",16)(53,"div",12)(54,"label"),t._uU(55,"Short Label"),t.qZA(),t.TgZ(56,"input",25),t.NdJ("ngModelChange",function(o){return i.property.label=o}),t.qZA()()(),t.TgZ(57,"div",16)(58,"div",12)(59,"label"),t._uU(60,"Alternate Label"),t.qZA(),t.TgZ(61,"input",26),t.NdJ("ngModelChange",function(o){return i.property.label2=o}),t.qZA()()(),t.TgZ(62,"div",20)(63,"div",12)(64,"mdb-select-2",27),t.NdJ("ngModelChange",function(o){return i.property.p_status=o}),t.YNc(65,Sn,2,2,"mdb-select-option",15),t.ALo(66,"keyvalue"),t.qZA()()(),t.TgZ(67,"div",20)(68,"div",12)(69,"label"),t._uU(70,"Market Rent "),t.qZA(),t.TgZ(71,"input",28),t.NdJ("ngModelChange",function(o){return i.property.market_rent=o}),t.qZA()()()(),t.TgZ(72,"div",5)(73,"div",29)(74,"div",12)(75,"label"),t._uU(76,"Total Rooms"),t.qZA(),t.TgZ(77,"input",30),t.NdJ("ngModelChange",function(o){return i.property.total_rooms=o}),t.qZA()()(),t.TgZ(78,"div",29)(79,"div",12)(80,"input",31),t.NdJ("ngModelChange",function(o){return i.property.bed=o}),t.qZA(),t.TgZ(81,"label"),t._uU(82,"Bedrooms"),t.qZA()()(),t.TgZ(83,"div",29)(84,"div",12)(85,"label"),t._uU(86,"Baths"),t.qZA(),t.TgZ(87,"input",32),t.NdJ("ngModelChange",function(o){return i.property.bath=o}),t.qZA()()(),t.TgZ(88,"div",29)(89,"div",12)(90,"label"),t._uU(91,"Size"),t.qZA(),t.TgZ(92,"input",33),t.NdJ("ngModelChange",function(o){return i.property.size=o}),t.qZA()()(),t.TgZ(93,"div",29)(94,"div",12)(95,"label"),t._uU(96,"Sub Units"),t.qZA(),t.TgZ(97,"input",34),t.NdJ("ngModelChange",function(o){return i.property.sub_units=o}),t.qZA()()()(),t.TgZ(98,"div",5)(99,"div",35)(100,"div",36)(101,"textarea",37),t.NdJ("ngModelChange",function(o){return i.property.description=o}),t.qZA(),t.TgZ(102,"label",38),t._uU(103,"Description"),t.qZA()()()(),t.TgZ(104,"div",5)(105,"div",29),t._uU(106,"Location"),t.qZA()(),t.TgZ(107,"div",5)(108,"div",29)(109,"div",12)(110,"label"),t._uU(111,"Floor (1-4)"),t.qZA(),t.TgZ(112,"input",34),t.NdJ("ngModelChange",function(o){return i.p_floor=o}),t.qZA()()(),t.TgZ(113,"div",29)(114,"div",12)(115,"label"),t._uU(116,"Side (R or L)"),t.qZA(),t.TgZ(117,"input",39),t.NdJ("ngModelChange",function(o){return i.p_side=o}),t.qZA()()(),t.TgZ(118,"div",29)(119,"div",12)(120,"label"),t._uU(121,"Door (1-4)"),t.qZA(),t.TgZ(122,"input",34),t.NdJ("ngModelChange",function(o){return i.p_door=o}),t.qZA()()()(),t.TgZ(123,"div",5)(124,"div",40)(125,"div",41)(126,"mdb-select-2",42),t.NdJ("ngModelChange",function(o){return i.property.company=o}),t.YNc(127,Ln,2,2,"mdb-select-option",15),t.qZA()()(),t.TgZ(128,"div",40)(129,"div",36)(130,"mdb-select-2",43),t.NdJ("ngModelChange",function(o){return i.property.tranche_id=o}),t.YNc(131,Jn,2,2,"mdb-select-option",15),t.qZA()()(),t.TgZ(132,"div",40)(133,"div",36)(134,"mdb-select-2",44),t.NdJ("ngModelChange",function(o){return i.property.group=o}),t.YNc(135,Rn,2,2,"mdb-select-option",15),t.qZA()()()(),t.TgZ(136,"div",5)(137,"div",18)(138,"div",36)(139,"label"),t._uU(140,"Tax Parcel "),t.qZA(),t.TgZ(141,"input",45),t.NdJ("ngModelChange",function(o){return i.property.tax_id=o}),t.qZA()()(),t.TgZ(142,"div",18)(143,"div",12)(144,"label"),t._uU(145," Built "),t.qZA(),t.TgZ(146,"input",46),t.NdJ("ngModelChange",function(o){return i.property.built=o}),t.qZA()()(),t.YNc(147,En,5,4,"div",47),t.YNc(148,In,5,4,"div",47),t.qZA()(),t.TgZ(149,"div",48)(150,"button",49),t.NdJ("click",function(){return i.updateData("PRIMARY")}),t._uU(151," Save "),t.qZA(),t.TgZ(152,"button",50),t.NdJ("click",function(){return i.saveAS("PRIMARY")}),t._uU(153," Save As "),t.qZA(),t.TgZ(154,"button",51),t.NdJ("click",function(){return i.clearData("PRIMARY")}),t._uU(155," Clear "),t.qZA()()(),t.TgZ(156,"mdb-tab",52)(157,"div",4)(158,"div",5)(159,"div",16)(160,"div",12)(161,"label"),t._uU(162,"Availability"),t.qZA(),t.TgZ(163,"input",53),t.NdJ("ngModelChange",function(o){return i.pRental.move_in=o}),t.qZA()()(),t.TgZ(164,"div",16)(165,"div",12)(166,"label"),t._uU(167,"Market Rent"),t.qZA(),t.TgZ(168,"input",54),t.NdJ("ngModelChange",function(o){return i.pRental.market_rent=o}),t.qZA()()(),t.TgZ(169,"div",16)(170,"div",12)(171,"mdb-select-2",55),t.NdJ("ngModelChange",function(o){return i.pRental.pr_status=o}),t.YNc(172,Fn,2,2,"mdb-select-option",15),t.ALo(173,"keyvalue"),t.qZA()()()(),t.TgZ(174,"div",5)(175,"div",35)(176,"div",12)(177,"textarea",37),t.NdJ("ngModelChange",function(o){return i.pRental.special=o}),t.qZA(),t.TgZ(178,"label",38),t._uU(179,"Special"),t.qZA()()()(),t.TgZ(180,"div",5)(181,"div",35)(182,"div",12)(183,"textarea",37),t.NdJ("ngModelChange",function(o){return i.pRental.description=o}),t.qZA(),t.TgZ(184,"label",38),t._uU(185,"Marketing Description"),t.qZA()()()(),t.TgZ(186,"div",5)(187,"div",35)(188,"div",12)(189,"label"),t._uU(190,"Zillow"),t.qZA(),t.TgZ(191,"input",56),t.NdJ("ngModelChange",function(o){return i.pRental.zillow=o}),t.qZA()()()(),t.TgZ(192,"div",5)(193,"div",35)(194,"div",12)(195,"label"),t._uU(196,"Apartments.com"),t.qZA(),t.TgZ(197,"input",57),t.NdJ("ngModelChange",function(o){return i.pRental.apartments=o}),t.qZA()()()(),t.TgZ(198,"div",5)(199,"div",35)(200,"div",12)(201,"label"),t._uU(202,"Trulia"),t.qZA(),t.TgZ(203,"input",58),t.NdJ("ngModelChange",function(o){return i.pRental.trulia=o}),t.qZA()()()()(),t.TgZ(204,"div",48)(205,"button",59),t.NdJ("click",function(){return i.updateData("RENTAL")}),t._uU(206,"Save"),t.qZA(),t.TgZ(207,"button",51),t.NdJ("click",function(){return i.clearData("RENTAL")}),t._uU(208,"Clear"),t.qZA()()(),t.YNc(209,Yn,26,1,"mdb-tab",60),t.YNc(210,Vn,28,1,"mdb-tab",61),t.YNc(211,Bn,33,2,"mdb-tab",62),t.YNc(212,$n,20,1,"mdb-tab",63),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",i.property_id>0),t.xp6(1),t.AsE(" \xa0",i.property_id,"\xa0",i.property.label," "),t.xp6(4),t.Q6J("buttonClass","nav md-pills border-bottom")("justified",!0)("contentClass","card"),t.xp6(7),t.MGl("label","Parent \xa0[ ",i.property.parent," ]"),t.Q6J("disabled",i.not_admin)("ngModel",i.property.parent)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("ngForOf",i.pList),t.xp6(3),t.Q6J("disabled",i.not_admin)("ngModel",i.property.p_type)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngForOf",i.ptList),t.xp6(6),t.Q6J("disabled",i.not_admin)("ngModel",i.property.street),t.xp6(5),t.Q6J("disabled",i.not_admin)("ngModel",i.property.unit),t.xp6(5),t.Q6J("disabled",i.not_admin)("ngModel",i.property.city),t.xp6(3),t.Q6J("disabled",i.not_admin)("ngModel",i.property.state),t.xp6(1),t.Q6J("ngForOf",t.lcZ(45,82,i.stateList)),t.xp6(6),t.Q6J("disabled",i.not_admin)("ngModel",i.property.zip),t.xp6(6),t.Q6J("disabled",i.not_admin)("ngModel",i.property.label),t.xp6(5),t.Q6J("disabled",i.not_admin)("ngModel",i.property.label2),t.xp6(3),t.Q6J("disabled",i.not_admin)("ngModel",i.property.p_status)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngForOf",t.lcZ(66,84,i.psList)),t.xp6(6),t.Q6J("ngModel",i.property.market_rent),t.xp6(6),t.Q6J("ngModel",i.property.total_rooms),t.xp6(3),t.Q6J("ngModel",i.property.bed),t.xp6(7),t.Q6J("ngModel",i.property.bath),t.xp6(5),t.Q6J("ngModel",i.property.size),t.xp6(5),t.Q6J("ngModel",i.property.sub_units),t.xp6(4),t.Q6J("ngModel",i.property.description),t.xp6(11),t.Q6J("ngModel",i.p_floor),t.xp6(5),t.Q6J("ngModel",i.p_side),t.xp6(5),t.Q6J("ngModel",i.p_door),t.xp6(4),t.Q6J("disabled",i.not_admin)("ngModel",i.property.company)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngForOf",i.companyList),t.xp6(3),t.Q6J("disabled",i.not_admin)("ngModel",i.property.tranche_id)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngForOf",i.trancheList),t.xp6(3),t.Q6J("disabled",i.not_admin)("ngModel",i.property.group)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngForOf",i.groupList),t.xp6(6),t.Q6J("disabled",i.not_admin)("ngModel",i.property.tax_id),t.xp6(5),t.Q6J("ngModel",i.property.built),t.xp6(1),t.Q6J("ngIf",!i.not_admin),t.xp6(1),t.Q6J("ngIf",!i.not_admin),t.xp6(15),t.Q6J("disabled",i.not_admin)("ngModel",i.pRental.move_in),t.xp6(5),t.Q6J("disabled",i.not_admin)("ngModel",i.pRental.market_rent),t.xp6(3),t.Q6J("disabled",i.not_admin)("ngModel",i.pRental.pr_status)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngForOf",t.lcZ(173,86,i.prStatus)),t.xp6(5),t.Q6J("ngModel",i.pRental.special),t.xp6(6),t.Q6J("ngModel",i.pRental.description),t.xp6(8),t.Q6J("disabled",i.not_admin)("ngModel",i.pRental.zillow),t.xp6(6),t.Q6J("disabled",i.not_admin)("ngModel",i.pRental.apartments),t.xp6(6),t.Q6J("disabled",i.not_admin)("ngModel",i.pRental.trulia),t.xp6(6),t.Q6J("ngIf",i.property_id>0),t.xp6(1),t.Q6J("ngIf",i.property_id>0),t.xp6(1),t.Q6J("ngIf",i.property_id>0),t.xp6(1),t.Q6J("ngIf",i.property_id>0))},directives:[d.gRC,c.O5,d.AH5,d.wWr,d.lPY,_.JJ,_.On,d.x8v,c.sg,_.Fj,d.HqI,_.Q7,_.wV,d.JNR,d.mTE,d.b6v,_.EJ,_.YN,_.Kr],pipes:[c.Nd],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}}"]}),a})();const to=["agGrid"];function eo(a,r){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function io(a,r){if(1&a&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.co_name),t.xp6(1),t.Oqu(e.co_value)}}function no(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",29)(1,"div",7)(2,"label"),t._uU(3,"Status"),t.qZA(),t.TgZ(4,"select",30),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tenant_status=n})("ngModelChange",function(){return t.CHM(e),t.oxw().refreshReport("REPORT")}),t.YNc(5,io,2,2,"option",9),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.tenant_status),t.xp6(1),t.Q6J("ngForOf",e.tStatusList)}}function oo(a,r){if(1&a&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.label),t.xp6(1),t.Oqu(e.name)}}function ao(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",29)(1,"div",7)(2,"label"),t._uU(3,"Company"),t.qZA(),t.TgZ(4,"select",31),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().company_id=n})("ngModelChange",function(){return t.CHM(e),t.oxw().refreshReport("COMPANY")}),t.TgZ(5,"option",32),t._uU(6,"ALL"),t.qZA(),t.YNc(7,oo,2,2,"option",33),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.company_id),t.xp6(3),t.Q6J("ngForOf",e.companyList)}}function ro(a,r){if(1&a&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function lo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",35)(1,"div",7)(2,"label"),t._uU(3,"Asset"),t.qZA(),t.TgZ(4,"select",36),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tranche_id=n})("ngModelChange",function(){return t.CHM(e),t.oxw().refreshReport("TRANCHE")}),t.TgZ(5,"option",32),t._uU(6,"ALL"),t.qZA(),t.YNc(7,ro,2,2,"option",33),t.ALo(8,"keyvalue"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.tranche_id),t.xp6(3),t.Q6J("ngForOf",t.lcZ(8,2,e.myTrancheList))}}function so(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.addNewItem(n.report)}),t._UZ(1,"mdb-icon",37),t.qZA()}}function _o(a,r){if(1&a&&(t.TgZ(0,"div",38)(1,"div",6)(2,"label"),t._uU(3,"Market Rent"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"currency"),t.qZA()(),t.TgZ(7,"div",6)(8,"label"),t._uU(9,"Current Rent"),t.qZA(),t.TgZ(10,"div",39),t._uU(11),t.ALo(12,"currency"),t.qZA()(),t.TgZ(13,"div",29)(14,"label"),t._uU(15,"Security Deposit (A/R)"),t.qZA(),t.TgZ(16,"div",40),t._uU(17),t.ALo(18,"currency"),t.ALo(19,"currency"),t.qZA()(),t.TgZ(20,"div",29)(21,"label"),t._uU(22,"Occupancy"),t.qZA(),t.TgZ(23,"div"),t._uU(24),t.ALo(25,"percent"),t.qZA()(),t.TgZ(26,"div",6)(27,"label"),t._uU(28,"Balance"),t.qZA(),t.TgZ(29,"div",39),t._uU(30),t.ALo(31,"currency"),t.qZA()()()),2&a){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,8,e.financial.total_market_rent)),t.xp6(6),t.Oqu(t.lcZ(12,10,e.financial.total_rent)),t.xp6(6),t.AsE("",t.lcZ(18,12,e.financial.total_deposit_a)," / ",t.lcZ(19,14,e.financial.total_deposit),""),t.xp6(7),t.lnq("",t.lcZ(25,16,e.financial.occupancy)," [ ",e.financial.occupied," / ",e.financial.total_units," ]"),t.xp6(6),t.hij(" ",t.lcZ(31,18,e.financial.balance),"")}}function co(a,r){1&a&&t.GkF(0)}const E=function(a){return{list:a}};function uo(a,r){if(1&a&&(t.TgZ(0,"div",41)(1,"div",42)(2,"span"),t._uU(3,"ID"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"span"),t._uU(7,"Label"),t.qZA(),t.TgZ(8,"span"),t._uU(9,"Type"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Parent"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"Link"),t.qZA()(),t.TgZ(14,"ul"),t.YNc(15,co,1,0,"ng-container",43),t.qZA()()),2&a){const e=t.oxw(),i=t.MAs(34);t.xp6(15),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,E,e.cList))}}function po(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"i",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).showHideChildren(n.category_id,n.name)}),t.qZA()}if(2&a){const e=t.oxw().$implicit,i=t.oxw(2);t.Tol(i.toggleData[e.category_id]?"fa-minus-square fa-sm far":"fa-plus-square fa-sm far")}}function ho(a,r){1&a&&t.GkF(0)}function go(a,r){if(1&a&&(t.TgZ(0,"ul"),t.YNc(1,ho,1,0,"ng-container",43),t.qZA()),2&a){const e=t.oxw().$implicit;t.oxw(2);const i=t.MAs(34);t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",t.VKq(2,E,e.children))}}function mo(a,r){if(1&a&&(t.TgZ(0,"li")(1,"span"),t.YNc(2,po,1,3,"i",45),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"span"),t._uU(11),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.qZA(),t.YNc(14,go,2,4,"ul",46),t.qZA()),2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Tol(i.toggleData[e.category_id]?"toggleData":""),t.xp6(1),t.Q6J("ngIf",e.children.length>0),t.xp6(1),t.hij(" ",e.category_id," "),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.label," "),t.xp6(2),t.hij(" ",e.type," "),t.xp6(2),t.hij(" ",e.parent," "),t.xp6(2),t.hij(" ",e.url," "),t.xp6(1),t.Q6J("ngIf",e.children.length>0&&i.toggleData[e.category_id])}}function fo(a,r){1&a&&t.YNc(0,mo,15,11,"li",44),2&a&&t.Q6J("ngForOf",r.list)}function bo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"ag-grid-angular",48,49),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n)})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n)})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n)}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("columnDefs",e.grid1Columns)("rowData",e.grid1Data)}}function yo(a,r){1&a&&t._UZ(0,"img",50)}let Co=(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.rd=i,this.activeRoute=n,this.router=o,this.AS=l,this.toastr=s,this.utility=u,this.authority="Report",this.user=this.AS.currentUserValue,this.urlPrefix="",this.view=this.user.type,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()+1},this.reportGenTime=new Date,this.start_date=new Date,this.report_title="Report",this.report="TENANT",this.queryParams={},this.trancheList=[],this.myTrancheList={},this.tranche_id=-1,this.showCompany=!0,this.showTranche=!0,this.showTenantStatus=!0,this.gridReadyStatus=!0,this.pkList=[],this.pList=[],this.cList=[],this.tList=[],this.tnList=[],this.vList=[],this.iList=[],this.toggleData={},this.psList=this.rd.GetPropertyStatus(),this.companyList={},this.company_id="",this.financial={},this.reportList={},this.tStatusList=[],this.tenant_status="",this.schema="",this.grid1Columns=[],this.grid1Data=[],this.grid1Options={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0}},this.gridCColumns=[{headerName:"ID",width:70,field:"category_id",filter:"agNumberColumnFilter"},{headerName:"Name",field:"name",sort:"ASCE",filter:!0},{headerName:"Label",field:"label",filter:!0},{headerName:"Type",field:"type",filter:!0},{headerName:"parent",width:70,field:"parent"},{headerName:"Link",width:10,field:"url"}],this.gridPColumns=[{headerName:"ID",width:70,colId:"p1",field:"property_id",filter:"agNumberColumnFilter"},{headerName:"Company",width:100,field:"company",filter:!0},{headerName:"Group",width:70,field:"group",filter:!0},{headerName:"Label",field:"label",sort:"ASCE",filter:!0},{headerName:"City",width:125,field:"city",filter:!0},{headerName:"State",width:50,field:"state",filter:!0},{headerName:"ZIP",width:65,field:"zip",filter:!0},{headerName:"Status",field:"p_status",filter:!0},{headerName:"Market Rent",field:"market_rent",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Bed",colId:"bed",field:"bed",filter:"agNumberColumnFilter"},{headerName:"Bath",colId:"bath",field:"bath",filter:"agNumberColumnFilter"},{headerName:"Link",width:10,field:"url",filter:!0,hide:!0}],this.gridTColumns=[{headerName:"ID",width:70,colId:"p1",field:"tenant_id",filter:"agNumberColumnFilter"},{headerName:"First",field:"first_name",filter:!0},{headerName:"Last",field:"last_name",filter:!0},{headerName:"Phone",field:"phone",sort:"ASCE",filter:!0},{headerName:"Email",field:"email"},{headerName:"Status",field:"t_status"},{headerName:"Link",width:10,field:"url"}],this.gridTPColumns=[{headerName:"ID",width:70,colId:"p1",field:"tenant_id",filter:"agNumberColumnFilter"},{headerName:"First",field:"first_name",filter:!0},{headerName:"Last",field:"last_name",filter:!0},{headerName:"Phone",field:"phone",sort:"ASCE",filter:!0},{headerName:"Email",field:"email"},{headerName:"Tenant Status",field:"t_status"},{headerName:"Pet Role",field:"pet_role",sortable:!0,filter:!0},{headerName:"Pet Type",field:"pet_type",sortable:!0,filter:!0},{headerName:"Breed",field:"breed",sortable:!0,filter:!0},{headerName:"Weight",field:"weight",sortable:!0,filter:!0},{headerName:"Insurance",field:"insurance",sortable:!0,filter:!0},{headerName:"Vaccination",field:"vaccination",sortable:!0,filter:!0},{headerName:"Monthly",field:"monthly",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Setup",field:"setup_charge",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Expiry",field:"expiry",sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Notes",field:"notes",sortable:!0,filter:!0},{headerName:"Link",width:10,field:"url"}],this.gridTVColumns=[{headerName:"ID",width:70,colId:"p1",field:"tenant_id",filter:"agNumberColumnFilter"},{headerName:"First",field:"first_name",filter:!0},{headerName:"Last",field:"last_name",filter:!0},{headerName:"Phone",field:"phone",sort:"ASCE",filter:!0},{headerName:"Email",field:"email",sortable:!0,filter:!0},{headerName:"Status",field:"t_status",sortable:!0,filter:!0},{headerName:"Make",field:"make",sortable:!0,filter:!0},{headerName:"Model",field:"model",sortable:!0,filter:!0},{headerName:"Color",field:"color",sortable:!0,filter:!0},{headerName:"State",field:"state",sortable:!0,filter:!0},{headerName:"Tag",field:"tag",sortable:!0,filter:!0},{headerName:"Monthly",field:"monthly",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Setup",field:"setup_charge",sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Parking Lot",field:"parking_lot"},{headerName:"Parking Tag",field:"parking_tag_id"},{headerName:"Expiry",field:"expiry",sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Link",width:10,field:"url"}],this.gridTCColumns=[{headerName:"ID",width:70,colId:"p1",field:"property_id",filter:"agNumberColumnFilter"},{headerName:"Label",field:"label",filter:!0,resizable:!0},{headerName:"City",width:125,field:"city"},{headerName:"State",width:50,field:"state",hide:!0},{headerName:"Status",width:140,field:"p_status",cellStyle:this.tenancyStatusStyle},{headerName:"ZIP",width:65,field:"zip",hide:!0},{headerName:"First",field:"first_name",filter:!0},{headerName:"Last",field:"last_name",filter:!0},{headerName:"Email",field:"email"},{headerName:"From Lease",width:130,field:"lease_start_date",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Lease To",width:130,field:"lease_end_date",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Market Rent",field:"market_rent",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Rent",field:"rent",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Deposit A",field:"deposit_a",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Company",width:100,field:"company",filter:!0,hide:!0},{headerName:"Group",width:70,field:"p_group",hide:!0},{headerName:"Agency",width:120,field:"aa_name"},{headerName:"Amount",width:120,field:"aa_value"},{headerName:"tenancy_id",field:"tenancy_id",hide:!0},{headerName:"property_id",field:"property_id",hide:!0},{headerName:"tenant_id",field:"tenant_id",hide:!0},{headerName:"Link",width:10,field:"url",hide:!0}],this.gridRRColumns=[{headerName:"ID",width:70,colId:"p1",field:"property_id",sort:"ASCE",filter:"agNumberColumnFilter"},{headerName:"Label",field:"label",filter:!0,resizable:!0},{headerName:"City",width:125,field:"city",hide:!0},{headerName:"State",width:50,field:"state",hide:!0},{headerName:"Status",width:140,field:"p_status",cellStyle:this.tenancyStatusStyle},{headerName:"First",field:"first_name",filter:!0},{headerName:"Last",field:"last_name",filter:!0},{headerName:"From Lease",width:130,field:"lease_start_date",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Lease To",width:130,field:"lease_end_date",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Market Rent",field:"market_rent",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Rent",field:"rent",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Deposit R",field:"deposit",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Deposit A",field:"deposit_a",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"Balance",field:"balance",filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,cellStyle:this.utility.agNumberCellStyle},{headerName:"tenancy_id",field:"tenancy_id",hide:!0},{headerName:"property_id",field:"property_id",hide:!0},{headerName:"tenant_id",field:"tenant_id",hide:!0},{headerName:"Link",width:10,field:"url"}],this.gridVColumns=[{headerName:"ID",width:70,colId:"p1",field:"vendor_id",filter:"agNumberColumnFilter"},{headerName:"Name",field:"name",filter:!0},{headerName:"Contact",field:"contact",filter:!0},{headerName:"Phone",field:"phone",sort:"ASCE",filter:!0},{headerName:"Email",field:"email"},{headerName:"Services",field:"services"},{headerName:"Street",width:125,field:"address1"},{headerName:"City",width:125,field:"city"},{headerName:"State",width:50,field:"state"},{headerName:"ZIP",width:65,field:"zip"},{headerName:"Status",width:30,field:"status"},{headerName:"Link",width:10,field:"url"}],this.gridIColumns=[{headerName:"ID",width:70,colId:"p1",field:"investor_id",filter:"agNumberColumnFilter"},{headerName:"Name",field:"name",filter:!0},{headerName:"Contact",field:"contact",filter:!0},{headerName:"Phone",field:"phone",sort:"ASCE",filter:!0},{headerName:"Email",field:"email"},{headerName:"Street",width:125,field:"address1"},{headerName:"City",width:125,field:"city"},{headerName:"State",width:50,field:"state"},{headerName:"ZIP",width:65,field:"zip"},{headerName:"Status",width:30,field:"status"},{headerName:"Link",width:10,field:"url"}]}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.activeRoute.queryParams.subscribe(i=>{this.activeRoute.queryParamMap.forEach(n=>{n.keys.forEach(o=>this.queryParams[o]=n.get(o))}),this.queryParams.hasOwnProperty("report")&&(this.report=this.queryParams.report)}),this.rd.companySubject.subscribe(i=>this.companyList=i),this.rd.trancheSubject.subscribe(i=>this.trancheList=i),this.rd.parkingLotSubject.subscribe(i=>this.pkList=i),this.rd.tenantStatusSubject.subscribe(i=>this.tStatusList=i),this.reportList.CATEGORY="Category",this.reportList.PROPERTY="Property",this.reportList.RENTROLL="Rent Roll",this.reportList.TENANCY="Tenancy",("Admin"===this.view||"SManager"===this.view)&&(this.reportList.INVESTOR="Investor"),("Admin"===this.view||"SManager"===this.view||"Manager"===this.view||"Super"===this.view)&&(this.reportList.TENANT="Tenant",this.reportList["TENANT-PETS"]="Tenant Pets",this.reportList["TENANT-VEHICLES"]="Tenant Vehicles",this.reportList.VENDOR="Vendor"),this.refreshReport("")}refreshReport(e){console.log("refreshReport:",this.report,e),this.grid1Data=[],"PROPERTY"==this.report?(this.showCompany=!0,this.showTranche=!0,this.showTenantStatus=!1,this.getProperties(),this.report_title="Properties Report"):"CATEGORY"==this.report?(this.showCompany=!1,this.showTranche=!1,this.showTenantStatus=!1,this.getCategories(),this.report_title="Categories Report"):"TENANT"==this.report?(this.getTenants("TENANT"),this.showCompany=!1,this.showTranche=!1,this.showTenantStatus=!0,this.report_title="Tenants Report"):"TENANT-PETS"==this.report?(this.showCompany=!1,this.showTranche=!1,this.showTenantStatus=!0,this.getTenants("PET"),this.report_title="Tenants Pet Report"):"TENANT-VEHICLES"==this.report?(this.getTenants("VEHICLES"),this.showCompany=!1,this.showTranche=!1,this.showTenantStatus=!0,this.report_title="Tenants Pet Report"):"TENANCY"==this.report?(this.showCompany=!0,this.showTranche=!0,this.showTenantStatus=!1,this.getTenancies(this.gridTCColumns),this.report_title="Tenancy Report"):"RENTROLL"==this.report?(this.showCompany=!0,this.showTranche=!0,this.showTenantStatus=!1,this.getTenancies(this.gridRRColumns),this.report_title="Rentroll Report"):"VENDOR"==this.report?(this.showCompany=!1,this.showTranche=!1,this.showTenantStatus=!1,this.getVendors(),this.report_title="Vendors Report"):"INVESTOR"==this.report&&(this.showCompany=!1,this.showTranche=!1,this.showTenantStatus=!1,this.getInvestors(),this.report_title="Investors Report"),"COMPANY"===e&&this.updateTranche(),this.reportGenTime=new Date}getInvestors(){if(console.log("getInvestors: enering:",this.view),this.gridReadyStatus=!1,"Admin"!==this.view&&"SManager"!==this.view)return!1;let e={params:{company:this.company_id,report:this.report},usage:{authority:this.authority,sub_authority:"Investor",operation:"LIST",data:"NA"}};this.grid1Columns=this.gridIColumns,this.REQ.get("investor/list",{query:JSON.stringify(e)}).subscribe(i=>{if(this.gridReadyStatus=!0,!this.AS.checkResponseError(i,"Investor Data",this.AS.login))return!1;this.iList=i.data,console.log("getInvestor:response:",i),this.grid1Data=this.iList},i=>{console.log(i),this.toastr.error("getInvestor report failed : "+i)})}getProperties(){this.gridReadyStatus=!1;const e={params:{company:this.company_id,report:this.report},usage:{authority:this.authority,sub_authority:"Property",operation:"LIST",data:"NA"}};this.tranche_id>0&&(e.params.tranche_id=this.tranche_id),console.log("getProperties: enering:",e),this.grid1Columns=this.gridPColumns,this.REQ.get("p",{query:JSON.stringify(e)}).subscribe(i=>{if(this.gridReadyStatus=!0,!this.AS.checkResponseError(i,"Properties Data",this.AS.login))return!1;this.pList=i.data,console.log("properties:",i),this.grid1Data=this.pList},i=>{console.log(i),this.toastr.error("Property report failed : "+i)})}updateTranche(){this.myTrancheList={};for(let e=0;e<this.trancheList.length;e++)this.trancheList[e].label==this.company_id&&(this.myTrancheList[this.trancheList[e].tranche_id]=this.trancheList[e].tranche_name);this.tranche_id=-1,console.log("updateTranche:",this.myTrancheList)}showHideChildren(e,i){this.toggleData[`${e}`]=!this.toggleData[`${e}`]}getCategories(){this.grid1Columns=this.gridCColumns,this.gridReadyStatus=!1,this.REQ.get("c",{query:JSON.stringify({params:{},usage:{authority:this.authority,sub_authority:this.report,operation:"LIST",data:"NA"}})}).subscribe(i=>{if(this.gridReadyStatus=!0,!this.AS.checkResponseError(i,"Categories Data",this.AS.login))return!1;this.cList=i.data,this.grid1Data=this.cList;const n={},o=[],l={};JSON.parse(JSON.stringify(i.data)).forEach(p=>{n[p.category_id]=p,p.parent?l[p.parent]=l[p.parent]?`${l[p.parent]}-${p.category_id}`:p.category_id:l[-1]=l[-1]?`${l[-1]}-${p.category_id}`:p.category_id}),l[-1].split("-").forEach(p=>{let f=Object.assign(Object.assign({},n[p]),{children:[]});this.createParentNode(p,n,l,f),o.push(f)}),console.log(o),this.cList=o},i=>{console.log(i),this.toastr.error("Category report failed : "+i)})}createParentNode(e,i,n,o){const l=n[e]?n[e].split("-"):[];if(!(l.length>0))return Object.assign({},i[e]);l.forEach(s=>{let u=Object.assign(Object.assign({},i[s]),{children:[]});return this.createParentNode(s,i,n,u),o.children.push(u),o})}getTenants(e){this.gridReadyStatus=!1;const i={params:{company:this.company_id,report:this.report},usage:{authority:this.authority,sub_authority:this.report,operation:"LIST",data:"NA"}};"ALL"!=this.tenant_status&&(i.params.status=this.tenant_status),this.grid1Columns="TENANT-PETS"===this.report?this.gridTPColumns:"TENANT-VEHICLES"===this.report?this.gridTVColumns:this.gridTColumns,this.REQ.get("tenant",{query:JSON.stringify(i)}).subscribe(n=>{if(this.gridReadyStatus=!0,!this.AS.checkResponseError(n,"Tenants Data",this.AS.login))return!1;this.tList=n.data;for(let o=0;o<this.tList.length;o++){for(let l=0;l<this.tStatusList.length;l++)this.tList[o].status==this.tStatusList[l].co_name&&(this.tList[o].t_status=this.tStatusList[l].co_value);if(this.tList[o].pl_id>0)for(let l=0;l<this.pkList.length;l++)if(this.tList[o].pl_id==this.pkList[l].pl_id){this.tList[o].parking_lot=this.pkList[l].label;break}}this.grid1Data=this.tList,console.log("Tenant, PK List:",this.tList,this.pkList)},n=>{console.log(n),this.toastr.error("Tenants report failed : "+n)})}getTenancies(e){this.gridReadyStatus=!1;const i={params:{company:this.company_id,report:this.report,report_date:this.utility.date2ISO(this.start_date)},usage:{authority:this.authority,sub_authority:this.report,operation:"LIST",data:"NA"}};""!=this.company_id&&"ALL"!=this.company_id?(this.tranche_id>0&&(i.params.tranche_id=this.tranche_id),this.grid1Columns=e,this.tnList=[],this.financial.total_market_rent=0,this.financial.total_rent=0,this.financial.total_deposit=0,this.financial.total_deposit_a=0,this.financial.occupancy=0,this.financial.occupied=0,this.financial.total_units=0,this.financial.balance=0,console.log("getTenancies:",i),this.REQ.get("tenancy",{query:JSON.stringify(i)}).subscribe(n=>{if(this.gridReadyStatus=!0,!this.AS.checkResponseError(n,"Tenancy Data",this.AS.login))return!1;for(let o=0;o<n.data.length;o++)"MASTER"!=n.data[o].p_status&&(""==this.company_id||n.data[o].company==this.company_id)&&(this.financial.total_units+=1,this.financial.total_market_rent+=n.data[o].market_rent,"OCCUPIED"==n.data[o].p_status?(this.financial.occupied+=1,this.financial.total_rent+=n.data[o].rent,this.financial.total_deposit+=n.data[o].deposit,this.financial.total_deposit_a+=n.data[o].deposit_a):(n.data[o].rent=0,n.data[o].deposit=0,n.data[o].deposit_a=0),this.financial.balance+=n.data[o].balance,this.tnList.push(n.data[o]));this.financial.occupancy=this.financial.occupied/this.financial.total_units,console.log("getTenancies:",n.data),this.grid1Data=this.tnList},n=>{console.log(n),this.toastr.error("Tenancy report failed : "+n)})):this.gridReadyStatus=!0}getVendors(){this.grid1Columns=this.gridVColumns,this.gridReadyStatus=!1,this.REQ.get("vendor",{query:JSON.stringify({params:{},usage:{authority:this.authority,sub_authority:this.report,operation:"LIST",data:"NA"}})}).subscribe(i=>{if(this.gridReadyStatus=!0,!this.AS.checkResponseError(i,"Vendors Data",this.AS.login))return!1;this.vList=i.data,console.log(this.vList),this.grid1Data=this.vList},i=>{console.log(i),this.toastr.error("Vendor report failed : "+i)})}addNewItem(e){console.log("addNewItem:",e),"RENTROLL"===e||"TENANCY"===e?this.getURL("tenancye","tenancy_id",-1):"TENANT"===e?this.getURL("tenante","tenant_id",-1):"VENDOR"===e&&this.getURL("vendor","vendor_id",-1),"PROPERTY"===e&&this.getURL("propertye","property_id",-1)}getURL(e,i,n){const o={};o[i]=n,console.log("getURL:",this.urlPrefix,e),this.router.navigate([this.urlPrefix+e],{queryParams:o})}onGridReady(e){console.log("grid ready"),console.log(e),this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}exportData(e){var o={suppressQuotes:!0,columnSeparator:",",customHeader:this.report_title+" for "+this.company_id+" : as of "+this.reportGenTime,customFooter:"Himalaya Properties"};"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv(o)):console.log("Exporting Excel")}onColumnResized(e){e.api.sizeColumnsToFit()}onModelUpdated(e){console.log("ModelUpdated"),e.api.sizeColumnsToFit()}onCellClicked(e){console.log(e)}onCellDoubleClicked(e){if(console.log(e),"Investor"===this.user.type||"Vendor"===this.user.type)return!1;let i=0;"PROPERTY"==this.report?(i=e.data.property_id,this.router.navigate([this.urlPrefix+"property"],{queryParams:{property_id:i}})):"TENANT"==this.report||"TENANT-PETS"==this.report||"TENANT-VEHICLES"==this.report?(i=e.data.tenant_id,this.router.navigate([this.urlPrefix+"tenant"],{queryParams:{tenant_id:i}})):"TENANCY"==this.report||"RENTROLL"==this.report?(i=e.data.tenancy_id,i>0?this.router.navigate([this.urlPrefix+"tenancy"],{queryParams:{tenancy_id:i}}):(i=e.data.property_id,this.router.navigate([this.urlPrefix+"property"],{queryParams:{property_id:i}}))):"VENDOR"==this.report?(i=e.data.vendor_id,this.router.navigate([this.urlPrefix+"vendor"],{queryParams:{vendor_id:i}})):"INVESTOR"==this.report&&(i=e.data.investor_id,this.router.navigate([this.urlPrefix+"investor"],{queryParams:{investor_id:i}}))}tenancyStatusStyle(e){return"RENT READY"==e.value?{color:"red",textAlign:"center"}:"OCCUPIED"==e.value?{color:"blue",textAlign:"center"}:{textAlign:"center"}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(C.t))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-report"]],viewQuery:function(e,i){if(1&e&&t.Gf(to,7),2&e){let n;t.iGM(n=t.CRH())&&(i.agGrid=n.first)}},decls:40,vars:17,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],["fas","","icon","table text-white"],[1,"card-body"],[1,"row"],[1,"col-lg-2","col-md-6","col-sm-12"],[1,"form-group"],["name","sSelect","id","sSelect",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-lg-3 col-md-6 col-sm-12",4,"ngIf"],["class","col-lg-2 col-md-4 col-sm-12 text-left",4,"ngIf"],[1,"form-group","mt-3"],["label","As Of","required","",3,"inline","options","ngModel","ngModelChange"],["sd",""],[1,"col-lg-3","col-md-6","col-sm-12","text-md-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-3","mb-4","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click",4,"ngIf"],["class","row mb-3",4,"ngIf"],["class","tree-accordion",4,"ngIf"],[1,"d-block","w-100"],["recursiveListTmpl",""],["id","PL","name","PL"],["style","width: 100%; height: 700px;","class","ag-theme-balham","animateRows","","rowHeight","22","rowSelection","multiple",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked",4,"ngIf"],["src","../../../assets/img/loading.gif","class","mx-auto d-block",4,"ngIf"],[1,"card-footer"],[3,"value"],[1,"col-lg-3","col-md-6","col-sm-12"],["label","TStatus","id","tsSelect",1,"form-control",3,"ngModel","ngModelChange"],["label","Company","id","tSelect",1,"form-control",3,"ngModel","ngModelChange"],["value",""],["selected","",3,"value",4,"ngFor","ngForOf"],["selected","",3,"value"],[1,"col-lg-2","col-md-4","col-sm-12","text-left"],["label","Asset","id","tSelect",1,"form-control",3,"ngModel","ngModelChange"],["far","","icon","plus-square","size","sm"],[1,"row","mb-3"],[1,"text-danger"],[1,"card-text-number"],[1,"tree-accordion"],[1,"lables"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[3,"class","click",4,"ngIf"],[4,"ngIf"],[3,"click"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","700px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["grid1",""],["src","../../../assets/img/loading.gif",1,"mx-auto","d-block"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._UZ(5,"mdb-icon",3),t._uU(6),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"label"),t._uU(12,"Report"),t.qZA(),t.TgZ(13,"select",8),t.NdJ("ngModelChange",function(o){return i.report=o})("ngModelChange",function(){return i.refreshReport("REPORT")}),t.YNc(14,eo,2,2,"option",9),t.ALo(15,"keyvalue"),t.qZA()()(),t.YNc(16,no,6,2,"div",10),t.YNc(17,ao,8,2,"div",10),t.YNc(18,lo,9,4,"div",11),t.TgZ(19,"div",6)(20,"div",12)(21,"mdb-date-picker",13,14),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()()(),t.TgZ(23,"div",15)(24,"div",16)(25,"button",17),t.NdJ("click",function(){return i.refreshReport("SYNC")}),t._UZ(26,"i",18),t.qZA(),t.YNc(27,so,2,0,"button",19),t.TgZ(28,"button",17),t.NdJ("click",function(){return i.exportData("CSV")}),t._uU(29,"CSV"),t.qZA()()()(),t.YNc(30,_o,32,20,"div",20),t.YNc(31,uo,16,4,"div",21),t.TgZ(32,"div",22),t.YNc(33,fo,1,1,"ng-template",null,23,t.W1O),t.qZA(),t.TgZ(35,"div",24),t.YNc(36,bo,2,2,"ag-grid-angular",25),t.YNc(37,yo,1,0,"img",26),t.qZA()(),t.TgZ(38,"div",27),t._uU(39),t.qZA()()()),2&e&&(t.xp6(6),t.hij("\xa0",i.report_title," "),t.xp6(7),t.Q6J("ngModel",i.report),t.xp6(1),t.Q6J("ngForOf",t.lcZ(15,15,i.reportList)),t.xp6(2),t.Q6J("ngIf",!0===i.showTenantStatus),t.xp6(1),t.Q6J("ngIf",!0===i.showCompany),t.xp6(1),t.Q6J("ngIf",!0===i.showTranche),t.xp6(3),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("ngModel",i.start_date),t.xp6(6),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(3),t.Q6J("ngIf","TENANCY"===i.report||"RENTROLL"===i.report),t.xp6(1),t.Q6J("ngIf","CATEGORY"===i.report),t.xp6(5),t.Q6J("ngIf",i.gridReadyStatus),t.xp6(1),t.Q6J("ngIf",!i.gridReadyStatus),t.xp6(2),t.hij(" Report generated as of ",i.reportGenTime," "))},directives:[d.gRC,d.UiO,d.XIm,_.EJ,_.JJ,_.On,c.sg,_.YN,_.Kr,c.O5,d.JNR,_.Q7,d.mTE,d.CWd,c.tP,v.N8],pipes:[c.Nd,c.H9,c.Zx],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:10px}}"]}),a})();function To(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",19),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).getItem(o.key_type,o.key_value)}),t.TgZ(1,"td",20),t._uU(2),t.qZA(),t.TgZ(3,"td",20),t._uU(4),t.qZA(),t.TgZ(5,"td",20),t._uU(6),t.qZA(),t.TgZ(7,"td",20),t._uU(8),t.qZA()()}if(2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.item),t.xp6(2),t.Oqu(e.desc),t.xp6(2),t.Oqu(e.search)}}function Zo(a,r){if(1&a&&(t.TgZ(0,"div",13)(1,"div",14)(2,"tbody",15)(3,"tr",16)(4,"th"),t._uU(5,"\xa0\xa0"),t.qZA(),t.TgZ(6,"th",17),t._uU(7,"Tag"),t.qZA(),t.TgZ(8,"th",17),t._uU(9,"Title"),t.qZA(),t.TgZ(10,"th",17),t._uU(11,"Search Match"),t.qZA()(),t.YNc(12,To,9,4,"tr",18),t.qZA()()()),2&a){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",e.searchList)}}let vo=(()=>{class a{constructor(e,i,n){this.router=e,this.AS=i,this.REQ=n,this.user=this.AS.currentUserValue,this.urlPrefix="",this.searchText="search",this.searchList=[],this.showSearchResult=!1,this.search=""}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1)}mySearch(e,i){if(console.log("mySearch:"+i+" key="+e),i.length<3)return"";var n=i.search(" ");console.log("space:"+n);var o="",l="";n>0&&(o=i.slice(0,n),l=i.slice(n+1)),e>0?this.myKWSearch(o,l):this.myLiveSearch(i)}myKWSearch(e,i){console.log("search value:"+e+"="+i),"P"==e||"property"==e?this.router.navigate([this.urlPrefix+"property"],{queryParams:{property_id:i}}):"C"==e||"company"==e?this.router.navigate([this.urlPrefix+"company"],{queryParams:{company_id:i}}):"T"==e||"tenant"==e?this.router.navigate([this.urlPrefix+"tenant"],{queryParams:{tenant_id:i}}):("R"==e||"report"==e)&&this.router.navigate([this.urlPrefix+"report"],{queryParams:{report:i}})}myLiveSearch(e){this.showSearchResult=!1;const i={params:{search:e}};console.log(i),this.REQ.get("search",{query:JSON.stringify(i)}).subscribe(n=>{this.searchList=n.data,console.log(this.searchList),void 0!==n.data&&this.searchList.length>0&&(this.showSearchResult=!0)},n=>{console.log(n)})}getItem(e,i){console.log("getItem:"+e+":"+i),console.log("vendor_id"===e),this.showSearchResult=!1,this.searchList=[],"property_id"==e?this.router.navigate([this.urlPrefix+"property"],{queryParams:{property_id:i}}):"tenant_id"==e?this.router.navigate([this.urlPrefix+"tenant"],{queryParams:{tenant_id:i}}):"tenancy_id"==e?this.router.navigate([this.urlPrefix+"tenancye"],{queryParams:{tenancy_id:i}}):"report"==e?this.router.navigate([this.urlPrefix+"report"],{queryParams:{report:i}}):"vendor_id"===e&&(console.log("vendor"),this.router.navigate([this.urlPrefix+"vendor"],{queryParams:{report:i}}))}closeClicked(){}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.F0),t.Y36(b.$),t.Y36(m.s))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-search"]],decls:18,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"row","text-center"],[1,"col-2"],["fas","","icon","search text-white"],[1,"col-5"],["mdbWavesEffect","",1,"form-inline","waves-light"],[1,"search-body","md-form","my-0"],["type","text","placeholder","Search",1,"form-control","mr-sm-2",3,"keyup","keyup.enter"],["searchstring",""],[1,"col-1"],["type","button","placement","left",1,"btn-medium","btn-danger",3,"click"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"search","search-body"],["width","100%"],[1,"search-header"],[1,"search-title"],["class","search-body",3,"click",4,"ngFor","ngForOf"],[1,"search-body",3,"click"],[1,"search-text"]],template:function(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mdb-card-title")(5,"h4"),t._UZ(6,"mdb-icon",4),t._uU(7,"\xa0Search "),t.qZA()()(),t.TgZ(8,"div",5)(9,"form",6)(10,"div",7)(11,"input",8,9),t.NdJ("keyup",function(){t.CHM(n);const l=t.MAs(12);return i.mySearch(0,l.value)})("keyup.enter",function(){t.CHM(n);const l=t.MAs(12);return i.mySearch(1,l.value)}),t.qZA()()()(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return i.closeClicked()}),t._uU(15,"X"),t.qZA()()()()(),t.TgZ(16,"div",0),t.YNc(17,Zo,13,1,"div",12),t.qZA()}2&e&&(t.xp6(17),t.Q6J("ngIf",i.showSearchResult))},directives:[d.gRC,d.UiO,d.XIm,_._Y,_.JL,_.F,d.b6v,c.O5,c.sg],styles:[".search[_ngcontent-%COMP%]{background:#f0f0f0;border:0;position:relative;width:100%;margin-bottom:30px;box-shadow:1}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#0009}.search[_ngcontent-%COMP%]   .search-label[_ngcontent-%COMP%]{color:#fff}.search[_ngcontent-%COMP%]   .search-title[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#d4d4d41a;font-weight:strong;font-size:16px}.search[_ngcontent-%COMP%]   .search-text[_ngcontent-%COMP%]{color:#000001;text-transform:inherit;font-size:12px;font-weight:400;margin-bottom:.5rem;cursor:pointer;padding:5px;position:relative}.search[_ngcontent-%COMP%]   .search-text-number[_ngcontent-%COMP%]{color:#000;text-align:right;text-transform:inherit;font-weight:400;margin-bottom:.5rem}.search[_ngcontent-%COMP%]   .search-text-date[_ngcontent-%COMP%]{color:#000;text-transform:inherit;font-weight:light;margin-bottom:.5rem}.search[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer}.search[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fff176}.search[_ngcontent-%COMP%]   .search-body[_ngcontent-%COMP%]{padding:15px}.search[_ngcontent-%COMP%]   .search-body.table-full-width[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.search[_ngcontent-%COMP%]   .search-body[_ngcontent-%COMP%]   .search-title[_ngcontent-%COMP%]{color:#000;text-transform:inherit;font-weight:light;margin-bottom:.75rem;padding:5px;position:relative}.search[_ngcontent-%COMP%]   .search-body[_ngcontent-%COMP%]   .search-description[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   .search-body[_ngcontent-%COMP%]   .search-category[_ngcontent-%COMP%]{color:#0009}.search[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]{padding:15px 15px 0;border:0;color:#000c}.search[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]:not([data-background-color]){background-color:#4e4e4e}.search[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   .search-title[_ngcontent-%COMP%]{font-weight:400;color:#fff;padding:5px}.search[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   .search-category[_ngcontent-%COMP%]{color:#efefef;margin-bottom:5px;font-weight:300}.search[_ngcontent-%COMP%]   .input-group[disabled][_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   .input-group[disabled][_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background-color:#000}.search.search-plain[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.search[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{overflow:hidden;height:200px;position:relative}.search[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:30px;height:30px;overflow:hidden;border-radius:50%;margin-bottom:15px}.search[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;margin-bottom:5px}.search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]{background-color:transparent;border:0;padding:15px}.search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;position:relative}.search[_ngcontent-%COMP%]   .search-footer[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:0;padding:7px 0}"]}),a})();const xo=["staticTabs"];function Ao(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenante","tenant_id",n.tenant_id)}),t._UZ(1,"mdb-icon",73),t.qZA()}}function qo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",74),t.NdJ("click",function(){return t.CHM(e),t.oxw().getURL("tenante","tenant_id",-1)}),t._UZ(1,"mdb-icon",75),t.qZA()}}function Mo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",20),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("property","property_id",n.tenant.property_id)}),t._UZ(1,"i",76),t.qZA()}}function wo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",79),t._uU(4),t.qZA(),t.TgZ(5,"td",79),t._uU(6),t.qZA(),t.TgZ(7,"td",79),t._uU(8),t.qZA(),t.TgZ(9,"td",79),t._uU(10),t.qZA(),t.TgZ(11,"td",79),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(2),t.AsE("",e.first_name,"\xa0",e.last_name,""),t.xp6(2),t.Oqu(e.dob),t.xp6(2),t.Oqu(e.relationship),t.xp6(2),t.Oqu(e.phone),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.notes)}}function Uo(a,r){if(1&a&&(t.TgZ(0,"div",77)(1,"div",78)(2,"table",36)(3,"thead")(4,"tr")(5,"th",37),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",37),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th",37),t._uU(10,"DOB"),t.qZA(),t.TgZ(11,"th",37),t._uU(12,"Relationship"),t.qZA(),t.TgZ(13,"th",38),t._uU(14,"Phone"),t.qZA(),t.TgZ(15,"th",38),t._uU(16,"Email"),t.qZA(),t.TgZ(17,"th",38),t._uU(18,"Notes"),t.qZA()()(),t.TgZ(19,"tbody",39),t.YNc(20,wo,15,8,"tr",40),t.qZA()()()()),2&a){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.tnFamily.data)}}function Do(a,r){if(1&a&&(t.TgZ(0,"div",80)(1,"label"),t._uU(2,"Additional Information"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.hij(" ",e.tenant.description," ")}}function No(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",83),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).printPetTag(o.index,o.pet_id)}),t._uU(3),t.qZA()(),t.TgZ(4,"td",79),t._uU(5),t.qZA(),t.TgZ(6,"td",79),t._uU(7),t.qZA(),t.TgZ(8,"td",79),t._uU(9),t.qZA(),t.TgZ(10,"td",79),t._uU(11),t.qZA(),t.TgZ(12,"td",79),t._uU(13),t.qZA(),t.TgZ(14,"td",79),t._uU(15),t.qZA(),t.TgZ(16,"td",79),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.ALo(20,"currency"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.ALo(23,"date"),t.qZA()()}if(2&a){const e=r.$implicit;t.xp6(3),t.Oqu(e.pet_id),t.xp6(2),t.Oqu(e.pet_role),t.xp6(2),t.Oqu(e.pet_type),t.xp6(2),t.Oqu(e.breed),t.xp6(2),t.Oqu(e.weight),t.xp6(2),t.Oqu(e.insurance),t.xp6(2),t.Oqu(e.vaccination),t.xp6(2),t.Oqu(e.notes),t.xp6(2),t.Oqu(t.lcZ(20,10,e.monthly)),t.xp6(3),t.Oqu(t.lcZ(23,12,e.expiry))}}function Oo(a,r){if(1&a&&(t.TgZ(0,"div",29)(1,"mdb-card")(2,"mdb-card-header",30),t._uU(3," Pet Information "),t.TgZ(4,"span",81),t._uU(5," contact property management for pet pass "),t.qZA()(),t.TgZ(6,"mdb-card-body")(7,"div",35)(8,"table",82)(9,"thead")(10,"tr")(11,"th",37),t._uU(12,"#"),t.qZA(),t.TgZ(13,"th",37),t._uU(14,"Role"),t.qZA(),t.TgZ(15,"th",37),t._uU(16,"Type"),t.qZA(),t.TgZ(17,"th",37),t._uU(18,"Breed"),t.qZA(),t.TgZ(19,"th",37),t._uU(20,"Weight"),t.qZA(),t.TgZ(21,"th",37),t._uU(22,"Insurance"),t.qZA(),t.TgZ(23,"th",37),t._uU(24,"Vaccination"),t.qZA(),t.TgZ(25,"th",37),t._uU(26,"Notes"),t.qZA(),t.TgZ(27,"th",37),t._uU(28,"Monthly"),t.qZA(),t.TgZ(29,"th",37),t._uU(30,"Expiry"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,No,24,14,"tr",40),t.qZA()()()()()()),2&a){const e=t.oxw();t.xp6(32),t.Q6J("ngForOf",e.tnPet.data)}}function Po(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",79),t._uU(4),t.qZA(),t.TgZ(5,"td",79),t._uU(6),t.qZA(),t.TgZ(7,"td",79),t._uU(8),t.qZA(),t.TgZ(9,"td",79),t._uU(10),t.qZA(),t.TgZ(11,"td",79),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"a",84),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).printParkingTag(o.index,o.parking_tag_id)}),t._uU(15),t.qZA()(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"date"),t.qZA()()}if(2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(2),t.AsE("",e.state,"\xa0",e.tag,""),t.xp6(2),t.Oqu(e.make),t.xp6(2),t.Oqu(e.model),t.xp6(2),t.Oqu(e.color),t.xp6(2),t.Oqu(e.parking_lot),t.xp6(3),t.Oqu(e.parking_tag_id),t.xp6(2),t.Oqu(t.lcZ(18,10,e.monthly)),t.xp6(3),t.Oqu(t.lcZ(21,12,e.expiry))}}function ko(a,r){if(1&a&&(t.TgZ(0,"div",29)(1,"mdb-card")(2,"mdb-card-header",30),t._uU(3," Vehicle Information\xa0\xa0\xa0\xa0 "),t.TgZ(4,"span",81),t._uU(5," contact property management for parking tag "),t.qZA()(),t.TgZ(6,"mdb-card-body")(7,"div",35)(8,"table",82)(9,"thead")(10,"tr")(11,"th",37),t._uU(12,"#"),t.qZA(),t.TgZ(13,"th",37),t._uU(14,"Tag"),t.qZA(),t.TgZ(15,"th",37),t._uU(16,"Make"),t.qZA(),t.TgZ(17,"th",37),t._uU(18,"Model"),t.qZA(),t.TgZ(19,"th",37),t._uU(20,"Color"),t.qZA(),t.TgZ(21,"th",37),t._uU(22,"Parking Lot"),t.qZA(),t.TgZ(23,"th",37),t._uU(24,"Parking Tag"),t.qZA(),t.TgZ(25,"th",37),t._uU(26,"Monthly"),t.qZA(),t.TgZ(27,"th",37),t._uU(28,"Expiry"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,Po,22,14,"tr",40),t.qZA()()()()()()),2&a){const e=t.oxw();t.xp6(30),t.Q6J("ngForOf",e.tnVehicle.data)}}function So(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw().addDocuments()}),t._UZ(1,"mdb-icon",86),t.qZA()}}function Lo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",87)(6,"a",20),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().getDocument(o.index,o.doc_id)}),t._UZ(7,"i"),t.qZA()(),t.TgZ(8,"td",79),t._uU(9),t.qZA(),t.TgZ(10,"td",79),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA()()}if(2&a){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.doc_id),t.xp6(3),t.Tol(i.imageList[e.doc_format]),t.xp6(2),t.Oqu(e.doc_type),t.xp6(2),t.Oqu(e.doc_name),t.xp6(2),t.Oqu(e.updatedby),t.xp6(2),t.Oqu(e.updated)}}function Jo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",88)(1,"div",12)(2,"div",3)(3,"div",45)(4,"label"),t._uU(5,"Period"),t.qZA()(),t.TgZ(6,"div",46)(7,"label"),t._uU(8,"From"),t.qZA(),t.TgZ(9,"mdb-date-picker",89,48),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()(),t.TgZ(11,"div",46)(12,"label"),t._uU(13,"To"),t.qZA(),t.TgZ(14,"mdb-date-picker",90,50),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()(),t.TgZ(16,"div",51)(17,"div",52)(18,"button",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getWOS(n.tenant_id)}),t._UZ(19,"i",54),t.qZA(),t.TgZ(20,"button",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("wo","tenant_id",n.tenant.tenant_id)}),t._UZ(21,"mdb-icon",91),t.qZA()()()(),t.TgZ(22,"div",3)(23,"ag-grid-angular",68,92),t.NdJ("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n)})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"WO")})("gridReady",function(n){return t.CHM(e),t.oxw().onGridReadyTX(n,"WO")}),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(9),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Select a date")("ngModel",e.start_date),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",e.end_date),t.xp6(9),t.Q6J("columnDefs",e.gridWOColumns)("rowData",e.gridWOData)}}function Ro(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("dm","tenant_id",n.tenant.tenant_id)}),t._UZ(1,"mdb-icon",91),t.qZA()}}function Eo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",93),t.NdJ("click",function(){return t.CHM(e),t.oxw().getPaymentURL()}),t._uU(1,"Pay Rent"),t.qZA()}}function Io(a,r){if(1&a&&(t.TgZ(0,"p",94),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.tenant.balance),"")}}function Fo(a,r){if(1&a&&(t.TgZ(0,"p",95),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.tenant.balance)," ")}}function Qo(a,r){if(1&a&&(t.TgZ(0,"div",46)(1,"label"),t._uU(2,"Payment / Receivable"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.ALo(5,"currency"),t.ALo(6,"currency"),t.qZA()()),2&a){const e=t.oxw();t.xp6(4),t.AsE(" ",t.lcZ(5,2,e.total_payment)," / ",t.lcZ(6,4,e.total_receivable)," ")}}function Ho(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("dm","tenant_id",n.tenant.tenant_id)}),t._UZ(1,"mdb-icon",91),t.qZA()}}function Yo(a,r){if(1&a&&(t.TgZ(0,"span",96),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.deposit_a))}}function jo(a,r){if(1&a&&(t.TgZ(0,"span",97),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.tenant.deposit_a))}}function Wo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",98)(1,"div",12)(2,"div",3)(3,"div",99)(4,"label"),t._uU(5,"Title"),t.qZA(),t.TgZ(6,"textarea",100),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().history_title=n}),t._uU(7,"\t\t\t\t\t\tBrief Description\n\t\t\t\t\t"),t.qZA()(),t.TgZ(8,"div",4)(9,"label"),t._uU(10,"Comments"),t.qZA(),t.TgZ(11,"textarea",101),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().history_comment=n}),t._uU(12,"\t\t\t\t\t\tEnter Comments Here\n\t\t\t\t\t"),t.qZA()(),t.TgZ(13,"div",102)(14,"label"),t._uU(15,"Log Date"),t.qZA(),t.TgZ(16,"mdb-date-picker",103,104),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().history_date=n}),t.qZA()(),t.TgZ(18,"div",105)(19,"div",106)(20,"button",107),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateHistory()}),t._uU(21,"Add"),t.qZA(),t.TgZ(22,"button",107),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.refreshHistory(n.tenant_id)}),t._UZ(23,"i",54),t.qZA(),t.TgZ(24,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("TL","CSV")}),t._uU(25,"CSV"),t.qZA()()()(),t.TgZ(26,"div",3)(27,"ag-grid-angular",108,109),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReadyTX(n,"TL")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n)}),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.history_title),t.xp6(5),t.Q6J("ngModel",e.history_comment),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.history_date),t.xp6(11),t.Q6J("columnDefs",e.gridTLColumns)("rowData",e.gridTLData)("getRowHeight",e.getRowHeightTL)}}function Vo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",110)(1,"div",111)(2,"div",112)(3,"button",113),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.tenantAdminAction(n.adminAction1)}),t._uU(4),t.qZA(),t.TgZ(5,"button",114),t.NdJ("click",function(){return t.CHM(e),t.oxw().tenantAdminAction("EMAIL STATEMENT")}),t._uU(6,"Email Statement"),t.qZA(),t.TgZ(7,"button",114),t.NdJ("click",function(){return t.CHM(e),t.oxw().tenantAdminAction("EMAIL PAYMENT REMINDER")}),t._uU(8,"Payment Reminder"),t.qZA(),t.TgZ(9,"button",114),t.NdJ("click",function(){return t.CHM(e),t.oxw().tenantAdminAction("Eviction Notice")}),t._uU(10,"Eviction Notice"),t.qZA()()(),t.TgZ(11,"div",115)(12,"div",3)(13,"div",116)(14,"label"),t._uU(15,"Online Access"),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"div",116)(18,"label"),t._uU(19,"Last Login"),t.qZA(),t._uU(20),t.qZA(),t._UZ(21,"div",116),t.qZA(),t.TgZ(22,"div",3)(23,"div",116)(24,"label"),t._uU(25,"Online ID1"),t.qZA(),t._uU(26),t.qZA(),t.TgZ(27,"div",116)(28,"label"),t._uU(29,"Online ID2"),t.qZA(),t._uU(30),t.qZA(),t.TgZ(31,"div",116)(32,"label"),t._uU(33,"Online ID3"),t.qZA(),t._uU(34),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("disabled",""===e.tenant.email),t.xp6(1),t.Oqu(e.adminAction1),t.xp6(1),t.Q6J("disabled",""===e.tenant.email),t.xp6(2),t.Q6J("disabled",""===e.tenant.email),t.xp6(2),t.Q6J("disabled",""===e.tenant.email),t.xp6(7),t.hij(" ",e.userData.online_access," "),t.xp6(4),t.hij(" ",e.userData.last_login," "),t.xp6(6),t.hij(" ",e.userData.email," "),t.xp6(4),t.hij(" ",e.userData.login," "),t.xp6(4),t.hij(" ",e.userData.online_phone_id," ")}}let Go=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.user=this.AS.currentUserValue,this.authority="Tenant",this.urlPrefix="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()+1},this.usageBasics={},this.file_info="",this.showModal=!1,this.tStatusL={0:"In-Active",1:"Active"},this.t_status="In-Active",this.tenant_id=-1,this.view="Tenant",this.history_date=new Date,this.start_date=new Date,this.sd_start_date=new Date,this.end_date=new Date,this.minTXDate=new Date("2020-01-01"),this.dob="",this.lease_end_date="",this.lease_start_date="",this.last_payment_date="",this.payment_due_date="",this.move_in_date="",this.move_out_date="",this.dataList=[],this.queryParams={},this.total_payment=0,this.total_receivable=0,this.history_title="",this.history_comment="",this.tenant={},this.isTenantEdit=!1,this.tnVehicle=[],this.pkList=[],this.tnPet=[],this.tnFamily=[],this.adminAction1="ENABLE WEBLOGIN",this.tnAttributes=[],this.tnDocuments=[],this.tnHistory=[],this.tStatusList=[],this.closeResult="",this.cList=this.rd.GetCategories("ALL"),this.tList=this.rd.GetPaymentTypes(),this.tRelations=[],this.wosList=[],this.priorityList=this.rd.GetWOPriorities(),this.dtList=this.rd.GetDates(),this.imageList=this.rd.GetImages(),this.userData=[],this.t_tax_id="",this.t_dl_id="",this.tx_avatar="",this.tx_roles="",this.showPaymentBTN=!0,this.gridAOptions={defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.gridAColumns=[{headerName:"Name",field:"co_value",sortable:!0,filter:!0},{headerName:"Description",field:"ta_value",sortable:!0,cellStyle:{"white-space":"normal"},filter:!0}],this.gridAData=[],this.gridTXOptions=this.gridAOptions,this.gridSDOptions=this.gridAOptions,this.gridTXData=[],this.gridTXColumns=[{headerName:"Type",field:"type",width:50},{headerName:"ID",width:100,field:"t_id",filter:"agNumberColumnFilter"},{headerName:"Date",field:"tdate",width:115,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Payment",field:"credit",width:110,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Charge",field:"debit",width:110,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Balance",field:"balance",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Category",field:"category",width:140},{headerName:"Payee",field:"payee"},{headerName:"Pay Type",field:"ref",width:100},{headerName:"Reference",field:"reference"},{headerName:"Description",field:"description"},{headerName:"Category ID",field:"category_id",hide:!0}],this.gridSDData=[],this.gridSDColumns=[{headerName:"Type",field:"type",width:50},{headerName:"ID",width:100,field:"t_id",filter:"agNumberColumnFilter"},{headerName:"Date",field:"tdate",width:115,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Payment",field:"credit",width:110,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Charge",field:"debit",width:110,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Balance",field:"balance",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Category",field:"category",width:140},{headerName:"Payee",field:"payee"},{headerName:"Pay Type",field:"ref",width:100},{headerName:"Reference",field:"reference"},{headerName:"Description",field:"description"},{headerName:"Category ID",field:"category_id",hide:!0}],this.gridTLOptions=this.gridAOptions,this.gridTLData=[],this.gridTLColumns=[{headerName:"ID",width:50,field:"id",filter:"agNumberColumnFilter"},{headerName:"Date",width:130,field:"tdate",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"Title",field:"title",resizable:!0},{headerName:"Comments",width:250,field:"comments",cellStyle:{"white-space":"normal"},resizable:!0},{headerName:"Update By",width:60,field:"updatedby",resizable:!0},{headerName:"Tenant ID",field:"tenant_id",hide:!0}],this.gridWOOptions=this.gridAOptions,this.gridWOData=[],this.gridWOColumns=[{headerName:"ID",width:70,field:"wo_id",filter:"agNumberColumnFilter"},{headerName:"Created",width:120,field:"tdate",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Label",field:"label"},{headerName:"Tenant",field:"contact_name"},{headerName:"Title",field:"title"},{headerName:"Priority",width:130,field:"priority_label",cellStyle:this.woPriorityStyle},{headerName:"Priority ID",field:"priority",hide:!0},{headerName:"Status",width:130,field:"status_label",cellStyle:this.woStatusStyle},{headerName:"Status ID",field:"status",hide:!0},{headerName:"Assignee",field:"owner"},{headerName:"Updated",width:120,field:"updated",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer}],this.getRowHeightA=function(f){return void 0===f.data.ta_value||f.data.ta_value.length<26?25:25*Math.ceil(f.data.ta_value.length/25)},this.getRowHeightTL=function(f){return void 0===f.data.ta_value||f.data.ta_value.length<50?25:25*Math.ceil(f.data.ta_value.length/50)}}ngOnInit(){console.log("Tenant:",this.user),this.usageBasics=this.REQ.getUsageBasics(),this.userData.online_access="Request Access",this.start_date=this.dtList.tdate_6M1,this.sd_start_date=this.dtList.tdate_6M1,this.end_date=this.dtList.tdate_MED,this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.rd.parkingLotSubject.subscribe(e=>this.pkList=e),this.rd.tenantRelationsSubject.subscribe(e=>this.tRelations=e),this.rd.woStatusSubject.subscribe(e=>this.wosList=e),this.rd.tenantStatusSubject.subscribe(e=>this.tStatusList=e),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("tenant_id")&&(this.tenant_id=this.queryParams.tenant_id,console.log("Tenant ID:"+this.tenant_id)),this.view=this.user.type,"Tenant"===this.user.type&&this.user.id_value>0&&(this.tenant_id=this.user.id_value),this.tenant_id>0?(this.getInfo(this.tenant_id),this.getTX(this.tenant_id),this.getSTX(this.tenant_id),this.initData()):this.router.navigate([this.urlPrefix+"report"],{queryParams:{report:"TENANT"}})})}ngAfterInit(){}initData(){"Admin"===this.user.type&&this.getUser(this.user.user_id)}refreshAnalytics(){this.getTX(this.tenant_id),this.getSTX(this.tenant_id),this.getWOS(this.tenant_id)}refreshHistory(e){const i={params:{tenant_id:e}};console.log("Entering getInfo:",i),this.REQ.get("tenant",{query:JSON.stringify(i)}).subscribe(n=>{this.tenant=n,console.log("tenant:getInfo:",this.tenant),this.gridTLData=JSON.parse(n.history).data},n=>{console.log(n)})}getTX(e){this.total_payment=0,this.total_receivable=0,console.log("Minimum TX Date allowed:",this.minTXDate,this.start_date);const i={params:{tenant_id:e,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)},usage:{authority:this.authority,sub_authority:"Financial",operation:"VIEW",data:"NA"}};console.log("getTX:",JSON.stringify(i)),new Date(this.start_date),this.REQ.get("tenant_tx",{query:JSON.stringify(i)}).subscribe(s=>{console.log("getTX response:",s);let u=s.data;for(let p=0;p<u.length;p++)u[p].category=this.cList[u[p].category_id],this.total_payment+=u[p].credit,this.total_receivable+=u[p].debit;this.gridTXData=u},s=>{console.log("getTX:",s)})}getSTX(e){this.gridSDData=[];const i={params:{tenant_id:e,start_date:this.utility.date2ISO(this.sd_start_date),end_date:this.utility.date2ISO(this.end_date)},usage:{authority:this.authority,sub_authority:"SD",operation:"VIEW",data:"NA"}};console.log("getSTX:",i),this.REQ.get("gstxs",{query:JSON.stringify(i)}).subscribe(n=>{console.log("getSTS response:",n);let o=n.data;if(null!=o){for(let l=0;l<o.length;l++)o[l].category=this.cList[o[l].category_id];this.gridSDData=o}},n=>{console.log("getSTS error:",n),this.toastr.error("Security Data failed : "+n)})}getWOS(e){const i={params:{start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date),tenant_id:this.tenant_id,property_id:this.tenant.property_id},usage:{authority:this.authority,sub_authority:"WO",operation:"VIEW",data:"NA"}};this.gridWOData=[],console.log("getWOS: Entered:",i),this.REQ.get("gwos",{query:JSON.stringify(i)}).subscribe(n=>{if(console.log("getWOS:",n),void 0===n.data)console.log("getWOS: NO data returned");else{for(let o=0;o<n.data.length;o++)n.data[o].priority_label=this.priorityList[n.data[o].priority],n.data[o].status_label=this.wosList[n.data[o].status],n.data[o].cellClass="card-title";this.gridWOData=n.data}},n=>{console.log(n),this.toastr.error("Work order report failed : "+n)})}myStatement(){const e={authority:this.authority,sub_authority:"Statement",operation:"VIEW",start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date),tenant_id:this.tenant_id};let i="Tenant_"+this.tenant_id+".pdf";console.log("getTenantStatement:"),this.REQ.createDocument("pdftstmt",e,i)}validateResponse(e){void 0!==e.code&&1===e.code&&(console.log("tenant request failed"),this.utility.ClearLocalStorage())}getInfo(e){const i={params:{tenant_id:e},usage:{authority:this.authority,sub_authority:"MASTER",operation:"VIEW",data:"NA"}};console.log("Entering getInfo:",i),this.REQ.get("tenant",{query:JSON.stringify(i)}).subscribe(n=>{console.log("tenant:getInfo:",n),this.validateResponse(n),this.tenant=n,this.tnFamily=JSON.parse(n.family);for(let o=0;this.tStatusList.length;o++)if(this.tenant.status==this.tStatusList[o].co_name){this.t_status=this.tStatusList[o].co_value;break}if(this.tnDocuments=JSON.parse(n.documents),this.gridAData=JSON.parse(n.attributes).data,this.gridTLData=JSON.parse(n.history).data,this.tnVehicle=JSON.parse(n.vehicles),this.showPaymentBTN=9!=this.tenant.tranche_id&&3!=this.tenant.tranche_id,this.tenant.tax_id.length>7&&(this.t_tax_id="xxx-xx-"+this.tenant.tax_id.substr(this.tenant.tax_id.length-4)),this.tenant.hasOwnProperty("dl_id")&&null!=this.tenant.dl_id&&this.tenant.hasOwnProperty("dl_state")&&null!=this.tenant.dl_state&&(this.t_dl_id=this.tenant.dl_state+"-xxx"+this.tenant.dl_id.substr(this.tenant.dl_id.length-4)),void 0!==this.tnVehicle.data&&this.tnVehicle.data.length>0){let o=this.tnVehicle.data;for(let l=0;l<o.length;l++)for(let s=0;s<this.pkList.length;s++)if(o[l].pl_id==this.pkList[s].pl_id){o[l].parking_lot=this.pkList[s].label;break}this.tnVehicle.data=o}this.tnPet=JSON.parse(n.pets),this.sd_start_date=new Date(this.tenant.lease_start_date.slice(0,this.tenant.lease_start_date.indexOf("T"))),this.sd_start_date.setDate(this.sd_start_date.getDate()-40),this.lease_start_date=this.tenant.lease_start_date.slice(0,this.tenant.lease_start_date.indexOf("T")),this.lease_end_date=this.tenant.lease_end_date.slice(0,this.tenant.lease_end_date.indexOf("T")),this.move_in_date=this.tenant.move_in_date.slice(0,this.tenant.move_in_date.indexOf("T")),this.move_out_date=this.tenant.move_out_date.slice(0,this.tenant.move_out_date.indexOf("T")),this.dob=this.tenant.dob.slice(0,this.tenant.dob.indexOf("T")),void 0!==this.tenant.last_payment_date&&(this.last_payment_date=this.tenant.last_payment_date.slice(0,this.tenant.last_payment_date.indexOf("T"))),void 0!==this.tenant.payment_due_date&&(this.payment_due_date=this.tenant.payment_due_date.slice(0,this.tenant.payment_due_date.indexOf("T"))),this.getWOS(this.tenant_id)},n=>{console.log("getInfo: error:",n)})}printPetTag(e,i){console.log("printPetTag:",e,i),this.REQ.createDocument("pdfpt",{pet_id:i,type:"PET",tenant_id:this.tenant_id},"Tenant_Pet.pdf")}printParkingTag(e,i){console.log("printParkingTag:",e,i),this.REQ.createDocument("pdfpt",{parking_permit_id:i,type:"PARKING",tenant_id:this.tenant_id},"Tenant_Parking.pdf")}getUser(e){const i={params:{user_id:e,id_type:"tenant_id",id_value:this.tenant_id,caller:"HCAPP-Tenant"}};this.adminAction1="ENABLE WEBLOGIN",this.REQ.get("gu",{query:JSON.stringify(i)}).subscribe(n=>{for(var o in this.userData=n,this.userData.online_access="Request Access",this.tx_avatar=this.userData.avatar,this.userData.roles)this.tx_roles+=" "+o;void 0!==this.userData.avatar&&(this.userData.online_access="Enabled",this.adminAction1="PASSWORD RESET"),void 0!==this.userData.phone&&(this.userData.online_phone_id=this.userData.phone.replace(/[^0-9]/g,""))},n=>{console.log(n),console.log("User request failed for :",this.tenant_id)})}updateHistory(){if(this.history_title.length<3||this.history_comment.length<5)return void this.toastr.error("History update failed for : "+this.tenant_id);const e={id_type:"tenant_id",key_type:"TENANT",id_value:this.tenant_id,title:this.history_title,comment:this.history_comment,tdate:this.history_date,caller:"HCAPP-Tenant"};console.log("updateHistory:",e),this.REQ.post("uchistory",e).subscribe(i=>{console.log(i),this.toastr.success("History updated "),console.log("History updated "),this.refreshHistory(this.tenant_id),this.history_title="",this.history_comment=""},i=>{console.log(i),this.toastr.error("History update failed for : "+this.tenant_id)})}tenantAdminAction(e){const i={tenant_id:this.tenant_id,ACTION:e,tenant_user_id:this.userData.user_id,first_name:this.tenant.first_name,last_name:this.tenant.last_name,phone:this.tenant.phone,email:this.tenant.email,tdate:this.history_date};console.log("tenantAdminAction:",i),this.REQ.post("tenanta",i).subscribe(n=>{console.log(n),0==n.code?(this.toastr.success(e+" successfull for :"+this.tenant_id),"ENABLE WEBLOGIN"==e&&(this.adminAction1="RESET PASSWORD")):this.toastr.error(e+" Failure : "+n.message)},n=>{console.log(n),this.toastr.error(e+" failed for : "+this.tenant_id)})}verifyPhone(e,i){i.value=i.value.replace(/[^0-9+x-]/g,"")}verifyEmail(e,i){i.value=i.value.replace(/[^a-zA-Z0-9@.-]/g,"")}getPaymentURL(){let e=this.REQ.getPaymentURL();console.log("getPaymentURL :",e),this.modalRef=this.modalService.show(M.s,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Leaving Company Website",content:{description:"You will be redirected to our payment partner. Are you sure, you want to make a payment?"}}}),this.modalRef.content.onClose.subscribe(n=>{console.log("getPaymentURL: Confirm:",n),"OK"===n.action?window.open(e):console.log("getPaymentURL: cancel clicked")})}getURL(e,i,n){const o={};o[i]=n,console.log("getURL:",this.urlPrefix,e),this.router.navigate([this.urlPrefix+e],{queryParams:o})}getDocument(e,i){console.log("getDocument: ",this.tnDocuments.data[e]);let n={params:this.tnDocuments.data[e],usage:{authority:this.authority,sub_authority:"MASTER",operation:"DOWNLOAD",data:"NA"}},o=n.params.doc_id+"_"+n.params.doc_name+"."+n.params.doc_format;console.log("getDocument: ",n,o),this.REQ.getDocument({query:JSON.stringify(n)},o)}addDocuments(){this.file_info=this.tenant_id+"_"+this.tenant.last_name+"_"+this.tenant.first_name,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Tenant Document",content:{owner_type:"TENANT",owner_id:this.tenant_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i)})}showTXDetails(e,i){let n={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Transaction Details",content:{description:"Data"}}};n.data.content=e.data,n.data.content.label=this.tenant.label,n.data.content.tenant_name=this.tenant.first_name+" "+this.tenant.last_name,this.modalRef=this.modalService.show(N,n)}onModelUpdated(e){console.log("ModelUpdated:",e),e.api.sizeColumnsToFit()}onGridReadyTX(e,i){console.log("grid ready:",i,e),"TX"===i?(this.gridTXApi=e.api,this.gridTXColumnApi=e.columnApi):"SD"===i?(this.gridSDApi=e.api,this.gridSDColumnApi=e.columnApi):"WO"===i?(this.gridWOApi=e.api,this.gridWOColumnApi=e.columnApi):"TL"===i&&(this.gridTLApi=e.api,this.gridTLColumnApi=e.columnApi)}exportData(e,i){console.log("exportData:",e,i);var l={suppressQuotes:!0,columnSeparator:",",customHeader:"Report",customFooter:"Himalaya Properties"};"TX"===e?this.gridTXApi.exportDataAsCsv(l):"SD"===e?this.gridSDApi.exportDataAsCsv(l):"WO"===e?this.gridWOApi.exportDataAsCsv(l):"TL"===e&&this.gridTLApi.exportDataAsCsv(l)}onCellClicked(e,i){console.log("Cell Clicked:",e,i),console.log(" ["+e.column.colId+" , "+e.value+" ]"+e.data.property_id+" type:"+e.data.type),this.showTXDetails(e,i)}onCellDoubleClicked(e,i){console.log("Double Clicked:",i),console.log(e);let n=e.data.t_id,o=e.data.debit,l=e.data.type;"Admin"===this.view||"SManager"===this.view||"Manager"===this.view?"STX"===i?this.router.navigate([this.urlPrefix+"dm"],{queryParams:{report:4,stx_id:n}}):"TX"===l?this.router.navigate([this.urlPrefix+"dm"],o>0?{queryParams:{report:1,tx_id:n}}:{queryParams:{report:2,tx_id:n}}):"WO"===i?(n=e.data.wo_id,this.router.navigate([this.urlPrefix+"wo"],{queryParams:{wo_id:n}})):this.router.navigate([this.urlPrefix+"dm"],{queryParams:{report:3,tr_id:n}}):this.showTXDetails(e,i)}woPriorityStyle(e){return"Urgent"==e.value?{color:"red",textAlign:"center"}:"Normal"==e.value?{color:"blue",textAlign:"center"}:{textAlign:"center"}}woStatusStyle(e){return"Open"==e.value?{color:"red",textAlign:"center"}:"New"==e.value?{color:"blue",textAlign:"center"}:"In Progress"==e.value?{color:"green",textAlign:"center"}:"On Hold"==e.value?{color:"orange",textAlign:"center"}:"Closed"==e.value?{color:"gray",textAlign:"center"}:{textAlign:"center"}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tenant"]],viewQuery:function(e,i){if(1&e&&t.Gf(xo,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:220,vars:83,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6"],[1,"fas","fa-user","text-white"],[1,"col-sm-6","text-md-right","text-left","pt-md-0","pt-3"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","placement","left","ngbTooltip","Edit Tenant Info",3,"click",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","placement","left","ngbTooltip","Add new Tenant",3,"click",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm",3,"click"],["fas","","icon","file-pdf text-danger","size","2x"],[1,"card-body"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass"],["staticTabs",""],["heading","Details"],[1,"col-sm-12","col-lg-4","col-md-6"],[1,"col-sm-12","col-lg-2","col-md-6"],[3,"click",4,"ngIf"],[3,"click"],[1,"fas","fa-user-circle","text-primary"],["class","row mt-3",4,"ngIf"],[1,"row","mb-3"],["id","agGridA","name","agGridA",1,"col-sm-12","col-md-12","col-lg-6"],["animateRows","","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","350px",3,"columnDefs","rowData","getRowHeight","gridReady","modelUpdated"],["agGridA",""],["class","card-text col-sm-12 col-md-12 col-lg-6",4,"ngIf"],["class","d-block mb-3",4,"ngIf"],[1,"d-block","mb-3"],[1,"blue-grey","lighten-4"],[1,"row","my-3"],[1,"col-sm-12","text-right"],[1,"d-inline-block","px-3"],["type","button","class","btn-simple btn-sm",3,"click",4,"ngIf"],[1,"table-responsive"],["id","",1,"table","tablesorter"],["scope","col"],["scope","col",1,"text-center"],[1,"card-text"],[4,"ngFor","ngForOf"],[1,"col-12","text-right","text-muted"],[1,"col-12","text-left","pt-md-2","pt-0","update-text"],["heading","Maintenance",4,"NgIf"],["heading","Financial"],[1,"col-sm-12","col-md-6","col-lg-1"],[1,"col-sm-12","col-md-6","col-lg-3"],["required","",3,"inline","options","placeholder","ngModel","dateChanged","ngModelChange"],["sd",""],["name","end_date","required","",3,"inline","options","placeholder","ngModel","dateChanged","ngModelChange"],["ed",""],[1,"col-sm-12","col-md-6","col-lg-5","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-4","mt-3","mb-4","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click",4,"ngIf"],["mdbBtn","","type","button","color","danger","rounded","true","size","sm",3,"click",4,"ngIf"],[1,"col-sm-12","col-md-6","col-lg-2"],["class","card-text-number text-danger text-start",4,"ngIf"],["class","card-text-number text-md-center text-start text-start",4,"ngIf"],[1,"col-sm-12","col-md-6","col-lg-4"],["class","col-sm-12 col-md-6 col-lg-3",4,"ngIf"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","600px",3,"columnDefs","rowData","gridOptions","gridReady","modelUpdated","cellDoubleClicked"],["gridTX",""],["heading","Security Deposit"],[1,"col-md-6","col-sm-12"],["class","card-text-number text-danger text-center",4,"ngIf"],["class","card-text-number text-center",4,"ngIf"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","600px",3,"columnDefs","rowData","modelUpdated","cellDoubleClicked","gridReady"],["gridSD",""],["heading","Tenant Log","width","100%",4,"ngIf"],["heading","Administrative",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","placement","left","ngbTooltip","Edit Tenant Info",3,"click"],["fas","","icon","pen-square text-danger","size","2x"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","placement","left","ngbTooltip","Add new Tenant",3,"click"],["far","","icon","plus-square text-danger","size","2x"],[1,"fas","fa-home","text-primary"],[1,"row","mt-3"],[1,"col-12","title"],["nowrap",""],[1,"card-text","col-sm-12","col-md-12","col-lg-6"],[1,"small","text-muted","float-end"],["id","",1,"table","table-hover"],["href","javascript:void(0)","title","Pet Tag",3,"click"],["href","javascript:void(0)","title","Parking Tag",3,"click"],["type","button",1,"btn-simple","btn-sm",3,"click"],["fas","","icon","plus-square"],[1,"text-primary"],["heading","Maintenance"],["required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["far","","icon","plus-square text-white"],["gridWO",""],["mdbBtn","","type","button","color","danger","rounded","true","size","sm",3,"click"],[1,"card-text-number","text-danger","text-start"],[1,"card-text-number","text-md-center","text-start","text-start"],[1,"card-text-number","text-danger","text-center"],[1,"card-text-number","text-center"],["heading","Tenant Log","width","100%"],[1,"col-sm-2"],["id","tr_tags","cols","30","name","tx_tags","rows","2","placeholder","Enter Title here",1,"form-control",3,"ngModel","ngModelChange"],["id","notes","placeholder","Enter Update here","cols","60","name","wo_notes","rows","2",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-2",2,"align-content","right"],["name","history_date","required","",3,"inline","options","ngModel","ngModelChange"],["hd",""],[1,"col-sm-2",2,"text-align","right"],["role","group","aria-label","Vertical button group",1,"btn-group","shadow-0","mt-md-4","mt-3","mb-4","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","",3,"click"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham","pt-3",2,"width","100%","height","600px",3,"columnDefs","rowData","getRowHeight","gridReady","modelUpdated"],["gridTL",""],["heading","Administrative"],[1,"card-body","text-left"],[1,"shadow-0","mt-md-4","mt-3","mb-4","mb-md-0"],["mdbBtn","","color","danger","rounded","true","type","button",3,"disabled","click"],["mdbBtn","","color","info","rounded","true","type","button",3,"disabled","click"],[1,"card-body","pt-5"],[1,"col-sm-4","mb-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"div",3)(5,"div",4)(6,"h3"),t._UZ(7,"i",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div",7),t.YNc(11,Ao,2,0,"button",8),t.YNc(12,qo,2,0,"button",9),t.TgZ(13,"button",10),t.NdJ("click",function(){return i.myStatement()}),t._UZ(14,"mdb-icon",11),t.qZA()()()()()(),t.TgZ(15,"div",12)(16,"div",13)(17,"mdb-tabset",14,15)(19,"mdb-tab",16)(20,"div",12)(21,"div",3)(22,"div",17)(23,"label"),t._uU(24,"Phone"),t.qZA(),t._uU(25),t.qZA(),t.TgZ(26,"div",18)(27,"label"),t._uU(28,"Rent"),t.qZA(),t._uU(29),t.ALo(30,"currency"),t.qZA(),t.TgZ(31,"div",18)(32,"label"),t._uU(33,"Security"),t.qZA(),t._uU(34),t.ALo(35,"currency"),t.qZA(),t.TgZ(36,"div",17)(37,"label"),t._uU(38,"Address"),t.qZA(),t._uU(39),t.YNc(40,Mo,2,0,"a",19),t._uU(41,"\xa0"),t.TgZ(42,"a",20),t.NdJ("click",function(){return i.getURL("tenancy","tenancy_id",i.tenant.tenancy_id)}),t._UZ(43,"i",21),t.qZA()()(),t.TgZ(44,"div",3)(45,"div",17)(46,"label"),t._uU(47,"Email"),t.qZA(),t._uU(48),t.qZA(),t.TgZ(49,"div",18)(50,"label"),t._uU(51,"Lease Start"),t.qZA(),t._uU(52),t.qZA(),t.TgZ(53,"div",18)(54,"label"),t._uU(55,"Lease End"),t.qZA(),t._uU(56),t.qZA(),t.TgZ(57,"div",17)(58,"label"),t._uU(59,"City State ZIP"),t.qZA(),t._uU(60),t.qZA()(),t.TgZ(61,"div",3)(62,"div",17)(63,"label"),t._uU(64,"Birth Date"),t.qZA(),t._uU(65),t.qZA(),t.TgZ(66,"div",18)(67,"label"),t._uU(68,"Move In"),t.qZA(),t._uU(69),t.qZA(),t.TgZ(70,"div",18)(71,"label"),t._uU(72,"Move Out"),t.qZA(),t._uU(73),t.qZA(),t.TgZ(74,"div",17)(75,"label"),t._uU(76,"Status"),t.qZA(),t._uU(77),t.qZA()(),t.TgZ(78,"div",3)(79,"div",17)(80,"label"),t._uU(81,"Tax ID | SSN"),t.qZA(),t._uU(82),t.qZA(),t.TgZ(83,"div",17)(84,"label"),t._uU(85,"Driver ID"),t.qZA(),t._uU(86),t.qZA()(),t.YNc(87,Uo,21,1,"div",22),t.TgZ(88,"div",23)(89,"div",24)(90,"ag-grid-angular",25,26),t.NdJ("gridReady",function(o){return i.onGridReadyTX(o,"NA")})("modelUpdated",function(o){return i.onModelUpdated(o)}),t.qZA()(),t.YNc(92,Do,4,1,"div",27),t.qZA(),t.YNc(93,Oo,33,1,"div",28),t.YNc(94,ko,31,1,"div",28),t.TgZ(95,"div",29)(96,"mdb-card")(97,"mdb-card-header",30),t._uU(98," My Documents "),t.qZA(),t.TgZ(99,"mdb-card-body")(100,"div",31)(101,"div",32)(102,"div",33),t.YNc(103,So,2,0,"button",34),t.qZA()()(),t.TgZ(104,"div",35)(105,"table",36)(106,"thead")(107,"tr")(108,"th",37),t._uU(109,"#"),t.qZA(),t.TgZ(110,"th",37),t._uU(111,"Doc ID"),t.qZA(),t.TgZ(112,"th",37),t._uU(113,"Action"),t.qZA(),t.TgZ(114,"th",37),t._uU(115,"Type"),t.qZA(),t.TgZ(116,"th",37),t._uU(117,"Name"),t.qZA(),t.TgZ(118,"th",37),t._uU(119,"UpdatedBy"),t.qZA(),t.TgZ(120,"th",38),t._uU(121,"Updated"),t.qZA(),t.TgZ(122,"th",37),t._uU(123,"\xa0"),t.qZA()()(),t.TgZ(124,"tbody",39),t.YNc(125,Lo,16,9,"tr",40),t.qZA()()()()()(),t.TgZ(126,"div",3)(127,"div",41)(128,"div",42),t._uU(129),t.qZA()()()()(),t.YNc(130,Jo,25,10,"mdb-tab",43),t.TgZ(131,"mdb-tab",44)(132,"div",12)(133,"div",3)(134,"div",45)(135,"label"),t._uU(136,"Period"),t.qZA()(),t.TgZ(137,"div",46)(138,"label"),t._uU(139,"From"),t.qZA(),t.TgZ(140,"mdb-date-picker",47,48),t.NdJ("dateChanged",function(){return i.getTX(i.tenant_id)})("ngModelChange",function(o){return i.start_date=o}),t.qZA()(),t.TgZ(142,"div",46)(143,"label"),t._uU(144,"To"),t.qZA(),t.TgZ(145,"mdb-date-picker",49,50),t.NdJ("dateChanged",function(){return i.getTX(i.tenant_id)})("ngModelChange",function(o){return i.end_date=o}),t.qZA()(),t.TgZ(147,"div",51)(148,"div",52)(149,"button",53),t.NdJ("click",function(){return i.getTX(i.tenant_id)}),t._UZ(150,"i",54),t.qZA(),t._uU(151,"\xa0 "),t.YNc(152,Ro,2,0,"button",55),t._uU(153,"\xa0 "),t.TgZ(154,"button",53),t.NdJ("click",function(){return i.exportData("TX","CSV")}),t._uU(155,"CSV"),t.qZA(),t._uU(156,"\xa0 "),t.YNc(157,Eo,2,0,"button",56),t.qZA()()(),t.TgZ(158,"div",3)(159,"div",57)(160,"label"),t._uU(161,"Balance"),t.qZA(),t.YNc(162,Io,3,3,"p",58),t.YNc(163,Fo,3,3,"p",59),t.qZA(),t.TgZ(164,"div",60)(165,"label"),t._uU(166,"Next Payment / Due Date "),t.qZA(),t.TgZ(167,"p"),t._uU(168),t.ALo(169,"currency"),t.qZA()(),t.TgZ(170,"div",46)(171,"label"),t._uU(172,"Last Payment / Payment Date"),t.qZA(),t.TgZ(173,"p"),t._uU(174),t.ALo(175,"currency"),t.qZA()(),t.YNc(176,Qo,7,6,"div",61),t.qZA(),t.TgZ(177,"div",3)(178,"ag-grid-angular",62,63),t.NdJ("gridReady",function(o){return i.onGridReadyTX(o,"TX")})("modelUpdated",function(o){return i.onModelUpdated(o)})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o,"TX")}),t.qZA()()()(),t.TgZ(180,"mdb-tab",64)(181,"div",12)(182,"div",3)(183,"div",45)(184,"label"),t._uU(185,"Period"),t.qZA()(),t.TgZ(186,"div",46)(187,"label"),t._uU(188,"From"),t.qZA(),t.TgZ(189,"mdb-date-picker",47,48),t.NdJ("dateChanged",function(){return i.refreshAnalytics()})("ngModelChange",function(o){return i.sd_start_date=o}),t.qZA()(),t.TgZ(191,"div",46)(192,"label"),t._uU(193,"To"),t.qZA(),t.TgZ(194,"mdb-date-picker",49,50),t.NdJ("dateChanged",function(){return i.refreshAnalytics()})("ngModelChange",function(o){return i.end_date=o}),t.qZA()(),t.TgZ(196,"div",51)(197,"div",52)(198,"button",53),t.NdJ("click",function(){return i.refreshAnalytics()}),t._UZ(199,"i",54),t.qZA(),t.YNc(200,Ho,2,0,"button",55),t._uU(201,"\xa0 "),t.TgZ(202,"button",53),t.NdJ("click",function(){return i.exportData("SD","CSV")}),t._uU(203,"CSV"),t.qZA()()()(),t.TgZ(204,"div",31)(205,"div",65)(206,"label"),t._uU(207,"Security Deposit (Paid)"),t.qZA(),t.YNc(208,Yo,3,3,"span",66),t.YNc(209,jo,3,3,"span",67),t.qZA(),t.TgZ(210,"div",65)(211,"label"),t._uU(212,"Security Deposit Required"),t.qZA(),t._uU(213),t.ALo(214,"currency"),t.qZA()(),t.TgZ(215,"div",3)(216,"ag-grid-angular",68,69),t.NdJ("modelUpdated",function(o){return i.onModelUpdated(o)})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o,"STX")})("gridReady",function(o){return i.onGridReadyTX(o,"SD")}),t.qZA()()()(),t.YNc(218,Wo,29,8,"mdb-tab",70),t.YNc(219,Vo,35,10,"mdb-tab",71),t.qZA()()()()()),2&e&&(t.xp6(8),t.lnq("\xa0",i.tenant_id,"\xa0 ",i.tenant.first_name,"\xa0",i.tenant.last_name," "),t.xp6(3),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(5),t.Q6J("buttonClass","nav md-pills  border-bottom")("justified",!0)("contentClass","card"),t.xp6(8),t.hij(" ",i.tenant.phone," "),t.xp6(4),t.hij(" ",t.lcZ(30,73,i.tenant.rent)," "),t.xp6(5),t.hij(" ",t.lcZ(35,75,i.tenant.deposit)," "),t.xp6(5),t.hij(" ",i.tenant.label,"\xa0\xa0"),t.xp6(1),t.Q6J("ngIf",i.tenant.property_id>0),t.xp6(8),t.hij(" ",i.tenant.email," "),t.xp6(4),t.hij(" ",i.lease_start_date," "),t.xp6(4),t.hij(" ",i.lease_end_date," "),t.xp6(4),t.lnq(" ",i.tenant.city,"\xa0\xa0",i.tenant.state,"\xa0\xa0",i.tenant.zip," "),t.xp6(5),t.hij(" ",i.dob," "),t.xp6(4),t.hij(" ",i.move_in_date," "),t.xp6(4),t.hij(" ",i.move_out_date," "),t.xp6(4),t.hij(" ",i.t_status," "),t.xp6(5),t.hij(" ",i.t_tax_id," "),t.xp6(4),t.hij(" ",i.t_dl_id," "),t.xp6(1),t.Q6J("ngIf",void 0!==i.tnFamily.data&&i.tnFamily.data.length>0),t.xp6(3),t.Q6J("columnDefs",i.gridAColumns)("rowData",i.gridAData)("getRowHeight",i.getRowHeightA),t.xp6(2),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(1),t.Q6J("ngIf",void 0!==i.tnPet.data&&i.tnPet.data.length>0),t.xp6(1),t.Q6J("ngIf",void 0!==i.tnVehicle.data&&i.tnVehicle.data.length>0),t.xp6(9),t.Q6J("ngIf",i.tenant_id>0),t.xp6(22),t.Q6J("ngForOf",i.tnDocuments.data),t.xp6(4),t.AsE(" Last updated by ",i.tenant.updatedby," on ",i.tenant.updated," "),t.xp6(1),t.Q6J("NgIf","Applicant"!=i.t_status),t.xp6(10),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(5),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(7),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(5),t.Q6J("ngIf",i.showPaymentBTN),t.xp6(5),t.Q6J("ngIf",i.tenant.balance<0),t.xp6(1),t.Q6J("ngIf",i.tenant.balance>0),t.xp6(5),t.AsE(" ",t.lcZ(169,77,i.tenant.payment_due)," | ",i.payment_due_date," "),t.xp6(6),t.AsE(" ",t.lcZ(175,79,i.tenant.last_payment)," | ",i.last_payment_date," "),t.xp6(2),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(2),t.Q6J("columnDefs",i.gridTXColumns)("rowData",i.gridTXData)("gridOptions",i.gridTXOptions),t.xp6(11),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.sd_start_date),t.xp6(5),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(6),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(8),t.Q6J("ngIf",i.tenant.deposit>i.tenant.deposit_a),t.xp6(1),t.Q6J("ngIf",i.tenant.deposit<=i.tenant.deposit_a),t.xp6(4),t.hij(" ",t.lcZ(214,81,i.tenant.deposit)," "),t.xp6(3),t.Q6J("columnDefs",i.gridSDColumns)("rowData",i.gridSDData),t.xp6(2),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view))},directives:[d.gRC,c.O5,d.mTE,d.UiO,d.XIm,d.CWd,d.AH5,d.wWr,c.sg,v.N8,d.n3K,d.W60,d.KSw,d.JNR,_.Q7,_.JJ,_.On,_.Fj,d.b6v],pipes:[c.H9,c.uU],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]{font-size:14px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}}"]}),a})();const zo=["staticTabs"];function Bo(a,r){if(1&a&&(t.TgZ(0,"a",41),t._UZ(1,"i",42),t.qZA()),2&a){const e=t.oxw();t.hYB("href","",e.urlPrefix,"tenant?tenant_id=",e.tenant_id,"",t.LSH)}}function Xo(a,r){if(1&a&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.co_name),t.xp6(1),t.Oqu(e.co_value)}}function $o(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",43),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function Ko(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",43),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_name),t.xp6(1),t.hij(" ",e.co_value," ")}}function ta(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",53)(1,"td",54)(2,"p",55),t._uU(3),t.qZA()(),t.TgZ(4,"td",54)(5,"label",56),t._uU(6),t.qZA()(),t.TgZ(7,"td"),t._uU(8,"\xa0"),t.qZA(),t.TgZ(9,"td",54)(10,"input",23),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.ta_value=n}),t.qZA()()()}if(2&a){const e=r.$implicit;t.xp6(3),t.Oqu(e.index),t.xp6(3),t.Oqu(e.co_value),t.xp6(4),t.Q6J("ngModel",e.ta_value)}}function ea(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",44)(1,"div",4)(2,"div",45)(3,"table",46)(4,"thead")(5,"tr")(6,"th",47),t._uU(7,"\xa0"),t.qZA(),t.TgZ(8,"th",48),t._uU(9,"Field"),t.qZA(),t.TgZ(10,"th",49),t._uU(11,"\xa0"),t.qZA(),t.TgZ(12,"th",48),t._uU(13,"Notes"),t.qZA()()(),t.TgZ(14,"tbody",50),t.YNc(15,ta,11,3,"tr",51),t.qZA()()(),t.TgZ(16,"div")(17,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("TAB2")}),t._uU(18,"Save"),t.qZA(),t._uU(19," \xa0\xa0 "),t.TgZ(20,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("TAB2")}),t._uU(21,"Clear"),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.tnAttributes.data)}}function ia(a,r){if(1&a&&(t.TgZ(0,"a",41),t._UZ(1,"i",77),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw(2);t.hYB("href","",i.urlPrefix,"tenant?tenant_id=",e.tenant_id,"",t.LSH)}}function na(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",43),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_name),t.xp6(1),t.hij(" ",e.co_value," ")}}function oa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",60)(1,"div",61),t.YNc(2,ia,2,2,"a",3),t._uU(3),t.qZA(),t.TgZ(4,"div",62)(5,"div",63)(6,"label"),t._uU(7,"First Name"),t.TgZ(8,"span",64),t._uU(9,"*"),t.qZA()(),t.TgZ(10,"input",65,66),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.first_name=n}),t.qZA()()(),t.TgZ(12,"div",62)(13,"div",63)(14,"label"),t._uU(15,"Last Name"),t.TgZ(16,"span",64),t._uU(17,"*"),t.qZA()(),t.TgZ(18,"input",65,66),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.last_name=n}),t.qZA()()(),t.TgZ(20,"div",62)(21,"div",63)(22,"mdb-select-2",67),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.relationship=n}),t.YNc(23,na,2,2,"mdb-select-option",17),t.qZA()()(),t.TgZ(24,"div",68)(25,"div",63)(26,"label"),t._uU(27,"Occupation"),t.qZA(),t.TgZ(28,"input",65,66),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.occupation=n}),t.qZA()()(),t.TgZ(30,"div",62)(31,"div",63)(32,"mdb-date-picker",69,70),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.dob=n}),t.qZA()()(),t.TgZ(34,"div",61),t._uU(35,"\xa0"),t.qZA(),t.TgZ(36,"div",62)(37,"div",63)(38,"label"),t._uU(39,"Tax ID | SSN"),t.TgZ(40,"span",64),t._uU(41,"*"),t.qZA()(),t.TgZ(42,"input",71,72),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.tax_id=n}),t.qZA()()(),t.TgZ(44,"div",62)(45,"div",63)(46,"label"),t._uU(47,"Phone"),t.qZA(),t.TgZ(48,"input",71,73),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.phone=n}),t.qZA()()(),t.TgZ(50,"div",62)(51,"div",63)(52,"label"),t._uU(53,"Email"),t.qZA(),t.TgZ(54,"input",71,74),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.email=n}),t.qZA()()(),t.TgZ(56,"div",75)(57,"div",63)(58,"label"),t._uU(59,"Notes"),t.qZA(),t.TgZ(60,"input",71,76),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.notes=n}),t.qZA()()(),t.TgZ(62,"div",28),t._UZ(63,"hr"),t.qZA()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.tenant_id>0),t.xp6(1),t.hij("",e.tenant_id," "),t.xp6(7),t.Q6J("ngModel",e.first_name)("disabled",e.tenant_id>0),t.xp6(8),t.Q6J("ngModel",e.last_name)("disabled",e.tenant_id>0),t.xp6(4),t.Q6J("ngModel",e.relationship),t.xp6(1),t.Q6J("ngForOf",i.tRelations),t.xp6(5),t.Q6J("ngModel",e.occupation)("disabled",e.tenant_id>0),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("ngModel",e.dob)("disabled",e.tenant_id>0),t.xp6(10),t.Q6J("ngModel",e.tax_id)("disabled",e.tenant_id>0),t.xp6(6),t.Q6J("ngModel",e.phone)("disabled",e.tenant_id>0),t.xp6(6),t.Q6J("ngModel",e.email)("disabled",e.tenant_id>0),t.xp6(6),t.Q6J("ngModel",e.notes)("disabled",e.tenant_id>0)}}function aa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",57)(1,"div",4),t.YNc(2,oa,64,22,"div",58),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("FAMILY")}),t._uU(4,"Save"),t.qZA(),t._uU(5," \xa0\xa0 "),t.TgZ(6,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("FAMILY")}),t._uU(7,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tnFamily)}}function ra(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",60)(1,"div",79)(2,"div",63)(3,"mdb-select-2",80,81),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.pet_type=n}),t.TgZ(5,"mdb-select-option",82),t._uU(6,"Cat"),t.qZA(),t.TgZ(7,"mdb-select-option",83),t._uU(8,"Dog"),t.qZA()()()(),t.TgZ(9,"div",79)(10,"div",63)(11,"mdb-select-2",84,85),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.pet_role=n}),t.TgZ(13,"mdb-select-option",86),t._uU(14,"Pet"),t.qZA(),t.TgZ(15,"mdb-select-option",87),t._uU(16,"Support"),t.qZA(),t.TgZ(17,"mdb-select-option",88),t._uU(18,"Other"),t.qZA()()()(),t.TgZ(19,"div",62)(20,"div",11)(21,"label"),t._uU(22,"Breed "),t.TgZ(23,"span",64),t._uU(24,"*"),t.qZA()(),t.TgZ(25,"input",89,66),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.breed=n}),t.qZA()()(),t.TgZ(27,"div",62)(28,"div",11)(29,"label"),t._uU(30,"Weight"),t.qZA(),t.TgZ(31,"input",89,90),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.weight=n}),t.qZA()()(),t.TgZ(33,"div",62)(34,"div",11)(35,"label"),t._uU(36,"Vaccination"),t.qZA(),t.TgZ(37,"input",91,92),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.vaccination=n}),t.qZA()()(),t.TgZ(39,"div",62)(40,"div",11)(41,"label"),t._uU(42,"Insurance"),t.qZA(),t.TgZ(43,"input",91,93),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.insurance=n}),t.qZA()()(),t.TgZ(45,"div",94)(46,"div",11)(47,"label"),t._uU(48,"Notes"),t.qZA(),t.TgZ(49,"input",91,93),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.notes=n}),t.qZA()()(),t.TgZ(51,"div",62)(52,"div",11)(53,"label"),t._uU(54,"Setup"),t.qZA(),t.TgZ(55,"input",95,96),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.setup_charge=n}),t.qZA()()(),t.TgZ(57,"div",62)(58,"div",11)(59,"label"),t._uU(60,"Monthly"),t.qZA(),t.TgZ(61,"input",97,98),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.monthly=n}),t.qZA()()(),t.TgZ(63,"div",62)(64,"div",11)(65,"mdb-date-picker",99,14),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.expiry=n}),t.qZA()()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.pet_type),t.xp6(8),t.Q6J("ngModel",e.pet_role),t.xp6(14),t.ekj("bg-bad-data",e.breed.length<2),t.Q6J("ngModel",e.breed),t.xp6(6),t.Q6J("ngModel",e.weight),t.xp6(6),t.ekj("bg-bad-data",e.vaccination.length<2),t.Q6J("ngModel",e.vaccination),t.xp6(6),t.ekj("bg-bad-data",e.insurance.length<2),t.Q6J("ngModel",e.insurance),t.xp6(6),t.ekj("bg-bad-data",e.notes.length<2),t.Q6J("ngModel",e.notes),t.xp6(6),t.Q6J("ngModel",e.setup_charge),t.xp6(6),t.Q6J("ngModel",e.monthly),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("ngModel",e.expiry)}}function la(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",78)(1,"div",4),t.YNc(2,ra,67,20,"div",58),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("PETS")}),t._uU(4,"Save"),t.qZA(),t._uU(5," \xa0\xa0 "),t.TgZ(6,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("PETS")}),t._uU(7,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tnPets)}}function da(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",43),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function sa(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",43),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.pl_id),t.xp6(1),t.hij(" ",e.label," ")}}function _a(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",60)(1,"div",61)(2,"div",11)(3,"label"),t._uU(4,"Make"),t.qZA(),t.TgZ(5,"input",89,101),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.make=n}),t.qZA()()(),t.TgZ(7,"div",61)(8,"div",11)(9,"label"),t._uU(10,"Model"),t.qZA(),t.TgZ(11,"input",89,102),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.model=n}),t.qZA()()(),t.TgZ(13,"div",61)(14,"div",11)(15,"label"),t._uU(16,"Color"),t.qZA(),t.TgZ(17,"input",91,92),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.color=n}),t.qZA()()(),t.TgZ(19,"div",61)(20,"div",11)(21,"mdb-select-2",103),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.state=n}),t.YNc(22,da,2,2,"mdb-select-option",17),t.ALo(23,"keyvalue"),t.qZA()()(),t.TgZ(24,"div",62)(25,"div",11)(26,"label"),t._uU(27,"Tag"),t.qZA(),t.TgZ(28,"input",91,93),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.tag=n}),t.qZA()()(),t.TgZ(30,"div",79)(31,"div",11)(32,"mdb-select-2",104,105),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.pl_id=n}),t.YNc(34,sa,2,2,"mdb-select-option",17),t.qZA()()(),t.TgZ(35,"div",61)(36,"div",11)(37,"label"),t._uU(38,"Setup"),t.qZA(),t.TgZ(39,"input",95,96),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.setup_charge=n}),t.qZA()()(),t.TgZ(41,"div",61)(42,"div",11)(43,"label"),t._uU(44,"Monthly"),t.qZA(),t.TgZ(45,"input",97,98),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.monthly=n}),t.qZA()()(),t.TgZ(47,"div",79)(48,"div",11)(49,"mdb-date-picker",99,14),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.expiry=n}),t.qZA()()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(5),t.Q6J("ngModel",e.make),t.xp6(6),t.Q6J("ngModel",e.model),t.xp6(6),t.Q6J("ngModel",e.color),t.xp6(4),t.Q6J("ngModel",e.state),t.xp6(1),t.Q6J("ngForOf",t.lcZ(23,13,i.stateList)),t.xp6(6),t.Q6J("ngModel",e.tag),t.xp6(4),t.Q6J("ngModel",e.pl_id),t.xp6(2),t.Q6J("ngForOf",i.pkList),t.xp6(5),t.Q6J("ngModel",e.setup_charge),t.xp6(6),t.Q6J("ngModel",e.monthly),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("ngModel",e.expiry)}}function ca(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",100)(1,"div",4),t.YNc(2,_a,51,15,"div",58),t.TgZ(3,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("VEHICLES")}),t._uU(4,"Save"),t.qZA(),t._uU(5," \xa0\xa0 "),t.TgZ(6,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("VEHICLES")}),t._uU(7,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tnVehicles)}}function ua(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",114),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addDocuments()}),t._UZ(1,"mdb-icon",115),t.qZA()}}function pa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",116)(1,"td")(2,"p",55),t._uU(3),t.qZA()(),t.TgZ(4,"td",117)(5,"a",118),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).getDocument(o.index,o.doc_id)}),t._UZ(6,"i"),t.qZA()(),t.TgZ(7,"td",119),t._uU(8),t.qZA(),t.TgZ(9,"td",119),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",120),t._uU(14),t.qZA(),t.TgZ(15,"td",121)(16,"a",118),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).delDocument(o.doc_id)}),t._UZ(17,"i"),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(e.index),t.xp6(3),t.Tol(i.imageList[e.doc_format]),t.xp6(2),t.Oqu(e.doc_type),t.xp6(2),t.Oqu(e.doc_name),t.xp6(2),t.Oqu(e.updatedby),t.xp6(2),t.Oqu(e.updated),t.xp6(3),t.Tol(i.imageList.trash)}}function ha(a,r){if(1&a&&(t.TgZ(0,"mdb-tab",106)(1,"div",4)(2,"div",60),t._UZ(3,"div",107),t.TgZ(4,"div",108),t.YNc(5,ua,2,0,"button",109),t.qZA()(),t.TgZ(6,"div",110)(7,"table",111)(8,"thead")(9,"tr")(10,"th",48),t._uU(11,"#"),t.qZA(),t.TgZ(12,"th",48),t._uU(13,"Action"),t.qZA(),t.TgZ(14,"th",48),t._uU(15,"Type"),t.qZA(),t.TgZ(16,"th",48),t._uU(17,"Name"),t.qZA(),t.TgZ(18,"th",48),t._uU(19,"UpdatedBy"),t.qZA(),t.TgZ(20,"th",112),t._uU(21,"Updated"),t.qZA(),t.TgZ(22,"th",48),t._uU(23,"\xa0"),t.qZA()()(),t.TgZ(24,"tbody",50),t.YNc(25,pa,18,11,"tr",113),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.tenant_id>0),t.xp6(20),t.Q6J("ngForOf",e.tnDocuments.data)}}function ga(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",122)(2,"ag-grid-angular",123,124),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n,"TS")})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"TS")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"TS")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"TS")}),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("columnDefs",e.gridTSColumns)("rowData",e.gridTSData)}}let ma=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.toastr=s,this.AS=u,this.modalService=p,this.user=this.AS.currentUserValue,this.urlPrefix="",this.authority="tenante",this.dob=new Date,this.cyear=this.dob.getFullYear(),this.cmon=this.dob.getMonth(),this.cday=this.dob.getDay(),this.myear=this.cyear-90,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:this.myear},this.view="",this.tenant_id=-1,this.parent_id=-1,this.t_status="1",this.showTS=!1,this.caller="",this.qualifier="",this.queryParams={},this.oTenant={},this.tenant={},this.tnFamily=[],this.tnAttributes=[],this.tnDocuments=[],this.tnVehicles=[],this.tnPets=[],this.pkList={},this.baseVehicles={state:"",tag:"",make:"",model:"",color:"",expiryD:"",setup_charge:25,monthly:35,parking_lot:"",parking_tag_id:0,expiry:""},this.basePets={pet_role:"PET",pet_type:"DOG",breed:"",weight:"",insurance:"",expiryD:"",setup_charge:250,monthly:25,notes:"",pet_id:0,vaccination:"",expiry:""},this.baseFamily={first_name:"",last_name:"",relationship:"SPOUSE",occupation:"",dob:"2020-01-01",tax_id:"",phone:"",email:"",status:1},this.tList=[],this.imageList=this.rd.GetImages(),this.tRelations={},this.tAttribute={},this.tStatusList={},this.file_info="",this.showModal=!1,this.stateList=this.rd.GetStates("US"),this.minExpiryDate=new Date,this.gridOptions={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.gridTSColumns=[{headerName:"ID",width:40,field:"tenant_id",filter:"agNumberColumnFilter"},{headerName:"Birth Date",field:"dob",width:80,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.utility.agISODateRenderer},{headerName:"First Name",width:100,field:"first_name",filter:!0},{headerName:"Last Name",width:100,field:"last_name",filter:!0},{headerName:"Email",field:"email",filter:!0},{headerName:"Phone",field:"phone",filter:!0},{headerName:"Status",field:"status",filter:!0}],this.gridTSData=[]}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.view=this.user.type,this.rd.tenantRelationsSubject.subscribe(e=>this.tRelations=e),this.rd.tenantAttrSubject.subscribe(e=>this.tAttribute=e),this.rd.parkingLotSubject.subscribe(e=>this.pkList=e),this.rd.tenantStatusSubject.subscribe(e=>this.tStatusList=e),"Admin"!=this.view&&"SManager"!=this.view&&"Manager"!=this.view&&this.getURL("dashboard","NOP","NOP"),this.minExpiryDate.setDate(this.minExpiryDate.getDay()+180),this.activeRoute.queryParamMap.forEach(e=>{e.keys.forEach(i=>this.queryParams[i]=e.get(i))}),this.queryParams.hasOwnProperty("tenant_id")&&(this.tenant_id=this.queryParams.tenant_id,console.log("Tenant ID:"+this.tenant_id)),this.queryParams.hasOwnProperty("caller")&&(this.caller=this.queryParams.caller,console.log("Caller:"+this.caller)),"Tenant"==this.user.type&&this.user.id_value>0&&(this.tenant_id=this.user.id_value),console.log("OnInit:",this.tenant_id),this.initData(),this.tenant_id>0?this.getInfo(this.tenant_id):-1==this.tenant_id&&"Application"===this.caller?this.initDatafromApplication(this.utility.getApplicationData()):this.clearData("PRIMARY")}ngOnChange(){console.log("changed")}initData(){this.getTenants()}initDatafromApplication(e){this.clearData("PRIMARY");let i=e.tenant_name.split(" "),n=JSON.parse(e.application);console.log("initDatafromApplication:",e),this.tenant.tenant_id=-1,this.tenant.first_name=i[0],i.length>2?(this.tenant.middle_name=i[1],this.tenant.last_name=i[2]):this.tenant.last_name=i[1],this.tenant.email=n.email,this.tenant.phone=n.phone,this.tenant.phone2="",this.tenant.tax_id=n.tax_id,this.tenant.description="Created from Application ID:"+e.tenancy_app_id,this.tenant.dob=n.dob,this.tenant.dl_id=n.dl_id,this.tenant.dl_state=n.dl_state,this.t_status="2",this.tenant.relationship="S",this.tenant.parent="0"}getInfo(e){const i={params:{tenant_id:e}};console.log("getInfo:"+e),this.REQ.get("tenant",{query:JSON.stringify(i)}).subscribe(n=>{if(this.tenant=n,this.oTenant=this.tenant,console.log("getInfo:",this.tenant),this.dob=this.tenant.dob,this.t_status=""+this.tenant.status,this.parent_id=this.tenant.parent,this.tenant.family){let o=JSON.parse(this.tenant.family).data;this.tnFamily=[];for(let l=0;l<o.length;l++)o[l].expiryD=o[l].expiry,this.tnFamily.push(o[l]);this.tnFamily.push(this.baseFamily),console.log("getInfo- length:",o.length,"=",this.tnFamily)}if(this.tenant.attributes&&(this.tnAttributes=JSON.parse(this.tenant.attributes)),this.tenant.documents&&(this.tnDocuments=JSON.parse(this.tenant.documents)),this.tenant.vehicles){let o=JSON.parse(this.tenant.vehicles).data;this.tnVehicles=[];for(let l=0;l<o.length;l++)o[l].expiryD=o[l].expiry,this.tnVehicles.push(o[l]);this.tnVehicles.push(this.baseVehicles),console.log("length:",o.length,"=",this.tnVehicles)}if(this.tenant.pets){let o=JSON.parse(this.tenant.pets).data;this.tnPets=[];for(let l=0;l<o.length;l++)o[l].expiryD=o[l].expiry,this.tnPets.push(o[l]);this.tnPets.push(this.basePets),console.log("length:",o.length,"=",this.tnPets)}this.qualifier="UPDATE"},n=>{console.log(n)})}getTenants(){this.REQ.get("tenant","").subscribe(e=>{this.tList=e.data},e=>{console.log(e)})}searchTenant(){const e={params:{report:"TENANT-SEARCH",dob:this.tenant.dob,tenant_id:this.tenant_id,first_name:this.tenant.first_name,last_name:this.tenant.last_name},usage:{authority:this.authority,sub_authority:"MASTER",operation:"SEARCH",data:"NA"}};""!=this.tenant.dl_id&&(e.params.dl_state=this.tenant.dl_state,e.params.dl_id=this.tenant.dl_id),console.log("searchTenant: Entered:",e),this.REQ.get("tenant",{query:JSON.stringify(e)}).subscribe(i=>{if(console.log("searchTenant:",i),void 0===i.data)console.log("searchTenant: NO data returned");else for(let n=0;n<i.data.length;n++);},i=>{console.log(i),this.toastr.error("Tenant search failed : "+i)})}getTS(e,i){return console.log("getTS: Entered:",i,e),this.showTS=!0,this.gridTSData=this.tList.filter(n=>{var o=!1;return this.tenant.first_name.length>0&&this.tenant.last_name.length>0?o=n.first_name.match(new RegExp(this.tenant.first_name,"gmi"))&&n.last_name.match(new RegExp(this.tenant.last_name,"gmi")):this.tenant.first_name.length>0?o=n.first_name.match(new RegExp(this.tenant.first_name,"gmi")):this.tenant.last_name.length>0?o=n.last_name.match(new RegExp(this.tenant.last_name,"gmi")):this.tenant.last_name.length>0&&(o=n.dob.match(new RegExp(this.tenant.dob,"gmi"))),o}),console.log("OUTPUT: ",this.gridTSData),!0}refreshTenant(){this.getInfo(this.tenant_id)}saveAS(e){this.tenant_id=-1,this.tenant.tenant_id=-1,this.updateData(e)}updateData(e){console.log("updateData: entered:",e,this.tnVehicles);let i={};if(i.qualifier=e,"TAB2"==e)i.attributes=this.tnAttributes,i.tenant_id=this.tenant_id;else if("FAMILY"==e){i.family=[],i.tenant_id=this.tenant_id;for(let n=0;n<this.tnFamily.length;n++){let o={};o.dob=this.utility.date2ISO(this.tnFamily[n].dob),o.tenant_id=this.tnFamily[n].tenant_id,o.first_name=this.tnFamily[n].first_name,o.last_name=this.tnFamily[n].last_name,o.occupation=this.tnFamily[n].occupation,o.relationship=this.tnFamily[n].relationship,o.email=this.tnFamily[n].email,o.phone=this.tnFamily[n].phone,o.tax_id=this.tnFamily[n].tax_id,o.notes=this.tnFamily[n].notes,o.first_name.length>1&&o.last_name.length>1&&i.family.push(o)}}else if("VEHICLES"==e){i.vehicles=[],i.tenant_id=this.tenant_id;for(let n=0;n<this.tnVehicles.length;n++){let o={};o.expiry=this.utility.date2ISO(this.tnVehicles[n].expiry),o.make=this.tnVehicles[n].make,o.model=this.tnVehicles[n].model,o.color=this.tnVehicles[n].color,o.state=this.tnVehicles[n].state,o.tag=this.tnVehicles[n].tag,o.pl_id=this.tnVehicles[n].pl_id,o.setup_charge=this.tnVehicles[n].setup_charge,o.monthly=this.tnVehicles[n].monthly,o.parking_tag_id=this.tnVehicles[n].parking_tag_id,o.tag.length>2&&i.vehicles.push(o)}}else if("PETS"==e){i.pets=[],i.tenant_id=this.tenant_id;for(let n=0;n<this.tnPets.length;n++){let o={};o.pet_id=this.tnPets[n].pet_id,o.pet_role=this.tnPets[n].pet_role,o.pet_type=this.tnPets[n].pet_type,o.breed=this.tnPets[n].breed,o.weight=this.tnPets[n].weight,o.vaccination=this.tnPets[n].vaccination,o.insurance=this.tnPets[n].insurance,o.expiry=this.utility.date2ISO(this.tnPets[n].expiry),o.notes=this.tnPets[n].notes,o.setup_charge=this.tnPets[n].setup_charge,o.monthly=this.tnPets[n].monthly,o.breed.length>1&&i.pets.push(o)}}else if("PRIMARY"==e){if(this.tenant.first_name.length<2||this.tenant.last_name<2)return this.toastr.error("Please provide Proper Names"),!1;this.validateTaxID(),this.tenant.dob=this.utility.date2ISO(this.dob),this.tenant.status=parseInt(this.t_status),this.tenant.parent=this.parent_id,i=this.tenant,i.qualifier="PRIMARY",i.attributes=[],i.vehicles=[]}console.log("updateData:[",e,"]:",i),this.REQ.post("tenantu",i).subscribe(n=>{var o=n;console.log("tenantUpdate:",o),0==o.code&&o.tenant_id>0?(this.tenant_id=o.tenant_id,this.getInfo(o.tenant_id),this.toastr.success("Tenant Information updated id: "+this.tenant_id)):(this.toastr.error("Tenant updated failed id: "+this.tenant_id),this.toastr.error("Tenant updated failed id: "+o.message))},n=>{console.log(n),this.toastr.error("Update failed, please contact support","Major Error",{timeOut:3e3})})}changeParent(e){console.log("changeParent: ",e),this.parent_id=null===e||null===e.tenant_id?-1:e.tenant_id}clearData(e){console.log("ClearData:"+this.tenant.first_name),this.tenant_id=-1,this.parent_id=-1,this.tenant.tenant_id=-1,this.tenant.first_name="",this.tenant.middle_name="",this.tenant.last_name="",this.tenant.email="",this.tenant.phone="",this.tenant.phone2="",this.tenant.tax_id="",this.tenant.description="",this.tenant.dob="",this.tenant.status=1,this.tenant.relationship="S",this.tenant.parent="0",this.t_status="1",this.qualifier="NEW",document.getElementById("tFamily");for(let n=0;n<this.tnAttributes.length;n++)this.tnAttributes.value="";for(let n=0;n<this.tnDocuments.length;n++)this.tnDocuments.value="";this.tnVehicles=[],this.tnPets=[],console.log("clear Data:",this.tenant)}resetData(){console.log("ResetData:"+this.oTenant.first_name),console.log("ResetData:"+this.oTenant.family),this.tenant=this.oTenant,this.tenant.family&&(this.tnFamily=JSON.parse(this.tenant.family)),this.tenant.attributes&&(this.tnAttributes=JSON.parse(this.tenant.attributes)),this.tenant.documents&&(this.tnDocuments=JSON.parse(this.tenant.documents))}addDocuments(){this.file_info=this.tenant_id+"_"+this.tenant.last_name+"_"+this.tenant.first_name,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Tenant Document",content:{owner_type:"TENANT",owner_id:this.tenant_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i),this.refreshDocuments()})}refreshDocuments(){const e={params:{tenant_id:this.tenant_id,key_type:"TENANT"}};console.log("refreshDocs.2:",e,this.tnDocuments),this.REQ.get("fl",{query:JSON.stringify(e)}).subscribe(i=>{console.log("refreshDocs.3[response]:",i),this.tnDocuments=i},i=>{console.log(i)})}getDocument(e,i){console.log("getDocument: ",this.tnDocuments.data[e]),this.REQ.getDocument(this.tnDocuments.data[e])}delDocument(e){let i={doc_id:e,key_type:"TENANT"};console.log(i),this.REQ.post("fd",i).subscribe(n=>{console.log(n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}onFileUploadClose(e){this.showModal=!1,console.log("onFileUploadClose"),console.log(e)}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}validateTaxID(){return!!/^\d{3}-?\d{2}-?\d{4}$/.test(this.tenant.tax_id)||(console.log("You have entered an invalid tax!"),this.modalRef=this.modalService.show(w.V,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Data Error: Email",content:{owner_type:"TENANT",owner_id:this.tenant_id,buttonText:"OK",description:"Incorrect Tax ID. Please provide correct tax id."}}}),this.tenant.tax_id="",!1)}validateEmail(){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(this.tenant.email)||(console.log("You have entered an invalid email address!"),this.modalRef=this.modalService.show(w.V,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Data Error: Email",content:{owner_type:"TENANT",owner_id:this.tenant_id,buttonText:"OK",description:"Incorrect email address. Please provide correct email address"}}}),this.tenant.email="",!1)}onGridReady(e,i){var n=e.api.getColumnDefs();n.forEach(function(o,l){o.resizable=!0,o.sortable=!0,o.filter=!0}),e.api.setColumnDefs(n)}onModelUpdated(e,i){e.api.sizeColumnsToFit()}onCellClicked(e,i){console.log("onCellClicked:",e,i)}onCellDoubleClicked(e,i){console.log("Double Clicked:",e,i)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(d.klp),t.Y36(b.$),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tenant-e"]],viewQuery:function(e,i){if(1&e&&t.Gf(zo,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:106,vars:47,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[3,"href",4,"ngIf"],[1,"card-body"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass"],["statictabs",""],["heading","Details"],[1,"row"],[1,"col-md-4","col-sm-12"],[1,"md-form","mb-2"],["mdbInput","","name","street","type","text","value","",1,"form-control",3,"ngModel","ngModelChange","change"],["label","Birth Date","required","",3,"inline","options","ngModel","ngModelChange"],["sd",""],[1,"form-group"],["label","TStatus","id","tsSelect",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mdbInput","","name","street","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","placeholder","xxx-xx-xxxx","name","unit","type","text","value","",1,"form-control",3,"ngModel","ngModelChange","change"],["mdbInput","","name","size","type","text","value","",1,"form-control",3,"ngModel","ngModelChange","change"],["mdbInput","","name","city","type","text","value","",1,"form-control",3,"ngModel","ngModelChange","change"],["mdbInput","","name","size","type","text","value","",1,"form-control",3,"ngModel","change","ngModelChange"],["mdbInput","","name","size","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],[1,"md-form"],["name","sSelect","id","sSelect",3,"ngModel","ngModelChange"],["keyOfID","tenant_id","firstLine","!!first_name>> !!last_name>>","searchInKeys","first_name,last_name",3,"contentList","selectedID","selectedValue"],["label","Relationship to Parent","name","tRelations","id","tTSelect",3,"ngModel","ngModelChange"],[1,"col-12"],["mdbInput","","id","description","placeholder","Enter Tenant Details here","cols","80","name","tx_description","rows","4",1,"md-textarea","md-textarea-auto","form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],["mdbBtn","","color","info","rounded","true","type","button",3,"click"],["mdbBtn","","color","default","rounded","true","type","button",3,"click"],["mdbBtn","","type","button",1,"btn","btn-link",2,"float","right",3,"click"],[1,"d-block","text-left","update-text"],["heading","Other Info",4,"ngIf"],["heading","Family",4,"ngIf"],["heading","Pets",4,"ngIf"],["heading","Vehicle",4,"ngIf"],["heading","Documents",4,"ngIf"],["class","card-body",4,"ngIf"],[3,"href"],[1,"fas","fa-user","text-white"],[3,"value"],["heading","Other Info"],["id","table",1,"table-editable"],["id","tableAttributes","name","tableAttributes",1,"table","table-responsive-sm",2,"margin-bottom","1px"],["scope","col","width","25px"],["scope","col"],["scope","col","width","15px"],["id","tbA"],["id","tARow","style","margin-bottom: 0px",4,"ngFor","ngForOf"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",3,"click"],["id","tARow",2,"margin-bottom","0px"],[2,"padding-top","0px","padding-bottom","0px"],[1,"card-category","d-inline"],["name","size"],["heading","Family"],["class","row col-12",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link",2,"float","right",3,"click"],[1,"row","col-12"],[1,"col-1"],[1,"col-2"],[1,"md-form","mb-1"],[2,"color","red"],["mdbInput","","type","text","value","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["pBreed",""],["label","Relationship","name","tRelations","id","tTSelect",3,"ngModel","ngModelChange"],[1,"col-3"],["label","Birth Date",3,"inline","options","ngModel","disabled","ngModelChange"],["fdob",""],["mdbInput","","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["ftaxid",""],["fphone",""],["femail",""],[1,"col-5"],["fnotes",""],[1,"fas","fa-user","text-primary"],["heading","Pets"],[1,"col-sm-2"],["label","Pet Type","type","text",3,"ngModel","ngModelChange"],["petType",""],["value","CAT"],["value","DOG"],["label","Pet Role","type","text",3,"ngModel","ngModelChange"],["petRole",""],["value","PET"],["value","SUPPORT"],["value","OTHER"],["mdbInput","","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["pWt",""],["mdbInput","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["vColor",""],["vTag",""],[1,"col-6"],["mdbInput","","type","number","placeholder","25",1,"form-control",3,"ngModel","ngModelChange"],["vSC",""],["mdbInput","","type","number","placeholder","35",1,"form-control",3,"ngModel","ngModelChange"],["vM",""],["label","Expiry","required","",3,"inline","options","ngModel","ngModelChange"],["heading","Vehicle"],["vMake",""],["vModel",""],["label","State","name","sSelect","id","sSelect",3,"ngModel","ngModelChange"],["label","Parking Lot","type","text",3,"ngModel","ngModelChange"],["vParking",""],["heading","Documents"],[1,"col-md-10","card-title"],[1,"col-md-2"],["type","button","style","float:right","class","btn-simple btn-sm",3,"click",4,"ngIf"],[1,"row","col-md-12"],["id","tableDocuments","width","100%",1,"table","tablesorter"],["scope","col",1,"text-center"],["id","tARow",4,"ngFor","ngForOf"],["type","button",1,"btn-simple","btn-sm",2,"float","right",3,"click"],["fas","","icon","plus-square"],["id","tARow"],[1,"text-info"],[3,"click"],["nowrap","","name","size"],[1,"text-center"],[1,"text-danger"],["id","TL","name","TL"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","350px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["grid1",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t.YNc(5,Bo,2,2,"a",3),t._uU(6),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"mdb-tabset",6,7)(11,"mdb-tab",8)(12,"div",4)(13,"div",9)(14,"div",10)(15,"div",11)(16,"label"),t._uU(17,"First Name"),t.qZA(),t.TgZ(18,"input",12),t.NdJ("ngModelChange",function(o){return i.tenant.first_name=o})("change",function(o){return i.getTS(o,"")}),t.qZA()()(),t.TgZ(19,"div",10)(20,"div",11)(21,"mdb-date-picker",13,14),t.NdJ("ngModelChange",function(o){return i.dob=o}),t.qZA()()(),t.TgZ(23,"div",10)(24,"div",15)(25,"label"),t._uU(26,"Status"),t.qZA(),t.TgZ(27,"select",16),t.NdJ("ngModelChange",function(o){return i.t_status=o}),t.YNc(28,Xo,2,2,"option",17),t.qZA()()()(),t.TgZ(29,"div",9)(30,"div",10)(31,"div",11)(32,"label"),t._uU(33,"Middle Name "),t.qZA(),t.TgZ(34,"input",18),t.NdJ("ngModelChange",function(o){return i.tenant.middle_name=o}),t.qZA()()(),t.TgZ(35,"div",10)(36,"div",11)(37,"label"),t._uU(38,"Tax ID "),t.qZA(),t.TgZ(39,"input",19),t.NdJ("ngModelChange",function(o){return i.tenant.tax_id=o})("change",function(o){return i.validateTaxID(),i.getTS(o,"TS")}),t.qZA()()(),t.TgZ(40,"div",10)(41,"div",11)(42,"label"),t._uU(43," Phone "),t.qZA(),t.TgZ(44,"input",20),t.NdJ("ngModelChange",function(o){return i.tenant.phone=o})("change",function(o){return i.getTS(o,"TS")}),t.qZA()()()(),t.TgZ(45,"div",9)(46,"div",10)(47,"div",11)(48,"label"),t._uU(49,"Last Name "),t.qZA(),t.TgZ(50,"input",21),t.NdJ("ngModelChange",function(o){return i.tenant.last_name=o})("change",function(o){return i.getTS(o,"")}),t.qZA()()(),t.TgZ(51,"div",10)(52,"div",11)(53,"label"),t._uU(54,"Email "),t.qZA(),t.TgZ(55,"input",22),t.NdJ("change",function(){return i.validateEmail()})("ngModelChange",function(o){return i.tenant.email=o})("change",function(o){return i.getTS(o,"TS")}),t.qZA()()(),t.TgZ(56,"div",10)(57,"div",11)(58,"label"),t._uU(59,"Alternate Phone "),t.qZA(),t.TgZ(60,"input",23),t.NdJ("ngModelChange",function(o){return i.tenant.phone2=o}),t.qZA()()()(),t.TgZ(61,"div",9)(62,"div",10)(63,"table")(64,"tr")(65,"td")(66,"label"),t._uU(67,"Driver License"),t.qZA()()(),t.TgZ(68,"tr",24)(69,"td")(70,"mdb-select-2",25),t.NdJ("ngModelChange",function(o){return i.tenant.dl_state=o}),t.YNc(71,$o,2,2,"mdb-select-option",17),t.ALo(72,"keyvalue"),t.qZA()(),t.TgZ(73,"td")(74,"input",23),t.NdJ("ngModelChange",function(o){return i.tenant.dl_id=o}),t.qZA()()()()(),t.TgZ(75,"div",10)(76,"div",11)(77,"app-select-with-search",26),t.NdJ("selectedValue",function(o){return i.changeParent(o)}),t.qZA()()(),t.TgZ(78,"div",10)(79,"div",11)(80,"mdb-select-2",27),t.NdJ("ngModelChange",function(o){return i.tenant.relationship=o}),t.YNc(81,Ko,2,2,"mdb-select-option",17),t.qZA()()()(),t.TgZ(82,"div",9)(83,"div",28)(84,"div",24)(85,"label"),t._uU(86,"Description"),t.qZA(),t.TgZ(87,"textarea",29),t.NdJ("ngModelChange",function(o){return i.tenant.description=o}),t._uU(88,"\t\t\t\t\t\t\t\t  \t\t\tEnter description Here\n\t\t\t\t\t\t\t\t\t\t"),t.qZA()()()()(),t.TgZ(89,"div",30)(90,"button",31),t.NdJ("click",function(){return i.updateData("PRIMARY")}),t._uU(91," Save "),t.qZA(),t.TgZ(92,"button",32),t.NdJ("click",function(){return i.saveAS("PRIMARY")}),t._uU(93," Save As "),t.qZA(),t.TgZ(94,"button",33),t.NdJ("click",function(){return i.clearData("PRIMARY")}),t._uU(95," Clear "),t.qZA()(),t.TgZ(96,"div",9)(97,"div",28)(98,"div",34),t._uU(99),t.qZA()()()(),t.YNc(100,ea,22,1,"mdb-tab",35),t.YNc(101,aa,8,1,"mdb-tab",36),t.YNc(102,la,8,1,"mdb-tab",37),t.YNc(103,ca,8,1,"mdb-tab",38),t.YNc(104,ha,26,2,"mdb-tab",39),t.qZA()()(),t.YNc(105,ga,4,2,"div",40),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngIf",i.tenant_id>0),t.xp6(1),t.lnq(" \xa0",i.tenant_id,"\xa0",i.tenant.first_name,"\xa0",i.tenant.last_name," "),t.xp6(3),t.Q6J("buttonClass","nav md-pills border-bottom")("justified",!0)("contentClass","card"),t.xp6(9),t.ekj("bg-bad-data",i.tenant.first_name.length<2),t.Q6J("ngModel",i.tenant.first_name),t.xp6(3),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("ngModel",i.dob),t.xp6(6),t.Q6J("ngModel",i.t_status),t.xp6(1),t.Q6J("ngForOf",i.tStatusList),t.xp6(6),t.Q6J("ngModel",i.tenant.middle_name),t.xp6(5),t.ekj("bg-bad-data",i.tenant.tax_id.length<11),t.Q6J("ngModel",i.tenant.tax_id),t.xp6(5),t.ekj("bg-bad-data",i.tenant.phone.length<8),t.Q6J("ngModel",i.tenant.phone),t.xp6(6),t.ekj("bg-bad-data",i.tenant.last_name.length<2),t.Q6J("ngModel",i.tenant.last_name),t.xp6(5),t.ekj("bg-bad-data",i.tenant.email.length<8),t.Q6J("ngModel",i.tenant.email),t.xp6(5),t.Q6J("ngModel",i.tenant.phone2),t.xp6(10),t.Q6J("ngModel",i.tenant.dl_state),t.xp6(1),t.Q6J("ngForOf",t.lcZ(72,45,i.stateList)),t.xp6(3),t.Q6J("ngModel",i.tenant.dl_id),t.xp6(3),t.Q6J("contentList",i.tList)("selectedID",i.parent_id),t.xp6(3),t.Q6J("ngModel",i.tenant.relationship),t.xp6(1),t.Q6J("ngForOf",i.tRelations),t.xp6(6),t.Q6J("ngModel",i.tenant.description),t.xp6(12),t.AsE(" Last updated by ",i.tenant.updatedby," on ",i.tenant.updated," "),t.xp6(1),t.Q6J("ngIf",i.tenant_id>0),t.xp6(1),t.Q6J("ngIf",i.tenant_id>0),t.xp6(1),t.Q6J("ngIf",i.tenant_id>0),t.xp6(1),t.Q6J("ngIf",i.tenant_id>0),t.xp6(1),t.Q6J("ngIf",i.tenant_id>0),t.xp6(1),t.Q6J("ngIf",i.showTS))},directives:[d.gRC,c.O5,d.AH5,d.wWr,_.Fj,d.HqI,_.JJ,_.On,d.JNR,_.Q7,_.EJ,c.sg,_.YN,_.Kr,d.lPY,d.x8v,D,d.mTE,d.b6v,_.wV,d.UiO,d.XIm,v.N8],pipes:[c.Nd],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]{font-size:14px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}}"]}),a})();function fa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenancye","tenancy_id",n.tenancy_id)}),t._UZ(1,"mdb-icon",31),t.qZA()}}function ba(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().getURL("tenancye","tenancy_id",-1)}),t._UZ(1,"mdb-icon",33),t.qZA()}}function ya(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("property","property_id",n.property_id)}),t._UZ(1,"i",35),t.qZA()}}function Ca(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return n.getURL("tenant","tenant_id",n.tenant_id)}),t._UZ(1,"i",36),t.qZA()}}function Ta(a,r){if(1&a&&(t.TgZ(0,"span")(1,"label"),t._uU(2,"Additional Information"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.hij(" ",e.tenancy.description," ")}}function Za(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().addDocuments()}),t._UZ(1,"mdb-icon",38),t.qZA()}}function va(a,r){if(1&a&&(t.TgZ(0,"a"),t._UZ(1,"i"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Gre("",e.imageList.trash," text-danger")}}function xa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",39)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",40)(6,"a",34),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().getDocument(o.index,o.doc_id)}),t._UZ(7,"i"),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td",41),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t.YNc(17,va,2,3,"a",18),t.qZA()()}if(2&a){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.doc_id),t.xp6(3),t.Tol(i.imageList[e.doc_format]),t.xp6(2),t.Oqu(e.doc_type),t.xp6(2),t.Oqu(e.doc_name),t.xp6(2),t.Oqu(e.updatedby),t.xp6(2),t.Oqu(e.updated),t.xp6(2),t.Q6J("ngIf","Admin"===i.view)}}let Aa=(()=>{class a{constructor(e,i,n,o,l,s,u){this.utility=e,this.REQ=i,this.rd=n,this.AS=o,this.activeRoute=l,this.router=s,this.modalService=u,this.user=this.AS.currentUserValue,this.authority="Tenancy",this.file_info="",this.showModal=!1,this.urlPrefix="",this.queryParams={},this.tenant_id=-1,this.property_id=-1,this.tenancy_id=-1,this.combo_id="",this.view="Tenant",this.tenancy=[],this.tnAttributes=[],this.tnDocuments=[],this.lease_start_date="",this.lease_end_date="",this.move_in_date="",this.move_out_date="",this.imageList=this.rd.GetImages(),this.tStatusList=[],this.tTermsList=[],this.tenancy_status="",this.tenancy_terms="",this.gridAOptions={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.gridAColumns=[{headerName:"Name",field:"co_value",sortable:!0,filter:!0},{headerName:"Description",field:"ta_value",sortable:!0,cellStyle:{"white-space":"normal"},filter:!0},{headerName:"Reference",field:"ta_ref",sortable:!0,cellStyle:{"white-space":"normal"},filter:!0}],this.gridAData=[],this.getRowHeight=function(p){return p.data.ta_value.length<50?25:25*Math.ceil(p.data.ta_value.length/50)}}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.rd.tenancyStatusSubject.subscribe(e=>this.tStatusList=e),this.rd.tenancyTermsSubject.subscribe(e=>this.tTermsList=e),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("tenant_id")&&(this.tenant_id=this.queryParams.tenant_id),this.queryParams.hasOwnProperty("property_id")&&(this.property_id=this.queryParams.property_id),this.queryParams.hasOwnProperty("tenancy_id")&&(this.tenancy_id=this.queryParams.tenancy_id)}),"Tenant"===this.user.type&&this.user.id_value>0?(this.tenant_id=this.user.id_value,this.getTenancyInfo(this.tenant_id,"tenant_id"),this.view="Tenant"):(this.tenancy_id>0?this.getTenancyInfo(this.tenancy_id,"tenancy_id"):this.tenant_id>0?this.getTenancyInfo(this.tenant_id,"tenant_id"):this.router.navigate([this.urlPrefix+"report"],{queryParams:{report:"TENANCY"}}),this.view=this.user.type)}getTenancyInfo(e,i){const n={params:{NOP:"NOP"}};n.params[i]=e,this.gridAData=[],this.tenancy=[],this.tnAttributes=[],this.tnDocuments=[],console.log("getTenancyInfo entered:",n),this.REQ.get("tenancy",{query:JSON.stringify(n)}).subscribe(o=>{this.tenancy=o,console.log("getTenancyInfo:",this.tenancy),this.tenancy_id=this.tenancy.tenancy_id,this.tenant_id=this.tenancy.tenant_id,this.property_id=this.tenancy.property_id,this.tenancy.attributes&&(this.tnAttributes=JSON.parse(this.tenancy.attributes),this.gridAData=this.tnAttributes.data),this.tenancy.documents&&(this.tnDocuments=JSON.parse(this.tenancy.documents)),this.combo_id=this.tenancy_id+"|"+this.property_id,this.lease_start_date=this.tenancy.lease_start_date.slice(0,this.tenancy.lease_start_date.indexOf("T")),this.lease_end_date=this.tenancy.lease_end_date.slice(0,this.tenancy.lease_end_date.indexOf("T")),this.move_in_date=this.tenancy.move_in_date.slice(0,this.tenancy.move_in_date.indexOf("T")),this.move_out_date=this.tenancy.move_out_date.slice(0,this.tenancy.move_out_date.indexOf("T"));for(let l=0;l<this.tTermsList.length;l++)if(this.tTermsList[l].co_name==this.tenancy.term){this.tenancy_terms=this.tTermsList[l].co_value;break}for(let l=0;l<this.tStatusList.length;l++)if(this.tStatusList[l].co_name==this.tenancy.status){this.tenancy_status=this.tStatusList[l].co_value;break}},o=>{console.log("getTenancyInfo:",o)})}onGridReady(e){var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}refreshTenancy(){console.log("tenancy id:"+this.combo_id);let e=this.combo_id.split("|");this.tenancy_id=parseInt(e[0],10),isNaN(this.tenancy_id)&&(this.tenancy_id=-1),this.property_id=parseInt(e[1],10),console.log("tenancy id:"+this.tenancy_id+" p:"+this.property_id),this.tenancy_id>0&&this.getTenancyInfo(this.tenancy_id,"tenancy_id")}getDocument(e,i){console.log("getDocument: ",this.tnDocuments.data[e]);let n={params:this.tnDocuments.data[e],usage:{authority:this.authority,sub_authority:"MASTER",operation:"DOWNLOAD",data:"NA"}},o=n.params.doc_id+"_"+n.params.doc_name+"."+n.params.doc_format;console.log("getDocument: ",n,o),this.REQ.getDocument({query:JSON.stringify(n)},o)}addDocuments(){this.file_info=this.tenancy.label+"_"+this.tenancy.first_name,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.showModal=!0,this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Tenancy Document",content:{owner_type:"TENANCY",owner_id:this.tenancy_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i),this.refreshDocuments()})}refreshDocuments(){const e={params:{tenancy_id:this.tenancy_id,key_type:"TENANCY"}};console.log("refreshDocs.2:",e,this.tnDocuments),this.REQ.get("fl",{query:JSON.stringify(e)}).subscribe(i=>{console.log("refreshDocs.3[response]:",i),this.tnDocuments=i},i=>{console.log(i)})}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}onModelUpdatedA(e){e.api.sizeColumnsToFit()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C.t),t.Y36(m.s),t.Y36(y.J),t.Y36(b.$),t.Y36(h.gz),t.Y36(h.F0),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tenancy"]],decls:119,vars:38,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-md-8","col-sm-12","pt-md-0","pt-3"],[1,"fas","fa-user-circle","text-white"],[1,"col-md-4","col-sm-12","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","placement","left","ngbTooltip","Edit Tenancy Info",3,"click",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","placement","left","ngbTooltip","Add new Tenancy",3,"click",4,"ngIf"],[1,"card-body"],[1,"col-sm-3"],[3,"click",4,"ngIf"],[1,"col-sm-3","mb-2"],["id","agGridA","name","agGridA",1,"col-sm-6","mb-2"],["animateRows","","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","390px",3,"columnDefs","rowData","getRowHeight","gridReady","modelUpdated"],["agGridA",""],[1,"col-sm-6","mb-2"],[4,"ngIf"],[1,"d-block","w-100","mt-3"],[1,"blue-grey","lighten-4"],[1,"activator"],["type","button","style","float:right","class"," btn-simple btn-sm",3,"click",4,"ngIf"],[1,"table-responsive"],["id","tableDocuments","name","tableDocuments","width","100%",1,"table","table-hover"],["scope","col"],["scope","col",1,"text-center"],["id","tARow",4,"ngFor","ngForOf"],[1,"col-12","text-muted"],[1,"col-12","text-left","pt-3","update-text"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","placement","left","ngbTooltip","Edit Tenancy Info",3,"click"],["fas","","icon","pen-square text-danger","size","2x"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","placement","left","ngbTooltip","Add new Tenancy",3,"click"],["far","","icon","plus-square text-danger","size","2x"],[3,"click"],[1,"fas","fa-home","text-primary"],[1,"fas","fa-user","text-primary"],["type","button",1,"btn-simple","btn-sm",2,"float","right",3,"click"],["far","","icon","plus-square"],["id","tARow"],[1,"text-primary"],["nowrap",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"div",3)(5,"div",4)(6,"h3"),t._UZ(7,"i",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div",7),t.YNc(11,fa,2,0,"button",8),t.YNc(12,ba,2,0,"button",9),t.qZA()()()()(),t.TgZ(13,"div",10)(14,"div",3)(15,"div",11)(16,"label"),t.YNc(17,ya,2,0,"a",12),t._uU(18,"\xa0Property"),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"div",11)(21,"label"),t.YNc(22,Ca,2,0,"a",12),t._uU(23,"\xa0Tenant"),t.qZA(),t._uU(24),t.qZA(),t.TgZ(25,"div",11)(26,"label"),t._uU(27,"Family Members"),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"div",11)(30,"label"),t._uU(31,"Status"),t.qZA(),t._uU(32),t.qZA()(),t.TgZ(33,"div",3)(34,"div",13)(35,"label"),t._uU(36," Lease Start Date "),t.qZA(),t._uU(37),t.qZA(),t.TgZ(38,"div",13)(39,"label"),t._uU(40," Lease End Date "),t.qZA(),t._uU(41),t.qZA(),t.TgZ(42,"div",13)(43,"label"),t._uU(44," Move-in Date "),t.qZA(),t._uU(45),t.qZA(),t.TgZ(46,"div",13)(47,"label"),t._uU(48," Move-out Date "),t.qZA(),t._uU(49),t.qZA()(),t.TgZ(50,"div",3)(51,"div",13)(52,"label"),t._uU(53,"Rent "),t.qZA(),t._uU(54),t.ALo(55,"currency"),t.qZA(),t.TgZ(56,"div",13)(57,"label"),t._uU(58,"Deposit Required"),t.qZA(),t._uU(59),t.ALo(60,"currency"),t.qZA(),t.TgZ(61,"div",13)(62,"label"),t._uU(63,"Actual Deposit"),t.qZA(),t._uU(64),t.ALo(65,"currency"),t.qZA(),t.TgZ(66,"div",13)(67,"label"),t._uU(68,"Term "),t.qZA(),t._uU(69),t.qZA()(),t.TgZ(70,"div",3)(71,"div",14)(72,"ag-grid-angular",15,16),t.NdJ("gridReady",function(o){return i.onGridReady(o)})("modelUpdated",function(o){return i.onModelUpdatedA(o)}),t.qZA()(),t.TgZ(74,"div",17)(75,"label"),t._uU(76,"Contact Person"),t.qZA(),t._uU(77),t.TgZ(78,"label"),t._uU(79,"Contact Phone"),t.qZA(),t._uU(80),t.TgZ(81,"label"),t._uU(82,"Contact Email"),t.qZA(),t._uU(83),t.YNc(84,Ta,4,1,"span",18),t.qZA()(),t.TgZ(85,"div",19)(86,"mdb-card")(87,"mdb-card-header",20)(88,"div",21),t.YNc(89,Za,2,0,"button",22),t._uU(90,"\xa0 "),t.qZA(),t._uU(91," Documents "),t.qZA(),t.TgZ(92,"mdb-card-body")(93,"div",23)(94,"table",24)(95,"thead")(96,"tr")(97,"th",25),t._uU(98,"#"),t.qZA(),t.TgZ(99,"th",25),t._uU(100,"Doc ID"),t.qZA(),t.TgZ(101,"th",25),t._uU(102,"Action"),t.qZA(),t.TgZ(103,"th",25),t._uU(104,"Type"),t.qZA(),t.TgZ(105,"th",25),t._uU(106,"Name"),t.qZA(),t.TgZ(107,"th",25),t._uU(108,"UpdatedBy"),t.qZA(),t.TgZ(109,"th",26),t._uU(110,"Updated"),t.qZA(),t.TgZ(111,"th",25),t._uU(112,"\xa0"),t.qZA()()(),t.TgZ(113,"tbody"),t.YNc(114,xa,18,10,"tr",27),t.qZA()()()()()(),t.TgZ(115,"div",3)(116,"div",28)(117,"div",29),t._uU(118),t.qZA()()()()()()),2&e&&(t.xp6(8),t.HOy(" \xa0",i.tenancy_id,"\xa0",i.tenancy.label,"\xa0-\xa0",i.tenancy.first_name," ",i.tenancy.last_name," "),t.xp6(3),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(5),t.Q6J("ngIf",i.property_id>0),t.xp6(2),t.hij(" ",i.tenancy.label," "),t.xp6(3),t.Q6J("ngIf",i.tenant_id>0),t.xp6(2),t.AsE(" ",i.tenancy.first_name," ",i.tenancy.last_name," "),t.xp6(4),t.hij(" ",i.tenancy.family_members," "),t.xp6(4),t.hij(" ",i.tenancy_status," "),t.xp6(5),t.hij(" ",i.lease_start_date," "),t.xp6(4),t.hij(" ",i.lease_end_date," "),t.xp6(4),t.hij(" ",i.move_in_date," "),t.xp6(4),t.hij(" ",i.move_out_date," "),t.xp6(5),t.hij(" ",t.lcZ(55,32,i.tenancy.rent)," "),t.xp6(5),t.hij(" ",t.lcZ(60,34,i.tenancy.deposit)," "),t.xp6(5),t.hij(" ",t.lcZ(65,36,i.tenancy.deposit_a)," "),t.xp6(5),t.hij(" ",i.tenancy_terms," "),t.xp6(3),t.Q6J("columnDefs",i.gridAColumns)("rowData",i.gridAData)("getRowHeight",i.getRowHeight),t.xp6(5),t.hij(" ",i.tenancy.responsible," "),t.xp6(3),t.hij(" ",i.tenancy.phone," "),t.xp6(3),t.hij(" ",i.tenancy.email," "),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(5),t.Q6J("ngIf",i.tenancy_id>0&&("Admin"===i.view||"Super"===i.view||"Manager"===i.view)),t.xp6(25),t.Q6J("ngForOf",i.tnDocuments.data),t.xp6(4),t.AsE(" Last updated by ",i.tenancy.updatedby," on ",i.tenancy.updated," "))},directives:[d.gRC,c.O5,d.mTE,d.b6v,d.UiO,d.XIm,d.CWd,v.N8,d.n3K,d.W60,d.KSw,c.sg],pipes:[c.H9],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]{font-size:14px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px}}"]}),a})();const qa=["staticTabs"];function Ma(a,r){if(1&a&&(t.TgZ(0,"a",43),t._UZ(1,"i",44),t.qZA()),2&a){const e=t.oxw();t.hYB("href","",e.urlPrefix,"tenancy?tenancy_id=",e.tenancy_id,"",t.LSH)}}function wa(a,r){if(1&a&&(t.TgZ(0,"a",43),t._UZ(1,"i",45),t.qZA()),2&a){const e=t.oxw();t.hYB("href","",e.urlPrefix,"property?property_id=",e.property_id,"",t.LSH)}}function Ua(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",46),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_name),t.xp6(1),t.hij(" ",e.co_value," ")}}function Da(a,r){if(1&a&&(t.TgZ(0,"a",43),t._UZ(1,"i",47),t.qZA()),2&a){const e=t.oxw();t.hYB("href","",e.urlPrefix,"tenant?tenant_id=",e.tenant_id,"",t.LSH)}}function Na(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",46),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.co_name),t.xp6(1),t.hij(" ",e.co_value," ")}}function Oa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",58)(1,"td")(2,"p",59),t._uU(3),t.qZA()(),t.TgZ(4,"td",60)(5,"label",61),t._uU(6),t.qZA()(),t.TgZ(7,"td"),t._uU(8,"\xa0"),t.qZA(),t.TgZ(9,"td")(10,"input",62),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.ta_value=n}),t.qZA()(),t.TgZ(11,"td"),t._uU(12,"\xa0"),t.qZA(),t.TgZ(13,"td")(14,"input",63),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.ta_ref=n}),t.qZA()()()}if(2&a){const e=r.$implicit;t.xp6(3),t.Oqu(e.index),t.xp6(3),t.Oqu(e.co_value),t.xp6(4),t.Q6J("ngModel",e.ta_value),t.xp6(4),t.Q6J("ngModel",e.ta_ref)}}function Pa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",48)(1,"div",4)(2,"div",9)(3,"div",49)(4,"table",50)(5,"thead")(6,"tr")(7,"th",51),t._uU(8,"\xa0"),t.qZA(),t.TgZ(9,"th",52),t._uU(10,"Attribute"),t.qZA(),t.TgZ(11,"th",53),t._uU(12,"\xa0"),t.qZA(),t.TgZ(13,"th",52),t._uU(14,"Value"),t.qZA(),t.TgZ(15,"th",53),t._uU(16,"\xa0"),t.qZA(),t.TgZ(17,"th",52),t._uU(18,"Reference"),t.qZA()()(),t.TgZ(19,"tbody",54),t.YNc(20,Oa,15,4,"tr",55),t.qZA()()(),t.TgZ(21,"div",56),t._UZ(22,"BR")(23,"BR"),t.TgZ(24,"label")(25,"strong"),t._uU(26,"Value Examples:"),t.qZA()(),t.TgZ(27,"label"),t._uU(28,"Assistance Agency: HHA, Section 8"),t.qZA(),t.TgZ(29,"label"),t._uU(30,"Utilities: TENANT - when TENANT pays"),t.qZA(),t.TgZ(31,"label"),t._uU(32,"Utilities: PROVIDED - when LANDLORD pays"),t.qZA(),t.TgZ(33,"label"),t._uU(34,"Late Fees: After 5 Days"),t.qZA(),t._UZ(35,"hr"),t.TgZ(36,"label")(37,"strong"),t._uU(38,"Reference Examples:"),t.qZA()(),t.TgZ(39,"label"),t._uU(40,"Utilities: REIMBURSE @ 66.67%"),t.qZA(),t.TgZ(41,"label"),t._uU(42,"Utilities: REIMBURSE @ 50$"),t.qZA(),t.TgZ(43,"label"),t._uU(44,"Utilities: REIMBURSE > 82$"),t.qZA(),t.TgZ(45,"label"),t._uU(46,"Late Fees: 5 DAYS @ 50$ FIX"),t.qZA(),t.TgZ(47,"label"),t._uU(48,"Late Fees: 5 DAYS @ 10% RENT"),t.qZA(),t.TgZ(49,"label"),t._uU(50,"Late Fees: 5 DAYS @ 5$ DAY"),t.qZA(),t._UZ(51,"hr"),t.TgZ(52,"label")(53,"strong"),t._uU(54,"Washer / Dryer Example:"),t.qZA()(),t.TgZ(55,"label"),t._uU(56,"Value: TENANT"),t.qZA(),t.TgZ(57,"label"),t._uU(58,"Reference: FIXED @ 50$"),t.qZA(),t._UZ(59,"hr"),t.TgZ(60,"label")(61,"strong"),t._uU(62,"MTM Example:"),t.qZA()(),t.TgZ(63,"label"),t._uU(64,"Value: TENANT"),t.qZA(),t.TgZ(65,"label"),t._uU(66,"Reference: FIXED @ 50$"),t.qZA(),t._UZ(67,"hr"),t.TgZ(68,"label")(69,"strong"),t._uU(70,"Discount Example:"),t.qZA()(),t.TgZ(71,"label"),t._uU(72,"Value: 50$"),t.qZA(),t.TgZ(73,"label"),t._uU(74,"Reference: 20240531"),t.qZA()()(),t.TgZ(75,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateTenancy("ATTRIBUTES")}),t._uU(76,"Save"),t.qZA(),t._uU(77,"\xa0 "),t.TgZ(78,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("ATTRIBUTES")}),t._uU(79,"Reset"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.tnAttributes.data)}}function ka(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addDocuments()}),t._UZ(1,"mdb-icon",72),t.qZA()}}function Sa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",58)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",73)(6,"a",74),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).getDocument(o.index,o.doc_id)}),t._UZ(7,"i"),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td",75)(17,"a",74),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).delDocument(o.doc_id)}),t._UZ(18,"i"),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.doc_id),t.xp6(3),t.Tol(i.imageList[e.doc_format]),t.xp6(2),t.Oqu(e.doc_type),t.xp6(2),t.Oqu(e.doc_name),t.xp6(2),t.Oqu(e.updatedby),t.xp6(2),t.Oqu(e.updated),t.xp6(3),t.Tol(i.imageList.trash)}}function La(a,r){if(1&a&&(t.TgZ(0,"mdb-tab",64)(1,"div",4)(2,"div",65),t._UZ(3,"div",66),t.TgZ(4,"div",67),t.YNc(5,ka,2,0,"button",68),t.qZA()(),t.TgZ(6,"div",65)(7,"table",69)(8,"thead")(9,"tr")(10,"th",52),t._uU(11,"#"),t.qZA(),t.TgZ(12,"th",52),t._uU(13,"Doc ID"),t.qZA(),t.TgZ(14,"th",52),t._uU(15,"Action"),t.qZA(),t.TgZ(16,"th",52),t._uU(17,"Type"),t.qZA(),t.TgZ(18,"th",52),t._uU(19,"Name"),t.qZA(),t.TgZ(20,"th",52),t._uU(21,"UpdatedBy"),t.qZA(),t.TgZ(22,"th",70),t._uU(23,"Updated"),t.qZA(),t.TgZ(24,"th",52),t._uU(25,"\xa0"),t.qZA()()(),t.TgZ(26,"tbody",4),t.YNc(27,Sa,19,12,"tr",55),t.qZA()()()()()),2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.tenancy_id>0),t.xp6(22),t.Q6J("ngForOf",e.tnDocuments)}}let Ja=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.user=this.AS.currentUserValue,this.urlPrefix="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.view="Tenant",this.queryParams={},this.showModal=!1,this.property=[],this.tenant=[],this.tenancy=[],this.tnAttributes=[],this.tnDocuments=[],this.combo_id="",this.imageList=this.rd.GetImages(),this.tStatusList={},this.tTermsList={},this.pList=[],this.tnList=[],this.tnFamily=[],this.tenancyList=[],this.tx_description="",this.file_info="",this.lease_start_date=new Date,this.lease_end_date=new Date,this.move_in_date=new Date,this.move_out_date="",this.property_info="",this.tenant_info="",this.tenant_id=-1,this.property_id=-1,this.tenancy_id=-1,this.t_status="1"}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.view=this.user.type,this.rd.tenancyStatusSubject.subscribe(e=>this.tStatusList=e),this.rd.tenancyTermsSubject.subscribe(e=>this.tTermsList=e),"Admin"!=this.view&&"SManager"!=this.view&&"Manager"!=this.view&&this.getURL("dashboard","NOP","NOP"),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("tenant_id")&&(this.tenant_id=this.queryParams.tenant_id),this.queryParams.hasOwnProperty("property_id")&&(this.property_id=this.queryParams.property_id),this.queryParams.hasOwnProperty("tenancy_id")&&(this.tenancy_id=this.queryParams.tenancy_id)}),this.getProperties(),this.getTenants(),this.getTenancies(),this.tenancy_id>0?this.getTenancyInfo("tenancy_id",this.tenancy_id):this.tenant_id>0?this.getTenancyInfo("tenant_id",this.tenant_id):(this.tenancy.family_members=1,this.tenancy.term="1Y")}refreshTenancy(){console.log("tenancy id:"+this.combo_id),this.clearData("PRIMARY");let e=this.combo_id.split("|");this.tenancy_id=parseInt(e[0],10),isNaN(this.tenancy_id)&&(this.tenancy_id=-1),this.property_id=parseInt(e[1],10),console.log("tenancy id:"+this.tenancy_id+" p:"+this.property_id),this.tenancy_id>0&&this.getTenancyInfo("tenancy_id",this.tenancy_id)}refreshT(e){this.tenant_id=e.tenant_id;var i=this.tenant_id,n=0;this.tenancy.responsible=e.first_name+" "+e.last_name,this.tenancy.email=e.email,this.tenancy.phone=e.phone;for(let o=0;o<this.tenancyList.length;o++)this.tenancyList[o].tenant_id==i&&(this.tenant_info=this.tenant_id+" : "+this.tenancyList[o].label+"  "+this.tenancyList[o].p_status,n=1);n>0&&(this.toastr.error("Tenant already lives at :"+this.tenant_info+". Please choose anothe tenant or terminate tenancy first"),this.tenant_id=-1)}refreshP(e){this.property_id=e.property_id,this.property_info=this.property_id+" : "+e.p_status,console.log("refreshP:",e,this.property_info,this.tenancy),(void 0===this.tenancy.rent||this.tenancy.rent<1)&&(this.tenancy.rent=e.market_rent),(void 0===this.tenancy.deposit||this.tenancy.deposit<1)&&(this.tenancy.deposit=e.market_rent)}getProperties(){this.REQ.get("p","").subscribe(i=>{this.pList=i.data},i=>{console.log(i)})}getTenancies(){this.REQ.get("tenancy","").subscribe(i=>{this.tenancyList=i.data,console.log("getTenancyInfo:"+this.tenancy)},i=>{console.log(i)})}getTenantInfo(e){this.REQ.get("tenant",{query:JSON.stringify({params:{tenant_id:e}})}).subscribe(n=>{this.tenant=n,this.property_id=this.tenant.property_id,console.log("getTenantInfo:"+this.tenant+"["+this.property_id+"]")},n=>{console.log(n)})}getTenancyInfo(e,i){let n={params:{REQUESTOR:"HC-APP"}};n.params[e]=i,console.log("getTenancyInfo entered:",n),this.tnDocuments=[],this.tnAttributes=[],this.REQ.get("tenancy",{query:JSON.stringify(n)}).subscribe(o=>{this.tenancy=o,console.log("getTenancyInfo:",this.tenancy),this.tenancy_id=this.tenancy.tenancy_id,this.tenant_id=this.tenancy.tenant_id,this.property_id=this.tenancy.property_id,this.t_status=""+this.tenancy.status,this.tenancy.attributes&&(this.tnAttributes=JSON.parse(this.tenancy.attributes)),this.tenancy.documents&&(this.tnDocuments=JSON.parse(this.tenancy.documents).data),this.combo_id=this.tenancy_id+"|"+this.property_id,this.lease_start_date=this.tenancy.lease_start_date,this.lease_end_date=this.tenancy.lease_end_date,this.move_in_date=this.tenancy.move_in_date,this.move_out_date=this.tenancy.move_out_date,this.tx_description=this.tenancy.description,console.log("Data validation:",this.tenant_id,this.property_id,this.tenancy_id)},o=>{console.log(o)})}getTenants(){this.REQ.get("tenant",{query:JSON.stringify({params:{tenant_type:"LEASABLE"}})}).subscribe(i=>{this.tnList=i.data,console.log("getTenants:",this.tnList)},i=>{console.log(i)})}validateData(){console.log("validateData:")}saveASData(e){this.tenancy_id=-1,this.tenancy.documents=[],this.updateTenancy(e)}updateTenancy(e){console.log("updateTenancy:entered"),this.tenancy.status=parseInt(this.t_status);let i={};if(i.qualifier=e,"ATTRIBUTES"==e)i.tenant_id=this.tenant_id,i.tenancy_id=this.tenancy_id,i.attributes=this.tnAttributes,i.status=this.tenancy.status;else{if("PRIMARY"!=e)return;i.property_id=this.property_id,i.tenant_id=this.tenant_id,i.tenancy_id=this.tenancy_id,i.status=this.tenancy.status,i.term=this.tenancy.term,i.responsible=this.tenancy.responsible,i.email=this.tenancy.email,i.phone=this.tenancy.phone,i.rent=this.tenancy.rent,i.deposit=this.tenancy.deposit,i.family_members=this.tenancy.family_members,i.description=this.tx_description.trim(),i.lease_start_date=this.utility.date2ISO(this.lease_start_date),i.lease_end_date=this.utility.date2ISO(this.lease_end_date),this.move_in_date&&(i.move_in_date=this.utility.date2ISO(this.move_in_date)),this.move_out_date&&" "!=this.move_out_date&&(i.move_out_date=this.utility.date2ISO(this.move_out_date))}console.log("tenancy:updateTenancy[",e,"]:",i),this.REQ.post("tenancyu",i).subscribe(n=>{console.log("tenancy:updateTenancy:",n);var o=n;o.tenancy_id>0&&(this.tenancy=o,this.tenancy_id!=o.tenancy_id?(this.tenancy_id=o.tenancy_id,this.toastr.success("New Tenancy Created with id: "+this.tenancy_id)):this.toastr.success("Tenancy data updated for : "+this.tenancy_id),this.tenant_id=this.tenancy.tenant_id,this.property_id=this.tenancy.property_id)},n=>{console.log(n),this.toastr.error("Tenancy update failed for : "+this.tenant_id)}),this.getTenancies()}clearData(e){console.log("clearData:",e),"PRIMARY"==e?(this.property_id=-1,this.tenant_id=-1,this.tenancy_id=-1,this.tenancy.tenancy_id=-1,this.tenancy.tenant_id=-1,this.tenancy.property_id=-1,this.tenancy.rent=0,this.tenancy.deposit=0,this.tenancy.lease_start_date=new Date,this.tenancy.lease_end_date=new Date,this.tenancy.move_in_date=new Date,this.tenancy.move_out_date="",this.move_out_date="",this.move_in_date=new Date,this.lease_start_date=new Date,this.lease_end_date=new Date,this.tx_description="",this.tenancy.family_members=0,this.tnAttributes=[],this.tnDocuments=[]):"ATTRIBUTES"==e&&(this.tnAttributes=[])}addDocuments(){console.log("tenant,addDocuments:"),this.file_info=this.tenancy_id+"_"+this.tenancy.label+"_"+this.tenancy.first_name,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Tenancy Document",content:{owner_type:"TENANCY",owner_id:this.tenancy_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i),this.refreshDocuments()})}refreshDocuments(){const e={params:{tenancy_id:this.tenancy_id,key_type:"TENANCY"}};console.log("refreshDocs.2:",e,this.tnDocuments),this.REQ.get("fl",{query:JSON.stringify(e)}).subscribe(i=>{console.log("refreshDocs.3[response]:",i),this.tnDocuments=i.data},i=>{console.log(i)})}getDocuments(e){this.REQ.get("fl",{query:JSON.stringify({params:{tenancy_id:this.tenancy_id,key_type:"TENANCY"}})}).subscribe(n=>{console.log("getDocuments.1:",n),this.tnDocuments=n},n=>{console.log(n)})}getDocument(e,i){console.log("getDocument: ",this.tnDocuments[e]),this.REQ.getDocument(this.tnDocuments[e])}delDocument(e){let i={doc_id:e,key_type:"TENANCY"};console.log(i),this.REQ.post("fd",i).subscribe(n=>{console.log(n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}onFileUploadClose(e){this.showModal=!1,console.log("onFileUploadClose"),console.log(e)}setAttributeValue(e,i){console.log(e+" = "+i)}addAttributes(){}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tenancy-e"]],viewQuery:function(e,i){if(1&e&&t.Gf(qa,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:113,vars:44,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[3,"href",4,"ngIf"],[1,"card-body"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass"],["statictabs",""],["heading","Details"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"md-form","mb-2","property-part"],["keyOfID","property_id","firstLine","!!label>> !!state>> !!city>>","secondLine"," !!p_status>>","searchInKeys","label,city,state",3,"contentList","selectedID","selectedValue"],[1,"col-sm-12","col-md-3"],[1,"md-form","mb-2"],["placeholder","Choose One","label","Status","optionHeight","35",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["keyOfID","tenant_id","firstLine","!!first_name>> !!last_name>>","secondLine"," !!other_names>>","searchInKeys","first_name,last_name",3,"contentList","selectedID","selectedValue"],["mdbInput","","name","reference","type","number","value","1",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","col-md-6","col-lg-4"],["mdbInput","","name","lessee","type","text",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","email","type","email",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","phone","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","col-md-6","col-lg-3"],[1,"position-relative"],["required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["lsd",""],["led",""],["mid",""],["mod",""],["mdbInput","","name","rent","type","number","placeholder","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","deposit","type","number","placeholder","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","deposit_a","type","number","placeholder","0.0","disabled","true",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Choose One","label","Term","optionHeight","35",3,"ngModel","ngModelChange"],[1,"col-sm-12"],["type","text","id","formDD","mdbInput","",1,"md-textarea","md-textarea-auto","form-control",3,"ngModel","ngModelChange"],["for","formDD"],[1,"card-footer"],["mdbBtn","","color","info","rounded","true","type","button",3,"click"],["mdbBtn","","color","default","rounded","true","type","button",3,"click"],["mdbBtn","","type","button",1,"btn","btn-link",2,"float","right",3,"click"],["heading","Attributes",4,"ngIf"],["heading","Documents",4,"ngIf"],[3,"href"],[1,"fas","fa-user-circle","text-white"],[1,"fas","fa-home"],[3,"value"],[1,"fas","fa-user"],["heading","Attributes"],[1,"col-9","table-editable"],["id","tableAttributes","name","tableAttributes",1,"table","table-responsive-sm",2,"margin-bottom","1px"],["scope","col","width","20px"],["scope","col"],["scope","col","width","10px"],["id","tbA"],["id","tARow",4,"ngFor","ngForOf"],[1,"col-3"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",3,"click"],["id","tARow"],[1,"card-category","d-inline"],["nowrap",""],["name","size"],["mdbInput","","name","value","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","reference","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["heading","Documents"],[1,"row","col-12"],[1,"col-md-10","card-title"],[1,"col-md-2"],["type","button","style","float:right","class","btn-simple btn-sm",3,"click",4,"ngIf"],["id","tableDocuments","name","tableDocuments","width","100%",1,"table","tablesorter"],["scope","col",1,"text-center"],["type","button",1,"btn-simple","btn-sm",2,"float","right",3,"click"],["fas","","icon","plus-square text-danger fa-2x"],[1,"text-primary"],[3,"click"],[1,"text-danger"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t.YNc(5,Ma,2,2,"a",3),t._uU(6),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"mdb-tabset",6,7)(11,"mdb-tab",8)(12,"div",4)(13,"div",9)(14,"div",10)(15,"div",11)(16,"label"),t._uU(17,"Property\xa0"),t.YNc(18,wa,2,2,"a",3),t.qZA(),t.TgZ(19,"app-select-with-search",12),t.NdJ("selectedValue",function(o){return i.refreshP(o)}),t.qZA()()(),t.TgZ(20,"div",13)(21,"div",14)(22,"mdb-select-2",15),t.NdJ("ngModelChange",function(o){return i.t_status=o}),t.YNc(23,Ua,2,2,"mdb-select-option",16),t.qZA()()()(),t.TgZ(24,"div",9)(25,"div",10)(26,"div",14)(27,"label"),t._uU(28,"Tenant\xa0"),t.YNc(29,Da,2,2,"a",3),t.qZA(),t.TgZ(30,"app-select-with-search",17),t.NdJ("selectedValue",function(o){return i.refreshT(o)}),t.qZA()()(),t.TgZ(31,"div",13)(32,"div",14)(33,"label"),t._uU(34,"Family Members"),t.qZA(),t.TgZ(35,"input",18),t.NdJ("ngModelChange",function(o){return i.tenancy.family_members=o}),t.qZA()()()(),t.TgZ(36,"div",9)(37,"div",19)(38,"div",14)(39,"label"),t._uU(40,"Lessee"),t.qZA(),t.TgZ(41,"input",20),t.NdJ("ngModelChange",function(o){return i.tenancy.responsible=o}),t.qZA()()(),t.TgZ(42,"div",19)(43,"div",14)(44,"label"),t._uU(45,"Contact Email"),t.qZA(),t.TgZ(46,"input",21),t.NdJ("ngModelChange",function(o){return i.tenancy.email=o}),t.qZA()()(),t.TgZ(47,"div",19)(48,"div",14)(49,"label"),t._uU(50,"Contact Phone"),t.qZA(),t.TgZ(51,"input",22),t.NdJ("ngModelChange",function(o){return i.tenancy.phone=o}),t.qZA()()()(),t.TgZ(52,"div",9)(53,"div",23)(54,"div",14)(55,"label",24),t._uU(56,"Lease Start Date "),t.qZA(),t.TgZ(57,"mdb-date-picker",25,26),t.NdJ("ngModelChange",function(o){return i.lease_start_date=o}),t.qZA()()(),t.TgZ(59,"div",23)(60,"div",14)(61,"label",24),t._uU(62,"Lease End Date "),t.qZA(),t.TgZ(63,"mdb-date-picker",25,27),t.NdJ("ngModelChange",function(o){return i.lease_end_date=o}),t.qZA()()(),t.TgZ(65,"div",23)(66,"div",14)(67,"label",24),t._uU(68,"Move-in Date "),t.qZA(),t.TgZ(69,"mdb-date-picker",25,28),t.NdJ("ngModelChange",function(o){return i.move_in_date=o}),t.qZA()()(),t.TgZ(71,"div",23)(72,"div",14)(73,"label",24),t._uU(74,"Move-out Date "),t.qZA(),t.TgZ(75,"mdb-date-picker",25,29),t.NdJ("ngModelChange",function(o){return i.move_out_date=o}),t.qZA()()()(),t.TgZ(77,"div",9)(78,"div",23)(79,"div",14)(80,"label"),t._uU(81,"Rent"),t.qZA(),t.TgZ(82,"input",30),t.NdJ("ngModelChange",function(o){return i.tenancy.rent=o}),t.qZA()()(),t.TgZ(83,"div",23)(84,"div",14)(85,"label"),t._uU(86,"Required Deposit "),t.qZA(),t.TgZ(87,"input",31),t.NdJ("ngModelChange",function(o){return i.tenancy.deposit=o}),t.qZA()()(),t.TgZ(88,"div",23)(89,"div",14)(90,"label"),t._uU(91,"Actual Deposit "),t.qZA(),t.TgZ(92,"input",32),t.NdJ("ngModelChange",function(o){return i.tenancy.deposit_a=o}),t.qZA()()(),t.TgZ(93,"div",23)(94,"div",14)(95,"mdb-select-2",33),t.NdJ("ngModelChange",function(o){return i.tenancy.term=o}),t.YNc(96,Na,2,2,"mdb-select-option",16),t.qZA()()()(),t.TgZ(97,"div",9)(98,"div",34)(99,"div",14)(100,"textarea",35),t.NdJ("ngModelChange",function(o){return i.tx_description=o}),t.qZA(),t.TgZ(101,"label",36),t._uU(102,"Special Notes"),t.qZA()()()()(),t.TgZ(103,"div",37)(104,"button",38),t.NdJ("click",function(){return i.updateTenancy("PRIMARY")}),t._uU(105,"Save"),t.qZA(),t._uU(106,"\xa0 "),t.TgZ(107,"button",39),t.NdJ("click",function(){return i.saveASData("PRIMARY")}),t._uU(108,"Save As"),t.qZA(),t.TgZ(109,"button",40),t.NdJ("click",function(){return i.clearData("PRIMARY")}),t._uU(110,"Clear"),t.qZA()()(),t.YNc(111,Pa,80,1,"mdb-tab",41),t.YNc(112,La,28,2,"mdb-tab",42),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",i.tenancy_id>0),t.xp6(1),t.HOy(" \xa0",i.tenancy_id,"\xa0",i.tenancy.label,"\xa0-\xa0",i.tenancy.first_name,"\xa0",i.tenancy.last_name," "),t.xp6(3),t.Q6J("buttonClass","nav md-pills border-bottom")("justified",!0)("contentClass","card"),t.xp6(9),t.Q6J("ngIf",i.property_id>0),t.xp6(1),t.Q6J("contentList",i.pList)("selectedID",i.property_id),t.xp6(3),t.Q6J("ngModel",i.t_status),t.xp6(1),t.Q6J("ngForOf",i.tStatusList),t.xp6(6),t.Q6J("ngIf",i.tenant_id>0),t.xp6(1),t.Q6J("contentList",i.tnList)("selectedID",i.tenant_id),t.xp6(5),t.Q6J("ngModel",i.tenancy.family_members),t.xp6(6),t.Q6J("ngModel",i.tenancy.responsible),t.xp6(5),t.Q6J("ngModel",i.tenancy.email),t.xp6(5),t.Q6J("ngModel",i.tenancy.phone),t.xp6(6),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.lease_start_date),t.xp6(6),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.lease_end_date),t.xp6(6),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.move_in_date),t.xp6(6),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.move_out_date),t.xp6(7),t.Q6J("ngModel",i.tenancy.rent),t.xp6(5),t.Q6J("ngModel",i.tenancy.deposit),t.xp6(5),t.Q6J("ngModel",i.tenancy.deposit_a),t.xp6(3),t.Q6J("ngModel",i.tenancy.term),t.xp6(1),t.Q6J("ngForOf",i.tTermsList),t.xp6(4),t.Q6J("ngModel",i.tx_description),t.xp6(11),t.Q6J("ngIf",i.tenant_id>0),t.xp6(1),t.Q6J("ngIf",i.tenant_id>0))},directives:[d.gRC,c.O5,d.AH5,d.wWr,D,d.lPY,_.JJ,_.On,c.sg,d.x8v,_.wV,_.Fj,d.HqI,d.JNR,_.Q7,d.mTE,d.b6v,d.UiO,d.XIm],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{padding:30px 0 0}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}}"]}),a})();const Ra=["staticTabs"];function Ea(a,r){if(1&a&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.label),t.xp6(1),t.Oqu(e.name)}}function Ia(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addNewItem("TRANCHE")}),t._UZ(1,"mdb-icon",28),t.qZA()}}function Fa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"mdb-card-title")(3,"h3"),t._UZ(4,"mdb-icon",4),t._uU(5),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),t._uU(12,"Company"),t.qZA(),t.TgZ(13,"select",11),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().company_id=n})("ngModelChange",function(){return t.CHM(e),t.oxw().refreshReport()}),t.TgZ(14,"option",12),t._uU(15,"ALL"),t.qZA(),t.YNc(16,Ea,2,2,"option",13),t.qZA()()(),t.TgZ(17,"div",14)(18,"div",15)(19,"mdb-date-picker",16,17),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()()(),t.TgZ(21,"div",18)(22,"div",19)(23,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshReport()}),t._UZ(24,"i",21),t.qZA(),t.YNc(25,Ia,2,0,"button",22),t.TgZ(26,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("CSV")}),t._uU(27,"CSV"),t.qZA()()()(),t.TgZ(28,"div",23)(29,"ag-grid-angular",24,25),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"TRANCHE_REPORT")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"TRANCHE_REPORT")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"TRANCHE_REPORT")}),t.qZA()()()(),t.TgZ(31,"div",26),t._uU(32),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(5),t.hij("\xa0",e.report_title," "),t.xp6(8),t.Q6J("ngModel",e.company_id),t.xp6(3),t.Q6J("ngForOf",e.companyList),t.xp6(3),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.start_date),t.xp6(6),t.Q6J("ngIf","Admin"===e.view||"SManager"===e.view||"Manager"===e.view),t.xp6(4),t.Q6J("columnDefs",e.grid1Columns)("rowData",e.grid1Data),t.xp6(3),t.hij(" Report generated as of ",e.reportGenTime," ")}}function Qa(a,r){if(1&a&&(t.ynx(0),t.TgZ(1,"div",7)(2,"div",38)(3,"div",37)(4,"label"),t._uU(5,"Loan ID"),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"div",36)(8,"div",37)(9,"label"),t._uU(10,"Label"),t.qZA(),t._uU(11),t.qZA()(),t.TgZ(12,"div",61)(13,"div",37)(14,"label"),t._uU(15,"Type"),t.qZA(),t._uU(16),t.qZA()(),t.TgZ(17,"div",38)(18,"div",37)(19,"label"),t._uU(20,"Lender"),t.qZA(),t._uU(21),t.qZA()(),t.TgZ(22,"div",38)(23,"div",37)(24,"label"),t._uU(25,"Account"),t.qZA(),t._uU(26),t.qZA()(),t.TgZ(27,"div",38)(28,"div",37)(29,"label"),t._uU(30,"Maximum Principal"),t.qZA(),t._uU(31),t.ALo(32,"currency"),t.qZA()(),t.TgZ(33,"div",38)(34,"div",37)(35,"label"),t._uU(36,"Principal (O)"),t.qZA(),t._uU(37),t.ALo(38,"currency"),t.qZA()(),t.TgZ(39,"div",38)(40,"div",37)(41,"label"),t._uU(42,"Principal (C)"),t.qZA(),t._uU(43),t.ALo(44,"currency"),t.qZA()(),t.TgZ(45,"div",38)(46,"div",37)(47,"label"),t._uU(48,"Status"),t.qZA(),t._uU(49),t.qZA()(),t.TgZ(50,"div",38)(51,"div",37)(52,"label"),t._uU(53,"Issue Date"),t.qZA(),t._uU(54),t.ALo(55,"date"),t.qZA()(),t.TgZ(56,"div",38)(57,"div",37)(58,"label"),t._uU(59,"Accrual Date"),t.qZA(),t._uU(60),t.ALo(61,"date"),t.qZA()(),t.TgZ(62,"div",38)(63,"div",37)(64,"label"),t._uU(65,"Maturity"),t.qZA(),t._uU(66),t.ALo(67,"date"),t.qZA()(),t.TgZ(68,"div",38)(69,"div",37)(70,"label"),t._uU(71,"Interest"),t.qZA(),t._uU(72),t.ALo(73,"percent"),t.qZA()(),t.TgZ(74,"div",38)(75,"div",37)(76,"label"),t._uU(77,"Payment Date"),t.qZA(),t._uU(78),t.ALo(79,"date"),t.qZA()(),t.TgZ(80,"div",38)(81,"div",37)(82,"label"),t._uU(83,"Payment Amount"),t.qZA(),t._uU(84),t.ALo(85,"currency"),t.qZA()()(),t._UZ(86,"hr"),t.BQk()),2&a){const e=r.$implicit;t.xp6(6),t.hij("",e.loan_id," "),t.xp6(5),t.hij("",e.label," "),t.xp6(5),t.hij("",e.loan_type," "),t.xp6(5),t.Oqu(e.lender),t.xp6(5),t.Oqu(e.account),t.xp6(5),t.Oqu(t.lcZ(32,15,e.max_loan_amount)),t.xp6(6),t.Oqu(t.lcZ(38,17,e.original_amount)),t.xp6(6),t.Oqu(t.lcZ(44,19,e.current_amount)),t.xp6(6),t.Oqu(e.status),t.xp6(5),t.Oqu(t.xi3(55,21,e.issue_date,"yyyy-MM-dd")),t.xp6(6),t.Oqu(t.xi3(61,24,e.dated_date,"yyyy-MM-dd")),t.xp6(6),t.Oqu(t.xi3(67,27,e.maturity_date,"yyyy-MM-dd")),t.xp6(6),t.Oqu(t.xi3(73,30,e.coupon,"1.4-4")),t.xp6(6),t.hij("",t.xi3(79,33,e.payment_date,"yyyy-MM-dd")," "),t.xp6(6),t.Oqu(t.lcZ(85,36,e.payment_amount))}}function Ha(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addDocuments()}),t._UZ(1,"mdb-icon",63),t.qZA()}}function Ya(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addDocuments()}),t._UZ(1,"mdb-icon",63),t.qZA()}}function ja(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",89),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.company_id),t.xp6(1),t.hij("",e.name," ")}}function Wa(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",89),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Va(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",65)(1,"div",5)(2,"div",7)(3,"div",66)(4,"div",67)(5,"label"),t._uU(6,"Label"),t.qZA(),t.TgZ(7,"input",68),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.tranche_name=n}),t.qZA()()(),t.TgZ(8,"div",36)(9,"div",67)(10,"mdb-select-2",69),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.company_id=n}),t.YNc(11,ja,2,2,"mdb-select-option",70),t.qZA()()(),t.TgZ(12,"div",36)(13,"div",67)(14,"mdb-select-2",71),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.status=n}),t.YNc(15,Wa,2,2,"mdb-select-option",70),t.ALo(16,"keyvalue"),t.qZA()()()(),t.TgZ(17,"div",7)(18,"div",72)(19,"mdb-date-picker",73,17),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).purchase_date=n}),t.qZA()(),t.TgZ(21,"div",74)(22,"div",67)(23,"label"),t._uU(24,"Purchase Price "),t.qZA(),t.TgZ(25,"input",75),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.purchase_price=n}),t.qZA()()(),t.TgZ(26,"div",74)(27,"div",67)(28,"label"),t._uU(29,"Closing Cost "),t.qZA(),t.TgZ(30,"input",76),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.closing_cost=n}),t.qZA()()(),t.TgZ(31,"div",66)(32,"div",67)(33,"label"),t._uU(34,"Total Cost"),t.qZA(),t.TgZ(35,"input",77),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.total_cost=n}),t.qZA()()()(),t.TgZ(36,"div",7)(37,"div",72)(38,"mdb-date-picker",78,17),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).current_date=n}),t.qZA()(),t.TgZ(40,"div",74)(41,"div",67)(42,"label"),t._uU(43,"Current Price"),t.qZA(),t.TgZ(44,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.current_price=n}),t.qZA()()()(),t.TgZ(45,"div",7)(46,"div",72)(47,"mdb-date-picker",80,17),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).sell_date=n}),t.qZA()(),t.TgZ(49,"div",74)(50,"div",67)(51,"label"),t._uU(52,"Sell Price"),t.qZA(),t.TgZ(53,"input",81),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.sell_price=n}),t.qZA()()(),t.TgZ(54,"div",74)(55,"div",67)(56,"label"),t._uU(57,"Closing Cost"),t.qZA(),t.TgZ(58,"input",82),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.sell_cost=n}),t.qZA()()()(),t.TgZ(59,"div",7)(60,"div",83)(61,"div",67)(62,"textarea",84),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).tranche.notes=n}),t.qZA(),t.TgZ(63,"label",85),t._uU(64,"Notes"),t.qZA()()()()(),t.TgZ(65,"div",26)(66,"button",86),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateData("")}),t._uU(67,"Save"),t.qZA(),t._uU(68," \xa0\xa0 "),t.TgZ(69,"button",87),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveASData("")}),t._uU(70,"Save As"),t.qZA(),t.TgZ(71,"button",88),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearData("")}),t._uU(72,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw(2);t.xp6(7),t.Q6J("ngModel",e.tranche.tranche_name),t.xp6(3),t.Q6J("ngModel",e.tranche.company_id),t.xp6(1),t.Q6J("ngForOf",e.companyList),t.xp6(3),t.Q6J("ngModel",e.tranche.status)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngForOf",t.lcZ(16,22,e.psList)),t.xp6(4),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.purchase_date),t.xp6(6),t.Q6J("ngModel",e.tranche.purchase_price),t.xp6(5),t.Q6J("ngModel",e.tranche.closing_cost),t.xp6(5),t.Q6J("ngModel",e.tranche.total_cost),t.xp6(3),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.current_date),t.xp6(6),t.Q6J("ngModel",e.tranche.current_price),t.xp6(3),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.sell_date),t.xp6(6),t.Q6J("ngModel",e.tranche.sell_price),t.xp6(5),t.Q6J("ngModel",e.tranche.sell_cost),t.xp6(4),t.Q6J("ngModel",e.tranche.notes)}}function Ga(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"mdb-card-title")(3,"h3"),t._UZ(4,"i",29),t._uU(5),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",30),t._uU(9),t.qZA()(),t.TgZ(10,"div",31)(11,"mdb-tabset",32,33)(13,"mdb-tab",34)(14,"div",35)(15,"div",7)(16,"div",36)(17,"div",37)(18,"label"),t._uU(19,"Address"),t.qZA(),t._uU(20),t.qZA()(),t.TgZ(21,"div",36)(22,"div",37)(23,"label"),t._uU(24,"Company"),t.qZA(),t._uU(25),t.qZA()(),t.TgZ(26,"div",38)(27,"div",37)(28,"label"),t._uU(29,"Type"),t.qZA(),t._uU(30),t.qZA()(),t.TgZ(31,"div",38)(32,"div",37)(33,"label"),t._uU(34,"Status"),t.qZA(),t._uU(35),t.qZA()()(),t.TgZ(36,"div",7)(37,"div",36)(38,"div",37)(39,"label"),t._uU(40,"Origin Date"),t.qZA(),t._uU(41),t.ALo(42,"date"),t.qZA()(),t.TgZ(43,"div",38)(44,"div",37)(45,"label"),t._uU(46,"Purchase Price"),t.qZA(),t._uU(47),t.ALo(48,"currency"),t.qZA()(),t.TgZ(49,"div",38)(50,"div",37)(51,"label"),t._uU(52,"Closing"),t.qZA(),t._uU(53),t.ALo(54,"currency"),t.qZA()(),t.TgZ(55,"div",36)(56,"div",37)(57,"label"),t._uU(58,"Total Cost"),t.qZA(),t._uU(59),t.ALo(60,"currency"),t.qZA()()(),t.TgZ(61,"div",7)(62,"div",36)(63,"div",37)(64,"label"),t._uU(65,"Estimate Date"),t.qZA(),t._uU(66),t.ALo(67,"date"),t.qZA()(),t.TgZ(68,"div",38)(69,"div",37)(70,"label"),t._uU(71,"Current Price"),t.qZA(),t._uU(72),t.ALo(73,"currency"),t.qZA()(),t.TgZ(74,"div",38)(75,"div",37)(76,"label"),t._uU(77,"Built"),t.qZA(),t._uU(78),t.qZA()()(),t.TgZ(79,"div",7)(80,"div",36)(81,"div",37)(82,"label"),t._uU(83,"Sell Date"),t.qZA(),t._uU(84),t.ALo(85,"date"),t.qZA()(),t.TgZ(86,"div",38)(87,"div",37)(88,"label"),t._uU(89,"Sell Cost"),t.qZA(),t._uU(90),t.ALo(91,"currency"),t.qZA()(),t.TgZ(92,"div",38)(93,"div",37)(94,"label"),t._uU(95,"Sell Price"),t.qZA(),t._uU(96),t.ALo(97,"currency"),t.qZA()(),t.TgZ(98,"div",36)(99,"div",37)(100,"label"),t._uU(101,"Rent"),t.qZA(),t._uU(102),t.ALo(103,"currency"),t.qZA()()(),t.TgZ(104,"div",7)(105,"div",39)(106,"div",37)(107,"label"),t._uU(108,"Notes"),t.qZA(),t._uU(109),t.qZA()()(),t._UZ(110,"hr"),t.TgZ(111,"div",7)(112,"div",39)(113,"div",37)(114,"h4"),t._uU(115,"Loan Information"),t.qZA()()()(),t.YNc(116,Qa,87,38,"ng-container",40),t.qZA()(),t.TgZ(117,"mdb-tab",41)(118,"div",35)(119,"div",7)(120,"ag-grid-angular",42,43),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"PROPERTY")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"PROPERTY")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"PROPERTY")}),t.qZA()()()(),t.TgZ(122,"mdb-tab",44)(123,"div",35)(124,"div",7)(125,"div",45)(126,"label"),t._uU(127,"Period"),t.qZA()(),t.TgZ(128,"div",46)(129,"label"),t._uU(130,"From"),t.qZA(),t.TgZ(131,"mdb-date-picker",47,17),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()(),t.TgZ(133,"div",46)(134,"label"),t._uU(135,"To"),t.qZA(),t.TgZ(136,"mdb-date-picker",48,49),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()(),t.TgZ(138,"div",50)(139,"div",51)(140,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshAnalytics()}),t._UZ(141,"i",21),t.qZA(),t._uU(142,"\xa0 "),t.YNc(143,Ha,2,0,"button",52),t.qZA()()(),t.TgZ(144,"div",7)(145,"ag-grid-angular",24,53),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"DOCUMENTS")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"DOCUMENTS")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"DOCUMENTS")}),t.qZA()()()(),t.TgZ(147,"mdb-tab",54)(148,"div",35)(149,"div",7)(150,"div",45)(151,"label"),t._uU(152,"Period"),t.qZA()(),t.TgZ(153,"div",46)(154,"label"),t._uU(155,"From"),t.qZA(),t.TgZ(156,"mdb-date-picker",47,17),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()(),t.TgZ(158,"div",46)(159,"label"),t._uU(160,"To"),t.qZA(),t.TgZ(161,"mdb-date-picker",48,49),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()(),t.TgZ(163,"div",50)(164,"div",51)(165,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshAnalytics()}),t._UZ(166,"i",21),t.qZA(),t.YNc(167,Ya,2,0,"button",56),t.qZA()()(),t.TgZ(168,"div",7)(169,"ag-grid-angular",24,53),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"PERFORMANCE")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"PERFORMANCE")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"PERFORMANCE")}),t.qZA()()()(),t.TgZ(171,"mdb-tab",57)(172,"div",35)(173,"div",7)(174,"div",45)(175,"label"),t._uU(176,"Period"),t.qZA()(),t.TgZ(177,"div",46)(178,"label"),t._uU(179,"From"),t.qZA(),t.TgZ(180,"mdb-date-picker",47,17),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()(),t.TgZ(182,"div",46)(183,"label"),t._uU(184,"To"),t.qZA(),t.TgZ(185,"mdb-date-picker",48,49),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()(),t.TgZ(187,"div",50)(188,"div",51)(189,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshAnalytics()}),t._UZ(190,"i",21),t.qZA(),t._uU(191,"\xa0 "),t.TgZ(192,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("CSV")}),t._UZ(193,"i",58),t.qZA()()()(),t.TgZ(194,"div",7)(195,"ag-grid-angular",59,25),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated(n,"TX")})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n,"TX")})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked(n,"TX")}),t.qZA()()()(),t.YNc(197,Va,73,24,"mdb-tab",60),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(5),t.AsE("\xa0",e.tranche.tranche_id,"\xa0 ",e.tranche.tranche_name," "),t.xp6(4),t.AsE(" Last updated by ",e.tranche.updatedby," on ",e.tranche.updated," "),t.xp6(2),t.Q6J("buttonClass","nav md-pills border-bottom")("justified",!0)("contentClass","card"),t.xp6(9),t.hij(" ",e.tranche.tranche_name," "),t.xp6(5),t.hij("",e.tranche.company," "),t.xp6(5),t.hij("",e.tranche.p_type," "),t.xp6(5),t.hij("",e.tranche.status," "),t.xp6(6),t.hij(" ",t.xi3(42,53,e.tranche.purchase_date,"yyyy-MM-dd")," "),t.xp6(6),t.hij("",t.lcZ(48,56,e.tranche.purchase_price)," "),t.xp6(6),t.hij("",t.lcZ(54,58,e.tranche.closing_cost)," "),t.xp6(6),t.hij("",t.lcZ(60,60,e.tranche.total_cost)," "),t.xp6(7),t.hij("",t.xi3(67,62,e.tranche.current_date,"yyyy-MM-dd")," "),t.xp6(6),t.hij("",t.lcZ(73,65,e.tranche.current_price)," "),t.xp6(6),t.hij("",e.tranche.built," "),t.xp6(6),t.hij("",t.xi3(85,67,e.tranche.sell_date,"yyyy-MM-dd")," "),t.xp6(6),t.hij("",t.lcZ(91,70,e.tranche.sell_cost)," "),t.xp6(6),t.hij("",t.lcZ(97,72,e.tranche.sell_price)," "),t.xp6(6),t.hij(" ",t.lcZ(103,74,e.tranche.rent)," "),t.xp6(7),t.hij(" ",e.tranche.notes," "),t.xp6(7),t.Q6J("ngForOf",e.tLoans),t.xp6(4),t.Q6J("columnDefs",e.gridPColumns)("rowData",e.gridPData),t.xp6(11),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.start_date),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.end_date),t.xp6(7),t.Q6J("ngIf",e.showUploadDoc),t.xp6(2),t.Q6J("columnDefs",e.gridDocColumns)("rowData",e.gridDocData),t.xp6(11),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.start_date),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.end_date),t.xp6(6),t.Q6J("ngIf","Admin"===e.view),t.xp6(2),t.Q6J("columnDefs",e.gridPFColumns)("rowData",e.gridPFData),t.xp6(11),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.start_date),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.end_date),t.xp6(10),t.Q6J("columnDefs",e.gridTXColumns)("rowData",e.gridTXData),t.xp6(2),t.Q6J("ngIf","Admin"===e.view||"SManager"===e.view)}}let za=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.utility=e,this.REQ=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.user=this.AS.currentUserValue,this.authority="Tranche",this.urlPrefix="",this.queryParams={},this.view="",this.showUploadDoc=!1,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.read_only=!0,this.purchase_date=new Date,this.current_date=new Date,this.sell_date=new Date,this.file_info="Tranche",this.start_date=new Date,this.end_date=new Date,this.report_title="Tranche Report",this.reportGenTime=new Date,this.dtList=this.rd.GetDates(),this.company_id=-1,this.companyList={},this.tDocuments=[],this.psList={ACTIVE:"Active",INACTIVE:"In-Active"},this.tLoans=[],this.tranche=[],this.tranche_id=-1,this.gridOptions={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.grid1Columns=[{headerName:"ID",width:70,field:"tranche_id",filter:"agNumberColumnFilter"},{headerName:"Company",width:120,field:"label",filter:!0},{headerName:"Label",field:"tranche_name",sort:"ASCE",filter:!0},{headerName:"Purchase",field:"purchase_date",width:140,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Purchase Cost",field:"total_cost",sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Status",field:"status"},{headerName:"Company ID",width:100,field:"company_id",hide:!0}],this.grid1Data=[],this.gridPData=[],this.gridPColumns=[{headerName:"ID",width:70,colId:"p1",field:"property_id",filter:"agNumberColumnFilter"},{headerName:"Company",width:100,field:"company",filter:!0},{headerName:"Group",width:70,field:"group",filter:!0},{headerName:"Label",field:"label",sort:"ASCE",filter:!0},{headerName:"City",width:125,field:"city"},{headerName:"State",width:50,field:"state"},{headerName:"ZIP",width:65,field:"zip"},{headerName:"Link",width:10,field:"url"}],this.gridTXData=[],this.gridTXColumns=[{headerName:"ID",width:100,field:"tx_id",filter:"agNumberColumnFilter"},{headerName:"Date",field:"tdate",width:130,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Payment",field:"payment",width:130,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Interest",field:"interest",width:130,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Principal",field:"principal",width:130,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Balance",field:"balance",width:150,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Payee",field:"payee",resizable:!0},{headerName:"Pay Type",field:"type",resizable:!0},{headerName:"Reference",field:"reference",resizable:!0},{headerName:"Description",field:"description",resizable:!0},{headerName:"Category ID",field:"category_id",hide:!0}],this.gridDocData=[],this.gridDocColumns=[{headerName:"ID",field:"index",width:40,sortable:!0,filter:"agNumberColumnFilter"},{headerName:"A",width:25,field:"doc_format",cellRenderer:this.utility.agImageRenderer},{headerName:"Document",width:130,field:"doc_type"},{headerName:"Name",field:"doc_name",sortable:!0,filter:!0},{headerName:"Updated By",field:"updatedby",sortable:!0,filter:!0},{headerName:"Updated",field:"updated",width:140,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Tranche ID",field:"tranche_id",hide:!0},{headerName:"Company ID",field:"company_id",hide:!0},{headerName:"Doc ID",field:"doc_id",hide:!0},{headerName:"Doc Path",field:"doc_path",hide:!0}],this.gridPFData=[],this.gridPFColumns=[]}ngOnInit(){this.rd.companySubject.subscribe(e=>this.companyList=e),this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("tranche_id")&&(this.tranche_id=this.queryParams.tranche_id),this.init()})}init(){this.view=this.user.type,("Admin"===this.user.type||"SManager"===this.user.type)&&(this.showUploadDoc=!0),this.tranche_id>-1?(this.getTrancheInfo(this.tranche_id,"tranche_id"),this.refreshAnalytics()):this.getAllTranche(""),console.log("Tranche: INIT:",this.view)}refreshAnalytics(){this.getDocs(this.tranche_id),this.getTX(this.tranche_id),this.getProperties(this.tranche_id)}refreshReport(){this.getAllTranche("")}getAllTranche(e){const i={params:{},usage:{authority:this.authority,sub_authority:"LIST",operation:"REFRESH",data:"NA"}};""!=e&&(i.params.company_id=e),console.log("getAllTranche Entered:",i),this.grid1Data=[],this.REQ.get("tranche/list",{query:JSON.stringify(i)}).subscribe(n=>{this.grid1Data=n.data,console.log("getAllTranche:",n,this.grid1Data)},n=>{console.log(n)})}getTrancheInfo(e,i){const n={params:{tranche_id:e},usage:{authority:this.authority,sub_authority:"MASTER",operation:"REFRESH",data:"NA"}};console.log("getTrancheInfo Entered:",n),this.gridDocData=[],this.REQ.get("tranche/info",{query:JSON.stringify(n)}).subscribe(o=>{this.tranche=o,this.purchase_date=new Date(this.tranche.purchase_date),this.start_date=this.purchase_date,this.current_date=new Date(this.tranche.current_date),this.sell_date=new Date(this.tranche.sell_date),console.log("getTrancheInfo[response]:",o),this.tLoans=JSON.parse(o.loans).data;for(let l in this.companyList)this.companyList[l].company_id===this.tranche.company_id&&(this.tranche.company=this.companyList[l].name)},o=>{console.log(o)})}clearData(e){}saveASData(e){this.tranche_id=-1,this.updateData(e)}updateData(e){console.log("updateData[tranche]:entered");let i={};if(i.params=this.tranche,i.params.tranche_id=this.tranche_id,this.tranche.tranche_name.length<5)return this.toastr.error("Please provide correct values"),!1;i.params.purchase_date=this.utility.date2ISO(this.purchase_date),i.params.current_date=this.utility.date2ISO(this.current_date),i.params.sell_date=this.utility.date2ISO(this.sell_date),i.usage={authority:this.authority,sub_authority:"ADMIN",operation:"UPDATE",data:"NA"},console.log("updateData[",e,"]:",i),this.REQ.post("tranche/update",i).subscribe(n=>{console.log("updateData:",n);var o=n;o.code<0?this.toastr.error(o.message,"Tranche Update Error"):o.tranche_id>0&&(this.tranche_id!=o.tranche_id?(this.tranche_id=o.tranche_id,this.toastr.success("New Tranche Created with id: "+this.tranche_id)):this.toastr.success("Tranche data updated for : "+this.tranche_id))},n=>{console.log(n),this.toastr.error("Tranche update failed for : "+this.tranche_id)})}getProperties(e){const i={params:{tranche_id:e},usage:{authority:this.authority,sub_authority:"Property",operation:"REFRESH",data:"NA"}};console.log("getProperties: enering:",i),this.gridPData=[],this.REQ.get("p",{query:JSON.stringify(i)}).subscribe(n=>{if(!this.AS.checkResponseError(n,"Properties Data",this.AS.login))return!1;this.gridPData=n.data,console.log(n)},n=>{console.log(n),this.toastr.error("Property list failed : "+n)})}getDocs(e){this.gridDocData=[],this.REQ.get("fl",{query:JSON.stringify({params:{tranche_id:e,key_type:"TRANCHE"},usage:{authority:this.authority,sub_authority:"Documents",operation:"REFRESH",data:"NA"}})}).subscribe(n=>{console.log("getDocs.1:",n),this.tDocuments=n.data},n=>{console.log(n)}),this.gridDocData=this.tDocuments,this.reportGenTime=new Date}getTX(e){const i={params:{tranche_id:e,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)},usage:{authority:this.authority,sub_authority:"Transactions",operation:"REFRESH",data:"NA"}};console.log("getTX: ",i),this.REQ.get("tranche_tx",{query:JSON.stringify(i)}).subscribe(n=>{this.gridTXData=n.data,console.log("getTX[response]:",n)},n=>{console.log(n)})}addDocuments(){this.file_info=this.tranche_id+"_"+this.tranche.tranche_name,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Tranche Document",content:{owner_type:"TRANCHE",owner_id:this.tranche_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i)})}getDocument(e){console.log("getDocument: ",e),e.tranche_id=this.tranche_id;let i={params:e,usage:{authority:this.authority,sub_authority:"Documents",operation:"DOWNLOAD",data:"NA"}},n=i.params.doc_id+"_"+i.params.doc_name+"."+i.params.doc_format;console.log("getDocument: ",i,n),this.REQ.getDocument({query:JSON.stringify(i)},n)}delDocument(e){let i={doc_id:e,key_type:"TRANCHE"};console.log(i),this.REQ.post("fd",i).subscribe(n=>{console.log(n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}addNewItem(e){}exportData(e){var o={suppressQuotes:!0,columnSeparator:",",customHeader:this.report_title+" for "+this.company_id+" : as of "+this.reportGenTime,customFooter:"Himalaya Properties"};"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv(o)):console.log("Exporting Excel")}getURL(e,i,n){console.log("getURL:",e,i,n);const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}onGridReady(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e,i){e.api.sizeColumnsToFit()}onCellClicked(e,i){console.log("onCellClicked:",e,i),"DOCUMENTS"==i&&"doc_format"===e.column.colId&&this.getDocument(e.data)}onCellDoubleClicked(e,i){console.log("Double Clicked:",e,i),"TRANCHE_REPORT"==i?this.router.navigate([this.user.navigation+"/tranche"],{queryParams:{tranche_id:e.data.tranche_id}}):"TX"==i&&this.router.navigate([this.user.navigation+"/dm"],{queryParams:{display_report:6,lttx_id:e.data.tx_id}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C.t),t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tranche"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ra,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:3,vars:2,consts:[[1,"d-block","w-100","dashboard"],["class"," card",4,"ngIf"],[1,"card"],[1,"card-header"],["fas","","icon","table text-white"],[1,"card-body"],[1,"container-fluid"],[1,"row"],[1,"col-lg-4","col-md-4","col-sm-12"],[1,"md-form","mt-md-0"],[1,"position-relative"],["label","Company","id","tSelect",1,"form-control","border-0","border-bottom",3,"ngModel","ngModelChange"],["value",""],["selected","",3,"value",4,"ngFor","ngForOf"],[1,"col-lg-2","col-md-4","col-sm-12"],[1,"md-form"],["label","As Of","required","",3,"inline","options","ngModel","ngModelChange"],["sd",""],[1,"col-lg-6","col-md-4","col-sm-12","text-md-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-4","mb-4","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click",4,"ngIf"],["id","TL","name","TL"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","500px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["grid1",""],[1,"card-footer"],["selected","",3,"value"],["far","","icon","plus-square"],[1,"fas","fa-home","text-white"],[1,"d-block","mb-3","text-right","text-muted"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass"],["staticTabs",""],["heading","Details"],[1,"card-body","shadow-0","p-0"],[1,"col-sm-4"],[1,"d-block","mb-2"],[1,"col-sm-2"],[1,"col"],[4,"ngFor","ngForOf"],["heading","Property"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","600px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["gridP",""],["heading","Documents"],[1,"col-lg-1","col-md-2","col-sm-12"],[1,"col-lg-3","col-md-4","col-sm-12"],["required","",3,"inline","options","ngModel","ngModelChange"],["name","end_date","required","",3,"inline","options","ngModel","ngModelChange"],["ed",""],[1,"col-lg-5","col-md-2","col-sm-12","text-md-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-4","mb-3","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","tooltip","Add Document",3,"click",4,"ngIf"],["gridDocs",""],["heading","Performance"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","",3,"click"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","","tooltip","Add Document",3,"click",4,"ngIf"],["heading","Transactions"],[1,"fas","fa-download"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","700px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["heading","Admin",4,"ngIf"],[1,"col-sm-6"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","tooltip","Add Document",3,"click"],["fas","","icon","plus-square"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","","tooltip","Add Document",3,"click"],["heading","Admin"],[1,"col-sm-4","form-group"],[1,"md-form","mb-3","mt-0"],["mdbInput","","name","tname","type","text",1,"form-control",3,"ngModel","ngModelChange"],["label","Company","id","coSelect","optionHeight","32",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Choose One","label","Status","optionHeight","32",3,"ngModel","dropdownClass","ngModelChange"],[1,"col-sm-4","md-form","mb-3","mt-0"],["label","Purchase Date","required","",3,"inline","options","ngModel","ngModelChange"],[1,"col-sm-2","form-group"],["mdbInput","","name","pprice","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","ccost","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","tcost","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["label","Estimate Date","required","",3,"inline","options","ngModel","ngModelChange"],["mdbInput","","name","cprice","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["label","Sell Date","required","",3,"inline","options","ngModel","ngModelChange"],["mdbInput","","name","sprice","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","built","type","number","value","0.0",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12"],["type","text","id","formDD","mdbInput","",1,"md-textarea","md-textarea-auto","form-control",3,"ngModel","ngModelChange"],["for","formDD"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",3,"click"],["mdbBtn","","color","default","rounded","true","mdbWavesEffect","","type","button",3,"click"],["type","button","mdbBtn","",1,"btn","btn-link",2,"float","right",3,"click"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Fa,33,10,"div",1),t.YNc(2,Ga,198,76,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.tranche_id<1),t.xp6(1),t.Q6J("ngIf",i.tranche_id>0))},directives:[c.O5,d.gRC,d.UiO,d.XIm,_.EJ,_.JJ,_.On,_.YN,_.Kr,c.sg,d.JNR,_.Q7,d.mTE,d.CWd,v.N8,d.AH5,d.wWr,d.b6v,_.Fj,d.HqI,d.lPY,d.x8v,_.wV],pipes:[c.uU,c.H9,c.Zx,c.Nd],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}hr.solidG[_ngcontent-%COMP%]{border:3px solid #faf345}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}}"]}),a})();function Ba(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",15)(2,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshTX()}),t._UZ(3,"i",17),t.qZA(),t.TgZ(4,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openAddTX()}),t._UZ(5,"i",18),t.qZA(),t.TgZ(6,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("excel")}),t._UZ(7,"i",19),t.qZA()()()}}function Xa(a,r){if(1&a&&(t.TgZ(0,"option",37),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.label),t.xp6(1),t.Oqu(e.name)}}function $a(a,r){if(1&a&&(t.TgZ(0,"option",37),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.value)}}function Ka(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",20)(2,"div",21)(3,"label"),t._uU(4,"Company"),t.qZA(),t.TgZ(5,"select",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().company_id=n})("change",function(){return t.CHM(e),t.oxw().updateTranche()}),t.YNc(6,Xa,2,2,"option",23),t.qZA()()(),t.TgZ(7,"div",24)(8,"div",21)(9,"label"),t._uU(10,"Asset"),t.qZA(),t.TgZ(11,"select",25),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tranche_id=n}),t.TgZ(12,"option",26),t._uU(13,"ALL"),t.qZA(),t.YNc(14,$a,2,2,"option",23),t.ALo(15,"keyvalue"),t.qZA()()(),t.TgZ(16,"div",27)(17,"div",21)(18,"label"),t._uU(19,"Type"),t.qZA(),t.TgZ(20,"select",28),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().tx_type=n}),t.TgZ(21,"option",29),t._uU(22,"Transactions"),t.qZA(),t.TgZ(23,"option",30),t._uU(24,"Receivable"),t.qZA(),t.TgZ(25,"option",31),t._uU(26,"SD Transactions"),t.qZA()()()(),t.TgZ(27,"div",27)(28,"div",32)(29,"mdb-date-picker",33,34),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()()(),t.TgZ(31,"div",27)(32,"div",32)(33,"mdb-date-picker",35,36),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.company_id),t.xp6(1),t.Q6J("ngForOf",e.companyList),t.xp6(5),t.Q6J("ngModel",e.tranche_id),t.xp6(3),t.Q6J("ngForOf",t.lcZ(15,13,e.myTrancheList)),t.xp6(6),t.Q6J("ngModel",e.tx_type),t.xp6(9),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Select a date")("ngModel",e.start_date),t.xp6(4),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",e.end_date)}}function tr(a,r){if(1&a&&(t.TgZ(0,"div",3)(1,"div",38)(2,"div",21)(3,"label"),t._uU(4,"Total Credit"),t.qZA(),t._uU(5),t.ALo(6,"currency"),t.qZA()(),t.TgZ(7,"div",38)(8,"div",21)(9,"label"),t._uU(10,"Total Debit"),t.qZA(),t._uU(11),t.ALo(12,"currency"),t.qZA()()()),2&a){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,2,e.stats.total_income)," "),t.xp6(6),t.hij(" ",t.lcZ(12,4,e.stats.total_expense)," ")}}function er(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",39),t._uU(2," From "),t.TgZ(3,"mdb-date-picker",40,34),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()(),t.TgZ(5,"div",39),t._uU(6," To "),t.TgZ(7,"mdb-date-picker",41,36),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()(),t.TgZ(9,"div",42)(10,"div",43)(11,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshTX()}),t._UZ(12,"i",45),t.qZA(),t.TgZ(13,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("CSV")}),t._UZ(14,"i",46),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Select a date")("ngModel",e.start_date),t.xp6(4),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",e.end_date)}}function ir(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",52),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.label),t.xp6(1),t.hij("",e.name," ")}}function nr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",20)(2,"div",32)(3,"label",47),t._uU(4,"Company"),t.qZA(),t.TgZ(5,"mdb-select-2",48),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().company_id=n}),t.YNc(6,ir,2,2,"mdb-select-option",49),t.qZA()()(),t.TgZ(7,"div",24)(8,"div",32)(9,"label",47),t._uU(10,"From"),t.qZA(),t.TgZ(11,"mdb-date-picker",40,34),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()()(),t.TgZ(13,"div",24)(14,"div",32)(15,"label",47),t._uU(16,"To"),t.qZA(),t.TgZ(17,"mdb-date-picker",41,36),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()()(),t.TgZ(19,"div",50)(20,"div",51)(21,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshTX()}),t._UZ(22,"i",45),t.qZA(),t.TgZ(23,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("CSV")}),t._UZ(24,"i",46),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.company_id)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(1),t.Q6J("ngForOf",e.companyList),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Select a date")("ngModel",e.start_date),t.xp6(6),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",e.end_date)}}let or=(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.authority="TX",this.user=this.AS.currentUserValue,this.urlPrefix="",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.tenant_id=-1,this.property_id=-1,this.tranche_id=-1,this.view="Tenant",this.reportGenTime=new Date,this.pageTitle="Transactions",this.trancheList=[],this.myTrancheList={},this.companyList={},this.tStatusList=this.rd.GetTXStatus(),this.categoryList={},this.queryParams={},this.txStatus="",this.tList=[],this.pList=[],this.dtList=this.rd.GetDates(),this.category_id=-1,this.group_id="",this.company_id="AHUSA",this.dataList=[],this.stats=[],this.tx_type="TX",this.schema="",this.start_date=this.dtList.tdate_6M1,this.end_date=this.dtList.tdate,this.minTXDate=new Date("2020-01-01T00:00:00"),this.grid1Data=[],this.grid1Columns=[],this.gridAColumns=[{headerName:"ID",field:"tx_id",width:100,sortable:!0,filter:"agNumberColumnFilter",resizable:!0},{headerName:"Status",field:"tx_status",sortable:!0,filter:!0,resizable:!0},{headerName:"Label",field:"label",sortable:!0,filter:!0,resizable:!0},{headerName:"Category",field:"category",sortable:!0,filter:!0,resizable:!0},{headerName:"Date",field:"tdate",width:140,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer,resizable:!0},{headerName:"Credit",field:"credit",width:120,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,resizable:!0},{headerName:"Debit",field:"debit",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter,resizable:!0},{headerName:"Payee",field:"payee",sortable:"true",filter:!0,resizable:!0},{headerName:"Type",field:"type",width:80,sortable:!0,filter:!0,resizable:!0},{headerName:"Reference",field:"reference",width:80,sortable:!0,filter:!0,resizable:!0},{headerName:"Description",field:"description",sortable:!0,filter:!0,resizable:!0},{headerName:"Clear Date",field:"sdate",width:140,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer,resizable:!0},{headerName:"Last Updated",field:"updated",width:140,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agDateRenderer,resizable:!0},{headerName:"Updated By",field:"updatedby",width:80,sortable:!0,filter:!0,resizable:!0},{headerName:"Tranche",field:"tranche_name",width:120,sortable:!0,filter:!0,resizable:!0},{headerName:"Company",field:"llc",width:100,sortable:!0,filter:!0,resizable:!0},{headerName:"Group",field:"group",width:80,sortable:!0,filter:!0,resizable:!0},{headerName:"Tenant ID",field:"tenant_id",hide:!0,resizable:!0},{headerName:"Property ID",field:"property_id",hide:!0,resizable:!0},{headerName:"Category ID",field:"category_id",hide:!0,resizable:!0}],this.gridTColumns=[{headerName:"Type",field:"type",width:50,filter:!0},{headerName:"ID",width:100,field:"t_id",filter:"agNumberColumnFilter"},{headerName:"Status",field:"tx_status",sortable:!0,filter:!0},{headerName:"Date",field:"tdate",width:130,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Credit",field:"credit",width:110,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Debit",field:"debit",width:110,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Balance",field:"balance",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Category",field:"category",width:140,resizable:!0},{headerName:"Payee",field:"payee",resizable:!0},{headerName:"Description",field:"description",resizable:!0},{headerName:"Category ID",field:"category_id",hide:!0}],this.gridT1Columns=[{headerName:"Type",field:"type",width:50,resizable:!0},{headerName:"ID",width:100,field:"t_id",filter:"agNumberColumnFilter",resizable:!0},{headerName:"Status",field:"tx_status",sortable:!0,filter:!0,resizable:!0},{headerName:"Date",field:"tdate",width:130,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer,resizable:!0},{headerName:"Credit",field:"credit",width:110,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter,resizable:!0},{headerName:"Debit",field:"debit",width:110,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter,resizable:!0},{headerName:"Category",field:"category",width:140,resizable:!0},{headerName:"Payee",field:"payee",resizable:!0},{headerName:"Description",field:"description",resizable:!0},{headerName:"Category ID",field:"category_id",hide:!0}],this.gridPColumns=[{headerName:"ID",width:100,field:"t_id",filter:"agNumberColumnFilter"},{headerName:"Status",field:"tx_status",sortable:!0,filter:!0},{headerName:"Name",field:"name",filter:!0,resizable:!0},{headerName:"Date",field:"tdate",width:140,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.utility.agISODateRenderer},{headerName:"Credit",field:"credit",width:120,sortable:!0,cellStyle:this.utility.agNumberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Debit",field:"debit",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Balance",field:"amount",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.utility.agNumberCellStyle,valueFormatter:this.utility.agCurrencyFormatter},{headerName:"Payee",field:"payee"},{headerName:"Type",field:"type"},{headerName:"Description",field:"description",resizable:!0},{headerName:"TX Type",field:"tx_type",hide:!0}],this.grid1Options={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0}}}ngOnInit(){if(this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.view=this.user.type,this.rd.companySubject.subscribe(e=>this.companyList=e),this.rd.trancheSubject.subscribe(e=>this.trancheList=e),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("type")&&(this.tx_type=this.queryParams.type)}),console.log("TX:",this.tx_type,this.companyList),this.updateTranche(),"Tenant"==this.view){this.tenant_id=this.user.id_value,this.pageTitle="Tenant Transactions",this.getTenantTX(),this.categoryList={8:"Rent",54:"Utility Reimbursed",11:"Late Fees",10:"Application Fees",28:"Gas",27:"Electric",72:"Sewer",29:"Water",68:"Fees"}}else"Admin"==this.view||"SManager"==this.view?(this.categoryList=this.rd.GetCategories("ALL"),this.minTXDate=new Date("2018-01-01"),this.refreshTX()):(this.categoryList=this.rd.GetCategories("ALL"),this.getTenants(),this.getProperties(),this.refreshTX())}updateTranche(){this.myTrancheList={},console.log("updateTranche:",this.trancheList);for(let e=0;e<this.trancheList.length;e++)this.trancheList[e].label==this.company_id&&(this.myTrancheList[this.trancheList[e].tranche_id]=this.trancheList[e].tranche_name);this.tranche_id=-1,console.log("updateTranche:",this.myTrancheList)}refreshTX(){this.stats=[],this.dataList=[],this.grid1Data=[],this.property_id>0?this.getPropertyTX():this.tenant_id>0?this.getTenantTX():this.getAllTX(),this.reportGenTime=new Date}getAllTX(){const e={params:{tx_type:this.tx_type,start_date:this.utility.date2ISO(this.start_date)},usage:{authority:this.authority,sub_authority:"Transactions",operation:"LIST",data:"NA"}};""!==this.txStatus&&(e.params.status=this.txStatus),this.category_id>0&&(e.params.category_id=this.category_id),""!==this.company_id&&(e.params.company=this.company_id),this.tranche_id>0&&(e.params.tranche_id=this.tranche_id),this.end_date&&(e.params.end_date=this.end_date),console.log("getAllTX:",e);let i=0,n=0;this.REQ.get("gtxs",{query:JSON.stringify(e)}).subscribe(o=>{if(this.dataList=o.data,console.log("getAllTX:",o.code,o),!this.AS.checkResponseError(o,"Search Error",this.AS.login))return!1;for(let l=0;l<this.dataList.length;l++)this.dataList[l].category=this.categoryList[this.dataList[l].category_id],this.dataList[l].tx_status=this.tStatusList[this.dataList[l].status],i+=this.dataList[l].credit,n+=this.dataList[l].debit,"TR"===this.tx_type?(this.dataList[l].tx_id=this.dataList[l].tr_id,this.dataList[l].tx_type=this.tx_type):"STX"===this.tx_type?(this.dataList[l].tx_id=this.dataList[l].stx_id,this.dataList[l].tx_type=this.tx_type):this.dataList[l].tx_type=this.tx_type;this.stats.total_income=i,this.stats.total_expense=n,this.grid1Columns=this.gridAColumns,this.grid1Data=this.dataList},o=>{console.log(o)})}getTenantTX(){const n={params:{tenant_id:this.tenant_id,start_date:this.start_date}};this.end_date&&(n.params.end_date=this.end_date),""!=this.group_id&&(n.params.group=this.group_id),this.category_id>0&&(n.params.category_id=this.category_id),console.log("getTX:",n),this.REQ.get("tenant_tx",{query:JSON.stringify(n)}).subscribe(o=>{if(this.dataList=o.data,null==o.code||0==o.code){this.stats.receivable=0,this.stats.payments=0;for(let l=0;l<this.dataList.length;l++)this.dataList[l].category=this.categoryList[this.dataList[l].category_id],this.dataList[l].tx_status=this.tStatusList[this.dataList[l].status],"TX"==this.dataList[l].type&&this.dataList[l].credit>0&&(this.stats.payments+=this.dataList[l].credit,this.stats.last_payment=this.dataList[l].credit,this.stats.last_payment_date=this.dataList[l].tdate.slice(0,this.dataList[l].tdate.indexOf("T"))),"TR"==this.dataList[l].type&&(this.stats.receivable+=this.dataList[l].debit),this.stats.balance=this.dataList[l].balance;this.grid1Columns=this.gridT1Columns,this.grid1Data=this.dataList,console.log("Balance:"+this.stats.balance)}else this.toastr.error("Data Access failed. If error persists, please logout and login and then try. Error Message: "+o.message,"Data Error")},o=>{console.log(o)})}getPropertyTX(){const e={params:{property_id:this.property_id,start_date:this.utility.date2ISO(this.start_date)}};this.end_date&&(e.params.end_date=this.utility.date2ISO(this.end_date)),console.log("getPropertyTX: "+e),this.REQ.get("ptr",{query:JSON.stringify(e)}).subscribe(i=>{if(null==i.code||0==i.code){this.dataList=i.data;for(let n=0;n<this.dataList.length;n++)this.dataList[n].category=this.categoryList[this.dataList[n].category_id],this.dataList[n].tx_status=this.tStatusList[this.dataList[n].status];console.log("getPropertyTX:",this.dataList),this.grid1Columns=this.gridPColumns,this.grid1Data=this.dataList}else this.toastr.error("Data Access failed. If error persists, please logout and login and then try. Error Message: "+i.message,"Data Error")},i=>{console.log(i)})}getTenants(){this.REQ.get("tenant","").subscribe(e=>{this.tList=e.data},e=>{console.log(e)})}getProperties(){this.REQ.get("p","").subscribe(i=>{this.pList=i.data},i=>{console.log(i)})}refreshT(){this.tenant_id>0&&(this.property_id=-1)}refreshP(){this.property_id>0&&(this.tenant_id=-1)}openAddTX(){this.router.navigate([this.urlPrefix+"dm"],"TX"==this.tx_type?{queryParams:{report:1}}:{queryParams:{report:3}})}setSortingDynamically(e){e.sortService.updateSorting([{columnId:"llc",direction:"ASC"},{columnId:"group",direction:"DESC"}])}onGridReady(e){this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e){console.log("ModelUpdated"),e.api.sizeColumnsToFit()}onCellClicked(e){console.log(e),console.log("Click [",e.column.colId," , ",e.value+" ]","t_id:",e.data.t_id," tx_id:",e.data.tx_id," type:",e.data.type)}onCellDoubleClicked(e){console.log("onCellDoubleClicked:",e);let o=e.data.t_id,s="TX";if(e.data.tx_id>0)o=e.data.tx_id,s="TX";else{if(!(e.data.tr_id>0))return!1;o=e.data.tr_id,s="TR"}this.router.navigate([this.urlPrefix+"dm"],"TX"==s?e.data.tenant_id<1?{queryParams:{report:1,tx_id:o}}:{queryParams:{report:2,tx_id:o}}:{queryParams:{report:3,tr_id:o}})}exportData(e){var o={columnDefs:[{headerName:this.company_id+": Transaction report from "+this.start_date+" to "+this.end_date,children:[{field:"athlete",minWidth:200},{field:"country",minWidth:200}]}],defaultColDef:{sortable:!0,filter:!0,resizable:!0,minWidth:100,flex:1}};"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv(o)):this.grid1Columns.length&&this.utility.downloadExcel(this.grid1Columns,this.grid1Api,"ExcelSheet_tx.xlsx")}getContextMenuItems(e){return console.log("getContextMenuItems"),[{name:"Alert "+e.value,action:function(){window.alert("Alerting about "+e.value)},cssClasses:["redFont","bold"]},{name:"Always Disabled",disabled:!0,tooltip:"Very long tooltip, did I mention that I am very long, well I am! Long!  Very Long!"},{name:"Country",subMenu:[{name:"Ireland",action:function(){console.log("Ireland was pressed")}},{name:"France",action:function(){console.log("France was pressed")}}]},{name:"Person",subMenu:[{name:"Niall",action:function(){console.log("Niall was pressed")}},{name:"Armaan",action:function(){console.log("Armaan was pressed")}}]},"separator",{name:"Windows",shortcut:"Alt + W",action:function(){console.log("Windows Item Selected")},icon:'<img src="../images/skills/windows.png"/>'},{name:"Mac",shortcut:"Alt + M",action:function(){console.log("Mac Item Selected")},icon:'<img src="../images/skills/mac.png"/>'},"separator",{name:"Checked",checked:!0,action:function(){console.log("Checked Selected")},icon:'<img src="../images/skills/mac.png"/>'},"copy"]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tx"]],decls:21,vars:9,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-md-6","col-sm-12"],["fas","","icon","hand-holding-usd text-white"],["class","col-md-6 col-sm-12 text-md-right",4,"ngIf"],[1,"card-body"],[1,"container-fluid"],["class","row",4,"ngIf"],["id","TX","name","TX",1,"row"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","500px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""],[1,"card-footer"],[1,"col-md-6","col-sm-12","text-md-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0"],["mdbBtn","","type","button","color","white","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync","text-danger"],[1,"fas","fa-plus","text-danger"],[1,"fas","fa-download","text-danger"],[1,"col-lg-4","col-md-4","col-sm-12"],[1,"form-group"],["label","company","id","ctSelect",1,"form-control",3,"ngModel","ngModelChange","change"],["selected","",3,"value",4,"ngFor","ngForOf"],[1,"col-lg-2","col-md-4","col-sm-12","text-left"],["label","Asset","id","tSelect",1,"form-control",3,"ngModel","ngModelChange"],["value","-1"],[1,"col-lg-2","col-md-3","col-sm-12"],["label","Type","id","txtpSelect",1,"form-control",3,"ngModel","ngModelChange"],["value","TX"],["value","TR"],["value","STX"],[1,"md-form","mb-2"],["label","From","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["label","To","name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],["selected","",3,"value"],[1,"col-lg-3","col-md-3","col-sm-12"],[1,"col-lg-2","col-md-4","col-sm-12"],["required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],[1,"col-lg-8","col-md-4","col-sm-12","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-4","mt-3","mb-4","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-sync"],[1,"fas","fa-download"],[1,"position-relative"],["id","tSelect","optionHeight","32",3,"ngModel","dropdownClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-12","col-sm-12","text-lg-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-lg-4","mb-3"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"div",3)(5,"div",4)(6,"h3"),t._UZ(7,"mdb-icon",5),t._uU(8),t.qZA()(),t.YNc(9,Ba,8,0,"div",6),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8),t.YNc(12,Ka,35,15,"div",9),t.YNc(13,tr,13,6,"div",9),t.YNc(14,er,15,8,"div",9),t.YNc(15,nr,25,11,"div",9),t.TgZ(16,"div",10)(17,"ag-grid-angular",11,12),t.NdJ("gridReady",function(o){return i.onGridReady(o)})("modelUpdated",function(o){return i.onModelUpdated(o)})("cellClicked",function(o){return i.onCellClicked(o)})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o)}),t.qZA()()()(),t.TgZ(19,"div",13),t._uU(20),t.qZA()()()),2&e&&(t.xp6(8),t.hij("\xa0Transaction Report - ",i.tx_type," "),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(3),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view||"Super"===i.view),t.xp6(1),t.Q6J("ngIf","Tenant"===i.view),t.xp6(1),t.Q6J("ngIf","Investor"===i.view),t.xp6(2),t.Q6J("columnDefs",i.grid1Columns)("rowData",i.grid1Data),t.xp6(3),t.hij(" Report generated as of ",i.reportGenTime," "))},directives:[d.gRC,d.UiO,d.XIm,c.O5,d.mTE,_.EJ,_.JJ,_.On,c.sg,_.YN,_.Kr,d.JNR,_.Q7,d.lPY,d.x8v,v.N8],pipes:[c.Nd,c.H9],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transform:translateY(0)}hr.solidG[_ngcontent-%COMP%]{border:3px solid #faf345}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-top:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{padding:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{padding-top:15px}}"]}),a})();var ar=T(6912);let rr=(()=>{class a{constructor(e,i,n,o,l,s){this.modalRef=e,this.REQ=i,this.utility=n,this.router=o,this.toastr=l,this.AS=s,this.user=this.AS.currentUserValue,this.onClose=new t.vpe,this.hidePassword0=!0,this.hidePassword1=!0,this.hidePassword2=!0,this.password0=new _.NI("",[_.kI.required,_.kI.minLength(8),_.kI.maxLength(16)]),this.password1=new _.NI("",[_.kI.required,_.kI.minLength(8),_.kI.maxLength(16)]),this.password2=new _.NI("",[_.kI.required,_.kI.minLength(8),_.kI.maxLength(16)]),this.userData={},this.tx_avatar=""}ngOnInit(){console.log("user_id:",this.user),this.userData.ACTION="PASS",this.userData.user_id=this.user.user_id}updatePassword(){console.log("updatePassword: entering: ",this.password0.value,this.password1.value,this.password2.value),this.password0.valid&&this.password1.valid&&this.password2.valid&&this.password1.value===this.password2.value?(console.log("Everything is Valid"),this.userData.password=this.password0.value,this.userData.password2=this.password2.value,console.log("updatePassword:",this.userData),this.REQ.post("su",this.userData).subscribe(e=>{console.log("updateUser:",e),0!=e.code?this.toastr.error("User password update failed:"+e.message,"PASSWORD UPDATE",{timeOut:3e3}):this.toastr.success("User password updated for : ",this.userData.login)},e=>{console.log(e),this.toastr.error("Password update failed. Contact Support !","PASSWORD ERROR",{timeOut:3e3})})):this.toastr.error("Please provide correct details:","PASSWORD ERROR",{timeOut:3e3})}matchPassword(){return this.password1.value===this.password2.value?(console.log("Password Match:",this.password1.value,"=",this.password2.value),0):(console.log("Password DO NOT Match:",this.password1.value,"=",this.password2.value),-1)}closeDialogue(){this.onClose.emit({test:"Hello"})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.iX6),t.Y36(m.s),t.Y36(C.t),t.Y36(h.F0),t.Y36(d.klp),t.Y36(b.$))},a.\u0275cmp=t.Xpm({type:a,selectors:[["password-modal"]],outputs:{onClose:"onClose"},decls:26,vars:6,consts:[[1,"modal-content","card"],[1,"card-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"card-body"],[1,"form-group","text-center"],[1,"md-form"],["id","password0","mdbInput","","mdbValidate","",3,"type","formControl"],["for","password0"],["id","password1","mdbInput","","mdbValidate","",3,"type","formControl"],["for","password1"],["id","password2","mdbInput","","mdbValidate","",3,"type","formControl"],["for","password2"],[1,"card-footer"],["type","button","mdbBtn","","color","primary","rounded","true","aria-label","Update","mdbWavesEffect","",1,"waves-light",3,"click"],["type","button","mdbBtn","","color","default","color","info","rounded","true","aria-label","Close",1,"waves-dark",2,"float","right",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return i.modalRef.hide()}),t.TgZ(3,"span",3),t._uU(4,"\xd7"),t.qZA()(),t.TgZ(5,"h4"),t._uU(6," Change Password "),t.qZA()(),t.TgZ(7,"div",4)(8,"form",5)(9,"div",6),t._UZ(10,"input",7),t.TgZ(11,"label",8),t._uU(12,"Current Password"),t.qZA()(),t.TgZ(13,"div",6),t._UZ(14,"input",9),t.TgZ(15,"label",10),t._uU(16,"New Password"),t.qZA()(),t.TgZ(17,"div",6),t._UZ(18,"input",11),t.TgZ(19,"label",12),t._uU(20,"Confirm Password"),t.qZA()()()(),t.TgZ(21,"div",13)(22,"button",14),t.NdJ("click",function(){return i.updatePassword()}),t._uU(23,"Update"),t.qZA(),t.TgZ(24,"button",15),t.NdJ("click",function(){return i.modalRef.hide()}),t._uU(25,"Close"),t.qZA()()()),2&e&&(t.xp6(10),t.Q6J("type",i.hidePassword0?"password":"text")("formControl",i.password0),t.xp6(4),t.Q6J("type",i.hidePassword1?"password":"text")("formControl",i.password1),t.xp6(4),t.Q6J("type",i.hidePassword2?"password":"text")("formControl",i.password2))},directives:[_._Y,_.JL,_.F,_.Fj,d.HqI,L.VP,d.pvJ,ar.pv,_.JJ,_.oH,d.mTE,d.b6v],encapsulation:2}),a})(),lr=(()=>{class a{constructor(e,i,n,o,l){this.REQ=e,this.rd=i,this.toastr=n,this.AS=o,this.modalService=l,this.user=this.AS.currentUserValue,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.user_id=-1,this.userData={},this.tx_avatar="assets/img/default-avatar.png",this.tx_roles=""}ngOnInit(){console.log("User Profile:",this.user),this.getUser(this.user.user_id)}getUser(e){const i={params:{user_id:e,caller:"HCAPP"}};console.log("user:getUser:",i),this.REQ.get("gu",{query:JSON.stringify(i)}).subscribe(n=>{for(var o in console.log("getUser:",n),this.userData=n,this.tx_avatar=this.userData.avatar,this.userData.roles)this.tx_roles+=" "+o},n=>{console.log(n),console.log("User login failed for : ")})}updateUser(){const e=this.userData;this.userData.ACTION="INFO",console.log("updateUser:",e),this.REQ.post("su",e).subscribe(i=>{console.log("updateUser:",i),this.toastr.success("User info updated for : "+this.userData.login)},i=>{console.log(i),this.toastr.error("User update failed:",this.userData.login,{timeOut:3e3})})}openPasswordReset(e){console.log("onResetPasswordL",e),this.modalRef=this.modalService.show(rr,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Transaction Document",user_name:this.user.firstName+" "+this.user.lastName,user_id:this.user_id,user_login:this.user.login,content:{description:"Password Reset"}}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(d.klp),t.Y36(b.$),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-user"]],decls:88,vars:14,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"fas","fa-user","text-white"],[1,"card-body"],[1,"container-fluid"],[1,"row"],[1,"col-lg-4","col-md-4","col-sm-12"],[1,"card-user","mt-3"],[1,"author"],[1,"block","block-one"],["alt","...",1,"avatar","mw-100",3,"src"],[1,"card-title","fw-bold","mt-2","fs-4"],[1,"button-container","d-flex","mt-2"],["type","button","mdbBtn","","floating","true","color","comm",1,"m-0","me-2","d-flex","justify-content-center","align-items-center"],["fas","","icon","comments"],["type","button","mdbBtn","","floating","true","color","email",1,"m-0","me-2","d-flex","justify-content-center","align-items-center"],["fas","","icon","envelope"],[1,"col-lg-8","col-md-8","col-sm-12"],[1,"col-sm-12"],[1,"md-form","mb-0"],[1,"position-relative"],["mdbInput","","disabled","","placeholder","Company","type","text","name","company","value","Himalaya Capital",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-4","col-md-12","col-sm-12"],["mdbInput","","placeholder","Username","type","text","name","login",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-8","col-md-12","col-sm-12"],["for","exampleInputEmail1",1,"position-relative"],["mdbInput","","placeholder","Email","type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","placeholder","Company","type","text","name","first_name",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","placeholder","Last Name","type","text","name","last_name",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","placeholder","Home Address","type","text","name","address",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","placeholder","City","type","text","name","city",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-2","col-md-12","col-sm-12"],["mdbInput","","placeholder","state","type","text","name","state",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-6","col-md-12","col-sm-12"],["mdbInput","","placeholder","08550","type","text","name","zip",1,"form-control",3,"ngModel","ngModelChange"],[1,"md-form","mb-md-4","mb-0"],["mdbInput","","cols","60","placeholder","User description","rows","4",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],["mdbBtn","","color","primary","rounded","true","type","button",3,"click"],["mdbBtn","","color","default","rounded","true","type","button",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._UZ(5,"i",3),t._uU(6,"\xa0User Profile "),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10),t._UZ(14,"img",11),t.qZA(),t.TgZ(15,"div",12),t._uU(16),t.qZA(),t.TgZ(17,"label"),t._uU(18),t.qZA()()(),t.TgZ(19,"div",13)(20,"a",14),t._UZ(21,"mdb-icon",15),t.qZA(),t.TgZ(22,"a",16),t._UZ(23,"mdb-icon",17),t.qZA()()(),t.TgZ(24,"div",18)(25,"div",6)(26,"div",19)(27,"div",20)(28,"label",21),t._uU(29,"Company (disabled)"),t.qZA(),t.TgZ(30,"input",22),t.NdJ("ngModelChange",function(o){return i.userData.company=o}),t.qZA()()()(),t.TgZ(31,"div",6)(32,"div",23)(33,"div",20)(34,"label",21),t._uU(35,"Username"),t.qZA(),t.TgZ(36,"input",24),t.NdJ("ngModelChange",function(o){return i.userData.login=o}),t.qZA()()(),t.TgZ(37,"div",25)(38,"div",20)(39,"label",26),t._uU(40," Email address "),t.qZA(),t.TgZ(41,"input",27),t.NdJ("ngModelChange",function(o){return i.userData.email=o}),t.qZA()()()(),t.TgZ(42,"div",6)(43,"div",23)(44,"div",20)(45,"label",21),t._uU(46,"First Name"),t.qZA(),t.TgZ(47,"input",28),t.NdJ("ngModelChange",function(o){return i.userData.first_name=o}),t.qZA()()(),t.TgZ(48,"div",25)(49,"div",20)(50,"label",21),t._uU(51,"Last Name"),t.qZA(),t.TgZ(52,"input",29),t.NdJ("ngModelChange",function(o){return i.userData.last_name=o}),t.qZA()()()(),t.TgZ(53,"div",6)(54,"div",19)(55,"div",20)(56,"label",21),t._uU(57,"Address"),t.qZA(),t.TgZ(58,"input",30),t.NdJ("ngModelChange",function(o){return i.userData.address=o}),t.qZA()()()(),t.TgZ(59,"div",6)(60,"div",23)(61,"div",20)(62,"label",21),t._uU(63,"City"),t.qZA(),t.TgZ(64,"input",31),t.NdJ("ngModelChange",function(o){return i.userData.city=o}),t.qZA()()(),t.TgZ(65,"div",32)(66,"div",20)(67,"label",21),t._uU(68,"State"),t.qZA(),t.TgZ(69,"input",33),t.NdJ("ngModelChange",function(o){return i.userData.state=o}),t.qZA()()(),t.TgZ(70,"div",34)(71,"div",20)(72,"label",21),t._uU(73,"ZIP"),t.qZA(),t.TgZ(74,"input",35),t.NdJ("ngModelChange",function(o){return i.userData.zip=o}),t.qZA()()()(),t.TgZ(75,"div",6)(76,"div",19)(77,"div",36)(78,"label",21),t._uU(79,"About Me"),t.qZA(),t.TgZ(80,"textarea",37),t.NdJ("ngModelChange",function(o){return i.userData.description=o}),t._uU(81,"                    "),t.qZA()()()(),t.TgZ(82,"div",6)(83,"div",19)(84,"button",38),t.NdJ("click",function(){return i.updateUser()}),t._uU(85,"Save"),t.qZA(),t.TgZ(86,"button",39),t.NdJ("click",function(o){return i.openPasswordReset(o)}),t._uU(87,"Change Pass"),t.qZA()()()()()()()()()),2&e&&(t.xp6(14),t.s9C("src",i.tx_avatar,t.LSH),t.xp6(2),t.AsE("",i.userData.first_name,"\xa0",i.userData.last_name," "),t.xp6(2),t.Oqu(i.tx_roles),t.xp6(12),t.Q6J("ngModel",i.userData.company),t.xp6(6),t.Q6J("ngModel",i.userData.login),t.xp6(5),t.Q6J("ngModel",i.userData.email),t.xp6(6),t.Q6J("ngModel",i.userData.first_name),t.xp6(5),t.Q6J("ngModel",i.userData.last_name),t.xp6(6),t.Q6J("ngModel",i.userData.address),t.xp6(6),t.Q6J("ngModel",i.userData.city),t.xp6(5),t.Q6J("ngModel",i.userData.state),t.xp6(5),t.Q6J("ngModel",i.userData.zip),t.xp6(6),t.Q6J("ngModel",i.userData.description))},directives:[d.gRC,d.mTE,d.UiO,d.XIm,_.Fj,d.HqI,_.JJ,_.On],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:200px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transform:translateY(0)}hr.solidG[_ngcontent-%COMP%]{border:3px solid #faf345}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}}"]}),a})();const dr=["staticTabs"];function sr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().newVendor()}),t._UZ(1,"mdb-icon",17),t.qZA()}}function _r(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshAnalytics()}),t._UZ(1,"i",19),t.qZA()}}function cr(a,r){if(1&a&&(t.TgZ(0,"mdb-tab",20)(1,"div",21)(2,"div",7)(3,"div",22)(4,"label"),t._uU(5,"Name"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"div",23)(8,"label"),t._uU(9,"Label"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"div",24)(12,"label"),t._uU(13,"Account"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"div",24)(16,"label"),t._uU(17,"Status"),t.qZA(),t._uU(18),t.qZA()(),t.TgZ(19,"div",7)(20,"div",22)(21,"label"),t._uU(22,"Address"),t.qZA(),t._uU(23),t.qZA(),t.TgZ(24,"div",23)(25,"label"),t._uU(26,"Address2"),t.qZA(),t._uU(27),t.qZA(),t.TgZ(28,"div",24)(29,"label"),t._uU(30,"City State ZIP"),t.qZA(),t._uU(31),t.qZA(),t._UZ(32,"div",24),t.qZA(),t.TgZ(33,"div",7),t._UZ(34,"div",22),t.TgZ(35,"div",23)(36,"label"),t._uU(37,"Phone"),t.qZA(),t._uU(38),t.qZA(),t.TgZ(39,"div",24)(40,"label"),t._uU(41,"Email"),t.qZA(),t._uU(42),t.qZA(),t._UZ(43,"div",24),t.qZA(),t._UZ(44,"hr"),t.TgZ(45,"div",7)(46,"div",22)(47,"label"),t._uU(48,"Website"),t.qZA(),t._uU(49),t.qZA(),t.TgZ(50,"div",23)(51,"label"),t._uU(52,"Account"),t.qZA(),t._uU(53),t.qZA(),t.TgZ(54,"div",24)(55,"label"),t._uU(56,"ID"),t.qZA(),t._uU(57),t.qZA(),t.TgZ(58,"div",24)(59,"label"),t._uU(60,"Password"),t.qZA(),t._uU(61),t.qZA()(),t.TgZ(62,"div",7)(63,"div",1)(64,"label"),t._uU(65,"Services"),t.qZA(),t._uU(66),t.qZA(),t.TgZ(67,"div",1)(68,"label"),t._uU(69,"Notes"),t.qZA(),t._uU(70),t.qZA()(),t._UZ(71,"hr"),t.TgZ(72,"div",7)(73,"div",22)(74,"label"),t._uU(75,"Contact"),t.qZA(),t._uU(76),t.qZA(),t.TgZ(77,"div",23)(78,"label"),t._uU(79,"Phone"),t.qZA(),t._uU(80),t.qZA(),t.TgZ(81,"div",24)(82,"label"),t._uU(83,"Email"),t.qZA(),t._uU(84),t.qZA(),t._UZ(85,"div",24),t.qZA()()()),2&a){const e=t.oxw();t.xp6(6),t.hij(" ",e.vendor.name," "),t.xp6(4),t.hij(" ",e.vendor.label," "),t.xp6(4),t.hij("",e.vendor.account," "),t.xp6(4),t.hij("",e.vendor.status," "),t.xp6(5),t.hij(" ",e.vendor.address1," "),t.xp6(4),t.hij(" ",e.vendor.address2," "),t.xp6(4),t.lnq(" ",e.vendor.city,"\xa0\xa0",e.vendor.state,"\xa0",e.vendor.zip," "),t.xp6(7),t.hij("",e.vendor.phone," "),t.xp6(4),t.hij("",e.vendor.email," "),t.xp6(7),t.hij(" ",e.vendor.website," "),t.xp6(4),t.hij("",e.vendor.account," "),t.xp6(4),t.hij("",e.vendor.site_login," "),t.xp6(4),t.hij("",e.vendor.site_password," "),t.xp6(5),t.hij("",e.vendor.services," "),t.xp6(4),t.hij("",e.vendor.description," "),t.xp6(6),t.hij("",e.vendor.contact," "),t.xp6(4),t.hij("",e.vendor.contact_phone," "),t.xp6(4),t.hij("",e.vendor.contact_email," ")}}function ur(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",25)(1,"div",21)(2,"ag-grid-angular",26,27),t.NdJ("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated1(n)})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked1(n,"WO")}),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("columnDefs",e.gridWOColumns)("rowData",e.gridWOData)}}function pr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).refreshAnalytics()}),t._UZ(1,"mdb-icon",41),t.qZA()}}function hr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",28)(1,"div",21)(2,"div",7)(3,"div",29)(4,"label"),t._uU(5,"Period"),t.qZA()(),t.TgZ(6,"div",24)(7,"label"),t._uU(8,"From"),t.qZA(),t.TgZ(9,"mdb-date-picker",30,31),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().start_date=n}),t.qZA()(),t.TgZ(11,"div",24)(12,"label"),t._uU(13,"To"),t.qZA(),t.TgZ(14,"mdb-date-picker",32,33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().end_date=n}),t.qZA()(),t._UZ(16,"div",23),t.TgZ(17,"div",34)(18,"div",4)(19,"button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshAnalytics()}),t._UZ(20,"i",36),t.qZA(),t._uU(21,"\xa0 "),t.YNc(22,pr,2,0,"button",37),t._uU(23,"\xa0 "),t.TgZ(24,"button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportData("CSV")}),t._uU(25,"CSV"),t.qZA()()()(),t.TgZ(26,"div",7)(27,"ag-grid-angular",38,39),t.NdJ("gridReady",function(n){return t.CHM(e),t.oxw().onGridReady1(n)})("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated1(n)})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked1(n,"TX")}),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(9),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.start_date),t.xp6(5),t.Q6J("inline",!0)("options",e.myDatePickerOptions)("ngModel",e.end_date),t.xp6(8),t.Q6J("ngIf","Admin"===e.view),t.xp6(5),t.Q6J("columnDefs",e.grid1Columns)("rowData",e.grid1Data)("getRowHeight",e.getRowHeight1)}}function gr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",42)(1,"div",21)(2,"div",7)(3,"div",43)(4,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().addDocuments()}),t._UZ(5,"mdb-icon",45),t.qZA()()(),t.TgZ(6,"div",7)(7,"ag-grid-angular",46,47),t.NdJ("modelUpdated",function(n){return t.CHM(e),t.oxw().onModelUpdated1(n)})("cellClicked",function(n){return t.CHM(e),t.oxw().onCellClicked(n)})("cellDoubleClicked",function(n){return t.CHM(e),t.oxw().onCellDoubleClicked1(n,"DOCUMENTS")}),t.qZA()()(),t.TgZ(9,"div",48),t._uU(10),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(7),t.Q6J("columnDefs",e.gridDocColumns)("rowData",e.gridDocData),t.xp6(3),t.hij(" Report generated as of ",e.reportGenTime,"\n")}}function mr(a,r){if(1&a&&(t.TgZ(0,"option",75),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.Oqu(e.value)}}function fr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",49)(1,"div",21)(2,"div",7)(3,"div",22)(4,"div",50)(5,"label"),t._uU(6,"Name "),t.TgZ(7,"span",51),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"input",52),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.name=n}),t.qZA()()(),t.TgZ(10,"div",23)(11,"div",50)(12,"label"),t._uU(13,"Label "),t.TgZ(14,"span",51),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"input",53),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.label=n}),t.qZA()()(),t.TgZ(17,"div",23)(18,"div",50)(19,"label"),t._uU(20,"Tax ID"),t.qZA(),t.TgZ(21,"input",53),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.tax_id=n}),t.qZA()()(),t.TgZ(22,"div",23)(23,"div",50)(24,"mdb-select-2",54),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.status=n}),t.TgZ(25,"mdb-select-option",55),t._uU(26,"In-Active"),t.qZA(),t.TgZ(27,"mdb-select-option",56),t._uU(28,"Active"),t.qZA(),t.TgZ(29,"mdb-select-option",57),t._uU(30,"NA"),t.qZA()()()()(),t.TgZ(31,"div",7)(32,"div",22)(33,"div",50)(34,"label"),t._uU(35,"Address"),t.qZA(),t.TgZ(36,"input",58),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.address1=n}),t.qZA()()(),t.TgZ(37,"div",23)(38,"div",50)(39,"label"),t._uU(40,"Address2"),t.qZA(),t.TgZ(41,"input",58),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.address2=n}),t.qZA()()(),t.TgZ(42,"div",22)(43,"div",50)(44,"label"),t._uU(45,"Phone"),t.qZA(),t.TgZ(46,"input",58),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.phone=n}),t.qZA()()()(),t.TgZ(47,"div",7)(48,"div",24)(49,"div",50)(50,"label"),t._uU(51,"City"),t.qZA(),t.TgZ(52,"input",58),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.city=n}),t.qZA()()(),t.TgZ(53,"div",29)(54,"label"),t._uU(55,"State"),t.qZA(),t.TgZ(56,"select",59),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.state=n}),t.YNc(57,mr,2,2,"option",60),t.ALo(58,"keyvalue"),t.qZA()(),t.TgZ(59,"div",23)(60,"div",50)(61,"label"),t._uU(62,"ZIP"),t.qZA(),t.TgZ(63,"input",61),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.zip=n}),t.qZA()()(),t.TgZ(64,"div",22)(65,"div",50)(66,"label"),t._uU(67,"Email"),t.qZA(),t.TgZ(68,"input",62),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.email=n}),t.qZA()()()(),t.TgZ(69,"div",7)(70,"div",22)(71,"div",50)(72,"label"),t._uU(73,"Website"),t.qZA(),t.TgZ(74,"input",63),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.website=n}),t.qZA()()(),t.TgZ(75,"div",23)(76,"div",50)(77,"label"),t._uU(78,"Account"),t.qZA(),t.TgZ(79,"input",52),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.account=n}),t.qZA()()(),t.TgZ(80,"div",23)(81,"div",50)(82,"label"),t._uU(83,"User ID"),t.qZA(),t.TgZ(84,"input",64),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.site_login=n}),t.qZA()()(),t.TgZ(85,"div",23)(86,"div",50)(87,"label"),t._uU(88,"Authentication"),t.qZA(),t.TgZ(89,"input",65),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.site_password=n}),t.qZA()()()(),t.TgZ(90,"div",7)(91,"div",1)(92,"div",50)(93,"label"),t._uU(94,"Services "),t.TgZ(95,"span",51),t._uU(96,"*"),t.qZA()(),t.TgZ(97,"textarea",66),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.services=n}),t._uU(98,"            Services\n          "),t.qZA()()(),t.TgZ(99,"div",1)(100,"div",50)(101,"label"),t._uU(102,"Description"),t.qZA(),t.TgZ(103,"textarea",67),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.description=n}),t._uU(104,"            Description\n          "),t.qZA()()()(),t._UZ(105,"hr",68),t.TgZ(106,"div",7)(107,"div",1)(108,"div",50)(109,"label"),t._uU(110,"Primary Contact"),t.qZA(),t.TgZ(111,"input",69),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.contact=n}),t.qZA()()(),t.TgZ(112,"div",23)(113,"div",50)(114,"label"),t._uU(115,"Phone"),t.qZA(),t.TgZ(116,"input",70),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.contact_phone=n}),t.qZA()()(),t.TgZ(117,"div",23)(118,"div",50)(119,"label"),t._uU(120,"Email"),t.qZA(),t.TgZ(121,"input",71),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor.contact_email=n}),t.qZA()()()()(),t.TgZ(122,"div",48)(123,"button",72),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("")}),t._uU(124,"Save"),t.qZA(),t._uU(125," \xa0\xa0 "),t.TgZ(126,"button",73),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveASData("")}),t._uU(127,"Save As"),t.qZA(),t.TgZ(128,"button",74),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("")}),t._uU(129,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.vendor.name),t.xp6(7),t.Q6J("ngModel",e.vendor.label),t.xp6(5),t.Q6J("ngModel",e.vendor.tax_id),t.xp6(3),t.Q6J("ngModel",e.vendor.status),t.xp6(12),t.Q6J("ngModel",e.vendor.address1),t.xp6(5),t.Q6J("ngModel",e.vendor.address2),t.xp6(5),t.Q6J("ngModel",e.vendor.phone),t.xp6(6),t.Q6J("ngModel",e.vendor.city),t.xp6(4),t.Q6J("ngModel",e.vendor.state),t.xp6(1),t.Q6J("ngForOf",t.lcZ(58,21,e.stateList)),t.xp6(6),t.Q6J("ngModel",e.vendor.zip),t.xp6(5),t.Q6J("ngModel",e.vendor.email),t.xp6(6),t.Q6J("ngModel",e.vendor.website),t.xp6(5),t.Q6J("ngModel",e.vendor.account),t.xp6(5),t.Q6J("ngModel",e.vendor.site_login),t.xp6(5),t.Q6J("ngModel",e.vendor.site_password),t.xp6(8),t.Q6J("ngModel",e.vendor.services),t.xp6(6),t.Q6J("ngModel",e.vendor.description),t.xp6(8),t.Q6J("ngModel",e.vendor.contact),t.xp6(5),t.Q6J("ngModel",e.vendor.contact_phone),t.xp6(5),t.Q6J("ngModel",e.vendor.contact_email)}}let br=(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.utility=e,this.REQ=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.user=this.AS.currentUserValue,this.urlPrefix="",this.queryParams={},this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.showModal=!1,this.file_info="",this.owner_id=-1,this.owner_type="VENDOR",this.modalTitle="",this.reportGenTime=new Date,this.vendor_id=-1,this.vendor={},this.view="Tenant",this.start_date=(new Date).toISOString(),this.end_date=(new Date).toISOString(),this.minTXDate=new Date("2020-01-01"),this.cList=this.rd.GetCategories("ALL"),this.tList=this.rd.GetPaymentTypes(),this.dtList=this.rd.GetDates(),this.wosList=this.rd.GetWOStatus(),this.priorityList=this.rd.GetWOPriorities(),this.stateList=this.rd.GetStates("USA"),this.grid1Options={enableAutoResize:!0,enableCellNavigation:!0,enableFilter:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0},rowHeight:"auto"},this.grid1Data=[],this.grid1Columns=[{headerName:"ID",width:100,field:"tx_id",filter:"agNumberColumnFilter"},{headerName:"Tranche",field:"tranche_name",width:120,sortable:!0,filter:!0,resizable:!0},{headerName:"Company",field:"llc",width:100,sortable:!0,filter:!0,resizable:!0},{headerName:"Property",field:"property",filter:!0,resizable:!0},{headerName:"Category",field:"category",filter:!0,resizable:!0},{headerName:"Date",field:"tdate",width:140,sortable:!0,filter:"agDateColumnFilter",valueFormatter:this.dateFormatter},{headerName:"Credit",field:"credit",width:120,sortable:!0,cellStyle:this.numberCellStyle,filter:"agNumberColumnFilter",valueFormatter:this.currencyFormatter},{headerName:"Debit",field:"debit",width:120,sortable:"true",filter:"agNumberColumnFilter",cellStyle:this.numberCellStyle,valueFormatter:this.currencyFormatter},{headerName:"Type",field:"type"},{headerName:"Reference",field:"reference"},{headerName:"Description",field:"description",resizable:!0},{headerName:"TX Type",field:"tx_type",hide:!0}],this.gridWOOptions=this.grid1Options,this.gridWOData=[],this.gridWOColumns=[{headerName:"ID",width:70,field:"wo_id",filter:"agNumberColumnFilter"},{headerName:"Created",width:120,field:"tdate",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.agDateRenderer},{headerName:"Label",field:"label"},{headerName:"Tenant",field:"contact_name"},{headerName:"Title",field:"title"},{headerName:"Priority",width:130,field:"priority_label",cellStyle:this.woPriorityStyle},{headerName:"Priority ID",field:"priority",hide:!0},{headerName:"Status",width:130,field:"status_label",cellStyle:this.woStatusStyle},{headerName:"Status ID",field:"status",hide:!0},{headerName:"Assignee",field:"owner"},{headerName:"Updated",width:120,field:"updated",filter:"agDateColumnFilter",cellRenderer:this.agDateRenderer}],this.gridDocOptions=this.grid1Options,this.gridDocData=[],this.gridDocColumns=[{headerName:"ID",field:"index",width:40,sortable:!0,filter:"agNumberColumnFilter"},{headerName:" ",width:25,field:"doc_format",cellRenderer:this.imageRenderer},{headerName:"Document",width:130,field:"doc_type"},{headerName:"Name",field:"doc_name",sortable:!0,filter:!0},{headerName:"Updated By",field:"updatedby",sortable:!0,filter:!0},{headerName:"Updated",field:"updated",width:140,sortable:!0,filter:"agDateColumnFilter",cellRenderer:this.agDateRenderer},{headerName:"Tenant ID",field:"tenant_id",hide:!0},{headerName:"Property ID",field:"property_id",hide:!0},{headerName:"Doc ID",field:"doc_id",hide:!0},{headerName:"Doc Path",field:"doc_path",hide:!0}]}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("vendor_id")&&(this.vendor_id=this.queryParams.vendor_id)}),this.view=this.user.type,this.start_date=this.dtList.tdate_YTD,this.vendor_id>0?(this.getVendorInfo(this.vendor_id,"vendor_id"),this.refreshAnalytics()):"Admin"===this.view?console.log("ngOnInit: vendor id=-1"):this.router.navigate([this.user.navigation+"/report"],{queryParams:{report:"VENDOR"}})}getVendorInfo(e,i){const n={params:{NOP:"NOP"}};n.params[i]=e,console.log("getVendorInfo Entered:",n),this.REQ.get("vendor",{query:JSON.stringify(n)}).subscribe(o=>{this.vendor=o.data[0],console.log("getVendorInfo:",o),console.log("getVendorInfo:",this.vendor),this.vendor.hasOwnProperty("start_date")},o=>{console.log(o)})}refreshAnalytics(){this.getWOS(this.vendor_id),this.getVendorTX(this.vendor_id),this.getDocs()}newVendor(){this.vendor_id=-1,this.vendor.name="",this.vendor.label="",this.vendor.address1="",this.vendor.address2="",this.vendor.city="",this.vendor.state="",this.vendor.phone="",this.vendor.email="",this.vendor.zip="",this.vendor.account="",this.vendor.services="",this.vendor.site_login="",this.vendor.site_password="",this.vendor.website="",this.vendor.contact="",this.vendor.contact_phone="",this.vendor.contact_email="",this.vendor.status="ACTIVE",this.gridWOData=[],this.grid1Data=[]}getVendorTX(e){const i={params:{vendor_id:e,start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};this.grid1Data=[],console.log("getvendorTX: ",i),this.REQ.get("vendortx",{query:JSON.stringify(i)}).subscribe(n=>{this.grid1Data=n.data,console.log("getvendorTX: ",this.grid1Data)},n=>{console.log(n)})}getWOS(e){const i={params:{start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date),vendor_id:this.vendor_id}};this.gridWOData=[],console.log("getWOS: Entered:",i),this.REQ.get("gwos",{query:JSON.stringify(i)}).subscribe(n=>{if(console.log("getWOS:",n),void 0===n.data)console.log("getWOS: NO data returned");else{for(let o=0;o<n.data.length;o++)n.data[o].priority_label=this.priorityList[n.data[o].priority],n.data[o].status_label=this.wosList[n.data[o].status],n.data[o].cellClass="card-title";this.gridWOData=n.data}},n=>{console.log(n),this.toastr.error("Work order report failed : "+n)})}getURL(e,i,n){const o={};o[i]=n,this.router.navigate([this.urlPrefix+e],{queryParams:o})}clearData(e){this.newVendor()}saveASData(e){this.vendor_id=-1,this.updateData(e)}updateData(e){console.log("updateTenancy:entered");let i=this.vendor;if(i.vendor_id=this.vendor_id,this.vendor.name.length<3||this.vendor.label<2)return this.toastr.error("Please provide correct values"),!1;console.log("updateData[",e,"]:",i),this.REQ.post("vendoru",i).subscribe(n=>{console.log("updateData:",n);var o=n;o.code<0?this.toastr.error(o.message,"Vendor Update Error"):o.vendor_id>0&&(this.vendor_id!=o.vendor_id?(this.vendor_id=o.vendor_id,this.toastr.success("New Vendor Created with id: "+this.vendor_id)):this.toastr.success("Vendor data updated for : "+this.vendor_id),this.rd.GetVendors())},n=>{console.log(n),this.toastr.error("Vendor update failed for : "+this.vendor_id)})}addDocuments(){console.log(),this.file_info=this.vendor_id+"_"+this.vendor.label,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.owner_id=this.vendor_id,console.log(this.file_info),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Vendor Document",content:{owner_type:this.owner_type,owner_id:this.owner_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i)})}delDocument(e){let i={doc_id:e.doc_id,key_type:"VENDOR"};console.log("delDocument:",i),this.REQ.post("fd",i).subscribe(n=>{console.log("delDocument:",n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}onFileUploadClose(e){this.showModal=!1,console.log("onFileUploadClose"),console.log(e)}getDocs(){this.gridDocData=[],this.REQ.get("fl",{query:JSON.stringify({params:{vendor_id:this.vendor_id,key_type:"VENDOR"}})}).subscribe(n=>{console.log("getDocs.1:",n),this.gridDocData=n.data},n=>{console.log(n)}),this.reportGenTime=new Date}getDocument(e){e.vendor_id=this.vendor_id,console.log("getDocument: ",e),this.REQ.getDocument(e)}showTXDetails(e,i){let n={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Transaction Details",content:{description:"Data"}}};n.data.content=e.data,n.data.content.label=this.vendor.label,n.data.content.tenant_name=this.vendor.first_name+" "+this.vendor.last_name,this.modalRef=this.modalService.show(N,n)}getRowHeightA(e){return void 0===e.data.pa_value||e.data.pa_value.length<50?25:25*Math.ceil(e.data.pa_value.length/50)}getRowHeight1(e){return 24}onModelUpdatedA(e){e.api.sizeColumnsToFit()}onGridReady1(e){console.log("onGridReady1 : ready",e),this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated1(e){e.api.sizeColumnsToFit()}dateFormatter(e){return void 0===e.value?"UDF":e.value.slice(0,e.value.indexOf("T"))}exportData(e){"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv({suppressQuotes:!0,columnSeparator:",",customHeader:"Report",customFooter:"Himalaya Properties"})):console.log("Exporting Excel")}onCellClicked(e){console.log("onCellClicked:",e),"doc_format"==e.column.colId?this.getDocument(e.data):"doc_delete"==e.column.colId&&(console.log("onCellClicked: Deleting"),this.delDocument(e.data))}onCellDoubleClicked1(e,i){console.log("Double Clicked:",i),console.log(e);let n=e.data.t_id,l=e.data.tx_type;"Admin"===this.user.type&&"TX"===l?this.router.navigate([this.urlPrefix+"dm"],e.data.debit>0?{queryParams:{report:1,tx_id:n}}:{queryParams:{report:2,tx_id:n}}):"TX"===l?this.showTXDetails(e,i):"WO"===i&&(n=e.data.wo_id,this.router.navigate([this.urlPrefix+"wo"],{queryParams:{wo_id:n}}))}numberCellStyle(e){return e.value<0?{color:"red",textAlign:"right"}:e.value>0?{color:"blue",textAlign:"right"}:{textAlign:"right"}}currencyFormatter(e){return void 0===e.value?"UDF":"$"+e.value.toLocaleString(void 0,{minimumFractionDigits:2})}agDateRenderer(e){let i=new Date(e.value),n=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds();return e.value?n:""}woPriorityStyle(e){return"Urgent"==e.value?{color:"red",textAlign:"center"}:"Normal"==e.value?{color:"blue",textAlign:"center"}:{textAlign:"center"}}woStatusStyle(e){return"Open"==e.value?{color:"red",textAlign:"center"}:"New"==e.value?{color:"blue",textAlign:"center"}:"In Progress"==e.value?{color:"green",textAlign:"center"}:"On Hold"==e.value?{color:"orange",textAlign:"center"}:"Closed"==e.value?{color:"gray",textAlign:"center"}:{textAlign:"center"}}imageRenderer(e){console.log("imageRenderer:",e);let i="<span class='text-info'><i class='fas fa-download'></i></span>";return"doc_delete"===e.colDef.field&&(i="<span class='text-danger'><i class='fas fa-trash-alt'></i></span>"),i}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C.t),t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-vendor"]],viewQuery:function(e,i){if(1&e&&t.Gf(dr,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:21,vars:14,consts:[[1,"row","primary-color","m-0","py-2",2,"border-radius","5px"],[1,"col-sm-6"],["fas","","icon","hands-helping text-white"],[1,"col-sm-6","text-right"],["role","group","aria-label","Basic example",1,"btn-group"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","ngbTooltip","Add new vendor",3,"click",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","class","btn-medium btn-info",3,"click",4,"ngIf"],[1,"row"],[1,"col-12","text-right","text-muted"],[3,"buttonClass","justified","contentClass"],["staticTabs",""],["heading","Details",4,"ngIf"],["heading","Maintenance",4,"ngIf"],["heading","Transactions",4,"ngIf"],["heading","Documents",4,"ngIf"],["heading","Admin",4,"ngIf"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","","ngbTooltip","Add new vendor",3,"click"],["far","","icon","plus-square text-danger","size","2x"],["mdbBtn","","type","button","color","white","rounded","true","size","sm","mdbWavesEffect","",1,"btn-medium","btn-info",3,"click"],["size","2x",1,"fas","fa-sync","text-primary"],["heading","Details"],[1,"card-body"],[1,"col-sm-4"],[1,"col-sm-2"],[1,"col-sm-3"],["heading","Maintenance"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","600px",3,"columnDefs","rowData","modelUpdated","cellDoubleClicked"],["gridSD",""],["heading","Transactions"],[1,"col-sm-1"],["required","",3,"inline","options","ngModel","ngModelChange"],["sd",""],["name","end_date","required","",3,"inline","options","ngModel","ngModelChange"],["ed",""],[1,"col-sm-3",2,"align-content","right"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","",3,"click"],[1,"fas","fa-sync"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","","tooltip","Email tenant the financials",3,"click",4,"ngIf"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","700px",3,"columnDefs","rowData","getRowHeight","gridReady","modelUpdated","cellDoubleClicked"],["grid1",""],["mdbBtn","","type","button","color","info","rounded","true","size","sm","mdbWavesEffect","","tooltip","Email tenant the financials",3,"click"],["far","","icon","envelope"],["heading","Documents"],[1,"col-sm-12","text-right"],["type","button",1,"btn-simple","btn-sm",3,"click"],["fas","","icon","plus-square"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","500px",3,"columnDefs","rowData","modelUpdated","cellClicked","cellDoubleClicked"],["agGrid",""],[1,"card-footer"],["heading","Admin"],[1,"md-form","mb-2"],[2,"color","red"],["mdbInput","","name","name","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["label","Status","name","t_select","id","trSelect",3,"ngModel","ngModelChange"],["value","INACTIVE"],["selected","","value","ACTIVE"],["selected","","value","NA"],["mdbInput","","name","street","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["name","sSelect","id","sSelect",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mdbInput","","name","zip","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","em","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","website","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","userid","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","auth","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","id","services","cols","40","rows","2",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],["mdbInput","","id","descr","cols","40","rows","2",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],[1,"text-info"],["mdbInput","","name","ct","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","cphone","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbInput","","name","cemail","type","text","value","",1,"form-control",3,"ngModel","ngModelChange"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",3,"click"],["mdbBtn","","color","default","rounded","true","mdbWavesEffect","","type","button",3,"click"],["type","button","mdbBtn","",1,"btn","btn-link",2,"float","right",3,"click"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._UZ(3,"mdb-icon",2),t._uU(4),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4),t.YNc(7,sr,2,0,"button",5),t._uU(8,"\xa0 "),t.YNc(9,_r,2,0,"button",6),t._uU(10,"\xa0 "),t.qZA()()(),t.TgZ(11,"div",7)(12,"div",8),t._uU(13),t.qZA()(),t.TgZ(14,"mdb-tabset",9,10),t.YNc(16,cr,86,20,"mdb-tab",11),t.YNc(17,ur,4,2,"mdb-tab",12),t.YNc(18,hr,29,10,"mdb-tab",13),t.YNc(19,gr,11,3,"mdb-tab",14),t.YNc(20,fr,130,23,"mdb-tab",15),t.qZA()),2&e&&(t.xp6(4),t.AsE("\xa0",i.vendor_id,"\xa0 ",i.vendor.name," "),t.xp6(3),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(2),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view),t.xp6(4),t.AsE("Last updated by ",i.vendor.updatedby," on ",i.vendor.updated," "),t.xp6(1),t.Q6J("buttonClass","nav md-pills pills-default white mb-2")("justified",!0)("contentClass","card"),t.xp6(2),t.Q6J("ngIf",i.vendor_id>0),t.xp6(1),t.Q6J("ngIf",i.vendor_id>0),t.xp6(1),t.Q6J("ngIf",("Admin"===i.view||"SManager"===i.view||"Manager"===i.view)&&i.vendor_id>0),t.xp6(1),t.Q6J("ngIf",i.vendor_id>0),t.xp6(1),t.Q6J("ngIf","Admin"===i.view||"SManager"===i.view||"Manager"===i.view))},directives:[d.UiO,d.XIm,c.O5,d.mTE,d.b6v,d.CWd,d.AH5,d.wWr,v.N8,d.JNR,_.Q7,_.JJ,_.On,_.Fj,d.HqI,d.lPY,d.x8v,_.EJ,c.sg,_.YN,_.Kr],pipes:[c.Nd],styles:[""]}),a})();var I=T(4327);const yr=["staticTabs"];function Cr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().getWOPDF()}),t._UZ(1,"mdb-icon",56),t.qZA()}}function Tr(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",57),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.property_id),t.xp6(1),t.hij(" ",e.label,"")}}function Zr(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",57),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function vr(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",57),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function xr(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",57),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function Ar(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",57),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function qr(a,r){1&a&&(t.TgZ(0,"div"),t._uU(1,"Thank you. Technician will enter after knocking the door."),t.qZA())}function Mr(a,r){1&a&&(t.TgZ(0,"div",58),t._uU(1,"We will reach out to coordinate a date and time frame that works best. This may delay the help."),t.qZA())}function wr(a,r){1&a&&(t.TgZ(0,"div"),t._uU(1,"Pets must be restrained otherwise your maintenance request will not be completed."),t.qZA())}function Ur(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",86)(1,"div",87)(2,"label"),t._uU(3,"Comments"),t.qZA(),t.TgZ(4,"textarea",88),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).history_comment=n}),t._uU(5,"\t\t\t\t\t\t\t\t\t\tEnter Comments Here\n\t\t\t\t\t\t\t\t\t"),t.qZA()()()}if(2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("ngModel",e.history_comment)}}function Dr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",59),t.NdJ("select",function(n){return t.CHM(e),t.oxw().tabChange(n)}),t.TgZ(1,"div",9)(2,"div",60)(3,"h5"),t._uU(4,"Contractor Information"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",61)(7,"div",15)(8,"app-select-with-search",62),t.NdJ("selectedValue",function(n){return t.CHM(e),t.oxw().woOwnerChange(n)}),t.qZA()()(),t.TgZ(9,"div",61)(10,"div",15)(11,"input",63),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.vendor_name=n}),t.qZA(),t.TgZ(12,"label",64),t._uU(13,"Contact Name"),t.qZA()()(),t.TgZ(14,"div",65)(15,"div",15)(16,"input",66),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.vendor_phone=n}),t.qZA(),t.TgZ(17,"label",67),t._uU(18,"Contact Phone"),t.qZA()()(),t.TgZ(19,"div",61)(20,"div",15)(21,"input",68),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.vendor_email=n}),t.qZA(),t.TgZ(22,"label",69),t._uU(23,"Contact Email"),t.qZA()()(),t.TgZ(24,"div",70)(25,"div",15)(26,"mdb-checkbox",71),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().vendor_notify=n}),t._uU(27,"Notify "),t.qZA()()()(),t.TgZ(28,"div",3)(29,"div",4)(30,"div",15)(31,"input",72),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.vendor_notes=n}),t.qZA(),t.TgZ(32,"label",73),t._uU(33,"Notes"),t.qZA()()(),t.TgZ(34,"div",65)(35,"div",74)(36,"input",75),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.tx_id=n}),t.qZA(),t.TgZ(37,"label",76),t._uU(38,"TX ID"),t.qZA()()(),t.TgZ(39,"div",65)(40,"div",74)(41,"input",77),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.supply_cost=n}),t.qZA(),t.TgZ(42,"label",78),t._uU(43,"Supply"),t.qZA()()(),t.TgZ(44,"div",65)(45,"div",74)(46,"input",79),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.total_cost=n}),t.qZA(),t.TgZ(47,"label",80),t._uU(48,"Total"),t.qZA()()()(),t.TgZ(49,"div",3)(50,"div",81),t._UZ(51,"hr"),t.qZA()(),t.YNc(52,Ur,6,1,"div",82),t.qZA(),t.TgZ(53,"div",83)(54,"button",84),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("MAINTENANCE")}),t._uU(55,"Save"),t.qZA(),t.TgZ(56,"button",85),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearData("MAINTENANCE")}),t._uU(57,"Clear"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(8),t.Q6J("contentList",e.vList)("selectedID",e.vendor_id)("disabled",e.co_readonly),t.xp6(3),t.Q6J("ngModel",e.wo.vendor_name)("disabled",e.co_readonly),t.xp6(1),t.ekj("disabled",e.co_readonly),t.xp6(4),t.Q6J("disabled",e.co_readonly)("ngModel",e.wo.vendor_phone),t.xp6(1),t.ekj("disabled",e.co_readonly),t.xp6(4),t.Q6J("ngModel",e.wo.vendor_email)("disabled",e.co_readonly),t.xp6(1),t.ekj("disabled",e.co_readonly),t.xp6(4),t.Q6J("disabled",e.co_readonly)("ngModel",e.vendor_notify),t.xp6(5),t.Q6J("ngModel",e.wo.vendor_notes)("disabled",e.co_readonly),t.xp6(1),t.ekj("disabled",e.co_readonly),t.xp6(4),t.Q6J("ngModel",e.wo.tx_id)("disabled",e.co_readonly),t.xp6(1),t.ekj("disabled",e.co_readonly),t.xp6(4),t.Q6J("ngModel",e.wo.supply_cost)("disabled",e.co_readonly),t.xp6(1),t.ekj("disabled",e.co_readonly),t.xp6(4),t.Q6J("ngModel",e.wo.total_cost)("disabled",e.co_readonly),t.xp6(1),t.ekj("disabled",e.co_readonly),t.xp6(5),t.Q6J("ngIf",!e.wo_readonly||"Tenant"!==e.view),t.xp6(2),t.Q6J("disabled",e.co_readonly||"Tenant"===e.view),t.xp6(2),t.Q6J("disabled",e.co_readonly||"Tenant"===e.view)}}function Nr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",96),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addDocuments()}),t._UZ(1,"mdb-icon",97),t.qZA()}}function Or(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"a",101),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).delDocument(n.doc_id)}),t._UZ(1,"i"),t.qZA()}if(2&a){const e=t.oxw(3);t.xp6(1),t.Tol(e.imageList.trash)}}function Pr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",98)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",99),t._uU(4),t.qZA(),t.TgZ(5,"td",100)(6,"a",101),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).getDocument(o.index,o.doc_id)}),t._UZ(7,"i"),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td",102),t._uU(15),t.qZA(),t.TgZ(16,"td",58),t.YNc(17,Or,2,3,"a",103),t.qZA()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.doc_id),t.xp6(3),t.Tol(i.imageList[e.doc_format]),t.xp6(2),t.Oqu(e.doc_type),t.xp6(2),t.Oqu(e.doc_name),t.xp6(2),t.Oqu(e.updatedby),t.xp6(2),t.Oqu(e.updated),t.xp6(2),t.Q6J("ngIf","Admin"===i.view||"Manager"===i.view)}}function kr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",89),t.NdJ("select",function(n){return t.CHM(e),t.oxw().tabChange(n)}),t.TgZ(1,"div",9)(2,"div",3),t._UZ(3,"div",90),t.TgZ(4,"div",70),t.YNc(5,Nr,2,0,"button",91),t.qZA()(),t.TgZ(6,"div",3)(7,"div",87)(8,"table",92)(9,"thead")(10,"tr")(11,"th",93),t._uU(12,"#"),t.qZA(),t.TgZ(13,"th",93),t._uU(14,"Doc ID"),t.qZA(),t.TgZ(15,"th",93),t._uU(16,"Action"),t.qZA(),t.TgZ(17,"th",93),t._uU(18,"Type"),t.qZA(),t.TgZ(19,"th",93),t._uU(20,"Name"),t.qZA(),t.TgZ(21,"th",93),t._uU(22,"UpdatedBy"),t.qZA(),t.TgZ(23,"th",93),t._uU(24,"Updated"),t.qZA(),t.TgZ(25,"th",93),t._uU(26,"\xa0"),t.qZA()()(),t.TgZ(27,"tbody",94),t.YNc(28,Pr,18,10,"tr",95),t.qZA()()()()()()}if(2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.wo_id>0),t.xp6(23),t.Q6J("ngForOf",e.woDocuments.data)}}function Sr(a,r){if(1&a&&(t.TgZ(0,"tr",107)(1,"td",108),t._uU(2),t.qZA(),t.TgZ(3,"td",108),t._uU(4),t.qZA(),t.TgZ(5,"td",108),t._uU(6),t.qZA(),t.TgZ(7,"td",108),t._uU(8),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.tdate),t.xp6(2),t.Oqu(e.updatedby),t.xp6(2),t.Oqu(e.comments)}}function Lr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mdb-tab",104),t.NdJ("select",function(n){return t.CHM(e),t.oxw().tabChange(n)}),t.TgZ(1,"div",9)(2,"table",105)(3,"thead")(4,"tr")(5,"th",93),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",93),t._uU(8,"Date"),t.qZA(),t.TgZ(9,"th",93),t._uU(10,"Updated by"),t.qZA(),t.TgZ(11,"th",93),t._uU(12,"Comments"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,Sr,9,4,"tr",106),t.qZA()()()()}if(2&a){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.woHistory)}}function Rr(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",26),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Er(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",26),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Ir(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",26),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Fr(a,r){if(1&a&&(t.TgZ(0,"mdb-select-option",26),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function Qr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addDocuments()}),t._UZ(1,"mdb-icon",20),t.qZA()}}function Hr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",61)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",62),t._uU(4),t.qZA(),t.TgZ(5,"td",63)(6,"a",64),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).getDocument(o.index,o.doc_id)}),t._UZ(7,"i"),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td",65),t._uU(15),t.qZA(),t.TgZ(16,"td",66)(17,"a",64),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw(2).delDocument(o.doc_id)}),t._UZ(18,"i"),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.doc_id),t.xp6(3),t.Tol(i.imageList[e.doc_format]),t.xp6(2),t.Oqu(e.doc_type),t.xp6(2),t.Oqu(e.doc_name),t.xp6(2),t.Oqu(e.updatedby),t.xp6(2),t.Oqu(e.updated),t.xp6(3),t.Tol(i.imageList.trash)}}function Yr(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"mdb-card-title",29)(3,"h4"),t._UZ(4,"mdb-icon",30),t._uU(5),t.qZA()()(),t.TgZ(6,"div",31)(7,"div",5)(8,"div",32)(9,"label"),t._uU(10,"Property"),t.qZA(),t.TgZ(11,"a",33),t._UZ(12,"i",34),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"div",32)(15,"label"),t._uU(16,"Tenant"),t.qZA(),t.TgZ(17,"a",33),t._UZ(18,"i",35),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"div",36)(21,"label"),t._uU(22,"Title"),t.qZA(),t._uU(23),t.qZA()(),t.TgZ(24,"div",5)(25,"div",37)(26,"label"),t._uU(27,"Description"),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"div",38)(30,"div",32)(31,"div",7)(32,"mdb-select-2",39),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.coordinator=n}),t.YNc(33,Er,2,2,"mdb-select-option",9),t.ALo(34,"keyvalue"),t.qZA()()(),t.TgZ(35,"div",32)(36,"div",7)(37,"input",40),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.owner=n}),t.qZA(),t.TgZ(38,"label",41),t._uU(39,"Assigned To"),t.qZA()()(),t.TgZ(40,"div",32)(41,"div",7)(42,"mdb-select-2",42),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.status=n}),t.YNc(43,Ir,2,2,"mdb-select-option",9),t.ALo(44,"keyvalue"),t.qZA()()(),t.TgZ(45,"div",32)(46,"div",7)(47,"mdb-select-2",43),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.priority=n}),t.YNc(48,Fr,2,2,"mdb-select-option",9),t.ALo(49,"keyvalue"),t.qZA()()()(),t.TgZ(50,"div",38)(51,"div",44)(52,"div",7)(53,"label"),t._uU(54,"Notes"),t.qZA(),t.TgZ(55,"textarea",45),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo_notes=n}),t._uU(56,"\t\t\t\t\t\tEnter Update Here\n\t\t\t\t\t"),t.qZA()()(),t.TgZ(57,"div",46)(58,"div",7)(59,"label"),t._uU(60,"Tags"),t.qZA(),t.TgZ(61,"textarea",47),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().wo.tags=n}),t._uU(62,"\t\t\t\t\t\tEnter Tags Here\n\t\t\t\t\t"),t.qZA()()()()(),t.TgZ(63,"div",48)(64,"button",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateData("HISTORY")}),t._uU(65,"Update"),t.qZA(),t._uU(66,"\xa0 "),t.TgZ(67,"button",50),t.NdJ("click",function(){return t.CHM(e),t.oxw().getWOPDF(0)}),t._UZ(68,"i",51),t.qZA(),t._uU(69,"\xa0 "),t.qZA(),t.TgZ(70,"div",4)(71,"div",5)(72,"div",52),t._uU(73,"Documents "),t.qZA(),t.TgZ(74,"div",53),t.YNc(75,Qr,2,0,"button",54),t.qZA()(),t.TgZ(76,"div",5)(77,"table",55)(78,"thead")(79,"tr")(80,"th",56),t._uU(81,"#"),t.qZA(),t.TgZ(82,"th",56),t._uU(83,"Doc ID"),t.qZA(),t.TgZ(84,"th",56),t._uU(85,"Action"),t.qZA(),t.TgZ(86,"th",56),t._uU(87,"Type"),t.qZA(),t.TgZ(88,"th",56),t._uU(89,"Name"),t.qZA(),t.TgZ(90,"th",56),t._uU(91,"UpdatedBy"),t.qZA(),t.TgZ(92,"th",57),t._uU(93,"Updated"),t.qZA(),t.TgZ(94,"th",56),t._uU(95,"\xa0"),t.qZA()()(),t.TgZ(96,"tbody",58),t.YNc(97,Hr,19,12,"tr",59),t.qZA()()()()()()}if(2&a){const e=t.oxw();t.xp6(5),t.hij("\xa0",e.wo_id,"\xa0Workorder "),t.xp6(6),t.MGl("href","#/property?property_id=",e.wo.property_id,"",t.LSH),t.xp6(2),t.hij("\xa0",e.property_label," "),t.xp6(4),t.MGl("href","#/tenant?tenant_id=",e.wo.tenant_id,"",t.LSH),t.xp6(2),t.hij("\xa0",e.wo.contact_name," "),t.xp6(4),t.hij(" ",e.wo.title," "),t.xp6(5),t.hij(" ",e.wo.description," "),t.xp6(4),t.Q6J("ngModel",e.wo.coordinator)("disabled",e.wo_readonly),t.xp6(1),t.Q6J("ngForOf",t.lcZ(34,23,e.userList)),t.xp6(4),t.Q6J("ngModel",e.wo.owner)("disabled",e.wo_readonly),t.xp6(1),t.ekj("disabled",e.wo_readonly),t.xp6(4),t.Q6J("ngModel",e.wo.status),t.xp6(1),t.Q6J("ngForOf",t.lcZ(44,25,e.wosList)),t.xp6(4),t.Q6J("ngModel",e.wo.priority),t.xp6(1),t.Q6J("ngForOf",t.lcZ(49,27,e.priorityList)),t.xp6(7),t.Q6J("ngModel",e.wo_notes),t.xp6(6),t.s9C("disabled",e.wo_readonly),t.Q6J("ngModel",e.wo.tags),t.xp6(14),t.Q6J("ngIf",e.wo_id>0),t.xp6(22),t.Q6J("ngForOf",e.woDocuments)}}const jr=[{path:"",redirectTo:"dashboard"},{path:"admins",component:Q},{path:"analysis",component:X},{path:"applications",component:dt},{path:"cashflow",component:Bt},{path:"category",component:S},{path:"company",component:ae},{path:"dashboard",component:kt},{path:"contact",component:It},{path:"dm",component:Ui},{path:"documents",component:Li},{path:"investor",component:Xi},{path:"payment",component:tn},{path:"pnl",component:sn},{path:"property",component:Un},{path:"propertye",component:Kn},{path:"report",component:Co},{path:"search",component:vo},{path:"tenant",component:Go},{path:"tenante",component:ma},{path:"tenancy",component:Aa},{path:"tenancye",component:Ja},{path:"tranche",component:za},{path:"tx",component:or},{path:"user",component:lr},{path:"vendor",component:br},{path:"wo",component:(()=>{class a{constructor(e,i,n,o,l,s,u){this.REQ=e,this.rd=i,this.activeRoute=n,this.router=o,this.AS=l,this.toastr=s,this.modalService=u,this.user=this.AS.currentUserValue,this.myDatePickerOptions={dateFormat:"yyyy-mm-dd"},this.searchText=new U.x,this.urlPrefix="",this.history_title="",this.history_date=new Date,this.history_comment="",this.queryParams={},this.showModal=!1,this.file_info="",this.add_docs=0,this.owner_id=-1,this.owner_type="WO",this.modalTitle="",this.view="",this.reportedby_dirty=!1,this.contact_name_dirty=!1,this.contact_info_dirty=!1,this.vendor_notify=!0,this.wo_id=-1,this.tenant_id=-1,this.tenancy_id=-1,this.property_id=-1,this.user_id=-1,this.wo={},this.property=[],this.tenancy=[],this.pList=[],this.property_info="",this.woDocuments=[],this.woHistory=[],this.tx_date="",this.dtList={},this.wosList={},this.userList={},this.priorityList={},this.rmList={},this.vList={},this.vendor={},this.vendor_id=-1,this.rmMethod="",this.woStatus="",this.coordinator="",this.priority="",this.co_readonly=!0,this.details_readonly=!0,this.wo_readonly=!1,this.imageList=this.rd.GetImages()}ngOnInit(){this.wo.reportedby=this.user.firstName+" "+this.user.lastName,this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.getProperties(),this.dtList=this.rd.GetDates(),this.wosList=this.rd.GetWOStatus(),this.userList=this.rd.GetMaintTeam(),this.priorityList=this.rd.GetWOPriorities(),this.rmList=this.rd.GetWOReportingMethod(),this.activeRoute.queryParams.subscribe(e=>{if(this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("tenant_id")&&(this.tenant_id=parseInt(this.queryParams.tenant_id,10)),this.queryParams.hasOwnProperty("property_id")&&(this.property_id=this.queryParams.property_id),this.queryParams.hasOwnProperty("wo_id")&&(this.wo_id=parseInt(this.queryParams.wo_id,10)),this.GetVendors(),this.wo_id>0)this.getWO();else{let i=this.tenant_id,n=this.property_id;this.clearData("PRIMARY"),this.tenant_id=i,this.property_id=n}this.view=this.user.type,this.setEditAccess(this.view),console.log("WO:",this.view)}),this.tx_date=this.dtList.tdate,this.filteredOptions=this.searchText.pipe((0,J.O)(""),(0,R.U)(e=>this.filter(e)))}setEditAccess(e){this.co_readonly=!0,this.wo_readonly=!1,this.details_readonly=!0,"Admin"===e||"SManager"===e?(this.co_readonly=!1,this.wo_readonly=!1,this.details_readonly=!1):this.wo_id<0?(this.wo_readonly=!1,this.co_readonly=!1):this.wo.status<1?(this.wo_readonly=!0,this.co_readonly=!0):"Manager"===e||"Super"===e?(this.co_readonly=!1,this.wo_readonly=!1):"Tenant"===e?(this.co_readonly=!0,this.wo_readonly=!1):"Vendor"===e&&(this.co_readonly=!1,this.wo_readonly=!0,this.details_readonly=!1),console.log("setEditAccess:",e,this.co_readonly,this.wo_readonly)}filter(e){const i=e.toLowerCase();return this.pList.filter(n=>n.label.toLowerCase().includes(i))}getWO(){const e={params:{wo_id:this.wo_id}};console.log("getWO: entered:",this.pList),this.REQ.get("gwo",{query:JSON.stringify(e)}).subscribe(i=>{this.wo=i,console.log("getWO:",this.wo),this.wo_id=this.wo.wo_id,this.vendor_id=this.wo.vendor_id,this.property_id=this.wo.property_id,this.tenant_id=this.wo.tenant_id,this.wo.documents&&(this.woDocuments=JSON.parse(this.wo.documents)),this.wo.history&&(this.woHistory=JSON.parse(this.wo.history).data),this.add_docs=1,this.owner_id=this.wo_id,this.owner_type="WO",this.rmMethod=""+this.wo.reporting_method,this.woStatus=""+this.wo.status,this.coordinator=""+this.wo.coordinator,this.priority=""+this.wo.priority,this.modalTitle="Transaction Document Upload",this.vendor_notify="false"!==this.wo.vendor_notify.toLowerCase(),console.log("WO woHistory: ",this.wo.vendor_notify),this.setEditAccess(this.view)},i=>{console.log(i)})}saveASData(e){this.wo_id=-1,this.wo.wo_id=-1,this.woDocuments=[],this.updateData(e)}updateData(e){if(!this.validateData())return!1;if(console.log("updateData : entering:",this.property_id,this.wo.vendor_notify),this.wo.tab=e,"PRIMARY"===e)this.wo.reporting_method=parseInt(this.rmMethod),this.wo.status=parseInt(this.woStatus),this.wo.coordinator=parseInt(this.coordinator),this.wo.priority=parseInt(this.priority),this.wo.property_id=this.property_id,this.wo.tenant_id=this.tenant_id,this.wo.tenancy_id=this.tenancy_id,""==this.wo.owner&&(this.wo.owner=this.userList[this.wo.coordinator]);else{if("MAINTENANCE"!==e)return console.log("updateData:Nothing to act:",e),!1;this.wo.vendor_id=this.vendor_id,this.wo.vendor_notify=this.vendor_notify?"true":"false"}const i=this.wo;i.updatedy=this.user.login,console.log("updateData:",i),this.REQ.post("uwo",i).subscribe(n=>{console.log("updateWO:",n),this.wo_id=n.wo_id,this.wo.wo_id=this.wo_id,this.toastr.success("Transaction updated for WO: "+this.wo_id),console.log("Transaction updated for WO: "+this.wo_id),this.setEditAccess(this.view)},n=>{console.log(n),this.toastr.error("Transaction failed for : "+this.wo_id)}),this.wo_id>0&&"MAINTENANCE"===e&&this.history_comment.length>4&&this.updateHistory(this.wo_id)}validateData(){return console.log("validateData:"+this.property_id+" tenant:"+this.tenant_id+"amount:"+this.wo_id+"date:"+this.tx_date),this.property_id<1?(this.toastr.error("Please select a Home, where work is required"),!1):this.wo.title.length<8?(this.toastr.error("Please provide proper issue title"),!1):this.wo.description<12?(this.toastr.error("Please provide proper description about the issue"),!1):this.wo.contact_name<5?(this.toastr.error("Please provide contact name"),!1):this.wo.contact_info<10?(this.toastr.error("Please provide contact number"),!1):""==this.wo.pet?(this.toastr.error("Please provide pet information"),!1):""!=this.wo.entry||(this.toastr.error("Please provide entry option"),!1)}clearData(e){this.wo_id=-1,this.tenant_id=-1,this.property_id=-1,this.tenancy_id=-1,this.woStatus="1",this.wo.status=1,this.wo.wo_id=-1,this.priority="2",this.wo.priority=2,this.coordinator="1",this.wo.coordinator=1,this.wo.createdby=1,this.wo.owner=this.userList[1],this.wo.title="",this.wo.description="",this.wo.tags="No Tags",this.wo.reportedby=this.user.firstName+" "+this.user.lastName,this.wo.contact_info="",this.wo.contact_name="",this.wo.contact_email="",this.wo.entry="",this.wo.availability="Any time",this.wo.pet="",this.rmMethod="1",this.wo.reporting_method="1",this.wo.documents=[],this.woDocuments=[],this.woHistory=[],this.wo.vendor_notify="true",this.wo.vendor_email="support@himalayaproperties.org",this.wo.vendor_name="",this.wo.vendor_phone="",this.wo.vendor_notes="",this.wo.history=[],this.vendor_notify=!0,this.setEditAccess(this.view)}getProperties(){console.log("getProperties: entering"),this.REQ.get("p","").subscribe(i=>{this.pList=i.data,this.searchText.next(""),console.log("getProperties:",this.pList)},i=>{console.log(i)})}GetVendors(){this.REQ.get("vendor",{query:JSON.stringify({params:{type:"ACTIVE"}})}).subscribe(i=>{this.vList=i.data},i=>{console.log(i)})}getTenancyInfo(e){const i={params:{property_id:e}};console.log("getTenancyInfo:",e),this.REQ.get("tenancy",{query:JSON.stringify(i)}).subscribe(n=>{this.tenancy=n,console.log("getTenancyInfo:",this.tenancy),this.tenant_id=this.tenancy.tenant_id,this.tenancy_id=this.tenancy.tenancy_id,this.reportedby_dirty||(this.wo.reportedby=this.tenancy.first_name+" "+this.tenancy.last_name,this.wo.contact_email=this.tenancy.email),this.contact_name_dirty||(this.wo.contact_name=this.tenancy.first_name+" "+this.tenancy.last_name),this.contact_info_dirty||(this.wo.contact_info=this.tenancy.phone)},n=>{console.log(n)})}refreshP(e,i){console.log("refreshP:",e,i),this.getTenancyInfo(i);for(let n=0;n<this.pList.length;n++)this.pList[n].property_id==i&&(this.property=this.pList[n])}updateHistory(e){const i={id_type:"wo_id",key_type:"WO",id_value:this.wo_id,title:"WO Update",comment:this.history_comment,tdate:this.history_date};console.log("updateHistory:",i),this.REQ.post("uchistory",i).subscribe(n=>{console.log(n),this.toastr.success("History updated "),console.log("History updated "),this.refreshHistory(this.tenant_id)},n=>{console.log(n),this.toastr.error("History update failed for : "+this.tenant_id)})}refreshHistory(e){}tabChange(e){console.log("tabChange:",e)}woOwnerChange(e){console.log("woOwnerChange:entering: ",e),this.vendor=e,this.vendor_id=e.vendor_id,this.wo.vendor_email=this.vendor.email,this.wo.vendor_name=this.vendor.contact,this.wo.vendor_phone=this.vendor.phone,console.log("getVendorInfo:",this.vendor,this.vendor.email)}addDocuments(){this.file_info=this.wo_id+"_"+this.wo.title,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Supporting Document",content:{owner_type:"WO",owner_id:this.wo_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i)})}getDocument(e,i){this.REQ.getDocument(this.woDocuments.data[e])}delDocument(e){let i={doc_id:e,key_type:"WO"};console.log(i),this.REQ.post("fd",i).subscribe(n=>{console.log(n),this.toastr.success("Document removed, Please refresh the page")},n=>{console.log(n),this.toastr.error("Action failed, please contact support","Major Error",{timeOut:3e3})})}onFileUploadClose(e){this.showModal=!1,console.log("onFileUploadClose"),console.log(e)}getWOPDF(){const e={wo_id:this.wo_id};let i="wo_"+this.wo_id+".pdf";console.log("getWOPDF:"+this.wo_id),this.REQ.downloadFile("pdfwo",e).subscribe(n=>{(0,I.saveAs)(n.body,i),this.toastr.success(i+" file created","Workorder PDF")},n=>{console.log(n),this.toastr.error("PDF creation failed, please contact support","PDF Error",{timeOut:3e3})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-wo"]],viewQuery:function(e,i){if(1&e&&t.Gf(yr,7),2&e){let n;t.iGM(n=t.CRH())&&(i.staticTabs=n.first)}},decls:130,vars:84,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col-sm-6"],["fas","","icon","hands-helping text-white"],[1,"col-sm-6","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0"],["mdbBtn","","rounded","true","type","button","color","white","size","sm",3,"click",4,"ngIf"],[1,"card-body"],[1,"properties-tabs"],[3,"buttonClass","justified","contentClass"],["staticTabs",""],["heading","Details",3,"select"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"md-form","mb-2"],["placeholder","Choose One","label","Home","optionHeight","32",3,"ngModel","dropdownClass","disabled","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Choose One","label","Reporting Method","optionHeight","35",3,"disabled","ngModel","ngModelChange"],["mdbInput","","type","text","name","text","id","formRB",1,"form-control",3,"disabled","ngModel","ngModelChange","change"],["for","formRB"],["placeholder","Choose One","label","Status","optionHeight","32",3,"disabled","ngModel","ngModelChange"],["placeholder","Choose One","label","Coordinator","optionHeight","32",3,"disabled","ngModel","ngModelChange"],["placeholder","Choose One","label","Priority","optionHeight","32",3,"ngModel","disabled","ngModelChange"],[1,"col-sm-12","col-md-8"],["mdbInput","","type","text","value","Short Information","name","text","id","formSI",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formSI"],["type","text","id","formDD","mdbInput","",1,"md-textarea","form-control",3,"ngModel","disabled","ngModelChange"],["for","formDD"],[1,"col-sm-12","col-md-4"],["type","text","id","formTAG","mdbInput","",1,"md-textarea","md-textarea-auto","form-control",3,"ngModel","disabled","ngModelChange"],["for","formTAG"],[1,"col-sm-12","col-md-3"],[1,""],[2,"color","red"],["mdbInput","","type","text","value","Name","name","text","id","formCP",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formCP",1,""],[1,"col-sm-12","col-md-6"],["mdbInput","","type","text","value","Name","name","text","id","formCI",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formCI",1,""],["placeholder","Choose One","label","Permission to Enter",3,"ngModel","disabled","ngModelChange"],["selected","","value","YES"],["value","NO"],[4,"ngIf"],["class","text-danger",4,"ngIf"],["placeholder","Choose One","label","Pet on the property",3,"ngModel","disabled","ngModelChange"],["value","YES"],[1,"card-footer"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",1,"btn","btn-fill","btn-info",3,"disabled","click"],["mdbBtn","","color","default","rounded","true","mdbWavesEffect","","type","button",1,"btn","btn-fill","btn-info",3,"disabled","click"],["mdbBtn","","type","button",1,"btn","btn-link",2,"float","right",3,"click"],["heading","Maintenance",3,"select",4,"ngIf"],["heading","Documents",3,"select",4,"ngIf"],["heading","History",3,"select",4,"ngIf"],["mdbBtn","","rounded","true","type","button","color","white","size","sm",3,"click"],["fas","","icon","file-pdf text-danger","size","2x"],[3,"value"],[1,"text-danger"],["heading","Maintenance",3,"select"],[1,"row","col-12"],[1,"col-sm-3"],["label","Assigned To","keyOfID","vendor_id","firstLine","!!name>> !!contact>>","secondLine","!!city>> !!state>>","searchInKeys","name,contact",3,"contentList","selectedID","disabled","selectedValue"],["mdbInput","","type","text","id","formVCName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formVCName"],[1,"col-sm-2"],["mdbInput","","type","text","id","formVCPH",1,"form-control",3,"disabled","ngModel","ngModelChange"],["for","formVCPH"],["mdbInput","","type","text","id","formVCEMAIL",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formVCEMAIL"],[1,"col-sm-1"],[3,"disabled","ngModel","ngModelChange"],["mdbInput","","type","text","id","formVN",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formVN"],[1,"md-form"],["mdbInput","","type","number","id","formTXID",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formTXID"],["mdbInput","","type","number","id","formVMC",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formVMC"],["mdbInput","","type","number","id","formVMCT",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","formVMCT"],[1,"col-12"],["class","row mb-4",4,"ngIf"],[1,"card-footer","text-right","mt-4"],["mdbBtn","","color","info","rounded","true","type","button",1,"btn","btn-fill","btn-info",3,"disabled","click"],["mdbBtn","","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"row","mb-4"],[1,"col-sm-12"],["id","notes","placeholder","Enter Update here","cols","80","name","history_comments","rows","2",1,"form-control",2,"background-color","#f458362e",3,"ngModel","ngModelChange"],["heading","Documents",3,"select"],[1,"col-sm-10","card-title"],["type","button","style","float:right","class"," btn-simple btn-sm",3,"click",4,"ngIf"],["mdbTable","","mdbTableScroll","","scrollX","true","scrollY","true","id","tableDocuments","name","tableDocuments","width","100%"],["scope","col"],["id","tbA"],["id","tARow",4,"ngFor","ngForOf"],["type","button",1,"btn-simple","btn-sm",2,"float","right",3,"click"],["fas","","icon","plus-square"],["id","tARow"],["nowrap",""],[1,"text-info"],[3,"click"],[1,"text-center"],[3,"click",4,"ngIf"],["heading","History",3,"select"],["mdbTable","","mdbTableScroll","","scrollX","true","scrollY","true","id","tHist"],["mdbTableCol","",4,"ngFor","ngForOf"],["mdbTableCol",""],[1,"text-left"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"div",3)(5,"div",4)(6,"h3"),t._UZ(7,"mdb-icon",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div",7),t.YNc(11,Cr,2,0,"button",8),t.qZA()()()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"mdb-tabset",11,12)(16,"mdb-tab",13),t.NdJ("select",function(o){return i.tabChange(o)}),t.TgZ(17,"div",9)(18,"div",3)(19,"div",14)(20,"div",15)(21,"mdb-select-2",16),t.NdJ("ngModelChange",function(o){return i.property_id=o})("ngModelChange",function(o){return i.refreshP(o,i.property_id)}),t.TgZ(22,"mdb-select-filter",17),t.NdJ("ngModelChange",function(o){return i.searchText.next(o)}),t.ALo(23,"async"),t.qZA(),t.YNc(24,Tr,2,2,"mdb-select-option",18),t.ALo(25,"async"),t.qZA()()(),t.TgZ(26,"div",14)(27,"div",15)(28,"mdb-select-2",19),t.NdJ("ngModelChange",function(o){return i.rmMethod=o}),t.YNc(29,Zr,2,2,"mdb-select-option",18),t.ALo(30,"keyvalue"),t.qZA()()(),t.TgZ(31,"div",14)(32,"div",15)(33,"input",20),t.NdJ("ngModelChange",function(o){return i.wo.reportedby=o})("change",function(){return i.reportedby_dirty=!0}),t.qZA(),t.TgZ(34,"label",21),t._uU(35,"Reported By"),t.qZA()()()(),t.TgZ(36,"div",3)(37,"div",14)(38,"div",15)(39,"mdb-select-2",22),t.NdJ("ngModelChange",function(o){return i.woStatus=o}),t.YNc(40,vr,2,2,"mdb-select-option",18),t.ALo(41,"keyvalue"),t.qZA()()(),t.TgZ(42,"div",14)(43,"div",15)(44,"mdb-select-2",23),t.NdJ("ngModelChange",function(o){return i.coordinator=o}),t.YNc(45,xr,2,2,"mdb-select-option",18),t.ALo(46,"keyvalue"),t.qZA()()(),t.TgZ(47,"div",14)(48,"div",15)(49,"mdb-select-2",24),t.NdJ("ngModelChange",function(o){return i.priority=o}),t.YNc(50,Ar,2,2,"mdb-select-option",18),t.ALo(51,"keyvalue"),t.qZA()()()(),t.TgZ(52,"div",3)(53,"div",25)(54,"div",15)(55,"input",26),t.NdJ("ngModelChange",function(o){return i.wo.title=o}),t.qZA(),t.TgZ(56,"label",27),t._uU(57,"Issue"),t.qZA()()()(),t.TgZ(58,"div",3)(59,"div",25)(60,"div",15)(61,"textarea",28),t.NdJ("ngModelChange",function(o){return i.wo.description=o}),t.qZA(),t.TgZ(62,"label",29),t._uU(63,"Detailed Description"),t.qZA()()(),t.TgZ(64,"div",30)(65,"div",15)(66,"textarea",31),t.NdJ("ngModelChange",function(o){return i.wo.tags=o}),t.qZA(),t.TgZ(67,"label",32),t._uU(68,"Tags"),t.qZA()()()(),t.TgZ(69,"div",3)(70,"div",33)(71,"div",15)(72,"label",34),t._uU(73,"Contact Person "),t.TgZ(74,"span",35),t._uU(75,"*"),t.qZA()()()(),t.TgZ(76,"div",33)(77,"div",15)(78,"input",36),t.NdJ("ngModelChange",function(o){return i.wo.contact_name=o}),t.qZA(),t.TgZ(79,"label",37),t._uU(80,"Name of the Person"),t.qZA()()(),t.TgZ(81,"div",38)(82,"div",15)(83,"input",39),t.NdJ("ngModelChange",function(o){return i.wo.contact_info=o}),t.qZA(),t.TgZ(84,"label",40),t._uU(85,"Contact Info email / phone"),t.qZA()()()(),t.TgZ(86,"div",3)(87,"div",33)(88,"div",15)(89,"label",34),t._uU(90,"Permission to enter the property "),t.TgZ(91,"span",35),t._uU(92,"*"),t.qZA()()()(),t.TgZ(93,"div",33)(94,"div",15)(95,"mdb-select-2",41),t.NdJ("ngModelChange",function(o){return i.wo.entry=o}),t.TgZ(96,"mdb-select-option",42),t._uU(97,"Yes"),t.qZA(),t.TgZ(98,"mdb-select-option",43),t._uU(99,"No"),t.qZA()()()(),t.TgZ(100,"div",38)(101,"div"),t.YNc(102,qr,2,0,"div",44),t.YNc(103,Mr,2,0,"div",45),t.qZA()()(),t.TgZ(104,"div",3)(105,"div",33)(106,"div",15)(107,"label",34),t._uU(108,"Pet(s) on the property "),t.TgZ(109,"span",35),t._uU(110,"*"),t.qZA()()()(),t.TgZ(111,"div",33)(112,"div",15)(113,"mdb-select-2",46),t.NdJ("ngModelChange",function(o){return i.wo.pet=o}),t.TgZ(114,"mdb-select-option",47),t._uU(115,"Yes"),t.qZA(),t.TgZ(116,"mdb-select-option",43),t._uU(117,"No"),t.qZA()()()(),t.TgZ(118,"div",38),t.YNc(119,wr,2,0,"div",44),t.qZA()()(),t.TgZ(120,"div",48)(121,"button",49),t.NdJ("click",function(){return i.updateData("PRIMARY")}),t._uU(122,"Save"),t.qZA(),t.TgZ(123,"button",50),t.NdJ("click",function(){return i.updateData("PRIMARY")}),t._uU(124,"Update"),t.qZA(),t.TgZ(125,"button",51),t.NdJ("click",function(){return i.clearData("PRIMARY")}),t._uU(126,"Clear"),t.qZA()()(),t.YNc(127,Dr,58,36,"mdb-tab",52),t.YNc(128,kr,29,2,"mdb-tab",53),t.YNc(129,Lr,15,1,"mdb-tab",54),t.qZA()()()()()),2&e&&(t.xp6(8),t.hij("\xa0Work Order\xa0",i.wo_id," "),t.xp6(3),t.Q6J("ngIf",i.wo_id>0),t.xp6(3),t.Q6J("buttonClass","nav md-pills border-bottom")("justified",!0)("contentClass","card"),t.xp6(7),t.ekj("bg-bad-data",i.property_id<0),t.Q6J("ngModel",i.property_id)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary")("disabled",i.wo_readonly),t.xp6(1),t.Q6J("ngModel",t.lcZ(23,72,i.searchText)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(25,74,i.filteredOptions)),t.xp6(4),t.Q6J("disabled",i.wo_readonly)("ngModel",i.rmMethod),t.xp6(1),t.Q6J("ngForOf",t.lcZ(30,76,i.rmList)),t.xp6(4),t.Q6J("disabled",i.wo_readonly)("ngModel",i.wo.reportedby),t.xp6(1),t.ekj("disabled",i.wo_readonly),t.xp6(5),t.Q6J("disabled",i.wo_readonly||"Tenant"===i.view)("ngModel",i.woStatus),t.xp6(1),t.Q6J("ngForOf",t.lcZ(41,78,i.wosList)),t.xp6(4),t.Q6J("disabled",i.wo_readonly||"Tenant"===i.view)("ngModel",i.coordinator),t.xp6(1),t.Q6J("ngForOf",t.lcZ(46,80,i.userList)),t.xp6(4),t.Q6J("ngModel",i.priority)("disabled",i.wo_readonly||"Tenant"===i.view),t.xp6(1),t.Q6J("ngForOf",t.lcZ(51,82,i.priorityList)),t.xp6(5),t.ekj("bg-bad-data",i.wo.title.length<8),t.Q6J("ngModel",i.wo.title)("disabled",i.wo_readonly),t.xp6(1),t.ekj("disabled",i.wo_readonly),t.xp6(5),t.ekj("bg-bad-data",i.wo.description.length<15),t.Q6J("ngModel",i.wo.description)("disabled",i.wo_readonly),t.xp6(1),t.ekj("disabled",i.wo_readonly),t.xp6(4),t.Q6J("ngModel",i.wo.tags)("disabled",i.wo_readonly||"Tenant"===i.view),t.xp6(1),t.ekj("disabled",i.wo_readonly||"Tenant"===i.view),t.xp6(11),t.ekj("bg-bad-data",i.wo.contact_name.length<3),t.Q6J("ngModel",i.wo.contact_name)("disabled",i.wo_readonly),t.xp6(1),t.ekj("disabled",i.wo_readonly),t.xp6(4),t.ekj("bg-bad-data",i.wo.contact_info.length<3),t.Q6J("ngModel",i.wo.contact_info)("disabled",i.wo_readonly),t.xp6(1),t.ekj("disabled",i.wo_readonly),t.xp6(11),t.ekj("bg-bad-data",""===i.wo.entry),t.Q6J("ngModel",i.wo.entry)("disabled",i.wo_readonly),t.xp6(7),t.Q6J("ngIf","YES"===i.wo.entry),t.xp6(1),t.Q6J("ngIf","NO"===i.wo.entry),t.xp6(10),t.ekj("bg-bad-data",""===i.wo.pet),t.Q6J("ngModel",i.wo.pet)("disabled",i.wo_readonly),t.xp6(6),t.Q6J("ngIf","YES"===i.wo.pet),t.xp6(2),t.Q6J("disabled",i.wo_readonly),t.xp6(2),t.Q6J("disabled",i.wo_readonly),t.xp6(4),t.Q6J("ngIf",i.wo_id>0),t.xp6(1),t.Q6J("ngIf",i.wo_id>0),t.xp6(1),t.Q6J("ngIf",i.wo_id>0))},directives:[d.gRC,d.UiO,d.XIm,c.O5,d.mTE,d.AH5,d.wWr,d.lPY,_.JJ,_.On,d.syH,c.sg,d.x8v,_.Fj,d.HqI,d.b6v,D,d.bK4,_.wV,d.RNU,d.mMv],pipes:[c.Ov,c.Nd],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:0}}"]}),a})()},{path:"wom",component:(()=>{class a{constructor(e,i,n,o,l,s,u,p){this.REQ=e,this.utility=i,this.rd=n,this.activeRoute=o,this.router=l,this.AS=s,this.toastr=u,this.modalService=p,this.user=this.AS.currentUserValue,this.company_id="AHUSA",this.myDatePickerOptions={dateFormat:"yyyy-mm-dd",minYear:2008,maxYear:(new Date).getFullYear()},this.co_readonly=!0,this.wo_readonly=!1,this.view="Tenant",this.queryParams={},this.urlPrefix="",this.file_info="",this.add_docs=0,this.tenant_id=-1,this.owner_id=-1,this.owner_type="WO",this.modalTitle="",this.gridULColumns=[],this.gridULData=[],this.wo_id=-1,this.wo_notes="",this.wo_status=["1","2","3","4"],this.property_id=-1,this.property_label="",this.wo={},this.wo_attr={},this.woHistory=[],this.woList=[],this.woDocuments=[],this.imageList=this.rd.GetImages(),this.companyList=this.rd.GetCompanies(),this.wosList=this.rd.GetWOStatus(),this.userList=this.rd.GetUsers(0),this.priorityList=this.rd.GetWOPriorities(),this.rmList=this.rd.GetWOReportingMethod(),this.dtList=this.rd.GetDates(),this.start_date=this.dtList.tdate_6M1,this.end_date=this.dtList.tdate_MED,this.tx_date="",this.gridOptions={enableRangeSelection:!0,editable:!1,defaultColDef:{resizable:!0,sortable:!0,filter:!0}},this.gridWOData=[],this.gridWOOptions=this.gridOptions,this.gridWOColumns=[{headerName:"ID",width:70,field:"wo_id",filter:"agNumberColumnFilter"},{headerName:"Created",width:120,field:"tdate",type:"dateColumn",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer},{headerName:"Label",field:"label"},{headerName:"Tenant",field:"contact_name"},{headerName:"Title",field:"title"},{headerName:"Priority",width:130,field:"priority_label",cellStyle:this.woPriorityStyle},{headerName:"Priority ID",field:"priority",hide:!0},{headerName:"Status",width:130,field:"status_label",cellStyle:this.woStatusStyle},{headerName:"Status ID",field:"status",hide:!0},{headerName:"Assignee",field:"owner"},{headerName:"Updated",width:120,field:"updated",filter:"agDateColumnFilter",cellRenderer:this.utility.agDateRenderer}]}ngOnInit(){this.urlPrefix=this.router.url.slice(0,this.router.url.lastIndexOf("/")+1),this.view=this.user.type,this.initData(),this.activeRoute.queryParams.subscribe(e=>{this.activeRoute.queryParamMap.forEach(i=>{i.keys.forEach(n=>this.queryParams[n]=i.get(n))}),this.queryParams.hasOwnProperty("tenant_id")&&(this.tenant_id=this.queryParams.tenant_id,console.log("Tenant ID:"+this.tenant_id)),"Tenant"===this.user.type&&this.user.id_value>0&&(this.tenant_id=this.user.id_value),this.refreshAnalytics("",this.tenant_id>0?this.tenant_id:this.user.id_value)})}initData(){this.setEditAccess(this.view)}setEditAccess(e){this.co_readonly=!0,this.wo_readonly=!1,"Admin"===e||"Manager"===e?(this.co_readonly=!1,this.wo_readonly=!1):"Tenant"===e&&this.wo_id>0&&(this.co_readonly=!0,this.wo_readonly=!0)}refreshAnalytics(e,i){console.log("refreshAnalytics:",e,this.wo_status),this.getWOS(i)}refreshWO(e){console.log("refreshWOSection"),this.wo=e,this.property_label=this.wo.label,this.wo_id=this.wo.wo_id,this.woHistory=[],this.woDocuments=[],this.getWO(this.wo_id)}getWO(e){const i={params:{wo_id:e}};console.log("getWO: entered"),this.wo_attr={},this.wo_attr.notify="true",this.wo_attr.contact_email="support@himalayaproperties.org",this.wo_attr.contact_name="",this.wo_attr.contact_phone="",this.woHistory=[],this.woDocuments=[],this.REQ.get("gwo",{query:JSON.stringify(i)}).subscribe(n=>{if(this.wo=n,console.log(this.wo),this.wo_id=this.wo.wo_id,this.property_id=this.wo.property_id,this.wo.status=""+this.wo.status,this.wo.priority=""+this.wo.priority,this.wo.coordinator=""+this.wo.coordinator,this.wo.documents&&(this.woDocuments=JSON.parse(this.wo.documents).data),this.wo.history&&(this.woHistory=JSON.parse(this.wo.history).data),this.wo.attribute){let o=JSON.parse(this.wo.attribute).data;for(let l in o)this.wo_attr[o[l].name]=o[l].value}this.add_docs=1,this.owner_id=this.wo_id,this.owner_type="WO",this.modalTitle="Transaction Document Upload",console.log(this.wo,this.wo_attr),this.setEditAccess(this.view)},n=>{console.log(n)})}getWOH(e){this.REQ.get("gwoh",{query:JSON.stringify({params:{wo_id:e}})}).subscribe(n=>{this.woHistory=n.data,console.log(this.woHistory)},n=>{console.log(n),this.toastr.error("Work order history failed : "+n)})}getWOPDF(e){const i={wo_id:this.wo_id};let n="wo_"+this.wo_id+".pdf";console.log("getWOPDF:"+this.wo_id),this.REQ.downloadFile("pdfwo",i).subscribe(o=>{(0,I.saveAs)(o.body,n),this.toastr.success(n+" file created","Workorder PDF")},o=>{console.log(o),this.toastr.error("PDF creation failed, please contact support","PDF Error",{timeOut:3e3})})}getWOS(e){const i={params:{start_date:this.utility.date2ISO(this.start_date),end_date:this.utility.date2ISO(this.end_date)}};"Tenant"==this.user.type?(i.params.owner=e,i.params.tenant_id=this.user.id_value):"Vendor"==this.user.type&&(i.params.owner=e,i.params.vendor_id=this.user.id_value),i.params.status="";for(let n=0;n<this.wo_status.length;n++)0==n?i.params.status=this.wo_status[n]:i.params.status+=","+this.wo_status[n];this.gridWOData=[],console.log("getWOS: Entered:",i," More info:",this.wo_status),this.REQ.get("gwos",{query:JSON.stringify(i)}).subscribe(n=>{if(console.log("getWOS:",n),void 0===n.data)console.log("getWOS: NO data returned");else{this.woList=[];for(let o=0;o<n.data.length;o++)n.data[o].priority_label=this.priorityList[n.data[o].priority],n.data[o].status_label=this.wosList[n.data[o].status],n.data[o].cellClass="card-title",this.woList.push(n.data[o]);this.gridWOData=this.woList}},n=>{console.log(n),this.toastr.error("Work order report failed : "+n)})}updateData(e){this.validateData(),console.log("updateData : entering :",e),this.wo.property_id=this.property_id,this.wo.notes=this.wo_notes,this.wo.attribute=this.wo_attr,""==this.wo.owner&&(this.wo.owner=this.userList[this.wo.coordinator]);const i=this.wo;console.log("updateData:",i),this.REQ.post("uwo",i).subscribe(n=>{console.log("updateData:",n),this.wo_id=n.wo_id,this.wo.wo_id=this.wo_id,this.toastr.success("Transaction updated for WO: "+this.wo_id),console.log("Transaction updated for WO: "+this.wo_id)},n=>{console.log(n),this.toastr.error("Transaction failed for : "+this.wo_id)})}validateData(){console.log("validateData:"+this.property_id+" work order:"+this.wo_id)}newWO(e){this.router.navigate([this.urlPrefix+"wo"],{})}newTX(e){this.router.navigate([this.urlPrefix+"dm"],{queryParams:{wo_id:this.wo_id,wo_title:this.wo.title,wo_desc:this.wo.description,reference:"WO:"+this.wo_id,payee:this.wo.owner,property_id:this.property_id}})}onGridReady(e){console.log("grid ready pamkkk",e),this.grid1Api=e.api,this.grid1ColumnApi=e.columnApi;var i=e.api.getColumnDefs();i.forEach(function(n,o){n.resizable=!0,n.sortable=!0,n.filter=!0}),e.api.setColumnDefs(i)}onModelUpdated(e){console.log("ModelUpdated"),e.api.sizeColumnsToFit()}onCellClicked(e){console.log(e)}onCellDoubleClicked(e){console.log("Double Clicked"),console.log(e);let i=0;i=e.data.wo_id,this.router.navigate([this.urlPrefix+"wo"],{queryParams:{wo_id:i}})}woPriorityStyle(e){return"Urgent"==e.value?{color:"red",textAlign:"center"}:"Normal"==e.value?{color:"blue",textAlign:"center"}:{textAlign:"center"}}woStatusStyle(e){return"Open"==e.value?{color:"red",textAlign:"center"}:"New"==e.value?{color:"blue",textAlign:"center"}:"In Progress"==e.value?{color:"green",textAlign:"center"}:"On Hold"==e.value?{color:"orange",textAlign:"center"}:"Closed"==e.value?{color:"gray",textAlign:"center"}:{textAlign:"center"}}addDocuments(){this.file_info=this.wo_id+"_"+this.wo.title,this.file_info=this.file_info.replace(/#/g,""),this.file_info=this.file_info.replace(/  /g,"_"),this.file_info=this.file_info.replace(/ /g,"_"),this.modalRef=this.modalService.show(A,{backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",containerClass:"",animated:!0,data:{heading:"Supporting Document",content:{owner_type:"WO",owner_id:this.wo_id,file_info:this.file_info,description:"Select file to upload to server"}}}),this.modalRef.content.onClose.subscribe(i=>{console.log("Result received:",i)})}getDocument(e,i){console.log("getDocument: ",this.woDocuments.data[e]),this.REQ.getDocument(this.woDocuments.data[e])}delDocument(e){let i={doc_id:e,key_type:"WO"};console.log(i),this.REQ.post("fd",i).subscribe(n=>{console.log(n)},n=>{console.log(n)})}onFileUploadClose(e){console.log("onFileUploadClose"),console.log(e)}exportData(e){var o={columnDefs:[{headerName:this.company_id+": Transaction report from "+this.start_date+" to "+this.end_date,children:[{field:"athlete",minWidth:200},{field:"country",minWidth:200}]}],defaultColDef:{sortable:!0,filter:!0,resizable:!0,minWidth:100,flex:1}};"CSV"==e?(console.log("Exporting Excel"),this.grid1Api.exportDataAsCsv(o)):this.gridWOColumns.length>0&&this.utility.downloadExcel(this.gridWOColumns,this.grid1Api,"ExcelSheet_tx.xlsx")}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(C.t),t.Y36(y.J),t.Y36(h.gz),t.Y36(h.F0),t.Y36(b.$),t.Y36(d.klp),t.Y36(d.yUQ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-wom"]],decls:36,vars:17,consts:[[1,"d-block","w-100","dashboard"],[1,"card"],[1,"card-header"],["fas","","icon","hands-helping text-white"],[1,"card-body"],[1,"row"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"md-form","mb-2"],["label","Status","id","sSelect","optionHeight","32",3,"multiple","ngModel","dropdownClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-6","col-sm-12"],["required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["sd",""],["name","end_date","required","",3,"inline","options","placeholder","ngModel","ngModelChange"],["ed",""],[1,"col-lg-2","col-md-6","col-sm-12","text-right"],["role","group","aria-label","Basic example",1,"btn-group","shadow-0","mt-md-4","mt-3","mb-4","mb-md-0"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","ngbTooltip","Refresh Results",3,"click"],[1,"fas","fa-sync"],["mdbBtn","","type","button","color","info","rounded","true","size","sm","ngbTooltip","New Workorder",3,"click"],["far","","icon","plus-square"],["mdbBtn","","type","button","color","info","rounded","true","size","sm",3,"click"],[1,"fas","fa-download"],["animateRows","","rowHeight","22","rowSelection","multiple",1,"ag-theme-balham",2,"width","100%","height","450px",3,"columnDefs","rowData","gridReady","modelUpdated","cellClicked","cellDoubleClicked"],["gridWO",""],["class","card","style","width:100%;",4,"ngIf"],[3,"value"],[1,"card",2,"width","100%"],[1,"card-header","blue-grey","lighten-4"],[1,"bg"],["fas","","icon","tools text-primary"],[1,"card-body",2,"margin-bottom","0px"],[1,"col-sm-3"],[3,"href"],[1,"fas","fa-home"],[1,"fas","fa-user"],[1,"col-sm-6"],[1,"col-12"],[1,"row","col-12"],["label","Coordinator","optionHeight","30",3,"ngModel","disabled","ngModelChange"],["mdbInput","","id","issueIP","type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","issueIP"],["label","Status","optionHeight","30",3,"ngModel","ngModelChange"],["label","Priority","optionHeight","30",3,"ngModel","ngModelChange"],[1,"col-sm-8"],["id","notes","placeholder","Enter Update here","mdbInput","","name","wo_notes","rows","2",1,"md-textarea","form-control",3,"ngModel","ngModelChange"],[1,"col-sm-4"],["id","tr_tags","mdbInput","","name","tx_tags","rows","2",1,"md-textarea","form-control",3,"disabled","ngModel","ngModelChange"],[1,"card-footer"],["mdbBtn","","color","info","rounded","true","mdbWavesEffect","","type","button",3,"click"],["mdbBtn","","color","default","rounded","true","mdbWavesEffect","","type","button","ngbTooltip","Get PDF",2,"float","right",3,"click"],[1,"fas","fa-file-pdf"],[1,"col-md-10"],[1,"col-md-2"],["type","button","style","float:right","class","btn-medium btn-default",3,"click",4,"ngIf"],["id","tableDocuments","name","tableDocuments",1,"table","tablesorter"],["scope","col"],["scope","col",1,"text-center"],["id","tbA",1,"card-text"],["id","tARow",4,"ngFor","ngForOf"],["type","button",1,"btn-medium","btn-default",2,"float","right",3,"click"],["id","tARow"],["nowrap",""],[1,"text-info"],[3,"click"],[1,"text-center"],[1,"text-danger"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h3"),t._UZ(5,"mdb-icon",3),t._uU(6,"\xa0My Maintenance Requests "),t.qZA()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"mdb-select-2",8),t.NdJ("ngModelChange",function(o){return i.wo_status=o})("ngModelChange",function(o){return i.refreshAnalytics(o,-1)}),t.TgZ(12,"mdb-select-all-option"),t._uU(13,"Select all"),t.qZA(),t.YNc(14,Rr,2,2,"mdb-select-option",9),t.ALo(15,"keyvalue"),t.qZA()()(),t.TgZ(16,"div",10),t._uU(17," From "),t.TgZ(18,"mdb-date-picker",11,12),t.NdJ("ngModelChange",function(o){return i.start_date=o}),t.qZA()(),t.TgZ(20,"div",10),t._uU(21," To "),t.TgZ(22,"mdb-date-picker",13,14),t.NdJ("ngModelChange",function(o){return i.end_date=o}),t.qZA()(),t.TgZ(24,"div",15)(25,"div",16)(26,"button",17),t.NdJ("click",function(o){return i.refreshAnalytics(o,-1)}),t._UZ(27,"i",18),t.qZA(),t.TgZ(28,"button",19),t.NdJ("click",function(){return i.newWO("WOM")}),t._UZ(29,"mdb-icon",20),t.qZA(),t.TgZ(30,"button",21),t.NdJ("click",function(){return i.exportData("excel")}),t._UZ(31,"i",22),t.qZA()()()(),t.TgZ(32,"div",5)(33,"ag-grid-angular",23,24),t.NdJ("gridReady",function(o){return i.onGridReady(o)})("modelUpdated",function(o){return i.onModelUpdated(o)})("cellClicked",function(o){return i.onCellClicked(o)})("cellDoubleClicked",function(o){return i.onCellDoubleClicked(o)}),t.qZA()()()()(),t.YNc(35,Yr,98,29,"div",25)),2&e&&(t.xp6(11),t.Q6J("multiple",!0)("ngModel",i.wo_status)("dropdownClass","mdb-select-dropdown-colorful mdb-select-dropdown-primary"),t.xp6(3),t.Q6J("ngForOf",t.lcZ(15,15,i.wosList)),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Select a date")("ngModel",i.start_date),t.xp6(4),t.Q6J("inline",!0)("options",i.myDatePickerOptions)("placeholder","Selecte a date")("ngModel",i.end_date),t.xp6(11),t.Q6J("columnDefs",i.gridWOColumns)("rowData",i.gridWOData),t.xp6(2),t.Q6J("ngIf",i.wo_id>0))},directives:[d.gRC,d.UiO,d.XIm,d.lPY,_.JJ,_.On,d.n$x,c.sg,d.x8v,d.JNR,_.Q7,d.mTE,d.CWd,v.N8,c.O5,_.Fj,d.HqI,d.b6v],pipes:[c.Nd],styles:[".dashboard[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px;padding-bottom:30px;min-height:510px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0;color:#fff}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{min-height:260px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:84px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{line-height:46px}@media screen and (max-width: 992px){.dashboard[_ngcontent-%COMP%]{padding:15px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{min-height:62px}.properties-tabs[_ngcontent-%COMP%]   .md-form[_ngcontent-%COMP%]{margin-bottom:0}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px}.dashboard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:18px}}"]}),a})()},{path:"category",component:S},{path:"forms",component:(()=>{class a{constructor(e,i){this.REQ=e,this.toastr=i,this.handleDownload=n=>{this.REQ.get(`/fl?master_id=${n}`).subscribe(o=>{this.toastr.success("request has been submitted.","success",{extendedTimeOut:0})},o=>{console.log(o),this.toastr.error("request failed.","fail",{extendedTimeOut:0})})}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.s),t.Y36(d.klp))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-forms"]],decls:28,vars:0,consts:[[1,"d-block","w-100","form-container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-table"],[1,"row","mb-3","py-2"],[1,"col-9","form-catogary-name"],[1,"col-3","text-right",3,"click"],[1,"fas","fa-arrow-down"],[1,"row","py-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mdb-card-title")(4,"h1"),t._uU(5," Forms "),t.qZA()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6),t._uU(10," New Tenant Application Form "),t.qZA(),t.TgZ(11,"div",7),t.NdJ("click",function(){return i.handleDownload(1)}),t._UZ(12,"i",8),t.qZA()(),t.TgZ(13,"div",5)(14,"div",6),t._uU(15," Tenant Information Update Form "),t.qZA(),t.TgZ(16,"div",7),t.NdJ("click",function(){return i.handleDownload(2)}),t._UZ(17,"i",8),t.qZA()(),t.TgZ(18,"div",5)(19,"div",6),t._uU(20," Student Rent Credit Form "),t.qZA(),t.TgZ(21,"div",7),t.NdJ("click",function(){return i.handleDownload(3)}),t._UZ(22,"i",8),t.qZA()(),t.TgZ(23,"div",9)(24,"div",6),t._uU(25," Student Rent Credit Form "),t.qZA(),t.TgZ(26,"div",7),t.NdJ("click",function(){return i.handleDownload(4)}),t._UZ(27,"i",8),t.qZA()()()()()())},directives:[d.gRC],styles:[".form-container[_ngcontent-%COMP%]{padding:30px}.form-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden}.form-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin-left:0;margin-right:0;margin-top:0;box-shadow:none;border-radius:0;background-color:#2969dc!important}.form-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:0;color:#fff;font-size:24px;font-weight:400}.form-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{border:1px solid darkgrey;border-radius:9px}.form-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-table[_ngcontent-%COMP%]   .form-catogary-name[_ngcontent-%COMP%]{font-size:20px;color:#000;font-weight:400}.form-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-table[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background-color:#2969dc;width:35px;height:35px;color:#fff;text-align:center;padding-top:8px;cursor:pointer;border:1px solid black;font-size:20px}"]}),a})()}];let Wr=(()=>{class a{constructor(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[c.ez,h.Bz.forChild(jr),_.u5,d.JyS.forRoot(),_.UX,F.JF,v.sF.withComponents([])]]}),a})()}}]);